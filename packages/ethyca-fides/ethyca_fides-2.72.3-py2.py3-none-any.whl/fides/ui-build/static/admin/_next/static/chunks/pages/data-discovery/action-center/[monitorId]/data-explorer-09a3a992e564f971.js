(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1961],{85630:function(e){e.exports=function(e){return e.split("")}},75733:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},74833:function(e,t,n){var r=n(56127),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},39158:function(e,t,n){var r=n(75733);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},62690:function(e,t,n){var r=n(39158),i=n(25348),o=n(63528),s=n(65567);e.exports=function(e){return function(t){var n=i(t=s(t))?o(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},56632:function(e,t,n){var r=n(89278),i=n(80068),o=n(50098);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(a[e],e,a)}}var c=e(t,n,s);return c>-1?a[l?t[c]:c]:void 0}}},25348:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},63528:function(e,t,n){var r=n(85630),i=n(25348),o=n(84890);e.exports=function(e){return i(e)?o(e):r(e)}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},84890:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",i="[^"+t+"]",o="(?:\ud83c[\udde6-\uddff]){2}",s="[\ud800-\udbff][\udc00-\udfff]",a="(?:"+n+"|"+r+")?",l="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[i,o,s].join("|")+")"+l+a+")*",u=RegExp(r+"(?="+r+")|(?:"+[i+n+"?",n,o,s,"["+t+"]"].join("|")+")"+(l+a+c),"g");e.exports=function(e){return e.match(u)||[]}},98052:function(e,t,n){var r=n(65567),i=n(76744);e.exports=function(e){return i(r(e).toLowerCase())}},66726:function(e,t,n){var r=n(11611),i=n(82846),o=n(91936),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,d,p,f,m=0,g=!1,v=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,m=t,d=e.apply(r,n)}function x(e){var n=e-f,r=e-m;return void 0===f||n>=t||n<0||v&&r>=u}function j(){var e,n,r,o=i();if(x(o))return _(o);p=setTimeout(j,(e=o-f,n=o-m,r=t-e,v?a(r,u-n):r))}function _(e){return(p=void 0,h&&l)?y(e):(l=c=void 0,d)}function S(){var e,n=i(),r=x(n);if(l=arguments,c=this,f=n,r){if(void 0===p)return m=e=f,p=setTimeout(j,t),g?y(e):d;if(v)return clearTimeout(p),p=setTimeout(j,t),y(f)}return void 0===p&&(p=setTimeout(j,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,u=(v="maxWait"in n)?s(o(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==p&&clearTimeout(p),m=0,l=f=c=p=void 0},S.flush=function(){return void 0===p?d:_(i())},S}},64925:function(e,t,n){var r=n(56632)(n(66259));e.exports=r},66259:function(e,t,n){var r=n(95372),i=n(89278),o=n(47991),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return -1;var l=null==n?0:o(n);return l<0&&(l=s(a+l,0)),r(e,i(t,3),l)}},82846:function(e,t,n){var r=n(77400);e.exports=function(){return r.Date.now()}},94919:function(e,t,n){var r=n(91936),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var r=n(94919);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var r=n(74833),i=n(11611),o=n(55193),s=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?s:+e}},76744:function(e,t,n){var r=n(62690)("toUpperCase");e.exports=r},19174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/data-explorer",function(){return n(12591)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var r=n(24246),i=n(66726),o=n.n(i),s=n(27378),a=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:i,...l}=e,[c,u]=(0,s.useState)(t);(0,s.useEffect)(()=>{u(t||"")},[t]);let d=o()(n,500),p=(0,s.useCallback)(e=>{u(e),d(e)},[]);return(0,r.jsx)(a.Z,{value:c,onChange:p,onClear:()=>{u(""),n("")},placeholder:i,...l})}},35287:function(e,t,n){"use strict";var r=n(24246),i=n(20595),o=n(88038),s=n.n(o);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:o}=e;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,r.jsxs)(s(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(i.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...o,children:t})]})}},58754:function(e,t,n){"use strict";var r=n(24246),i=n(20595),o=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:a,rightContent:l,style:c,...u}=e;return(0,r.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(o.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(24246),i=n(20595),o=n(72707),s=n.n(o);let a=e=>{let{data:{formattedTitle:t,description:n,name:o,primaryName:s}}=e;return(0,r.jsxs)(i.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:s||o}),s&&": ".concat(o)]}),(0,r.jsx)("em",{children:n})]})},l=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:s().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),u=e=>{let{options:t,...n}=e,o=null==t?void 0:t.map(e=>l(e)?{...e,options:e.options.map(c)}:c(e));return(0,r.jsx)(i.WPr,{options:o,filterOption:(e,t)=>{var n,r;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(r=t.value)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:a,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var r=n(24246),i=n(64925),o=n.n(i),s=n(27378),a=n(16134),l=n(30002),c=n(28079),u=n(57072);let d=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,a.C)(c.U3),{isLoading:n}=(0,u.MO)(),r=(0,a.C)(u.qb),{isLoading:i}=(0,l.te)();return{dataUses:t,dataSubjects:(0,a.C)(l.ZL),dataCategories:r,isLoading:e||n||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:i}=d(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return{};let i=t(a(e,n)),o=!!r.parent_key;return{name:r.name||void 0,primaryName:o&&(null==i?void 0:i.name)!==r.name&&(null==i?void 0:i.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:i,primaryName:o}=l(e,t,n);return i?o?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("strong",{children:[o,":"]})," ",i]},e):(0,r.jsx)("strong",{children:i},e):e},u=t=>o()(e,{fides_key:t}),p=e=>o()(t,{fides_key:e}),f=e=>o()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>c(e,u,1),getDataUseDisplayNameProps:e=>l(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:p,getDataCategoryDisplayName:e=>c(e,p,2),getDataCategoryDisplayNameProps:e=>l(e,p,2),getDataSubjects:()=>n,getDataSubjectByKey:f,getDataSubjectDisplayName:e=>{let t=f(e);return t?t.name:e},getPrimaryKey:a,isLoading:i}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24246),i=n(20595),o=n(79894),s=n.n(o),a=n(27378);let{Text:l}=i.AntTypography,c=e=>{let{items:t,...n}=e,o=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let o=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:o?void 0:400},ellipsis:!o,id:o?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,r.jsx)(i.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,r.jsx)(s(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,r.jsx)(i.zrq,{items:o,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(27378),i=n(36866);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.h)(e),{pageIndex:n,pageSize:o,updatePageIndex:s,updatePageSize:a,pageSizeOptions:l,showSizeChanger:c}=t,u=(0,r.useMemo)(()=>({current:n,pageSize:o,showSizeChanger:c,pageSizeOptions:l.map(String),onChange:s,onShowSizeChange:(e,t)=>{a(t)}}),[n,o,c,l,s,a]);return{...t,paginationProps:u}}},37059:function(e,t,n){"use strict";n.d(t,{$h:function(){return j},Ak:function(){return v},Av:function(){return R},EY:function(){return p},Fp:function(){return C},QC:function(){return S},RV:function(){return w},S0:function(){return P},Tj:function(){return m},Ud:function(){return a},Vr:function(){return h},WJ:function(){return c},mL:function(){return _},mi:function(){return y},nP:function(){return d},nS:function(){return f},rs:function(){return u},sX:function(){return g},ut:function(){return x},vc:function(){return N},wi:function(){return l}});var r=n(78780),i=n(16394),o=n(39449),s=n(98145);let{useGetAggregateMonitorResultsQuery:a,useGetDiscoveredSystemAggregateQuery:l,useGetDiscoveredAssetsQuery:c,useAddMonitorResultSystemsMutation:u,useIgnoreMonitorResultSystemsMutation:d,useAddMonitorResultAssetsMutation:p,useIgnoreMonitorResultAssetsMutation:f,useRestoreMonitorResultAssetsMutation:m,useUpdateAssetsSystemMutation:g,useUpdateAssetsDataUseMutation:v,useUpdateAssetsMutation:h,useGetConsentBreakdownQuery:y,useGetWebsiteMonitorResourceFiltersQuery:x,useGetInProgressMonitorTasksQuery:j,useRetryMonitorTaskMutation:_,useDismissMonitorTaskMutation:S,useUndismissMonitorTaskMutation:b,useGetMonitorTreeQuery:T,useLazyGetMonitorTreeQuery:w,useGetMonitorFieldsQuery:C,useGetMonitorConfigQuery:N,useGetDatastoreFiltersQuery:P,useClassifyStagedResourcesMutation:R}=r.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:r,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getMonitorConfig:e.query({query:e=>{let{monitor_config_id:t}=e;return{url:"/plus/discovery-monitor/".concat(t)}}}),getDatastoreFilters:e.query({query:e=>{let{monitor_config_id:t}=e;return{url:"/plus/filters/datastore_monitor_resources/?monitor_config_id=".concat(t)}}}),getMonitorTree:e.query({query:e=>{let{page:t=1,size:n=20,monitor_config_id:r,staged_resource_urn:i}=e;return{url:"/plus/discovery-monitor/".concat(r,"/tree").concat(i?"?staged_resource_urn=".concat(i):""),params:{page:t,size:n}}}}),getMonitorFields:e.query({query:e=>{let{page:t=1,size:n=20,monitor_config_id:r,search:o,diff_status:s,confidence_score:a,...l}=e,c=(0,i.$J)({...l,...o?{search:[o]}:{},...s?{diff_status:s}:{},...a?{confidence_score:a}:{}});return{url:"/plus/discovery-monitor/".concat(r,"/fields?").concat(null==c?void 0:c.toString()),params:{page:t,size:n}}},providesTags:["Monitor Field Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,resolved_system_id:n,page:r=1,size:i=20,search:o,diff_status:s}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,resolved_system_id:n,page:r,size:i,search:o,diff_status:s}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:r=1,size:a=20,search:l,diff_status:c=[o.LL.ADDITION],sort_by:u=[s.r6.NAME],sort_asc:d=!0,resource_type:p,data_uses:f,locations:m,consent_aggregated:g}=e,v=Array.isArray(u)?u:[u],h=(0,i.$J)({sort_by:v,resource_type:p,data_uses:f,locations:m,consent_aggregated:g});return{url:"/plus/discovery-monitor/".concat(t,"/results?").concat(h.toString()),params:{resolved_system_id:n,page:r,size:a,search:l,diff_status:c,sort_asc:d}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,i.du)(n,"resolved_system_ids");return{url:"/plus/discovery-monitor/".concat(t,"/promote"),method:"POST",params:r?new URLSearchParams(r):new URLSearchParams}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,i.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>({method:"POST",url:"/plus/discovery-monitor/mute",body:{staged_resource_urns:e.urnList}}),invalidatesTags:["Discovery Monitor Results","Monitor Field Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams({status_to_set:o.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]}),getConsentBreakdown:e.query({query:e=>{let{stagedResourceUrn:t,statuses:n,page:r=1,size:i=20}=e,o=new URLSearchParams;return o.append("page",String(r)),o.append("size",String(i)),n.forEach(e=>{o.append("status",e)}),{url:"/plus/discovery-monitor/staged_resource/".concat(encodeURIComponent(t),"/consent"),params:o}}}),getWebsiteMonitorResourceFilters:e.query({query:e=>{let{monitor_config_id:t,resolved_system_id:n,diff_status:r=[o.LL.ADDITION],search:s,resource_type:a,data_uses:l,locations:c,consent_aggregated:u}=e,d={monitor_config_id:t,resolved_system_id:n,diff_status:r};s&&(d.search=s);let p=(0,i.$J)({resource_type:a,data_uses:l,locations:c,consent_aggregated:u}).toString();return{url:p?"/plus/filters/website_monitor_resources?".concat(p):"/plus/filters/website_monitor_resources",params:d}},providesTags:["Discovery Monitor Results"]}),getInProgressMonitorTasks:e.query({query:e=>{let{page:t=1,size:n=20,search:r,task_types:i,statuses:o,return_dismissed:s=!1}=e,a=new URLSearchParams({page:t.toString(),size:n.toString(),return_dismissed:s.toString()});return r&&a.append("search",r),(null==i?void 0:i.length)&&i.forEach(e=>a.append("action_type",e)),(null==o?void 0:o.length)&&o.forEach(e=>a.append("status",e)),{url:"/plus/discovery-monitor/tasks?".concat(a.toString())}},providesTags:["Monitor Tasks"]}),retryMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/retry"),method:"POST"}},invalidatesTags:["Monitor Tasks"]}),dismissMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/dismissed"),method:"POST"}},invalidatesTags:["Monitor Tasks"]}),undismissMonitorTask:e.mutation({query:e=>{let{taskId:t}=e;return{url:"/plus/discovery-monitor/tasks/".concat(t,"/dismissed"),method:"DELETE"}},invalidatesTags:["Monitor Tasks"]}),classifyStagedResources:e.mutation({query:e=>{let{monitor_config_key:t,...n}=e;return{url:"/plus/discovery-monitor/".concat(t,"/classify"),method:"POST",body:n}},invalidatesTags:["Monitor Field Results"]})})})},98145:function(e,t,n){"use strict";n.d(t,{EI:function(){return l},LM:function(){return p},Vq:function(){return d},X1:function(){return u},r6:function(){return s},vQ:function(){return a}});var r,i,o,s,a,l,c=n(39449);let u={[c.lg.WITH_CONSENT]:"Consent respected",[c.lg.WITHOUT_CONSENT]:"Consent ignored",[c.lg.EXEMPT]:"Exempt",[c.lg.UNKNOWN]:"Unknown",[c.lg.PRE_CONSENT]:"Pre-Consent",[c.lg.CMP_ERROR]:"CMP failure",[c.lg.NOT_APPLICABLE]:"Not applicable"},d={[c.lg.WITH_CONSENT]:"Asset was detected after the user gave consent",[c.lg.WITHOUT_CONSENT]:"The user explicitly opted out, but this asset still loaded. This is a serious compliance issue and may indicate that consent settings are not being enforced.",[c.lg.EXEMPT]:"Asset is valid regardless of consent",[c.lg.UNKNOWN]:"Did not find consent information for this asset. You may need to re-run the monitor.",[c.lg.PRE_CONSENT]:"Assets loaded before the user had a chance to give consent. This violates opt-in compliance requirements if your CMP is configured for explicit consent.",[c.lg.CMP_ERROR]:"The Consent Management Platform (CMP) was not detected when the service ran. It likely failed to load or wasn't available.",[c.lg.NOT_APPLICABLE]:"No privacy notices apply to this asset"},p=[c.lg.WITHOUT_CONSENT,c.lg.PRE_CONSENT,c.lg.CMP_ERROR];(r=s||(s={})).NAME="name",r.RESOURCE_TYPE="resource_type",r.SYSTEM="system",r.DATA_USES="data_uses",r.LOCATIONS="locations",r.DOMAIN="domain",r.PAGE="page",r.CONSENT_AGGREGATED="consent_aggregated",r.ACTIONS="actions",(i=a||(a={})).SYSTEM_NAME="system_name",i.TOTAL_UPDATES="total_updates",i.DATA_USE="data_use",i.LOCATIONS="locations",i.DOMAINS="domains",i.ACTIONS="actions",(o=l||(l={})).LOCATION="location",o.PAGE="page",o.STATUS="status"},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return r.Bd},L5:function(){return r.L5},MO:function(){return r.MO},qb:function(){return r.qb}});var r=n(5785)},12591:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r,i,o=n(24246),s=n(20595),a=n(25980),l=n(86677),c=n(27378),u=n(30952),d=n(35287),p=n(812),f=n(17245),m=n(77830),g=n(58754),v=n(9270),h=n(46628),y=n(37059),x=n(70675),j=n(39449),_=n(31883),S=n(98052),b=n.n(S);(r=i||(i={})).LOW="low",r.HIGH="high",r.MANUAL="manual";var T=n(40431);let w=["Attention Required","In Review","Classifying","Approved","Unmonitored","Confirmed","Removed"],C=()=>{let[e,t]=(0,T.v1)("resourceStatus",(0,T.S$)((0,T.km)(w))),[n,r]=(0,T.v1)("confidenceScore",(0,T.S$)((0,T.jx)(Object.values(i)))),[o,s]=(0,T.v1)("dataCategory",(0,T.S$)(T.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceScore:n,setConfidenceScore:r,dataCategory:o,setDataCategory:s,reset:()=>{t(null),r(null),s(null)}}},N=e=>{var t;let{resourceStatus:n,setResourceStatus:r,confidenceScore:a,setConfidenceScore:l,dataCategory:c,setDataCategory:u,reset:d,monitorId:p}=e,{data:f}=(0,y.S0)({monitor_config_id:p});return(0,o.jsx)("div",{className:"rounded-[var(--ant-border-radius)] bg-[var(--ant-color-bg-base)] shadow-md",children:(0,o.jsx)(s.vyj,{size:"middle",className:"p-[var(--ant-padding)]",children:(0,o.jsxs)(s.PPS,{layout:"vertical",children:[(0,o.jsx)(s.PPS.Item,{label:"Status",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:n||[],onChange:e=>r(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:w.map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:e})},e))})})}),(0,o.jsx)(s.PPS.Item,{label:"Confidence Score",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:a||[],onChange:e=>l(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:Object.values(i).map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:b()(e)})},e))})})}),(null==f?void 0:f.data_category)&&(null==f?void 0:null===(t=f.data_category)||void 0===t?void 0:t.length)>0&&(0,o.jsx)(s.PPS.Item,{label:"Data Category",className:"w-min whitespace-nowrap",children:(0,o.jsx)(s.E_O.Group,{value:c||[],onChange:e=>u(e.length>0?e:null),children:(0,o.jsx)(s.bue,{children:f.data_category.map(e=>(0,o.jsx)(s.JGx,{span:24,children:(0,o.jsx)(s.E_O,{value:e,children:b()(e)})},e))})})}),(0,o.jsx)(s.wpx,{onClick:()=>{d()},children:"Clear"})]})})})};var P=n(16394),R=n(79283),I=n(34929),A=e=>{let{...t}=e,{getDataUseDisplayNameProps:n,getDataUses:r}=(0,I.Z)(),i=r(),[a,l]=(0,c.useState)(!1),u=i.map(e=>{let{name:t,primaryName:r}=n(e.fides_key);return{value:e.fides_key,label:(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:r||t}),r&&": ".concat(t)]}),name:t,primaryName:r,description:e.description||""}});return(0,o.jsx)(R.l,{options:u,prefix:(0,o.jsx)(s.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,o.jsx)(s.PJP.mm_,{})}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:a,onOpenChange:e=>l(e),onSelect:(e,n)=>{t.onSelect&&t.onSelect(e,n),l(!1)},...t})};let k={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}},E=e=>{let{label:t,closable:n,onClose:r,isFromClassifier:i}=e;return(0,o.jsx)(s.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:r,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:i&&(0,o.jsx)(s.QMR,{}),children:(0,o.jsx)(s.lKn,{size:"sm",children:t})})};var M=e=>{var t,n;let{urn:r,classifications:a,name:l,diff_status:c,selected:u,onSelect:d,onSetDataUses:p,user_assigned_data_categories:f,onIgnore:m}=e;return(0,o.jsx)(s.krs.Item,{actions:[a&&a.length>0&&(0,o.jsxs)(s.jqI,{gap:"small",align:"center",className:"pr-[var(--ant-padding-xl)]",children:[(0,o.jsx)(s.HwE,{percent:a.find(e=>e.confidence_score===i.HIGH)?100:25,percentPosition:{align:"start",type:"outer"},strokeColor:a.find(e=>e.confidence_score===i.HIGH)?"var(--ant-color-success-text)":"var(--ant-color-warning-text)",steps:2,showInfo:!1,strokeLinecap:"round",size:[24,8]}),(0,o.jsx)(s.lKn,{size:"sm",type:"secondary",className:"font-normal",children:(0,P.kC)(a.find(e=>e.confidence_score===i.HIGH)?i.HIGH:i.LOW)})]},"progress"),a&&a.length>0&&(0,o.jsx)(s.wpx,{"aria-label":"Approve",icon:(0,o.jsx)(s.PJP.MCw,{}),size:"small"},"approve"),c!==j.LL.MUTED&&(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.PJP.uzw,{}),size:"small","aria-label":"Ignore",onClick:()=>m(r)},"ignore"),(0,o.jsx)(s.wpx,{"aria-label":"Reclassify",icon:(0,o.jsx)(s.QMR,{}),size:"small"},"reclassify")],children:(0,o.jsx)(s.krs.Item.Meta,{avatar:(0,o.jsx)(s.E_O,{checked:u,onChange:e=>d&&d(r,e.target.checked)}),title:(0,o.jsx)(s.jqI,{justify:"space-between",children:(0,o.jsxs)(s.jqI,{gap:"small",align:"center",className:"w-full",children:[l,c&&(0,o.jsx)(s.j8w,{bordered:!1,color:k[c].color,className:"font-normal text-[var(--ant-font-size-sm)]",children:k[c].label}),(0,o.jsx)(s.lKn,{size:"sm",type:"secondary",className:"overflow-hidden font-normal",ellipsis:{tooltip:r},children:r})]})}),description:(0,o.jsx)(A,{mode:"tags",value:[...null!==(t=null==a?void 0:a.map(e=>{let{label:t}=e;return t}))&&void 0!==t?t:[],...null!==(n=null==f?void 0:f.map(e=>e))&&void 0!==n?n:[]],tagRender:e=>E({...e,isFromClassifier:!!(null==a?void 0:a.find(t=>t.label===e.value))}),onChange:e=>{p(e.flatMap(e=>(null==a?void 0:a.find(t=>t.label!==e))?[]:[e]),r)}})})},r)};let O="load_more",L="skeleton",D=(e,t)=>e.find(e=>{let{children:n}=e;return n&&!!n.find(e=>e.key.toString()===t)}),q=(e,t)=>e.reduce((e,n)=>{if(n.children){var r;return null!==(r=D(n.children,t))&&void 0!==r?r:q(n.children,t)}return e},null),U=e=>{let{node:t,treeData:n,onLoadMore:r}=e;if(t.key.toString().startsWith(O)){let e=q(n,t.key.toString());return(0,o.jsx)(s.wpx,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&r(null==e?void 0:e.key.toString())},className:"p-0",children:"function"==typeof t.title?t.title(t):t.title})}return t.key.toString().startsWith(L)?(0,o.jsx)(s.N_L,{paragraph:!1,title:{width:"80px"},active:!0,children:"function"==typeof t.title?t.title(t):t.title}):(0,o.jsx)(s.lKn,{ellipsis:{tooltip:"function"==typeof t.title?t.title(t):t.title},children:"function"==typeof t.title?t.title(t):t.title})},z=(e,t)=>{var n;let r=e.items.map(e=>({title:e.name,key:e.urn,selectable:e.has_children,icon:()=>{switch(e.resource_type){case"Database":return(0,o.jsx)(s.PJP.ehp,{className:"h-full"});case"Table":return(0,o.jsx)(s.PJP.iA_,{className:"h-full"});case"Field":return(0,o.jsx)(s.PJP.$4y,{className:"h-full"});default:return null}},isLeaf:!e.has_children}));return(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0)<100?r:[...r,{title:"Load more...",key:"".concat(O,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},W=(e,t,n)=>e.map(e=>{if(e.key===t){var r,i;return{...e,children:[...null!==(i=null===(r=e.children)||void 0===r?void 0:r.filter(e=>!(e.key.toString().startsWith(O)||e.key.toString().startsWith(L))))&&void 0!==i?i:[],...n]}}return e.children?{...e,children:W(e.children,t,n)}:e}),F=(e,t,n)=>e.map(e=>e.key===t?{...e,children:n}:e.children?{...e,children:F(e.children,t,n)}:e);var H=e=>{let{selectedNodeKeys:t,setSelectedNodeKeys:n,onClickClassifyButton:r}=e,i=decodeURIComponent((0,l.useRouter)().query.monitorId),[a]=(0,y.RV)(),[u,d]=(0,c.useState)({}),[p,f]=(0,c.useState)([]),m=e=>{let t=null==u?void 0:u[e];if(t){let n=t.pageIndex+1;f(t=>W(t,e,[...Array(100)].map((t,n)=>({key:"".concat(L,"-").concat(e,"-").concat(n),title:"SKELETON",isLeaf:!0})))),a({monitor_config_id:i,staged_resource_urn:e,size:100,page:n}).then(t=>{let{data:r}=t;r&&(f(t=>W(t,e,z(r,e))),d({...u,[e]:{pageSize:100,pageIndex:n}}))})}};return(0,c.useEffect)(()=>{(async()=>{let{data:e}=await a({monitor_config_id:i,size:100});e&&p.length<=0&&f(z(e))})()},[f]),(0,o.jsxs)(s.jqI,{gap:"middle",vertical:!0,className:"h-full",children:[(0,o.jsx)(s.lQT,{level:3,className:"sticky top-0",children:"Schema explorer"}),(0,o.jsx)(s.a$q,{loadData:e=>{let{children:t,key:n}=e;return new Promise(e=>{if(t){e();return}a({monitor_config_id:i,staged_resource_urn:n.toString(),size:100}).then(e=>{let{data:t}=e;t&&(f(e=>F(e,n,z(t,n.toString()))),d({...u,[n.toString()]:{pageSize:100,pageIndex:1}}))}),e()})},treeData:p,onSelect:(e,t)=>n(t.selectedNodes.map(e=>{let{key:t}=e;return t})),showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden",titleRender:e=>(0,o.jsx)(U,{node:e,treeData:p,onLoadMore:m})}),t.length>0&&(0,o.jsxs)(s.jqI,{justify:"space-between",align:"center",children:[(0,o.jsxs)("span",{children:[t.length," selected"]}),(0,o.jsx)(s.wpx,{"aria-label":"Classify Selected Nodes",icon:(0,o.jsx)(s.QMR,{}),size:"small",onClick:r})]})]})};let G={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}},$=e=>Object.values(j.LL).flatMap(t=>G[t].label===e?[t]:[]);var J=()=>{let e=decodeURIComponent((0,l.useRouter)().query.monitorId),{paginationProps:t,pageIndex:n,pageSize:r,resetPagination:i}=(0,v.S)({defaultPageSize:25}),a=(0,f.Rx)(),{resourceStatus:j,confidenceScore:S,...b}=C(),{data:T}=(0,y.vc)({monitor_config_id:e}),[w,P]=(0,c.useState)([]),[R,I]=(0,c.useState)([]),{data:A}=(0,y.Fp)({monitor_config_id:e,size:r,page:n,staged_resource_urn:w.map(e=>e.toString()),search:a.searchProps.value,diff_status:j?j.flatMap($):void 0,confidence_score:S||void 0}),k=(0,s.pmc)(),[E]=(0,y.Av)(),[O]=(0,x.NA)(),[L]=(0,y.nS)(),{errorAlert:D}=(0,f.VY)(),[q]=(0,x.Hf)(),U=async(t,n)=>{let r=await O({monitor_config_id:e,staged_resource_urn:n,user_assigned_data_categories:t});(0,_.D4)(r)&&D((0,p.e$)(r.error))},z=async e=>{let t=await L({urnList:[e]});(0,_.D4)(t)&&D((0,p.e$)(t.error))},W=async e=>{let t=await q({staged_resource_urns:e});(0,_.D4)(t)&&D((0,p.e$)(t.error))},F=async()=>{let t=await E({monitor_config_key:e,staged_resource_urns:w.flatMap(e=>"bigint"!=typeof e?[e.toString()]:[])});if((0,_.D4)(t)){k((0,h.Vo)((0,p.e$)(t.error)));return}k((0,h.t5)("Classifying initiated"))};return(0,c.useEffect)(()=>{i()},[j,S,w,a.searchQuery]),(0,o.jsxs)(d.Z,{title:"Action center - Discovered assets by system",mainProps:{overflow:"hidden"},children:[(0,o.jsx)(g.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:m.vi},{title:e}],isSticky:!1}),(0,o.jsxs)(s.LgQ,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,o.jsx)(s.LgQ.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,o.jsx)(H,{selectedNodeKeys:w,setSelectedNodeKeys:P,onClickClassifyButton:F})}),(0,o.jsx)(s.LgQ.Panel,{style:{paddingLeft:"var(--ant-padding-md)"},children:(0,o.jsxs)(s.jqI,{vertical:!0,gap:"middle",className:"h-full overflow-hidden",children:[(0,o.jsxs)(s.jqI,{justify:"space-between",children:[(0,o.jsx)(s.lQT,{level:2,children:"Monitor results"}),(0,o.jsx)(s.jqI,{align:"center",children:(null==T?void 0:T.last_monitored)&&(0,o.jsxs)(s.lKn,{type:"secondary",children:["Last scan:"," ",new Date(null==T?void 0:T.last_monitored).toLocaleString()]})})]}),(0,o.jsxs)(s.jqI,{justify:"space-between",children:[(0,o.jsx)(u.f,{value:a.searchQuery,onChange:a.updateSearch,placeholder:"Search"}),(0,o.jsxs)(s.jqI,{gap:"small",children:[(0,o.jsx)(s.S0p,{trigger:["click"],popupRender:()=>(0,o.jsx)(N,{resourceStatus:j,confidenceScore:S,...b,monitorId:e}),children:(0,o.jsx)(s.wpx,{icon:(0,o.jsx)(s.PJP._ME,{}),iconPosition:"end",children:"Filter"})}),(0,o.jsx)(s.S0p,{menu:{items:[{key:"promote",onClick:()=>W(R),label:"Promote"}]},disabled:R.length<=0,children:(0,o.jsx)(s.wpx,{type:"primary",icon:(0,o.jsx)(s.PJP._ME,{}),iconPosition:"end",children:"Actions"})})]})]}),(0,o.jsx)(s.krs,{dataSource:null==A?void 0:A.items,className:"overflow-scroll",renderItem:e=>M({...e,selected:R.includes(e.urn),onSelect:(e,t)=>t?I([...R,e]):I(R.filter(t=>t!==e)),onSetDataUses:U,onIgnore:z})}),(0,o.jsx)(s.B7X,{...t,showSizeChanger:!1,total:(null==A?void 0:A.total)||0})]})})]})]})};let Q=()=>(0,o.jsxs)(o.Fragment,{children:["Attempting to access the alpha version of monitor results without setting the ",(0,o.jsx)(s.lKn,{code:!0,children:"alphaFullActionCenter"})," flag"]});var K=()=>{let{flags:e}=(0,a.hz)();return e.alphaFullActionCenter?(0,o.jsx)(J,{}):(0,o.jsx)(s.ux6,{status:"error",title:(0,o.jsx)(Q,{})})}},31883:function(e,t,n){"use strict";n.d(t,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=n(19043)},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,8765,9278,5163,7245,2888,9774,179],function(){return e(e.s=19174)}),_N_E=e.O()}]);