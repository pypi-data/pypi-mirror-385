(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,g,p,m=0,f=!1,h=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=l,i=c;return l=c=void 0,m=t,d=e.apply(i,n)}function v(e){var n=e-p,i=e-m;return void 0===p||n>=t||n<0||h&&i>=u}function j(){var e,n,i,a=s();if(v(a))return b(a);g=setTimeout(j,(e=a-p,n=a-m,i=t-e,h?o(i,u-n):i))}function b(e){return(g=void 0,x&&l)?y(e):(l=c=void 0,d)}function k(){var e,n=s(),i=v(n);if(l=arguments,c=this,p=n,i){if(void 0===g)return m=e=p,g=setTimeout(j,t),f?y(e):d;if(h)return clearTimeout(g),g=setTimeout(j,t),y(p)}return void 0===g&&(g=setTimeout(j,t)),d}return t=a(t)||0,i(n)&&(f=!!n.leading,u=(h="maxWait"in n)?r(a(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),k.cancel=function(){void 0!==g&&clearTimeout(g),m=0,l=p=c=g=void 0},k.flush=function(){return void 0===g?d:b(s())},k}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var i=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(80349)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var i=n(24246),s=n(66726),a=n.n(s),r=n(27378),o=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:s,...l}=e,[c,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{u(t||"")},[t]);let d=a()(n,500),g=(0,r.useCallback)(e=>{u(e),d(e)},[]);return(0,i.jsx)(o.Z,{value:c,onChange:g,onClear:()=>{u(""),n("")},placeholder:s,...l})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(24246),s=n(20595),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),c=n(90867),u=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,p=(0,l.hz)(),m=(0,o.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(p.flags.messagingConfiguration&&f),{data:x}=(0,u.JE)(void 0,{skip:h}),{data:y}=(0,c.PW)(void 0,{skip:h}),v=p.flags.messagingConfiguration&&(!x||!y)&&f;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[v?(0,i.jsx)(g,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(20595),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(20595),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=s.AntTypography,c=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(s.zrq,{items:a,...n})}},14908:function(e,t,n){"use strict";var i=n(86677),s=n(27378);let a=e=>e.startsWith("#")?e.slice(1):e;t.Z=e=>{let{tabKeys:t,initialTab:n}=e,r=(0,i.useRouter)(),o=r.asPath.split("#")[1]||t[0],[l,c]=(0,s.useState)(o);return(0,s.useEffect)(()=>{n&&t.includes(n)&&c(n)},[n,t,r.isReady]),{activeTab:l,onTabChange:(0,s.useCallback)(async e=>{if(!t.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),c(t[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:a(e)},void 0,{shallow:!0}),c(e))},[r,t]),setActiveTab:c}}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return c},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return p},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},80349:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var i,s,a=n(24246),r=n(20595),o=n(79894),l=n.n(o),c=n(27378),u=n(30952),d=n(25980),g=n(77213),p=n(77830),m=n(58754),f=n(47935),h=n(7426),x=n(37059),y=n(16394),v=n(17245),j=n(67359);let b=()=>{let{pageIndex:e,pageSize:t,updatePageIndex:n,resetPagination:i,showSizeChanger:s}=(0,v.h0)({defaultPageSize:20,showSizeChanger:!1}),{searchQuery:o,updateSearch:l}=(0,v.Rx)(),[u,d]=(0,c.useState)([j.n.PENDING,j.n.IN_PROCESSING,j.n.PAUSED,j.n.RETRYING,j.n.ERROR]),[g,p]=(0,c.useState)(!1),m=(0,c.useCallback)(e=>{l(e),n(1)},[l,n]),f=(0,c.useCallback)(e=>{d(e),n(1)},[n]),h=(0,c.useCallback)(e=>{p(e),n(1)},[n]),y=(0,c.useCallback)(()=>{d([j.n.PENDING,j.n.IN_PROCESSING,j.n.PAUSED,j.n.RETRYING,j.n.ERROR]),p(!1),i()},[i]),b=(0,c.useCallback)(()=>{d([]),p(!0),i()},[i]),k=[j.n.PENDING,j.n.IN_PROCESSING,j.n.COMPLETE,j.n.ERROR,j.n.PAUSED,j.n.RETRYING,j.n.SKIPPED],{data:C,isLoading:_,isFetching:w}=(0,x.$h)({page:e,size:t,search:o,statuses:u.length>0?u:void 0,return_dismissed:g});return{searchQuery:o,updateSearch:m,statusFilters:u,updateStatusFilters:f,showDismissed:g,updateShowDismissed:h,resetToDefault:y,clearAllFilters:b,availableStatuses:k,listProps:(0,c.useMemo)(()=>({dataSource:(null==C?void 0:C.items)||[],loading:_||w,locale:{emptyText:(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})},pagination:{current:e,pageSize:t,total:null==C?void 0:C.total,showSizeChanger:s,showQuickJumper:!1,onChange:e=>n(e)}}),[null==C?void 0:C.items,null==C?void 0:C.total,_,w,e,t,s,n]),isLoading:_,isFetching:w}};var k=n(10969),C=n(60145),_=n(11558),w=n(70641),E=n(7317),S=n(85302),N=n(64892);function T(e,t,n){let i;let s=(0,C.j)(),a=n?.locale??s.locale??k._,r=(0,S.U)(e,t);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[l,c]=(0,E.d)(n?.in,...r>0?[t,e]:[e,t]),u=(0,_.u)(n?.roundingMethod??"round"),d=c.getTime()-l.getTime(),g=d/N.yJ,p=(d-((0,w.D)(c)-(0,w.D)(l)))/N.yJ,m=n?.unit;if("second"===(i=m||(g<1?"second":g<60?"minute":g<N.H_?"hour":p<N.fH?"day":p<N.UU?"month":"year"))){let e=u(d/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===i){let e=u(g);return a.formatDistance("xMinutes",e,o)}if("hour"===i){let e=u(g/60);return a.formatDistance("xHours",e,o)}if("day"===i){let e=u(p/N.H_);return a.formatDistance("xDays",e,o)}if("month"===i){let e=u(p/N.fH);return 12===e&&"month"!==m?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=u(p/N.UU);return a.formatDistance("xYears",e,o)}}var P=n(41337);let{Text:I,Title:R}=r.AntTypography,M=e=>"paused"===e?"Awaiting Processing":e.split("_").map(y.kC).join(" "),D=e=>{var t,n,i,s,o,l,c,u,d,g;let{task:p,...m}=e,f=(0,r.pmc)(),[h,{isLoading:y}]=(0,x.mL)(),[v,{isLoading:j}]=(0,x.QC)(),b=!!p.dismissed_in_activity_view,k="error"===p.status&&"detection"!==p.action_type,{data:C}=(0,x.Ud)({page:1,size:1e3}),_=p.monitor_config_id?null==C?void 0:null===(t=C.items)||void 0===t?void 0:t.find(e=>e.key===p.monitor_config_id):void 0,w=_?(0,P.AZ)({connection_type:_.connection_type,name:null!==(s=_.name)&&void 0!==s?s:null,key:null!==(o=_.key)&&void 0!==o?o:null,saas_config:_.saas_config?{type:null!==(l=_.saas_config.type)&&void 0!==l?l:null,name:null!==(c=_.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(u=_.saas_config.fides_key)&&void 0!==u?u:null}:null,secrets:(null===(i=_.secrets)||void 0===i?void 0:i.url)?{url:_.secrets.url}:null}):p.connection_type?(0,P.AZ)({connection_type:p.connection_type,name:null!==(d=p.connection_name)&&void 0!==d?d:p.connection_type?p.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,E=(null===(n=p.staged_resource_urns)||void 0===n?void 0:n.length)||0,S=["pending","in_processing","paused","retrying"].includes((p.status||"").toLowerCase()),N=(()=>{if("classification"===p.action_type){let e="complete"===p.status?"Classified":"Classifying";return"".concat(e," ").concat(E," ").concat(1===E?"field":"fields")}return"detection"===p.action_type?"complete"===p.status?"Monitor scanned":"Monitor scanning":"promotion"===p.action_type?"complete"===p.status?"Promoted":"Promoting":p.action_type?p.action_type.replace(/_/g," "):"Task"})(),D=(p.connection_type||"").toString().toUpperCase().includes("WEBSITE")?"Product monitor":"Analytics monitor",q=async()=>{try{await h({taskId:p.id}).unwrap(),f({status:"success",description:"Task retry initiated successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to retry task: ".concat(t)})}},A=async()=>{try{await v({taskId:p.id}).unwrap(),f({status:"success",description:"Task dismissed successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to dismiss task: ".concat(t)})}};return(0,a.jsx)("div",{...m,className:"w-full",children:(0,a.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JGx,{span:17,className:"align-middle",children:(0,a.jsxs)(r.vyj,{align:"center",size:8,wrap:!0,children:[w&&(0,a.jsx)(P.ZP,{data:w,boxSize:"24px"}),(0,a.jsx)(R,{level:5,className:"m-0",children:N}),!S&&(0,a.jsx)(r.j8w,{color:(e=>{switch(e){case"pending":case"retrying":return"orange";case"in_processing":return"processing";case"complete":return"green";case"error":return"red";case"paused":return"purple";default:return"gray"}})(p.status),children:(g=p.status)?M(g):"Unknown"}),"error"===p.status&&(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(r.wpx,{size:"small",type:"primary",loading:y,onClick:q,children:"Retry"}),!b&&(0,a.jsx)(r.wpx,{size:"small",loading:j,onClick:A,children:"Dismiss"}),(0,a.jsx)(r.bPF,{content:(0,a.jsx)("div",{className:"max-w-[360px]",children:p.message}),title:null,trigger:"click",children:(0,a.jsx)(r.wpx,{type:"link",size:"small",children:"Failure reason"})})]})]})}),(0,a.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(I,{type:"secondary",size:"sm",children:D})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:S?(0,a.jsx)(r.$jN,{size:"sm",color:"primary",thickness:"2px",speed:"0.6s"}):(0,a.jsx)(I,{type:"secondary",size:"sm",children:T(new Date(p.updated_at),new Date,{addSuffix:!0})})})]})})},q=e=>"paused"===e?"Awaiting Processing":e.split("_").map(y.kC).join(" "),A=()=>{let{searchQuery:e,updateSearch:t,statusFilters:n,updateStatusFilters:i,showDismissed:s,updateShowDismissed:o,resetToDefault:l,clearAllFilters:d,availableStatuses:g,listProps:p}=b(),m=(0,c.useCallback)(e=>{i(e)},[i]),f=(0,a.jsxs)("div",{className:"min-w-[220px] space-y-3 p-2",children:[(0,a.jsx)(r.E_O.Group,{value:n,onChange:m,className:"flex flex-col gap-2",children:g.map(e=>(0,a.jsx)(r.E_O,{value:e,children:q(e)},e))}),(0,a.jsx)(r.E_O,{checked:s,onChange:e=>o(e.target.checked),className:"mb-2",children:"Show dismissed tasks"}),(0,a.jsxs)(r.vyj,{children:[(0,a.jsx)(r.wpx,{size:"small",onClick:l,children:"Default"}),(0,a.jsx)(r.wpx,{size:"small",onClick:d,children:"Clear"})]})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,a.jsx)("div",{className:"min-w-[300px]",children:(0,a.jsx)(u.f,{value:null!=e?e:"",onChange:t,placeholder:"Search by monitor name..."})}),(0,a.jsx)(r.bPF,{content:f,trigger:"click",placement:"bottomRight",children:(0,a.jsx)(r.wpx,{className:"flex items-center gap-2",children:"Filter"})})]}),(0,a.jsx)(r.krs,{...p,renderItem:e=>(0,a.jsx)(r.krs.Item,{children:(0,a.jsx)(D,{task:e})})})]})},z=e=>{let{isConfigLoading:t}=e;return(0,a.jsx)(g.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,a.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,a.jsx)(r.$jN,{color:"primary.900"}):(0,a.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},O=()=>(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,a.jsx)(l(),{href:p.KH,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var U=n(14908);(i=s||(s={})).ATTENTION_REQUIRED="attention-required",i.IN_PROGRESS="in-progress";var G=()=>{let{flags:e}=(0,d.hz)(),t=!!e.alphaFullActionCenter,n=(0,c.useMemo)(()=>t?Object.values(s):["attention-required"],[t]),{activeTab:i,onTabChange:a}=(0,U.Z)({tabKeys:n});return{tabs:(0,c.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return t&&e.push({label:"Activity",hash:"in-progress"}),e},[t]),activeTab:i,onTabChange:a}},F=n(39449),B=n(54762);let{Text:L}=r.AntTypography,W=e=>{let{monitorSummary:t,showSkeleton:n,href:i,...s}=e,{name:o,consent_status:u,total_updates:d,updates:g,last_monitored:p,secrets:m,key:f,connection_type:h}=t,x=(0,c.useMemo)(()=>(null==m?void 0:m.url)?(0,y.ge)(m.url):void 0,[null==m?void 0:m.url]),v=(0,c.useMemo)(()=>x?(0,y.tl)(x,60):void 0,[x]),j=Object.entries(g).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),b=p?(0,y.p6)(new Date(p)):void 0,k=p?T(new Date(p),new Date,{addSuffix:!0}):void 0;return(0,a.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(f),...s,children:(0,a.jsx)(r.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,a.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JGx,{span:17,className:"align-middle",children:(0,a.jsx)(r.krs.Item.Meta,{avatar:(0,a.jsx)(r.t3Z,{src:v,size:30,icon:(0,a.jsx)(r.PJP.huD,{size:30}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"},alt:"".concat(x," icon")}),title:(0,a.jsxs)(r.jqI,{align:"center",gap:4,children:[(0,a.jsx)(l(),{href:i,className:"whitespace-nowrap",children:"".concat(d," assets detected").concat(x?" on ".concat(x):"")}),(0,a.jsx)(B.l,{consentStatus:u}),h===F.Rj.TEST_WEBSITE&&(0,a.jsx)(r.j8w,{color:"nectar",style:{fontWeight:"normal"},children:"test monitor"})]}),description:"".concat(j," detected.")})}),(0,a.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(L,{ellipsis:{tooltip:o},children:o})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:!!k&&(0,a.jsx)(L,{"data-testid":"monitor-date",ellipsis:{tooltip:b},children:k})})]})})})},J=(e,t,n)=>e&&t!==F.Rj.TEST_WEBSITE&&e&&t!==F.Rj.WEBSITE?"".concat(p.vi,"/").concat(n,"/data-explorer"):"".concat(p.vi,"/").concat(n);var Z=()=>{var e,t;let n=(0,r.pmc)(),{tabs:i,activeTab:o,onTabChange:p}=G(),{flags:y}=(0,d.hz)(),{PAGE_SIZES:v,pageSize:j,setPageSize:b,onPreviousPageClick:k,isPreviousPageDisabled:C,onNextPageClick:_,isNextPageDisabled:w,startRange:E,endRange:S,pageIndex:N,setTotalPages:T,resetPageIndexToDefault:P}=(0,f.oi)(),[I,R]=(0,c.useState)(""),{data:M,isLoading:D}=(0,h.tB)({api_set:!1}),q=!!(null==M?void 0:null===(e=M.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,c.useEffect)(()=>{P()},[I,P]);let{data:U,isError:F,isLoading:B,isFetching:L}=(0,x.Ud)({page:N,size:j,search:I},{skip:D||!q});(0,c.useEffect)(()=>{F&&n&&q&&n({title:"Error fetching data",description:"Please try again later",status:"error"})},[F,n,q]),(0,c.useEffect)(()=>{if(U){var e;T(null!==(e=U.total)&&void 0!==e?e:1)}},[U,T]);let Z=(null==U?void 0:null===(t=U.items)||void 0===t?void 0:t.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[],K=L?Array.from({length:j},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],H=(0,c.useCallback)((e,t)=>[(0,a.jsx)(l(),{href:null!=t?t:"",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return q?(0,a.jsxs)(g.Z,{title:"Action center",children:[(0,a.jsx)(m.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,a.jsx)(r.Niu,{"aria-label":"Action center tabs",mode:"horizontal",items:i.map(e=>({key:e.hash,label:e.label})),selectedKeys:[o],onClick:async e=>{let t=Object.values(s).find(t=>t===e.key);t&&await p(t)},className:"mb-4","data-testid":"action-center-tabs"}),o===s.IN_PROGRESS?(0,a.jsx)(A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.jqI,{className:"justify-between py-6",children:(0,a.jsx)(u.f,{value:I,onChange:R})}),(0,a.jsx)(r.krs,{loading:B,dataSource:Z||K,locale:{emptyText:(0,a.jsx)(O,{})},renderItem:e=>{let t=e.key?J(y.alphaFullActionCenter,e.connection_type,e.key):"";return!!(null==e?void 0:e.key)&&(0,a.jsx)(W,{showSkeleton:L,monitorSummary:e,href:t,actions:H(e.key,t)},e.key)}}),!!Z&&!!(null==U?void 0:U.total)&&U.total>j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.htM,{className:"mb-6 mt-0"}),(0,a.jsx)(f.s8,{totalRows:(null==U?void 0:U.total)||0,pageSizes:v,setPageSize:b,onPreviousPageClick:k,isPreviousPageDisabled:C||L,onNextPageClick:_,isNextPageDisabled:w||L,startRange:E,endRange:S})]})]})]}):(0,a.jsx)(z,{isConfigLoading:D})}}},function(e){e.O(0,[431,7245,9070,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);