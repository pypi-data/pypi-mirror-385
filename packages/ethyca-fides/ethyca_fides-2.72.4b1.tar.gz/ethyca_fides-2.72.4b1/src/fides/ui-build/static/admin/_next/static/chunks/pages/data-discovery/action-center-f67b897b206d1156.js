(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,g,p,m=0,f=!1,h=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=l,i=c;return l=c=void 0,m=t,d=e.apply(i,n)}function v(e){var n=e-p,i=e-m;return void 0===p||n>=t||n<0||h&&i>=u}function j(){var e,n,i,a=s();if(v(a))return C(a);g=setTimeout(j,(e=a-p,n=a-m,i=t-e,h?o(i,u-n):i))}function C(e){return(g=void 0,x&&l)?y(e):(l=c=void 0,d)}function _(){var e,n=s(),i=v(n);if(l=arguments,c=this,p=n,i){if(void 0===g)return m=e=p,g=setTimeout(j,t),f?y(e):d;if(h)return clearTimeout(g),g=setTimeout(j,t),y(p)}return void 0===g&&(g=setTimeout(j,t)),d}return t=a(t)||0,i(n)&&(f=!!n.leading,u=(h="maxWait"in n)?r(a(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),_.cancel=function(){void 0!==g&&clearTimeout(g),m=0,l=p=c=g=void 0},_.flush=function(){return void 0===g?d:C(s())},_}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var i=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(76887)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var i=n(24246),s=n(66726),a=n.n(s),r=n(27378),o=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:s,...l}=e,[c,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{u(t||"")},[t]);let d=a()(n,500),g=(0,r.useCallback)(e=>{u(e),d(e)},[]);return(0,i.jsx)(o.Z,{value:c,onChange:g,onClear:()=>{u(""),n("")},placeholder:s,...l})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(24246),s=n(20595),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),c=n(90867),u=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,p=(0,l.hz)(),m=(0,o.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(p.flags.messagingConfiguration&&f),{data:x}=(0,u.JE)(void 0,{skip:h}),{data:y}=(0,c.PW)(void 0,{skip:h}),v=p.flags.messagingConfiguration&&(!x||!y)&&f;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[v?(0,i.jsx)(g,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(20595),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(20595),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=s.AntTypography,c=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(s.zrq,{items:a,...n})}},14908:function(e,t,n){"use strict";var i=n(86677),s=n(27378);let a=e=>e.startsWith("#")?e.slice(1):e;t.Z=e=>{let{tabKeys:t,initialTab:n}=e,r=(0,i.useRouter)(),o=r.asPath.split("#")[1]||t[0],[l,c]=(0,s.useState)(o);return(0,s.useEffect)(()=>{n&&t.includes(n)&&c(n)},[n,t,r.isReady]),{activeTab:l,onTabChange:(0,s.useCallback)(async e=>{if(!t.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),c(t[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:a(e)},void 0,{shallow:!0}),c(e))},[r,t]),setActiveTab:c}}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(24246),s=n(20595),a=n(62165),r=n(65735);let o=e=>{let{consentStatus:t}=e,{flags:n}=(0,a.hz)(),{assetConsentStatusLabels:o}=n;return o&&(null==t?void 0:t.status)===r.pF.ALERT?(0,i.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,i.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,i.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return c},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return p},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},76887:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var i,s,a,r,o=n(24246),l=n(20595),c=n(79894),u=n.n(c),d=n(27378),g=n(30952),p=n(25980),m=n(77213),f=n(77830),h=n(58754),x=n(47935),y=n(7426),v=n(37059),j=n(16394),C=n(17245),_=n(67359);let b=()=>{let{pageIndex:e,pageSize:t,updatePageIndex:n,showSizeChanger:i}=(0,C.h0)({defaultPageSize:20,showSizeChanger:!1}),{searchQuery:s,updateSearch:a}=(0,C.Rx)(),r=(0,d.useMemo)(()=>[_.n.PENDING,_.n.IN_PROCESSING,_.n.PAUSED,_.n.RETRYING,_.n.ERROR],[]),[c,u]=(0,d.useState)(r),[g,p]=(0,d.useState)(!1),[m,f]=(0,d.useState)(r),[h,x]=(0,d.useState)(!1),y=(0,d.useCallback)(e=>{a(e),n(1)},[a,n]),j=(0,d.useCallback)(e=>{f(e)},[]),b=(0,d.useCallback)(e=>{x(e)},[]),k=(0,d.useCallback)(()=>{u(m),p(h),n(1)},[m,h,n]),E=(0,d.useCallback)(()=>{f(r),x(!1),u(r),p(!1),n(1)},[r,n]),T=[_.n.PENDING,_.n.IN_PROCESSING,_.n.COMPLETE,_.n.ERROR,_.n.PAUSED,_.n.RETRYING,_.n.SKIPPED],{data:S,isLoading:N,isFetching:w}=(0,v.$h)({page:e,size:t,search:s,statuses:c.length>0?c:void 0,return_dismissed:g});return{searchQuery:s,updateSearch:y,statusFilters:m,updateStatusFilters:j,showDismissed:h,updateShowDismissed:b,applyFilters:k,resetAndApplyFilters:E,availableStatuses:T,listProps:(0,d.useMemo)(()=>({dataSource:(null==S?void 0:S.items)||[],loading:N||w,locale:{emptyText:(0,o.jsx)(l.oj8,{image:l.oj8.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})},pagination:{current:e,pageSize:t,total:null==S?void 0:S.total,showSizeChanger:i,showQuickJumper:!1,onChange:e=>n(e)}}),[null==S?void 0:S.items,null==S?void 0:S.total,N,w,e,t,i,n]),isLoading:N,isFetching:w}};var k=n(10969),E=n(60145),T=n(11558),S=n(70641),N=n(7317),w=n(85302),I=n(64892);function R(e,t,n){let i;let s=(0,E.j)(),a=n?.locale??s.locale??k._,r=(0,w.U)(e,t);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[l,c]=(0,N.d)(n?.in,...r>0?[t,e]:[e,t]),u=(0,T.u)(n?.roundingMethod??"round"),d=c.getTime()-l.getTime(),g=d/I.yJ,p=(d-((0,S.D)(c)-(0,S.D)(l)))/I.yJ,m=n?.unit;if("second"===(i=m||(g<1?"second":g<60?"minute":g<I.H_?"hour":p<I.fH?"day":p<I.UU?"month":"year"))){let e=u(d/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===i){let e=u(g);return a.formatDistance("xMinutes",e,o)}if("hour"===i){let e=u(g/60);return a.formatDistance("xHours",e,o)}if("day"===i){let e=u(p/I.H_);return a.formatDistance("xDays",e,o)}if("month"===i){let e=u(p/I.fH);return 12===e&&"month"!==m?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=u(p/I.UU);return a.formatDistance("xYears",e,o)}}var P=n(41337),M=n(65735);let{Text:A,Title:q}=l.AntTypography,D=e=>"paused"===e?"Awaiting Processing":e.split("_").map(j.kC).join(" "),O=e=>{var t,n,i,s,a,r,c,u,d,g;let{task:p,...m}=e,f=(0,l.pmc)(),[h,{isLoading:x}]=(0,v.mL)(),[y,{isLoading:j}]=(0,v.QC)(),C=!!p.dismissed,_="error"===p.status&&p.action_type!==M.K8.DETECTION,{data:b}=(0,v.Ud)({page:1,size:1e3}),k=p.monitor_config_id?null==b?void 0:null===(t=b.items)||void 0===t?void 0:t.find(e=>e.key===p.monitor_config_id):void 0,E=k?(0,P.AZ)({connection_type:k.connection_type,name:null!==(s=k.name)&&void 0!==s?s:null,key:null!==(a=k.key)&&void 0!==a?a:null,saas_config:k.saas_config?{type:null!==(r=k.saas_config.type)&&void 0!==r?r:null,name:null!==(c=k.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(u=k.saas_config.fides_key)&&void 0!==u?u:null}:null,secrets:(null===(i=k.secrets)||void 0===i?void 0:i.url)?{url:k.secrets.url}:null}):p.connection_type?(0,P.AZ)({connection_type:p.connection_type,name:null!==(d=p.connection_name)&&void 0!==d?d:p.connection_type?p.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,T=(null===(n=p.staged_resource_urns)||void 0===n?void 0:n.length)||0,S=["pending","in_processing","paused","retrying"].includes((p.status||"").toLowerCase()),N=p.field_count||T,w=(()=>{if(p.action_type===M.K8.CLASSIFICATION||p.action_type===M.K8.LLM_CLASSIFICATION){let e="complete"===p.status?"Classified":"Classifying";return"".concat(e," ").concat(N," ").concat(1===N?"field":"fields")}if(p.action_type===M.K8.DETECTION)return"complete"===p.status?"Monitor scanned":"Monitor scanning";if(p.action_type===M.K8.PROMOTION){let e="complete"===p.status?"Confirmed":"Confirming";return"".concat(e," ").concat(N," ").concat(1===N?"field":"fields")}return p.action_type?p.action_type.replace(/_/g," "):"Task"})(),I=p.monitor_name||"Unknown monitor",O=async()=>{try{await h({taskId:p.id}).unwrap(),f({status:"success",description:"Task retry initiated successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to retry task: ".concat(t)})}},z=async()=>{try{await y({taskId:p.id}).unwrap(),f({status:"success",description:"Task dismissed successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to dismiss task: ".concat(t)})}};return(0,o.jsx)("div",{...m,className:"w-full",children:(0,o.jsxs)(l.bue,{gutter:12,className:"w-full",children:[(0,o.jsx)(l.JGx,{span:14,className:"align-middle",children:(0,o.jsxs)(l.vyj,{direction:"vertical",size:4,children:[(0,o.jsxs)(l.vyj,{align:"center",size:8,wrap:!0,children:[E&&(0,o.jsx)(P.ZP,{data:E,size:24}),(0,o.jsx)(q,{level:5,className:"m-0",children:w}),!S&&(0,o.jsx)(l.j8w,{color:(e=>{switch(e){case"pending":case"retrying":case"skipped":default:return"default";case"in_processing":return"processing";case"complete":return"success";case"error":return"error";case"paused":return"purple"}})(p.status),children:(g=p.status)?D(g):"Unknown"})]}),"error"===p.status&&(0,o.jsx)(l.vyj,{className:"pl-1",children:(0,o.jsx)(A,{type:"secondary",size:"sm",children:p.message||"Unknown error"})})]})}),(0,o.jsx)(l.JGx,{span:4,className:"flex items-center justify-end",children:(0,o.jsx)(A,{type:"secondary",size:"sm",children:I})}),(0,o.jsx)(l.JGx,{span:3,className:"flex items-center justify-end",children:S?(0,o.jsx)(l.ZJQ,{size:"small"}):(0,o.jsx)(A,{type:"secondary",size:"sm",children:R(new Date(p.updated_at),new Date,{addSuffix:!0})})}),(0,o.jsx)(l.JGx,{span:3,className:"flex items-center justify-end",children:"error"===p.status&&(0,o.jsxs)(l.vyj,{size:0,split:(0,o.jsx)(l.htM,{type:"vertical"}),children:[_&&(0,o.jsx)(l.wpx,{type:"link",size:"small",loading:x,onClick:O,className:"p-0",children:"Retry"}),!C&&(0,o.jsx)(l.wpx,{type:"link",size:"small",loading:j,onClick:z,className:"p-0",children:"Dismiss"})]})})]})})},z=e=>"paused"===e?"Awaiting Processing":e.split("_").map(j.kC).join(" "),U=()=>{let[e,t]=(0,d.useState)(!1),{searchQuery:n,updateSearch:i,statusFilters:s,updateStatusFilters:a,showDismissed:r,updateShowDismissed:c,applyFilters:u,resetAndApplyFilters:p,availableStatuses:m,listProps:f}=b(),h=(0,d.useCallback)(e=>{a(e)},[a]),x=(0,d.useCallback)(()=>{u(),t(!1)},[u]),y=(0,d.useCallback)(()=>{p(),t(!1)},[p]),v=(0,o.jsxs)(l.jqI,{vertical:!0,className:"min-w-[220px]",children:[(0,o.jsxs)(l.jqI,{vertical:!0,className:"gap-1.5 px-4 py-2",children:[(0,o.jsx)(l.E_O.Group,{value:s,onChange:h,className:"flex flex-col gap-1.5",children:m.map(e=>(0,o.jsx)(l.E_O,{value:e,children:z(e)},e))}),(0,o.jsx)(l.E_O,{checked:r,onChange:e=>c(e.target.checked),children:"Dismissed"})]}),(0,o.jsx)(l.htM,{className:"m-0"}),(0,o.jsxs)(l.jqI,{justify:"space-between",className:"px-4 py-2",children:[(0,o.jsx)(l.wpx,{size:"small",type:"text",onClick:y,className:"-ml-2",children:"Reset"}),(0,o.jsx)(l.wpx,{size:"small",type:"primary",onClick:x,children:"Apply"})]})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,o.jsx)("div",{className:"min-w-[300px]",children:(0,o.jsx)(g.f,{value:null!=n?n:"",onChange:i,placeholder:"Search by monitor name..."})}),(0,o.jsx)(l.bPF,{content:v,trigger:"click",placement:"bottomRight",open:e,onOpenChange:t,children:(0,o.jsx)(l.wpx,{icon:(0,o.jsx)(l.PJP._ME,{}),iconPosition:"end",children:"Filter"})})]}),(0,o.jsx)(l.krs,{...f,renderItem:e=>(0,o.jsx)(l.krs.Item,{children:(0,o.jsx)(O,{task:e})})})]})},F=e=>{let{isConfigLoading:t}=e;return(0,o.jsx)(m.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,o.jsx)(l.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,o.jsx)(l.$jN,{color:"primary.900"}):(0,o.jsx)(l.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},L=()=>(0,o.jsx)(l.oj8,{image:l.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,o.jsx)(u(),{href:f.KH,passHref:!0,legacyBehavior:!0,children:(0,o.jsx)(l.wpx,{type:"primary",children:"Visit integrations"})})});var B=n(14908);(i=a||(a={})).ATTENTION_REQUIRED="attention-required",i.IN_PROGRESS="in-progress";var G=()=>{let{flags:e}=(0,p.hz)(),t=!!e.alphaFullActionCenter,n=(0,d.useMemo)(()=>t?Object.values(a):["attention-required"],[t]),{activeTab:i,onTabChange:s}=(0,B.Z)({tabKeys:n});return{tabs:(0,d.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return t&&e.push({label:"Activity",hash:"in-progress"}),e},[t]),activeTab:i,onTabChange:s}},W=n(54762),K=n(42905),J=n.n(K),Z=n(98145);let H=e=>{let{updates:t,isAssetList:n}=e,i=e=>{var t;return null!==(t=Z.v8.get(e))&&void 0!==t?t:e},s=(0,d.useMemo)(()=>t?Object.entries(t).filter(e=>{let[t,n]=e;return n>0&&!Z.EP.includes(t)}).sort((e,t)=>{let n=Z.H6.indexOf(e[0]),i=Z.H6.indexOf(t[0]);return -1===n&&-1===i?0:-1===n?1:-1===i?-1:n-i}).map(e=>{let[t,s]=e;return"".concat((0,j.pF)(s)," ").concat(i(t)).concat(n&&1!==s?"s":"")}):[],[t,n]);if(!t)return null;if(n){let e=s.join(", ");return(0,o.jsxs)("span",{children:[e," detected."]})}let a=s.join(", ");return(0,o.jsx)("span",{children:a})};(s=r||(r={})).WEBSITE="website",s.DATASTORE="datastore",s.INFRASTRUCTURE="infrastructure";let Q=e=>e===M.Rj.WEBSITE||e===M.Rj.TEST_WEBSITE?"website":e===M.Rj.OKTA?"infrastructure":"datastore",{Text:Y}=l.AntTypography,$={[r.WEBSITE]:"asset",[r.DATASTORE]:"field",[r.INFRASTRUCTURE]:"system"},X=e=>{let{monitorSummary:t,showSkeleton:n,href:i,...s}=e,{name:a,consent_status:c,total_updates:d,updates:g,last_monitored:p,secrets:m,key:f,connection_type:h,saas_config:x}=t,y=Q(h),v=p?(0,j.p6)(new Date(p)):void 0,C=p?R(new Date(p),new Date,{addSuffix:!0}):void 0,_=$[y];return(0,o.jsx)(l.krs.Item,{"data-testid":"monitor-result-".concat(f),...s,children:(0,o.jsx)(l.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,o.jsxs)(l.bue,{gutter:{xs:6,lg:12},className:"w-full",children:[(0,o.jsx)(l.JGx,{span:18,className:"align-middle",children:(0,o.jsx)(l.krs.Item.Meta,{avatar:(0,o.jsx)(P.ZP,{data:{kind:P.hY.CONNECTION,connectionType:h,name:a,key:f,saasType:null==x?void 0:x.type,websiteUrl:null==m?void 0:m.url}}),title:(0,o.jsxs)(l.jqI,{align:"center",gap:4,className:J()["monitor-result__title"],children:[(0,o.jsx)(u(),{href:i,"data-testid":"monitor-link",children:a}),(0,o.jsxs)(Y,{type:"secondary",children:[(0,j.pF)(d)," ",_,1===d?"":"s"]}),c&&(0,o.jsx)(W.l,{consentStatus:c}),h===M.Rj.TEST_WEBSITE&&(0,o.jsx)(l.j8w,{color:"nectar",children:"test monitor"})]}),description:!!g&&(0,o.jsx)(H,{updates:g,isAssetList:y===r.WEBSITE})})}),(0,o.jsx)(l.JGx,{span:6,className:"flex items-center justify-end",children:!!C&&(0,o.jsx)(l.esZ,{title:v,children:(0,o.jsxs)(Y,{type:"secondary","data-testid":"monitor-date",children:[(0,o.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),C]})})})]})})})},V=(e,t,n)=>e&&t!==M.Rj.TEST_WEBSITE&&t!==M.Rj.WEBSITE?"".concat(f.vi,"/data-explorer/").concat(n):"".concat(f.vi,"/").concat(n);var ee=()=>{var e,t;let n=(0,l.pmc)(),{tabs:i,activeTab:s,onTabChange:r}=G(),{flags:c}=(0,p.hz)(),{PAGE_SIZES:f,pageSize:j,setPageSize:C,onPreviousPageClick:_,isPreviousPageDisabled:b,onNextPageClick:k,isNextPageDisabled:E,startRange:T,endRange:S,pageIndex:N,setTotalPages:w,resetPageIndexToDefault:I}=(0,x.oi)(),[R,P]=(0,d.useState)(""),{data:M,isLoading:A}=(0,y.tB)({api_set:!1}),q=!!(null==M?void 0:null===(e=M.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,d.useEffect)(()=>{I()},[R,I]);let{data:D,isError:O,isLoading:z,isFetching:B}=(0,v.Ud)({page:N,size:j,search:R},{skip:A||!q});(0,d.useEffect)(()=>{O&&n&&q&&n({title:"Error fetching data",description:"Please try again later",status:"error"})},[O,n,q]),(0,d.useEffect)(()=>{if(D){var e;w(null!==(e=D.total)&&void 0!==e?e:1)}},[D,w]);let W=(null==D?void 0:null===(t=D.items)||void 0===t?void 0:t.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[],K=B?Array.from({length:j},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],J=(0,d.useCallback)((e,t)=>[(0,o.jsx)(u(),{href:null!=t?t:"",passHref:!0,legacyBehavior:!0,children:(0,o.jsx)(l.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return q?(0,o.jsxs)(m.Z,{title:"Action center",children:[(0,o.jsx)(h.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,o.jsx)(l.Niu,{"aria-label":"Action center tabs",mode:"horizontal",items:i.map(e=>({key:e.hash,label:e.label})),selectedKeys:[s],onClick:async e=>{let t=Object.values(a).find(t=>t===e.key);t&&await r(t)},className:"mb-4","data-testid":"action-center-tabs"}),s===a.IN_PROGRESS?(0,o.jsx)(U,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.jqI,{className:"justify-between py-6",children:(0,o.jsx)(g.f,{value:R,onChange:P})}),(0,o.jsx)(l.krs,{loading:z,dataSource:W||K,locale:{emptyText:(0,o.jsx)(L,{})},renderItem:e=>{let t=e.key?V(c.alphaFullActionCenter,e.connection_type,e.key):"";return!!(null==e?void 0:e.key)&&(0,o.jsx)(X,{showSkeleton:B,monitorSummary:e,href:t,actions:J(e.key,t)},e.key)}}),!!W&&!!(null==D?void 0:D.total)&&D.total>j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.htM,{className:"mb-6 mt-0"}),(0,o.jsx)(x.s8,{totalRows:(null==D?void 0:D.total)||0,pageSizes:f,setPageSize:C,onPreviousPageClick:_,isPreviousPageDisabled:b||B,onNextPageClick:k,isNextPageDisabled:E||B,startRange:T,endRange:S})]})]})]}):(0,o.jsx)(F,{isConfigLoading:A})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}},function(e){e.O(0,[431,7245,7059,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);