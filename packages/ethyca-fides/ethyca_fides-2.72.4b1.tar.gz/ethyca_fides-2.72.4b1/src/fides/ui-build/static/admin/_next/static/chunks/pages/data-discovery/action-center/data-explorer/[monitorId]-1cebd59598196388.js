(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3914],{85630:function(e){e.exports=function(e){return e.split("")}},75733:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},74833:function(e,t,n){var r=n(56127),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},39158:function(e,t,n){var r=n(75733);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},62690:function(e,t,n){var r=n(39158),i=n(25348),a=n(63528),l=n(65567);e.exports=function(e){return function(t){var n=i(t=l(t))?a(t):void 0,o=n?n[0]:t.charAt(0),s=n?r(n,1).join(""):t.slice(1);return o[e]()+s}}},56632:function(e,t,n){var r=n(89278),i=n(80068),a=n(50098);e.exports=function(e){return function(t,n,l){var o=Object(t);if(!i(t)){var s=r(n,3);t=a(t),n=function(e){return s(o[e],e,o)}}var c=e(t,n,l);return c>-1?o[s?t[c]:c]:void 0}}},25348:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},63528:function(e,t,n){var r=n(85630),i=n(25348),a=n(84890);e.exports=function(e){return i(e)?a(e):r(e)}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},84890:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",i="[^"+t+"]",a="(?:\ud83c[\udde6-\uddff]){2}",l="[\ud800-\udbff][\udc00-\udfff]",o="(?:"+n+"|"+r+")?",s="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[i,a,l].join("|")+")"+s+o+")*",u=RegExp(r+"(?="+r+")|(?:"+[i+n+"?",n,a,l,"["+t+"]"].join("|")+")"+(s+o+c),"g");e.exports=function(e){return e.match(u)||[]}},98052:function(e,t,n){var r=n(65567),i=n(76744);e.exports=function(e){return i(r(e).toLowerCase())}},66726:function(e,t,n){var r=n(11611),i=n(82846),a=n(91936),l=Math.max,o=Math.min;e.exports=function(e,t,n){var s,c,u,d,f,p,h=0,v=!1,x=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=s,r=c;return s=c=void 0,h=t,d=e.apply(r,n)}function j(e){var n=e-p,r=e-h;return void 0===p||n>=t||n<0||x&&r>=u}function y(){var e,n,r,a=i();if(j(a))return b(a);f=setTimeout(y,(e=a-p,n=a-h,r=t-e,x?o(r,u-n):r))}function b(e){return(f=void 0,m&&s)?g(e):(s=c=void 0,d)}function _(){var e,n=i(),r=j(n);if(s=arguments,c=this,p=n,r){if(void 0===f)return h=e=p,f=setTimeout(y,t),v?g(e):d;if(x)return clearTimeout(f),f=setTimeout(y,t),g(p)}return void 0===f&&(f=setTimeout(y,t)),d}return t=a(t)||0,r(n)&&(v=!!n.leading,u=(x="maxWait"in n)?l(a(n.maxWait)||0,t):u,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==f&&clearTimeout(f),h=0,s=p=c=f=void 0},_.flush=function(){return void 0===f?d:b(i())},_}},64925:function(e,t,n){var r=n(56632)(n(66259));e.exports=r},66259:function(e,t,n){var r=n(95372),i=n(89278),a=n(47991),l=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return -1;var s=null==n?0:a(n);return s<0&&(s=l(o+s,0)),r(e,i(t,3),s)}},82846:function(e,t,n){var r=n(77400);e.exports=function(){return r.Date.now()}},94919:function(e,t,n){var r=n(91936),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var r=n(94919);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var r=n(74833),i=n(11611),a=n(55193),l=0/0,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return l;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?l:+e}},76744:function(e,t,n){var r=n(62690)("toUpperCase");e.exports=r},11666:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/data-explorer/[monitorId]",function(){return n(84954)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(24246),i=n(66726),a=n.n(i),l=n(27378),o=n(26917);let s=e=>{let{value:t,onChange:n,placeholder:i,...s}=e,[c,u]=(0,l.useState)(t);(0,l.useEffect)(()=>{u(t||"")},[t]);let d=a()(n,500),f=(0,l.useCallback)(e=>{u(e),d(e)},[]);return(0,r.jsx)(o.Z,{value:c,onChange:f,onClear:()=>{u(""),n("")},placeholder:i,...s})}},35287:function(e,t,n){"use strict";var r=n(24246),i=n(20595),a=n(88038),l=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:a}=e;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,r.jsxs)(l(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(i.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...a,children:t})]})}},58754:function(e,t,n){"use strict";var r=n(24246),i=n(20595),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:l=!0,children:o,rightContent:s,style:c,...u}=e;return(0,r.jsxs)("div",{...u,style:l?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,s&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:s})]}),!!n&&(0,r.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(24246),i=n(20595),a=n(72707),l=n.n(a);let o=e=>{let{data:{formattedTitle:t,description:n,name:a,primaryName:l}}=e;return(0,r.jsxs)(i.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:l||a}),l&&": ".concat(a)]}),(0,r.jsx)("em",{children:n})]})},s=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:l().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),u=e=>{let{options:t,...n}=e,a=null==t?void 0:t.map(e=>s(e)?{...e,options:e.options.map(c)}:c(e));return(0,r.jsx)(i.WPr,{options:a,filterOption:(e,t)=>{var n,r;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(r=t.value)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:o,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var r=n(24246),i=n(64925),a=n.n(i),l=n(27378),o=n(16134),s=n(30002),c=n(28079),u=n(57072);let d=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,o.C)(c.U3),{isLoading:n}=(0,u.MO)(),r=(0,o.C)(u.qb),{isLoading:i}=(0,s.te)();return{dataUses:t,dataSubjects:(0,o.C)(s.ZL),dataCategories:r,isLoading:e||n||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:i}=d(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return{};let i=t(o(e,n)),a=!!r.parent_key;return{name:r.name||void 0,primaryName:a&&(null==i?void 0:i.name)!==r.name&&(null==i?void 0:i.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:i,primaryName:a}=s(e,t,n);return i?a?(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("strong",{children:[a,":"]})," ",i]},e):(0,r.jsx)("strong",{children:i},e):e},u=t=>a()(e,{fides_key:t}),f=e=>a()(t,{fides_key:e}),p=e=>a()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>c(e,u,1),getDataUseDisplayNameProps:e=>s(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>c(e,f,2),getDataCategoryDisplayNameProps:e=>s(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getPrimaryKey:o,isLoading:i}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24246),i=n(20595),a=n(79894),l=n.n(a),o=n(27378);let{Text:s}=i.AntTypography,c=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,r.jsx)(s,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,r.jsx)(i.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,r.jsx)(l(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,r.jsx)(i.zrq,{items:a,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var r=n(27378),i=n(36866);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.h)(e),{pageIndex:n,pageSize:a,updatePageIndex:l,updatePageSize:o,pageSizeOptions:s,showSizeChanger:c}=t,u=(0,r.useMemo)(()=>({current:n,pageSize:a,showSizeChanger:c,pageSizeOptions:s.map(String),onChange:l,onShowSizeChange:(e,t)=>{o(t)}}),[n,a,c,s,l,o]);return{...t,paginationProps:u}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return r.Bd},L5:function(){return r.L5},MO:function(){return r.MO},qb:function(){return r.qb}});var r=n(5785)},84954:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r,i,a=n(24246),l=n(20595),o=n(25980),s=n(86677),c=n(27378),u=n(30952),d=n(35287),f=n(812),p=n(17245),h=n(77830),v=n(58754),x=n(9270),m=n(46628),g=n(37059),j=n(70675),y=n(65735),b=n(31883),_=n(98052),w=n.n(_);(r=i||(i={})).LOW="low",r.HIGH="high",r.MANUAL="manual";let S="load_more",C="skeleton",k=["Attention Required","In Review","Classifying","Approved","Unmonitored","Confirmed","Removed"],I={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}};Object.values(i);let N=e=>{var t,n,r;let{resourceStatus:o,setResourceStatus:s,confidenceScore:c,setConfidenceScore:u,dataCategory:d,setDataCategory:f,reset:p,monitorId:h}=e,{data:v}=(0,g.S0)({monitor_config_id:h},{refetchOnMountOrArgChange:!0}),x=null==v?void 0:null===(t=v.diff_status)||void 0===t?void 0:t.reduce((e,t)=>{let n=Object.values(y.LL).find(e=>e===t),r=n?I[n].label:null;return r&&!e.includes(r)?[...e,r]:e},[]),m=null==v?void 0:null===(n=v.confidence_score)||void 0===n?void 0:n.reduce((e,t)=>{let n=Object.values(i).find(e=>e===t);return n?[...e,n]:e},[]);return(0,a.jsx)(l.V4A,{variant:"borderless",style:{boxShadow:"var(--ant-box-shadow-secondary)"},children:(0,a.jsx)(l.vyj,{size:"middle",className:"p-[var(--ant-padding)]",children:(0,a.jsxs)(l.PPS,{layout:"vertical",children:[(0,a.jsx)(l.PPS.Item,{label:"Status",className:"w-min whitespace-nowrap",children:(0,a.jsx)(l.E_O.Group,{value:o||[],onChange:e=>s(e.length>0?e:null),children:(0,a.jsx)(l.bue,{children:null==x?void 0:x.flatMap(e=>(0,a.jsx)(l.JGx,{span:24,children:(0,a.jsx)(l.E_O,{value:e,children:e})},e))})})}),(0,a.jsx)(l.PPS.Item,{label:"Confidence",className:"w-min whitespace-nowrap",children:(0,a.jsx)(l.E_O.Group,{value:c||[],onChange:e=>u(e.length>0?e:null),children:(0,a.jsx)(l.bue,{children:null==m?void 0:m.map(e=>(0,a.jsx)(l.JGx,{span:24,children:(0,a.jsx)(l.E_O,{value:e,children:w()(e)})},e))})})}),(null==v?void 0:v.data_category)&&(null==v?void 0:null===(r=v.data_category)||void 0===r?void 0:r.length)>0&&(0,a.jsx)(l.PPS.Item,{label:"Data category",className:"w-min whitespace-nowrap",children:(0,a.jsx)(l.E_O.Group,{value:d||[],onChange:e=>f(e.length>0?e:null),children:(0,a.jsx)(l.bue,{children:v.data_category.map(e=>(0,a.jsx)(l.JGx,{span:24,children:(0,a.jsx)(l.E_O,{value:e,children:w()(e)})},e))})})}),(0,a.jsx)(l.wpx,{onClick:()=>{p()},children:"Clear"})]})})})};var P=n(16394),L=n(79283),D=n(34929),R=e=>{let{...t}=e,{getDataCategoryDisplayNameProps:n,getDataCategories:r}=(0,D.Z)(),i=r(),[o,s]=(0,c.useState)(!1),u=i.map(e=>{let{name:t,primaryName:r}=n(e.fides_key);return{value:e.fides_key,label:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:r||t}),r&&": ".concat(t)]}),name:t,primaryName:r,description:e.description||""}});return(0,a.jsx)(L.l,{options:u,prefix:(0,a.jsx)(l.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,a.jsx)(l.PJP.mm_,{})}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:o,onOpenChange:e=>s(e),onSelect:(e,n)=>{t.onSelect&&t.onSelect(e,n),s(!1)},...t})};let A=e=>{let{label:t,closable:n,onClose:r,isFromClassifier:i}=e;return(0,a.jsx)(l.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:r,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:i&&(0,a.jsx)(l.QMR,{}),children:(0,a.jsx)(l.lKn,{size:"sm",children:t})})};var E=e=>{var t,n;let{urn:r,classifications:o,name:s,diff_status:c,selected:u,onSelect:d,onSetDataCategories:f,user_assigned_data_categories:p,onIgnore:h}=e;return(0,a.jsx)(l.krs.Item,{actions:[o&&o.length>0&&(0,a.jsxs)(l.jqI,{gap:"small",align:"center",className:"pr-[var(--ant-padding-xl)]",children:[(0,a.jsx)(l.HwE,{percent:o.find(e=>e.confidence_score===i.HIGH)?100:25,percentPosition:{align:"start",type:"outer"},strokeColor:o.find(e=>e.confidence_score===i.HIGH)?"var(--ant-color-success-text)":"var(--ant-color-warning-text)",steps:2,showInfo:!1,strokeLinecap:"round",size:[24,8]}),(0,a.jsx)(l.lKn,{size:"sm",type:"secondary",className:"font-normal",children:(0,P.kC)(o.find(e=>e.confidence_score===i.HIGH)?i.HIGH:i.LOW)})]},"progress"),o&&o.length>0&&(0,a.jsx)(l.wpx,{"aria-label":"Approve",icon:(0,a.jsx)(l.PJP.MCw,{}),size:"small"},"approve"),c!==y.LL.MUTED&&(0,a.jsx)(l.wpx,{icon:(0,a.jsx)(l.PJP.uzw,{}),size:"small","aria-label":"Ignore",onClick:()=>h(r)},"ignore"),(0,a.jsx)(l.wpx,{"aria-label":"Reclassify",icon:(0,a.jsx)(l.QMR,{}),size:"small"},"reclassify")],children:(0,a.jsx)(l.krs.Item.Meta,{avatar:(0,a.jsx)(l.E_O,{checked:u,onChange:e=>d&&d(r,e.target.checked)}),title:(0,a.jsx)(l.jqI,{justify:"space-between",children:(0,a.jsxs)(l.jqI,{gap:"small",align:"center",className:"w-full",children:[s,c&&(0,a.jsx)(l.j8w,{bordered:!1,color:I[c].color,className:"font-normal text-[var(--ant-font-size-sm)]",children:I[c].label}),(0,a.jsx)(l.lKn,{size:"sm",type:"secondary",className:"overflow-hidden font-normal",ellipsis:{tooltip:r},children:r})]})}),description:(0,a.jsx)(R,{mode:"tags",value:[...null!==(t=null==o?void 0:o.map(e=>{let{label:t}=e;return t}))&&void 0!==t?t:[],...null!==(n=null==p?void 0:p.map(e=>e))&&void 0!==n?n:[]],tagRender:e=>A({...e,isFromClassifier:!!(null==o?void 0:o.find(t=>t.label===e.value))}),onChange:e=>{f(e.flatMap(e=>(null==o?void 0:o.find(t=>t.label!==e))?[]:[e]),r)}})})},r)},O=n(3124),z=n.n(O);let M=(e,t)=>e.find(e=>{let{children:n}=e;return n&&!!n.find(e=>e.key.toString()===t)}),q=(e,t)=>e.reduce((e,n)=>{if(n.children){var r;return null!==(r=M(n.children,t))&&void 0!==r?r:q(n.children,t)}return e},null),T=e=>{let{node:t,treeData:n,onLoadMore:r}=e;if(!t.title)return null;if(t.key.toString().startsWith(S)){let e=q(n,t.key.toString());return(0,a.jsx)(l.wpx,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&r(e.key.toString())},className:"p-0",children:t.title})}if(t.key.toString().startsWith(C))return(0,a.jsx)(l.N_L,{paragraph:!1,title:{width:"80px"},active:!0,children:t.title});let i=(()=>{switch(t.status){case y.Ag.ADDITION:return z().FIDESUI_SUCCESS;case y.Ag.REMOVAL:return z().FIDESUI_ERROR;case y.Ag.CHANGE:return z().FIDESUI_WARNING;default:return null}})();return(0,a.jsxs)(l.jqI,{gap:4,align:"center",className:"inline-flex",children:[i&&(0,a.jsx)(l.PJP.fRw,{className:"size-2",style:{color:i}}),(0,a.jsx)(l.lKn,{ellipsis:{tooltip:t.title},children:t.title})]})},F=(e,t)=>{var n;let r=e.items.map(e=>({title:e.name,key:e.urn,selectable:!0,icon:()=>{switch(e.resource_type){case"Database":return(0,a.jsx)(l.PJP.S9g,{className:"h-full"});case"Schema":return(0,a.jsx)(l.PJP.ehp,{className:"h-full"});case"Table":return(0,a.jsx)(l.PJP.iA_,{className:"h-full"});case"Field":return(0,a.jsx)(l.PJP.$4y,{className:"h-full"});default:return null}},status:e.update_status,isLeaf:!e.has_grandchildren}));return(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0)<100?r:[...r,{title:"Load more...",key:"".concat(S,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},U=(e,t,n)=>e.map(e=>{if(e.key===t){var r,i;return{...e,children:[...null!==(i=null===(r=e.children)||void 0===r?void 0:r.filter(e=>!(e.key.toString().startsWith(S)||e.key.toString().startsWith(C))))&&void 0!==i?i:[],...n]}}return e.children?{...e,children:U(e.children,t,n)}:e}),G=(e,t,n)=>e.map(e=>e.key===t?{...e,children:n}:e.children?{...e,children:G(e.children,t,n)}:e);var H=e=>{let{selectedNodeKeys:t,setSelectedNodeKeys:n,onClickClassifyButton:r}=e,i=decodeURIComponent((0,s.useRouter)().query.monitorId),[o]=(0,g.RV)(),[u,d]=(0,c.useState)({}),[f,p]=(0,c.useState)([]),h=(0,c.useRef)({}),v=(0,c.useRef)({}),x=(0,c.useCallback)(async e=>{var t;let{nodeKey:n,queryParams:r,updateFn:i,onFastDataLoaded:a}=e,l=(null!==(t=h.current[n])&&void 0!==t?t:0)+1;h.current[n]=l;let s=o({...r,include_descendant_details:!1}),c=o({...r,include_descendant_details:!0});s.then(e=>{let{data:t}=e;if(t&&h.current[n]===l&&v.current[n]!==l){var o;i(t),null==a||a(null!==(o=r.page)&&void 0!==o?o:1)}}),c.then(e=>{let{data:t}=e;t&&h.current[n]===l&&(v.current[n]=l,i(t))})},[o]),m=e=>{let t=null==u?void 0:u[e];if(t){let n=t.pageIndex+1;p(t=>U(t,e,[...Array(100)].map((t,n)=>({key:"".concat(C,"-").concat(e,"-").concat(n),title:"SKELETON",isLeaf:!0})))),x({nodeKey:e,queryParams:{monitor_config_id:i,staged_resource_urn:e,size:100,page:n},updateFn:t=>{p(n=>U(n,e,F(t,e)))},onFastDataLoaded:t=>{d({...u,[e]:{pageSize:100,pageIndex:t}})}})}};return(0,c.useEffect)(()=>{(async()=>{f.length>0||x({nodeKey:"root",queryParams:{monitor_config_id:i,size:100},updateFn:e=>{p(F(e))}})})()},[x,i,p,f.length]),(0,a.jsxs)(l.jqI,{gap:"middle",vertical:!0,className:"h-full",children:[(0,a.jsx)(l.lQT,{level:3,className:"sticky top-0",children:"Schema explorer"}),(0,a.jsx)(l.a$q,{loadData:e=>{let{children:t,key:n}=e;return new Promise(e=>{if(t){e();return}let r=n.toString();x({nodeKey:r,queryParams:{monitor_config_id:i,staged_resource_urn:r,size:100},updateFn:e=>{p(t=>G(t,n,F(e,r)))},onFastDataLoaded:()=>{d({...u,[r]:{pageSize:100,pageIndex:1}})}}),e()})},treeData:f,onSelect:(e,t)=>n(t.selectedNodes.map(e=>{let{key:t}=e;return t})),showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden",titleRender:e=>(0,a.jsx)(T,{node:e,treeData:f,onLoadMore:m})}),t.length>0&&(0,a.jsxs)(l.jqI,{justify:"space-between",align:"center",children:[(0,a.jsxs)("span",{children:[t.length," selected"]}),(0,a.jsx)(l.wpx,{"aria-label":"Classify ".concat(t.length," Selected Nodes"),icon:(0,a.jsx)(l.QMR,{}),size:"small",onClick:r})]})]})},J=n(40431);let W=()=>{let[e,t]=(0,J.v1)("resourceStatus",(0,J.S$)((0,J.km)(k))),[n,r]=(0,J.v1)("confidenceScore",(0,J.S$)((0,J.jx)(Object.values(i)))),[a,l]=(0,J.v1)("dataCategory",(0,J.S$)(J.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceScore:n,setConfidenceScore:r,dataCategory:a,setDataCategory:l,reset:()=>{t(null),r(null),l(null)}}},$=e=>Object.values(y.LL).flatMap(t=>I[t].label===e?[t]:[]);var K=()=>{let e=decodeURIComponent((0,s.useRouter)().query.monitorId),{paginationProps:t,pageIndex:n,pageSize:r,resetPagination:i}=(0,x.S)({defaultPageSize:25}),o=(0,p.Rx)(),{resourceStatus:y,confidenceScore:_,dataCategory:w,...S}=W(),{data:C}=(0,g.vc)({monitor_config_id:e}),[k,I]=(0,c.useState)([]),[P,L]=(0,c.useState)([]),{data:D}=(0,g.Fp)({monitor_config_id:e,size:r,page:n,staged_resource_urn:k.map(e=>e.toString()),search:o.searchProps.value,diff_status:y?y.flatMap($):void 0,confidence_score:_||void 0,data_category:w||void 0}),R=(0,l.pmc)(),[A]=(0,g.Av)(),[O]=(0,j.NA)(),[z]=(0,g.nS)(),{errorAlert:M}=(0,p.VY)(),[q]=(0,j.Hf)(),T=async(t,n)=>{let r=await O({monitor_config_id:e,staged_resource_urn:n,user_assigned_data_categories:t});(0,b.D4)(r)&&M((0,f.e$)(r.error))},F=async e=>{let t=await z({urnList:[e]});(0,b.D4)(t)&&M((0,f.e$)(t.error))},U=async e=>{let t=await q({staged_resource_urns:e});(0,b.D4)(t)&&M((0,f.e$)(t.error))},G=async()=>{let t=await A({monitor_config_key:e,staged_resource_urns:k.flatMap(e=>"bigint"!=typeof e?[e.toString()]:[])});if((0,b.D4)(t)){R((0,m.Vo)((0,f.e$)(t.error)));return}R((0,m.t5)("Classifying initiated"))};return(0,c.useEffect)(()=>{i()},[y,_,k,o.searchQuery,w]),(0,a.jsxs)(d.Z,{title:"Action center - Discovered assets by system",mainProps:{overflow:"hidden"},children:[(0,a.jsx)(v.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:h.vi},{title:e}],isSticky:!1}),(0,a.jsxs)(l.LgQ,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,a.jsx)(l.LgQ.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,a.jsx)(H,{selectedNodeKeys:k,setSelectedNodeKeys:I,onClickClassifyButton:G})}),(0,a.jsx)(l.LgQ.Panel,{style:{paddingLeft:"var(--ant-padding-md)"},children:(0,a.jsxs)(l.jqI,{vertical:!0,gap:"middle",className:"h-full overflow-hidden",children:[(0,a.jsxs)(l.jqI,{justify:"space-between",children:[(0,a.jsx)(l.lQT,{level:2,children:"Monitor results"}),(0,a.jsx)(l.jqI,{align:"center",children:(null==C?void 0:C.last_monitored)&&(0,a.jsxs)(l.lKn,{type:"secondary",children:["Last scan:"," ",new Date(null==C?void 0:C.last_monitored).toLocaleString()]})})]}),(0,a.jsxs)(l.jqI,{justify:"space-between",children:[(0,a.jsx)(u.f,{value:o.searchQuery,onChange:o.updateSearch,placeholder:"Search"}),(0,a.jsxs)(l.jqI,{gap:"small",children:[(0,a.jsx)(l.S0p,{trigger:["click"],popupRender:()=>(0,a.jsx)(N,{resourceStatus:y,confidenceScore:_,dataCategory:w,...S,monitorId:e}),children:(0,a.jsx)(l.wpx,{icon:(0,a.jsx)(l.PJP._ME,{}),iconPosition:"end",children:"Filter"})}),(0,a.jsx)(l.S0p,{menu:{items:[{key:"promote",onClick:()=>U(P),label:"Promote"}]},disabled:P.length<=0,children:(0,a.jsx)(l.wpx,{type:"primary",icon:(0,a.jsx)(l.PJP._ME,{}),iconPosition:"end",children:"Actions"})})]})]}),(0,a.jsx)(l.krs,{dataSource:null==D?void 0:D.items,className:"overflow-scroll",renderItem:e=>E({...e,selected:P.includes(e.urn),onSelect:(e,t)=>t?L([...P,e]):L(P.filter(t=>t!==e)),onSetDataCategories:T,onIgnore:F})}),(0,a.jsx)(l.B7X,{...t,showSizeChanger:!1,total:(null==D?void 0:D.total)||0})]})})]})]})};let Q=()=>(0,a.jsxs)(a.Fragment,{children:["Attempting to access the alpha version of monitor results without setting the ",(0,a.jsx)(l.lKn,{code:!0,children:"alphaFullActionCenter"})," flag"]});var B=()=>{let{flags:e}=(0,o.hz)();return e.alphaFullActionCenter?(0,a.jsx)(K,{}):(0,a.jsx)(l.ux6,{status:"error",title:(0,a.jsx)(Q,{})})}},31883:function(e,t,n){"use strict";n.d(t,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=n(19043)},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,8765,9278,5163,7245,7059,2888,9774,179],function(){return e(e.s=11666)}),_N_E=e.O()}]);