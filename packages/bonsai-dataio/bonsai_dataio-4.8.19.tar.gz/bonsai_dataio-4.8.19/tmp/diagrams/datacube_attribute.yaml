name: data_cube
resources:
  # Dimension tables
  - name: dim_product
    package: data_cube
    schema:
      fields:
        - {name: code, type: str}
        - {name: name, type: str}
        - {name: description, type: str}
        - {name: position, type: int}
      primaryKeys: [code] 
      foreignKeys: 
        - fields: [code]
          reference: 
            fields: [code]
            resource: class_flow_object
            package: attr_flow_object


  - name: dim_region
    package: data_cube
    schema:
      fields:
        - {name: code, type: str}
        - {name: name, type: str}
        - {name: description, type: str}
        - {name: position, type: int}
      primaryKeys: [code] 
      foreignKeys: 
        - fields: [code]
          reference: 
            fields: [code]
            resource: class_geography
            package: attr_geography

  # Fact tables
  - name: fact_trade
    package: data_cube
    schema:
      fields:
        - {name: id, type: int}
        - {name: product, type: str}
        - {name: source_region, type: str}
        - {name: target_region, type: str}
        - {name: fact, type: float}
      primaryKeys: [id] 
      foreignKeys: 
        - fields: [product]
          reference: 
            fields: [code]
            resource: dim_product
        - fields: [source_region]
          reference: 
            fields: [code]
            resource: dim_region
        - fields: [target_region]
          reference: 
            fields: [code]
            resource: dim_region

