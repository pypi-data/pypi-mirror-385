when:
  event: [ push, tag ]
  path: [ "slidge/**/*.py", "superduper/**/*.py", "docs/**/*" ]

labels:
  platform: linux/amd64

steps:
  build:
    image: codeberg.org/slidge/slidge:ci-3.13
    pull: true
    commands:
      - uv sync --all-groups --all-extras
      - cd docs
      - make html

  publish:
    image: codeberg.org/slidge/woodpecker-publish-pages
    pull: true
    settings:
      token:
        from_secret: CODEBERG_TOKEN
