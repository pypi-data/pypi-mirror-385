Metadata-Version: 2.4
Name: fastflight
Version: 0.4.2
Summary: FastFlight is a high-performance data transfer framework that integrates Apache Arrow Flight to fetch and stream large-scale data from multiple sources, using a modular, pluggable architecture for various data services, and offers optional FastAPI integration for HTTP-based access.
Author-email: Chao Ning <chao.ning.uk@gmail.com>
License-File: LICENSE
Requires-Python: >=3.10
Requires-Dist: pandas
Requires-Dist: pyarrow>=14
Requires-Dist: pydantic>=2.0
Requires-Dist: typing-extensions>=4.5.0
Provides-Extra: all
Requires-Dist: duckdb; extra == 'all'
Requires-Dist: fastapi[standard]; extra == 'all'
Requires-Dist: httpx; extra == 'all'
Requires-Dist: matplotlib>=3.10.1; extra == 'all'
Requires-Dist: rich; extra == 'all'
Requires-Dist: seaborn>=0.13.2; extra == 'all'
Requires-Dist: sqlalchemy>=2.0.38; extra == 'all'
Requires-Dist: structlog; extra == 'all'
Requires-Dist: typer>=0.15.2; extra == 'all'
Provides-Extra: cli
Requires-Dist: typer>=0.15.2; extra == 'cli'
Provides-Extra: examples
Requires-Dist: duckdb; extra == 'examples'
Requires-Dist: httpx; extra == 'examples'
Requires-Dist: matplotlib>=3.10.1; extra == 'examples'
Requires-Dist: rich; extra == 'examples'
Requires-Dist: seaborn>=0.13.2; extra == 'examples'
Requires-Dist: sqlalchemy>=2.0.38; extra == 'examples'
Provides-Extra: fastapi
Requires-Dist: fastapi[standard]; extra == 'fastapi'
Provides-Extra: structlog
Requires-Dist: structlog; extra == 'structlog'
Description-Content-Type: text/markdown

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/cning112/fastflight)

# **FastFlight** üöÄ

**FastFlight** is a framework built on **Apache Arrow Flight**, designed to simplify **high-performance data transfers**
while improving **usability, integration, and developer experience**.

It addresses common **challenges** with native Arrow Flight, such as **opaque request formats, debugging difficulties,
complex async management, and REST API incompatibility**. **FastFlight** makes it easier to adopt Arrow Flight in
existing systems.

## **‚ú® Key Advantages**

‚úÖ **Typed Param Classes** ‚Äì All data requests are defined via structured, type-safe parameter classes. Easy to debug and
validate.  
‚úÖ **Service Binding via `param_type`** ‚Äì Clean and explicit mapping from param class ‚Üí data service. Enables dynamic
routing and REST support.  
‚úÖ **Async & Streaming Ready** ‚Äì `async for` support with non-blocking batch readers. Ideal for high-throughput
systems.  
‚úÖ **REST + Arrow Flight** ‚Äì Use FastAPI to expose Arrow Flight services as standard REST endpoints (e.g., `/stream`).  
‚úÖ **Plug-and-Play Data Sources** ‚Äì Includes an Echo demo service to help you get started quickly ‚Äî extending to other
sources is straightforward.  
‚úÖ **Built-in Registry & Validation** ‚Äì Automatic binding discovery and safety checks. Fail early if service is
missing.  
‚úÖ **Pandas / PyArrow Friendly** ‚Äì Streamlined APIs for transforming results into pandas DataFrame or Arrow Table.  
‚úÖ **CLI-First** ‚Äì Unified command line to launch, test, and inspect services.

**FastFlight is ideal for high-throughput data systems, real-time querying, log analysis, and financial applications.**

---

## **üöÄ Quick Start**

### **1Ô∏è‚É£ Install FastFlight**

```bash
pip install "fastflight[all]"
```

or use `uv`

```bash
uv add "fastflight[all]"
```

### **2Ô∏è‚É£ Start the Server**

```bash
# Start both FastFlight and REST API servers
fastflight start-all --flight-location grpc://0.0.0.0:8815 --rest-host 0.0.0.0 --rest-port 8000
```

This launches both gRPC and REST servers, allowing you to use REST APIs while streaming data via Arrow Flight.

### **3Ô∏è‚É£ Test with Demo Service**

```bash
# Example REST API call to Echo demo service
curl -X POST "http://localhost:8000/fastflight/stream" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "fastflight.demo_services.echo_demo.EchoParams",
    "message": "Hello FastFlight!"
  }'
```

---

## **üéØ Using the CLI**

FastFlight provides a command-line interface (CLI) for easy management of **Arrow Flight and REST API servers**.

### **Start Individual Services**

```bash
# Start only the FastFlight server
fastflight start-flight-server --flight-location grpc://0.0.0.0:8815

# Start only the REST API server
fastflight start-rest-server --rest-host 0.0.0.0 --rest-port 8000 --flight-location grpc://0.0.0.0:8815
```

### **Start Both Services**

```bash
fastflight start-all --flight-location grpc://0.0.0.0:8815 --rest-host 0.0.0.0 --rest-port 8000
```

**Important**: When using the `/stream` REST endpoint, ensure the `type` field is included in the request body for
proper service routing.

---

## **üê≥ Docker Deployment**

### **Build Options**

FastFlight provides multi-stage Docker builds for different purposes:

```bash
# Build production image (optimized for size) 
docker build --target production -t fastflight:prod .

# Build development image (includes dev tools and dependencies)  
docker build --target development -t fastflight:dev .

# Default build (production)
docker build -t fastflight:latest .
```

### **Quick Start with Docker Compose**

```bash
# Production setup (separated services for scalability)
docker-compose up

# Development setup (single container with both servers)
docker-compose --profile dev up fastflight-dev-servers

# Interactive development (shell access with full dev environment)
docker-compose --profile dev run fastflight-dev-shell

# Background mode
docker-compose up -d
```

### **Manual Docker Commands**

```bash
# Production: Run both servers (default command)
docker run -p 8000:8000 -p 8815:8815 fastflight:prod

# Production: Run only FastFlight server
docker run -p 8815:8815 fastflight:prod start-flight-server

# Production: Run only REST API server
docker run -p 8000:8000 fastflight:prod start-rest-server

# Development: Interactive shell with all dev tools
docker run -it -v $(pwd):/app fastflight:dev
```

### **Image Characteristics**

- **Production Image**: Optimized size, no dev dependencies, runs as non-root user `fastflight`
- **Development Image**: Full development environment, includes docs/examples/tests, editable installs, root access for
  flexibility

See **[Docker Guide](./docs/DOCKER.md)** for complete deployment options and configuration.

---

## **üí° Usage Examples**

For comprehensive examples, see the [`examples/` directory](./examples/) which includes:

- **Multi-Protocol Demo**: [`examples/multi_protocol_demo/`](./examples/multi_protocol_demo/) - Complete demonstration
  of FastFlight with both gRPC and REST interfaces
- **Benchmark Tools**: [`examples/benchmark/`](./examples/benchmark/) - Performance measurement and analysis comparing
  sync vs async operations

### **Python Client Example**

```python
from fastflight import FastFlightBouncer
from fastflight.demo_services.echo_demo import EchoParams

# Create client
client = FastFlightBouncer("grpc://localhost:8815")

# Define query parameters
params = EchoParams(message="Hello FastFlight!")

# Fetch data as Arrow Table
table = client.get_pa_table(params)
print(f"Received {len(table)} rows")

# Convert to Pandas DataFrame
df = table.to_pandas()
print(df)
```

### **Async Streaming Example**

```python
import asyncio
from fastflight import FastFlightBouncer


async def stream_data():
    client = FastFlightBouncer("grpc://localhost:8815")

    async for batch in client.aget_record_batches(params):
        print(f"Received batch with {batch.num_rows} rows")
        # Process batch incrementally


asyncio.run(stream_data())
```

---

## **üìñ Documentation**

- **[Data Service Developer Guide](DATA_SERVICE_DEV_GUIDE.md)** ‚Äì Guide for implementing custom data services
- **[CLI Guide](./docs/CLI_USAGE.md)** ‚Äì Detailed CLI usage instructions
- **[Docker Deployment](./docs/DOCKER.md)** ‚Äì Container deployment and Docker Compose guide
- **[Error Handling](./docs/ERROR_HANDLING.md)** ‚Äì Comprehensive error handling and resilience patterns
- **[Technical Details](./TECHNICAL_DETAILS.md)** ‚Äì In-depth implementation details and architecture
- **[FastAPI Integration](./src/fastflight/fastapi_integration/README.md)** ‚Äì REST API integration guide

---

## **üõ† Custom Data Services**

FastFlight supports extending to custom data sources. See **[Data Service Developer Guide](DATA_SERVICE_DEV_GUIDE.md)**
for implementation details.

---

## **üõ† Future Plans**

‚úÖ **Structured Ticket System** (Completed)  
‚úÖ **Async & Streaming Support** (Completed)  
‚úÖ **REST API Adapter** (Completed)  
‚úÖ **CLI Support** (Completed)  
‚úÖ **Enhanced Error Handling & Resilience** (Completed)  
üîÑ **Support for More Data Sources (SQL, NoSQL, Kafka)** (In Progress)  
üîÑ **Performance Benchmarking Tools** (In Progress)  
üîÑ **Production Monitoring & Observability** (Planned)

Contributions are welcome! If you have suggestions or improvements, feel free to submit an Issue or PR. üöÄ

---

## **üìú License**

This project is licensed under the **MIT License**.

---

**üöÄ Ready to accelerate your data transfers? Get started today!**