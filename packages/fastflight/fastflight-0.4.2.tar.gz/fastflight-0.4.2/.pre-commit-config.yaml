default_stages: [ pre-commit ]

repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.12.2
    hooks:
      - id: ruff-check
        args: [ --fix ]  # Pre-commit should fix issues automatically
        types_or: [ python, pyi, jupyter ]
      - id: ruff-format
        types_or: [ python, pyi, jupyter ]

  - repo: https://github.com/astral-sh/uv-pre-commit
    rev: 0.8.3
    hooks:
      - id: uv-lock
        files: pyproject.toml

      - id: uv-export
        name: export-requirements-dev
        args: [ --all-extras, --all-groups, --locked, --no-hashes, --no-emit-project, --output-file, requirements.txt ]
        files: ^(pyproject\.toml|uv\.lock)$

  # Use local hook to run mypy with project's uv environment
  - repo: local
    hooks:
      - id: mypy
        name: mypy
        entry: uv run --all-extras --all-groups mypy
        language: system
        args: [ "--config-file=pyproject.toml" ]
        require_serial: true
        pass_filenames: false
