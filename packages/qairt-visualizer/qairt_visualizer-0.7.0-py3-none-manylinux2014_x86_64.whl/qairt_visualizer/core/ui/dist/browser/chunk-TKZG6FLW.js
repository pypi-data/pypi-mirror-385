import{a as u}from"./chunk-GAUD627J.js";import"./chunk-43LQFSHA.js";var o={};o.BinaryReader=class{static open(t,e){return e=e||0,t instanceof Uint8Array?new o.BufferReader(t,e):t.length<536870912?(t=t.peek(),new o.BufferReader(t,e)):new o.StreamReader(t,e)}constructor(){this._utf8Decoder=new TextDecoder("utf-8")}signature(){let t=new Map;this._position=0;try{if(this._length>0){let e=this.byte()&7;if(this.skip(-1),e!==4&&e!==6&&e!==7){let i=this.length;for(;this._position<i;){let s=this.uint32(),n=s>>>3,r=s&7;if(r>5||n===0){t.clear();break}if(t.set(n,r),!this._skipType(r)){t.clear();break}}}}}catch{t.clear()}return this._position=0,t}decode(){let t={};this._position=0;try{let e=i=>{let s=this._uint32();if(s===void 0)return;let n=this.position+s;if(!(n>i)){try{let r={};for(;this.position<n;){let a=this._uint32();if(a===void 0)return this.seek(n),2;let h=a>>>3,c=a&7;if(c>5||h===0)return this.seek(n),2;if(c===2){let f=r[h];if(f!==2){let d=e(n);if(this.position>n)return this.seek(n),2;if(d===void 0)return this.seek(n),2;if(d===2)r[h]=d;else if(f)for(let[l,_]of Object.entries(d))f[l]===2&&_!==2||(f[l]=_);else r[h]=d;continue}}if(r[h]=c,!this._skipType(c))return this.seek(n),2}if(this.position===n)return r}catch{}return this.seek(n),2}};if(this._length>0){let i=this.byte()&7;if(this.skip(-1),i!==4&&i!==6&&i!==7){let s=this.length;for(;this.position<s;){let n=this.uint32(),r=n>>>3,a=n&7;if(a>5||r===0){t={};break}if(a===2){let h=t[r];if(h!==2){let c=e(s);if(c===void 0){t={};break}if(c===2)t[r]=c;else if(h)for(let[f,d]of Object.entries(c))h[f]===2&&d!==2||(h[f]=d);else t[r]=c;continue}}if(t[r]=a,!this._skipType(a)){t={};break}}}}}catch{t={}}return this._position=0,t}get length(){return this._length}get position(){return this._position}seek(t){this._position=t>=0?t:this._length+t}bytes(){let t=this.uint32();return this.read(t)}string(){let t=this.bytes();return this._utf8Decoder.decode(t)}bool(){return this.uint32()!==0}uint32(){let t=this.byte(),e=(t&127)>>>0;if(t<128||(t=this.byte(),e=(e|(t&127)<<7)>>>0,t<128)||(t=this.byte(),e=(e|(t&127)<<14)>>>0,t<128)||(t=this.byte(),e=(e|(t&127)<<21)>>>0,t<128)||(t=this.byte(),e+=(t&127)*268435456,t<128))return e;if(this.byte()!==255||this.byte()!==255||this.byte()!==255||this.byte()!==255||this.byte()!==1)throw new o.Error("Varint is not 32-bit.");return e}_uint32(){if(this._position<this._length){let t=this.byte(),e=(t&127)>>>0;if(t<128)return e;if(this._position<this._length){if(t=this.byte(),e=(e|(t&127)<<7)>>>0,t<128)return e;if(this._position<this._length){if(t=this.byte(),e=(e|(t&127)<<14)>>>0,t<128)return e;if(this._position<this._length){if(t=this.byte(),e=(e|(t&127)<<21)>>>0,t<128)return e;if(this._position<this._length)return t=this.byte(),e+=(t&127)*268435456,t<128?e:this.byte()!==255||this.byte()!==255||this.byte()!==255||this.byte()!==255||this.byte()!==1?void 0:e}}}}}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}int64(){return BigInt.asIntN(64,this.varint())}uint64(){return this.varint()}sint64(){let t=this.varint();return t>>1n^-(t&1n)}array(t,e,i){if((i&7)===2){let s=this.uint32()+this._position;for(;this._position<s;)t.push(e())}else t.push(e());return t}floats(t,e){if((e&7)===2){if(t&&t.length>0)throw new o.Error("Invalid packed float array.");let i=this.uint32(),s=this._position+i;s>this._length&&this._unexpected();let n=i>>>2;t=i>1048576?new Float32Array(n):new Array(n);for(let r=0;r<n;r++)t[r]=this.float();this._position=s}else t!==void 0&&t.length<=67108864?t.push(this.float()):(t=void 0,this.float());return t}doubles(t,e){if((e&7)===2){if(t&&t.length>0)throw new o.Error("Invalid packed float array.");let i=this.uint32(),s=this._position+i;s>this._length&&this._unexpected();let n=i>>>3;t=i>1048576?new Float64Array(n):new Array(n);for(let r=0;r<n;r++)t[r]=this.double();this._position=s}else t!==void 0&&t.length<1e6?t.push(this.double()):(t=void 0,this.double());return t}skip(t){this._position+=t,this._position>this._length&&this._unexpected()}skipType(t){switch(t){case 0:this.skipVarint();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw new o.Error(`Invalid type '${t}' at offset ${this._position}.`)}}_skipType(t){switch(t){case 0:{do if(this._position>=this._length)return!1;while(this.byte()&128);break}case 1:{if(this._position+8>=this._length)return!1;this._position+=8;break}case 2:{let e=this.uint32();if(e===void 0||this._position+e>this._end)return!1;this._position+=e;break}case 3:{for(;;){let e=this.uint32();if(e===void 0)return!1;let i=e&7;if(i===4)break;if(!this._skipType(i))return!1}break}case 5:{if(this._position+=4,this._position>this._length)return!1;break}default:return!1}return!0}entry(t,e,i){this.skipVarint(),this.skip(1);let s=e();!Number.isInteger(s)&&typeof s!="string"&&(s=Number(s)),this.skip(1);let n=i();t[s]=n}_unexpected(){throw new RangeError("Unexpected end of file.")}};o.BufferReader=class extends o.BinaryReader{constructor(t,e){super(),this._buffer=t,this._length=t.length,this._position=e||0,this._view=new DataView(t.buffer,t.byteOffset,t.byteLength)}skipVarint(){do this._position>=this._length&&this._unexpected();while(this._buffer[this._position++]&128)}read(t){let e=this._position;return this.skip(t),this._buffer.slice(e,this._position)}byte(){if(this._position<this._length)return this._buffer[this._position++];throw new RangeError("Unexpected end of file.")}fixed64(){let t=this._position;return this.skip(8),this._view.getBigUint64(t,!0)}sfixed64(){let t=this._position;return this.skip(8),this._view.getBigInt64(t,!0)}fixed32(){let t=this._position;return this.skip(4),this._view.getUint32(t,!0)}sfixed32(){let t=this._position;return this.skip(4),this._view.getInt32(t,!0)}float(){let t=this._position;return this.skip(4),this._view.getFloat32(t,!0)}double(){let t=this._position;return this.skip(8),this._view.getFloat64(t,!0)}varint(){let t=0n,e=0n;for(let i=0;i<10&&this._position<this._length;i++){let s=this._buffer[this._position++];if(t|=BigInt(s&127)<<e,!(s&128))return t;e+=7n}throw new o.Error("Invalid varint value.")}};o.StreamReader=class extends o.BinaryReader{constructor(t,e){super(new Uint8Array(0)),this._stream=t,this._length=t.length,this.seek(e||0)}skipVarint(){do this._position>=this._length&&this._unexpected();while(this.byte()&128)}read(t){return this._stream.seek(this._position),this.skip(t),this._stream.read(t)}byte(){let t=this._fill(1);return this._view.getUint8(t)}fixed64(){let t=this._fill(8);return this._view.getBigUint64(t,!0)}sfixed64(){let t=this._fill(8);return this._view.getBigInt64(t,!0)}fixed32(){let t=this._fill(4);return this._view.getUint32(t,!0)}sfixed32(){let t=this._fill(4);return this._view.getInt32(t,!0)}float(){let t=this._fill(4);return this._view.getFloat32(t,!0)}double(){let t=this._fill(8);return this._view.getFloat64(t,!0)}varint(){let t=0n,e=0n;for(let i=0;i<10&&this._position<this._length;i++){let s=this.byte();if(t|=BigInt(s&127)<<e,!(s&128))return t;e+=7n}throw new o.Error("Invalid varint value.")}_fill(t){if(this._position+t>this._length)throw new Error(`Expected ${this._position+t-this._length} more bytes. The file might be corrupted. Unexpected end of file.`);if(!this._buffer||this._position<this._offset||this._position+t>this._offset+this._buffer.length){this._offset=this._position,this._stream.seek(this._offset);let i=Math.min(268435456,this._length-this._offset);this._buffer=this._stream.read(i),this._view=new DataView(this._buffer.buffer,this._buffer.byteOffset,this._buffer.byteLength)}let e=this._position;return this._position+=t,e-this._offset}};o.TextReader=class{static open(t){if(t){let e=t instanceof Uint8Array?t:t.peek(),i=u.open(e),s=!0;for(let n=0;n<256;n++){let r=i.decode();if(r===void 0){if(n===0)return null;break}if(r==="\0")return null;let a=r===" "||r===`
`||r==="\r"||r==="	";if(r<" "&&!a)return null;if(s&&!a){if(s=!1,r==="#"){let h="";do h=i.decode();while(h!==void 0&&h!==`
`);if(h===void 0)break;continue}if(r==="["||r>="a"&&r<="z"||r>="A"&&r<="Z")continue;return null}}return new o.TextReader(e)}return null}constructor(t){this._decoder=u.open(t),this.reset()}signature(){let t=new Map;this.reset();try{for(this.start(!1);!this.end();){let e=this.tag();if(this.token()==="{")for(this.start(),t.set(e,!0);!this.end();){let i=this.tag();t.set(`${e}.${i}`,!0),this.skip(),this.match(",")}else this.skip(),t.set(e,!0)}}catch{t.has("[")&&t.clear()}return this.reset(),t}reset(){this._decoder.position=0,this._position=0,this._token=void 0,this._depth=0,this._arrayDepth=0,this._token="",this.next()}start(){this._depth>0&&this.expect("{"),this._depth++}end(){if(this._depth<=0)throw new o.Error(`Invalid depth ${this.location()}`);if(this._token==="}")return this.expect("}"),this.match(";"),this._depth--,!0;if(this._token===void 0){if(this._depth!==1)throw new o.Error(`Unexpected end of input ${this.location()}`);return this._depth--,!0}return!1}tag(){let t=this._token;return this.next(),this._token!=="["&&this._token!=="{"&&this.expect(":"),t}integer(){let t=this._token,e=Number.parseInt(t,10);if(Number.isNaN(t-e))throw new o.Error(`Couldn't parse integer '${t}' ${this.location()}`);return this.next(),this.semicolon(),e}double(){let t=0,e=this._token;switch(e){case"nan":t=NaN;break;case"inf":t=1/0;break;case"-inf":t=-1/0;break;default:if(e.endsWith("f")&&(e=e.substring(0,e.length-1)),t=Number.parseFloat(e),Number.isNaN(e-t))throw new o.Error(`Couldn't parse float '${e}' ${this.location()}`);break}return this.next(),this.semicolon(),t}float(){return this.double()}uint32(){return this.integer()}int32(){return this.integer()}sint32(){return this.integer()}int64(){return BigInt(this.integer())}uint64(){return BigInt.asUintN(64,BigInt(this.integer()))}sint64(){return BigInt(this.integer())}fixed64(){return BigInt.asUintN(64,BigInt(this.integer()))}sfixed64(){return BigInt(this.integer())}fixed32(){return this.integer()}sfixed32(){return this.integer()}string(){let t=this._token;if(t.length<2)throw new o.Error(`String is too short ${this.location()}`);let e=t.substring(0,1);if(e!=="'"&&e!=='"')throw new o.Error(`String is not in quotes ${this.location()}`);if(e!==t.substring(t.length-1))throw new o.Error(`String quotes do not match ${this.location()}`);let i=t.substring(1,t.length-1);return this.next(),this.semicolon(),i}bool(){let t=this._token;switch(t){case"true":case"True":case"1":return this.next(),this.semicolon(),!0;case"false":case"False":case"0":return this.next(),this.semicolon(),!1;default:throw new o.Error(`Couldn't parse boolean '${t}' ${this.location()}`)}}bytes(){let t=this.string(),e=t.length,i=new Uint8Array(e);for(let s=0;s<e;s++)i[s]=t.charCodeAt(s);return i}enum(t){let e=this._token,i=0;if(Object.prototype.hasOwnProperty.call(t,e))i=t[e];else if(i=Number.parseInt(e,10),Number.isNaN(e-i))throw new o.Error(`Couldn't parse enum '${e===void 0?"":e}' ${this.location()}`);return this.next(),this.semicolon(),i}any(t){this.start();let e=t();if(this._token.startsWith("[")&&this._token.endsWith("]"))e.type_url=this._token.substring(1,this._token.length-1).trim(),this.next(),this.match(":"),e.value=this.read(),this.match(";"),this.end()||this.expect("}");else for(;!this.end();){let i=this.tag();switch(i){case"type_url":e.type_url=this.string();break;case"value":e.value=this.bytes();break;default:this.field(i,e);break}}return e}anyarray(t,e){if(this.start(),this._token.startsWith("[")&&this._token.endsWith("]"))for(;!this.end();){if(this._token.startsWith("[")&&this._token.endsWith("]")){let i=e();i.type_url=this._token.substring(1,this._token.length-1).trim(),this.next(),this.match(":"),i.value=this.read(),this.match(";"),t.push(i);continue}this.expect("[")}else{let i=e();for(;!this.end();){let s=this.tag();switch(s){case"type_url":i.type_url=this.string();break;case"value":i.value=this.bytes();break;default:this.field(s,i);break}}t.push(i)}}entry(t,e,i){this.start();let s="",n=null;for(;!this.end();){let r=this.tag();switch(r){case"key":s=e();break;case"value":n=i();break;default:throw new o.Error(`Unsupported entry tag '${r}'.`)}}t[s]=n}array(t,e){if(this.first())for(;!this.last();)switch(t.push(e()),this._token){case",":this.next();break;case"]":break;default:this.handle(this._token);break}else t.push(e())}first(){return this.match("[")?(this._arrayDepth++,!0):!1}last(){return this.match("]")?(this._arrayDepth--,!0):!1}read(){let t=this._position;this.skip();let e=this._position,i=this._decoder.position;this._decoder.position=t;let s="";for(;this._decoder.position<e;)s+=this._decoder.decode();return this._decoder.position=i,s}skip(){switch(this._token){case"{":{let t=this._depth;for(this.start();!this.end()||t<this._depth;)this._token==="{"?this.start():this._token!=="}"&&(this.next(),this.match(";"));break}case"[":{let t=this._arrayDepth;for(this.first();!this.last()||t<this._arrayDepth;)this.next(),this._token==="["?this.first():this._token===void 0&&this.handle(this._token);break}default:{this.next(),this.semicolon();break}}}handle(t){throw new o.Error(`Unexpected token '${t}' ${this.location()}`)}field(t){throw new o.Error(`Unsupported field '${t}' ${this.location()}`)}token(){return this._token}next(){if(this._token===void 0)throw new o.Error(`Unexpected end of input ${this.location()}`);this._position=this._decoder.position;let t=this._decoder.decode();for(;;){switch(t){case" ":case`
`:case"\r":case"	":this._position=this._decoder.position,t=this._decoder.decode();continue;case"#":do if(t=this._decoder.decode(),t===void 0){this._token=void 0;return}while(t!==`
`);this._position=this._decoder.position,t=this._decoder.decode();continue;default:break}break}if(t===void 0){this._token=void 0;return}if(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"){let e=t,i=this._decoder.position;for(;t=this._decoder.decode(),!(t===void 0||t===`
`);){if(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="_"||t==="+"||t==="-"){e+=t,i=this._decoder.position;continue}break}this._decoder.position=i,this._token=e;return}switch(t){case"{":case"}":case":":case",":case"]":case";":this._token=t;return;case"[":{let e=t,i=this._decoder.position,s=this._decoder.decode();if(s!==void 0&&s>="a"&&s<="z"||s>="A"&&s<="Z")for(e+=s;s=this._decoder.decode(),!(s===void 0||s===`
`);){if(s>="a"&&s<="z"||s>="A"&&s<="Z"||s>="0"&&s<="9"||s==="."||s==="/"){e+=s,i=this._decoder.position;continue}if(s==="]"){this._token=e+s;return}}this._decoder.position=i,this._token="[";return}case'"':case"'":{let e=t,i=t;for(;;){if(t=this._decoder.decode(),t===void 0||t===`
`)throw new o.Error(`Unexpected end of string ${this.location()}`);if(t==="\\"){if(t=this._decoder.decode(),t===void 0||t===`
`)throw new o.Error(`Unexpected end of string ${this.location()}`);switch(t){case"\\":t="\\";break;case"'":t="'";break;case'"':t='"';break;case"r":t="\r";break;case"n":t=`
`;break;case"t":t="	";break;case"b":t="\b";break;case"x":case"X":{let s=0;for(let n=0;n<2;n++){let r=this._decoder.decode();if(r===void 0)throw new o.Error(`Unexpected end of string ${this.location()}`);if(r=r.charCodeAt(0),r>=65&&r<=70?r-=55:r>=97&&r<=102?r-=87:r>=48&&r<=57?r-=48:r=-1,r===-1)throw new o.Error(`Unexpected hex digit '${r}' in bytes string ${this.location()}`);s=s<<4|r}t=String.fromCharCode(s);break}default:{if(t<"0"||t>"9")throw new o.Error(`Unexpected character '${t}' in string ${this.location()}`);let s=0,n=t;if(n<"0"||n>"9")throw new o.Error(`Unexpected octal digit '${n}' in bytes string ${this.location()}`);if(n=n.charCodeAt(0),s=s<<3|n-48,n=this._decoder.decode(),n===void 0)throw new o.Error(`Unexpected end of string ${this.location()}`);if(n<"0"||n>"9")throw new o.Error(`Unexpected octal digit '${n}' in bytes string ${this.location()}`);if(n=n.charCodeAt(0),s=s<<3|n-48,n=this._decoder.decode(),n===void 0)throw new o.Error(`Unexpected end of string ${this.location()}`);if(n<"0"||n>"9")throw new o.Error(`Unexpected octal digit '${n}' in bytes string ${this.location()}`);n=n.charCodeAt(0),s=s<<3|n-48,t=String.fromCharCode(s);break}}i+=t;continue}else if(i+=t,t===e)break}this._token=i;return}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":case"+":case".":{let e=t,i=this._decoder.position;for(;t=this._decoder.decode(),!(t===void 0||t===`
`);){if(t>="0"&&t<="9"||t==="_"||t==="+"||t==="-"||t==="."||t==="e"||t==="E"){e+=t,i=this._decoder.position;continue}break}if(e==="-"&&t==="i"&&this._decoder.decode()==="n"&&this._decoder.decode()==="f"&&(e="-inf",i=this._decoder.position),e==="-"||e==="+"||e===".")throw new o.Error(`Unexpected token '${e}' ${this.location()}`);this._decoder.position=i,this._token=e;return}default:throw new o.Error(`Unexpected token '${t}' ${this.location()}`)}}expect(t){if(this._token!==t)throw new o.Error(`Unexpected '${this._token}' instead of '${t}' ${this.location()}`);this.next()}match(t){return t===this._token?(this.next(),!0):!1}location(){let t=1,e=1;this._decoder.position=0;let i="";do{if(this._decoder.position===this._position)return`at ${t}:${e}.`;i=this._decoder.decode(),i===`
`?(t++,e=1):e++}while(i!==void 0);return`at ${t}:${e}.`}semicolon(){this._arrayDepth===0&&this.match(";")}};o.Error=class extends Error{constructor(t){super(t),this.name="Protocol Buffers Error",this.message=t}};var k=o.BinaryReader,g=o.TextReader;export{k as BinaryReader,g as TextReader};
