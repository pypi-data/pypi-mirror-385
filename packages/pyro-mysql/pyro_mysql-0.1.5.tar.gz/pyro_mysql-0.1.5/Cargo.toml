[package]
name = "pyro-mysql"
version = "0.1.5"
edition = "2024"
readme = "README.md"

[lib]
name = "pyro_mysql"
crate-type = ["cdylib", "rlib"]

[dependencies]
chrono = "0.4"
criterion = "0.7.0"
either = "1.15.0"
futures = "0.3.31"
log = "0.4.28"
mysql = "26.0.1"
mysql_async = "0.36.1"
mysql_common = "0.35.5"
parking_lot = { version = "0.12.4", features = ["send_guard"] }
pyo3 = { version = "0.26", features = [
  # "extension-module",
  "experimental-async",
  "experimental-inspect",
  "either",
  "auto-initialize",
  "abi3-py310",
] }
pyo3-async-runtimes = { version = "0.26", features = ["tokio-runtime"] }
pyo3-log = "0.13.0"
ryu = "1.0.20"
thiserror = "2.0.16"
tokio = "1.47.1"
tokio-util = { version = "0.7.16", features = ["rt"] }


[patch.crates-io]
pyo3 = { git = "https://github.com/elbaro/pyo3.git", rev = "e219540adf7bd00d03c251d53cb8d10cd3a5d16c" }
pyo3-ffi = { git = "https://github.com/elbaro/pyo3.git", rev = "e219540adf7bd00d03c251d53cb8d10cd3a5d16c" }
mysql_async = { git = "https://github.com/elbaro/mysql_async.git", rev = "6e15682c8ddaa6f42978032126f239488dfb4801" }


[features]
# extension-module = ["pyo3/extension-module"]
# default = ["extension-module"]

[[bench]]
name = "bench"
harness = false

[[bench]]
name = "bench_sqlalchemy"
harness = false

[[bench]]
name = "bench_sqlalchemy_async"
harness = false
