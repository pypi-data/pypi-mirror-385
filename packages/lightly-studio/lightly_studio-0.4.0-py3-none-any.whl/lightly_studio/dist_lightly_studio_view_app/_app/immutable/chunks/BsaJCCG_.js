import"./CWj6FrbW.js";import{p as R,f as $,n as H,a as V,c as q,r as F,g as f,b as mt,am as St,s as ut,t as kt,u as zt,al as it,Z as L,ab as Zt}from"./C3xJX0nD.js";import{c as tt,a as T,f as ot,t as Dt}from"./CAPx0Bfm.js";import{s as E}from"./DoEId1MK.js";import{s as lt,r as G,p as et,b as nt}from"./xQhUoIl9.js";import{I as ct,P as It,f as ht,U as Et,V as dt,W as yt,y as j,X as at,Y as _t,Z as Rt,$ as Vt,a0 as pt}from"./CWuDkrMZ.js";import{a as rt,g as Nt,c as bt,s as At}from"./DthpwYR_.js";import{i as Tt}from"./DmGM9V9Q.js";import{P as Yt}from"./gBp1tBnA.js";import{f as Ct,u as Xt,g as qt}from"./DyIcJj6J.js";import{o as Ft}from"./D8ZGoCPm.js";import{s as Ht}from"./CpbA3HU7.js";function Gt(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=G(e,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"m9 18 6-6-6-6"}]];ct(n,lt({name:"chevron-right"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=tt(),_=$(i);E(_,()=>e.children??H),T(r,i)},$$slots:{default:!0}})),V()}function Se(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=G(e,["$$slots","$$events","$$legacy"]);const c=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];ct(n,lt({name:"database"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=tt(),_=$(i);E(_,()=>e.children??H),T(r,i)},$$slots:{default:!0}})),V()}function Ze(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=G(e,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];ct(n,lt({name:"house"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=tt(),_=$(i);E(_,()=>e.children??H),T(r,i)},$$slots:{default:!0}})),V()}function Kt(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=G(e,["$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ct(n,lt({name:"zoom-in"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=tt(),_=$(i);E(_,()=>e.children??H),T(r,i)},$$slots:{default:!0}})),V()}function Ot(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=G(e,["$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ct(n,lt({name:"zoom-out"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=tt(),_=$(i);E(_,()=>e.children??H),T(r,i)},$$slots:{default:!0}})),V()}function Qt(n){return new It([document.querySelectorAll(n)],[document.documentElement])}var Wt=ot("<nav><!></nav>");function De(n,e){R(e,!0);let a=et(e,"ref",15),c=G(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Wt();rt(r,()=>({class:e.class,"aria-label":"breadcrumb",...c}));var l=q(r);E(l,()=>e.children??H),F(r),nt(r,i=>a(i),()=>a()),T(n,r),V()}var Ut=ot("<li><!></li>");function Ie(n,e){R(e,!0);let a=et(e,"ref",15,null),c=G(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ut();rt(r,i=>({class:i,...c}),[()=>ht("inline-flex items-center gap-1.5",e.class)]);var l=q(r);E(l,()=>e.children??H),F(r),nt(r,i=>a(i),()=>a()),T(n,r),V()}var Lt=ot("<li><!></li>");function Ee(n,e){R(e,!0);let a=et(e,"ref",15,null),c=G(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Lt();rt(r,d=>({role:"presentation","aria-hidden":"true",class:d,...c}),[()=>ht("[&>svg]:size-3.5",e.class)]);var l=q(r);{var i=d=>{var p=tt(),M=$(p);E(M,()=>e.children??H),T(d,p)},_=d=>{Gt(d,{})};Tt(l,d=>{e.children?d(i):d(_,!1)})}F(r),nt(r,d=>a(d),()=>a()),T(n,r),V()}var jt=ot("<a><!></a>");function Re(n,e){R(e,!0);let a=et(e,"ref",15,null),c=et(e,"href",3,void 0),r=G(e,["$$slots","$$events","$$legacy","ref","class","href","child","children"]);const l=mt(()=>({class:ht("hover:text-foreground transition-colors",e.class),href:c(),...r})),i=Nt(),[_,d]=i;var p=tt(),M=$(p);{var Q=B=>{var w=tt(),S=$(w);E(S,()=>e.child,()=>({props:f(l)})),T(B,w)},x=B=>{var w=jt();rt(w,Z=>({...Z}),[()=>d({...f(l)},[{attribute_name:"href",lang_attribute_name:"hreflang"}])]);var S=q(w);E(S,()=>e.children??H),F(w),nt(w,Z=>a(Z),()=>a()),T(B,w)};Tt(M,B=>{e.child?B(Q):B(x,!1)})}T(n,p),V()}var Jt=ot("<ol><!></ol>");function Ve(n,e){R(e,!0);let a=et(e,"ref",15,null),c=G(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Jt();rt(r,i=>({class:i,...c}),[()=>ht("text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5",e.class)]);var l=q(r);E(l,()=>e.children??H),F(r),nt(r,i=>a(i),()=>a()),T(n,r),V()}var $t=ot("<span><!></span>");function Ne(n,e){R(e,!0);let a=et(e,"ref",15,null),c=G(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=$t();rt(r,i=>({role:"link","aria-disabled":"true","aria-current":"page",class:i,...c}),[()=>ht("text-foreground font-normal",e.class)]);var l=q(r);E(l,()=>e.children??H),F(r),nt(r,i=>a(i),()=>a()),T(n,r),V()}const Ae=n=>`${Yt}/sample/${n}`,Ye=({sampleId:n,datasetId:e})=>{const a=Ct({path:{sample_id:n,dataset_id:e}}),c=Xt(),r=qt(a);return{refetch:()=>{c.invalidateQueries({queryKey:a.queryKey})},sample:r}};var te=1e-12;function wt(n){return((n=Math.exp(n))+1/n)/2}function ee(n){return((n=Math.exp(n))-1/n)/2}function ne(n){return((n=Math.exp(2*n))-1)/(n+1)}const oe=function n(e,a,c){function r(l,i){var _=l[0],d=l[1],p=l[2],M=i[0],Q=i[1],x=i[2],B=M-_,w=Q-d,S=B*B+w*w,Z,h;if(S<te)h=Math.log(x/p)/e,Z=function(g){return[_+g*B,d+g*w,p*Math.exp(e*g*h)]};else{var N=Math.sqrt(S),P=(x*x-p*p+c*S)/(2*p*a*N),A=(x*x-p*p-c*S)/(2*x*a*N),K=Math.log(Math.sqrt(P*P+1)-P),D=Math.log(Math.sqrt(A*A+1)-A);h=(D-K)/e,Z=function(g){var I=g*h,Y=wt(K),J=p/(a*N)*(Y*ne(e*I+K)-ee(K));return[_+J*B,d+J*w,p*Y/wt(e*I+K)]}}return Z.duration=h*1e3*e/Math.SQRT2,Z}return r.rho=function(l){var i=Math.max(.001,+l),_=i*i,d=_*_;return n(i,_,d)},r}(Math.SQRT2,2,4),ft=n=>()=>n;function ae(n,{sourceEvent:e,target:a,transform:c,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:r}})}function xt(n){n.stopImmediatePropagation()}function st(n){n.preventDefault(),n.stopImmediatePropagation()}function ie(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function re(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Mt(){return this.__zoom||dt}function se(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ue(){return navigator.maxTouchPoints||"ontouchstart"in this}function le(n,e,a){var c=n.invertX(e[0][0])-a[0][0],r=n.invertX(e[1][0])-a[1][0],l=n.invertY(e[0][1])-a[0][1],i=n.invertY(e[1][1])-a[1][1];return n.translate(r>c?(c+r)/2:Math.min(0,c)||Math.max(0,r),i>l?(l+i)/2:Math.min(0,l)||Math.max(0,i))}function ce(){var n=ie,e=re,a=le,c=se,r=ue,l=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],_=250,d=oe,p=Et("start","zoom","end"),M,Q,x,B=500,w=150,S=0,Z=10;function h(t){t.property("__zoom",Mt).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",J).filter(r).on("touchstart.zoom",gt).on("touchmove.zoom",Bt).on("touchend.zoom touchcancel.zoom",Pt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(t,s,o,u){var m=t.selection?t.selection():t;m.property("__zoom",Mt),t!==m?K(t,s,o,u):m.interrupt().each(function(){D(this,arguments).event(u).start().zoom(null,typeof s=="function"?s.apply(this,arguments):s).end()})},h.scaleBy=function(t,s,o,u){h.scaleTo(t,function(){var m=this.__zoom.k,v=typeof s=="function"?s.apply(this,arguments):s;return m*v},o,u)},h.scaleTo=function(t,s,o,u){h.transform(t,function(){var m=e.apply(this,arguments),v=this.__zoom,y=o==null?A(m):typeof o=="function"?o.apply(this,arguments):o,b=v.invert(y),z=typeof s=="function"?s.apply(this,arguments):s;return a(P(N(v,z),y,b),m,i)},o,u)},h.translateBy=function(t,s,o,u){h.transform(t,function(){return a(this.__zoom.translate(typeof s=="function"?s.apply(this,arguments):s,typeof o=="function"?o.apply(this,arguments):o),e.apply(this,arguments),i)},null,u)},h.translateTo=function(t,s,o,u,m){h.transform(t,function(){var v=e.apply(this,arguments),y=this.__zoom,b=u==null?A(v):typeof u=="function"?u.apply(this,arguments):u;return a(dt.translate(b[0],b[1]).scale(y.k).translate(typeof s=="function"?-s.apply(this,arguments):-s,typeof o=="function"?-o.apply(this,arguments):-o),v,i)},u,m)};function N(t,s){return s=Math.max(l[0],Math.min(l[1],s)),s===t.k?t:new yt(s,t.x,t.y)}function P(t,s,o){var u=s[0]-o[0]*t.k,m=s[1]-o[1]*t.k;return u===t.x&&m===t.y?t:new yt(t.k,u,m)}function A(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function K(t,s,o,u){t.on("start.zoom",function(){D(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(u).end()}).tween("zoom",function(){var m=this,v=arguments,y=D(m,v).event(u),b=e.apply(m,v),z=o==null?A(b):typeof o=="function"?o.apply(m,v):o,O=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),k=m.__zoom,C=typeof s=="function"?s.apply(m,v):s,W=d(k.invert(z).concat(O/k.k),C.invert(z).concat(O/C.k));return function(X){if(X===1)X=C;else{var U=W(X),vt=O/U[2];X=new yt(vt,z[0]-U[0]*vt,z[1]-U[1]*vt)}y.zoom(null,X)}})}function D(t,s,o){return!o&&t.__zooming||new g(t,s)}function g(t,s){this.that=t,this.args=s,this.active=0,this.sourceEvent=null,this.extent=e.apply(t,s),this.taps=0}g.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,s){return this.mouse&&t!=="mouse"&&(this.mouse[1]=s.invert(this.mouse[0])),this.touch0&&t!=="touch"&&(this.touch0[1]=s.invert(this.touch0[0])),this.touch1&&t!=="touch"&&(this.touch1[1]=s.invert(this.touch1[0])),this.that.__zoom=s,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var s=j(this.that).datum();p.call(t,this.that,new ae(t,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:p}),s)}};function I(t,...s){if(!n.apply(this,arguments))return;var o=D(this,s).event(t),u=this.__zoom,m=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,c.apply(this,arguments)))),v=at(t);if(o.wheel)(o.mouse[0][0]!==v[0]||o.mouse[0][1]!==v[1])&&(o.mouse[1]=u.invert(o.mouse[0]=v)),clearTimeout(o.wheel);else{if(u.k===m)return;o.mouse=[v,u.invert(v)],_t(this),o.start()}st(t),o.wheel=setTimeout(y,w),o.zoom("mouse",a(P(N(u,m),o.mouse[0],o.mouse[1]),o.extent,i));function y(){o.wheel=null,o.end()}}function Y(t,...s){if(x||!n.apply(this,arguments))return;var o=t.currentTarget,u=D(this,s,!0).event(t),m=j(t.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",O,!0),v=at(t,o),y=t.clientX,b=t.clientY;Rt(t.view),xt(t),u.mouse=[v,this.__zoom.invert(v)],_t(this),u.start();function z(k){if(st(k),!u.moved){var C=k.clientX-y,W=k.clientY-b;u.moved=C*C+W*W>S}u.event(k).zoom("mouse",a(P(u.that.__zoom,u.mouse[0]=at(k,o),u.mouse[1]),u.extent,i))}function O(k){m.on("mousemove.zoom mouseup.zoom",null),Vt(k.view,u.moved),st(k),u.event(k).end()}}function J(t,...s){if(n.apply(this,arguments)){var o=this.__zoom,u=at(t.changedTouches?t.changedTouches[0]:t,this),m=o.invert(u),v=o.k*(t.shiftKey?.5:2),y=a(P(N(o,v),u,m),e.apply(this,s),i);st(t),_>0?j(this).transition().duration(_).call(K,y,u,t):j(this).call(h.transform,y,u,t)}}function gt(t,...s){if(n.apply(this,arguments)){var o=t.touches,u=o.length,m=D(this,s,t.changedTouches.length===u).event(t),v,y,b,z;for(xt(t),y=0;y<u;++y)b=o[y],z=at(b,this),z=[z,this.__zoom.invert(z),b.identifier],m.touch0?!m.touch1&&m.touch0[2]!==z[2]&&(m.touch1=z,m.taps=0):(m.touch0=z,v=!0,m.taps=1+!!M);M&&(M=clearTimeout(M)),v&&(m.taps<2&&(Q=z[0],M=setTimeout(function(){M=null},B)),_t(this),m.start())}}function Bt(t,...s){if(this.__zooming){var o=D(this,s).event(t),u=t.changedTouches,m=u.length,v,y,b,z;for(st(t),v=0;v<m;++v)y=u[v],b=at(y,this),o.touch0&&o.touch0[2]===y.identifier?o.touch0[0]=b:o.touch1&&o.touch1[2]===y.identifier&&(o.touch1[0]=b);if(y=o.that.__zoom,o.touch1){var O=o.touch0[0],k=o.touch0[1],C=o.touch1[0],W=o.touch1[1],X=(X=C[0]-O[0])*X+(X=C[1]-O[1])*X,U=(U=W[0]-k[0])*U+(U=W[1]-k[1])*U;y=N(y,Math.sqrt(X/U)),b=[(O[0]+C[0])/2,(O[1]+C[1])/2],z=[(k[0]+W[0])/2,(k[1]+W[1])/2]}else if(o.touch0)b=o.touch0[0],z=o.touch0[1];else return;o.zoom("touch",a(P(y,b,z),o.extent,i))}}function Pt(t,...s){if(this.__zooming){var o=D(this,s).event(t),u=t.changedTouches,m=u.length,v,y;for(xt(t),x&&clearTimeout(x),x=setTimeout(function(){x=null},B),v=0;v<m;++v)y=u[v],o.touch0&&o.touch0[2]===y.identifier?delete o.touch0:o.touch1&&o.touch1[2]===y.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),o.taps===2&&(y=at(y,this),Math.hypot(Q[0]-y[0],Q[1]-y[1])<Z)){var b=j(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return h.wheelDelta=function(t){return arguments.length?(c=typeof t=="function"?t:ft(+t),h):c},h.filter=function(t){return arguments.length?(n=typeof t=="function"?t:ft(!!t),h):n},h.touchable=function(t){return arguments.length?(r=typeof t=="function"?t:ft(!!t),h):r},h.extent=function(t){return arguments.length?(e=typeof t=="function"?t:ft([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),h):e},h.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],h):[l[0],l[1]]},h.translateExtent=function(t){return arguments.length?(i[0][0]=+t[0][0],i[1][0]=+t[1][0],i[0][1]=+t[0][1],i[1][1]=+t[1][1],h):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},h.constrain=function(t){return arguments.length?(a=t,h):a},h.duration=function(t){return arguments.length?(_=+t,h):_},h.interpolate=function(t){return arguments.length?(d=t,h):d},h.on=function(){var t=p.on.apply(p,arguments);return t===p?h:t},h.clickDistance=function(t){return arguments.length?(S=(t=+t)*t,h):Math.sqrt(S)},h.tapDistance=function(t){return arguments.length?(Z=+t,h):Z},h}function he(n,e){let a=n.scaleIndependentXForm;a||(a=n.scaleIndependentXForm=e.createSVGTransform(),n.transform.baseVal.appendItem(a));const c=n.parentNode;if(c){const r=c.getScreenCTM();if(r){const l=r.inverse().multiply(e.getScreenCTM());l.e=l.f=0,a.setMatrix(l)}}}var fe=ot('<div class="pointer-events-auto absolute bottom-0 left-1 z-20 flex select-none items-center gap-1 rounded-lg bg-muted bg-opacity-80 shadow-md backdrop-blur-sm"><!> <div class="h-6 w-px bg-white bg-opacity-20"></div> <!> <div class="w-[32px] text-center text-sm text-muted-foreground" data-testid="zoom-level"> </div> <!></div>');function me(n,e){var a=fe(),c=q(a);pt(c,{variant:"ghost","data-testid":"zoom-reset",size:"sm",get onclick(){return e.onZoomReset},get disabled(){return e.isResetDisabled},children:(d,p)=>{St();var M=Dt("Reset");T(d,M)},$$slots:{default:!0}});var r=ut(c,4);pt(r,{title:"zoom out",variant:"ghost",size:"icon","data-testid":"zoom-out",get onclick(){return e.onZoomOut},get disabled(){return e.isZoominDisabled},children:(d,p)=>{Ot(d,{class:"h-4 w-4"})},$$slots:{default:!0}});var l=ut(r,2),i=q(l);F(l);var _=ut(l,2);pt(_,{title:"zoom in",variant:"ghost",size:"icon","data-testid":"zoom-in",get onclick(){return e.onZoomIn},get disabled(){return e.isZoomoutDisabled},children:(d,p)=>{Kt(d,{class:"h-4 w-4"})},$$slots:{default:!0}}),F(a),kt(d=>Ht(i,`${d??""}%`),[()=>Math.round(e.scale*100)]),T(n,a)}var de=ot('<div class="relative flex h-full w-full select-none items-center justify-center"><!> <svg class="z-10 h-full w-full" preserveAspectRatio="xMidYMid meet"><g><!></g></svg> <svg class="pointer-events-none absolute inset-0" preserveAspectRatio="xMidYMid meet"></svg></div>');function Ce(n,e){R(e,!0);let a=it(null),c=it(null);const r=et(e,"cursor",3,"auto");let l=it(800),i=it(600);zt(()=>{if(!f(a))return;L(l,f(a).clientWidth,!0),L(i,f(a).clientHeight,!0);const g=new ResizeObserver(()=>{f(a)&&(L(l,f(a).clientWidth,!0),L(i,f(a).clientHeight,!0))});return g.observe(f(a)),()=>g.disconnect()});const _=10,d=mt(()=>{const g={x:0,y:0,width:e.width,height:e.height};if(e.boundingBox){S();const{x:I,y:Y,width:J,height:gt}=e.boundingBox;return{x:Math.round(Math.max(0,I-_)),y:Math.round(Math.max(0,Y-_)),width:Math.round(Math.min(e.width-I,J+_*2)),height:Math.round(Math.min(e.height-Y,gt+_*2))}}return g});let p=it(Zt({k:1,x:0,y:0}));const M=mt(()=>{if(!f(a))return 1;const g=f(l)/e.width,I=f(i)/e.height,Y=Math.min(g,I);return f(p).k*Y}),Q=mt(()=>{if(!f(a))return 1;let g=f(M);if(e.boundingBox){const I=e.width/f(d).width,Y=e.height/f(d).height,J=Math.min(I,Y);g*=J}return g});let x=it(null);const B=()=>{f(a)&&(L(x,ce().on("zoom",g=>{L(p,g.transform,!0)}).filter(g=>(!g.ctrlKey||g.type==="wheel")&&!g.button&&!(g.type==="mousedown"&&g.button===2)).wheelDelta(g=>-g.deltaY*.002),!0),j(f(a)).call(f(x)).on("dblclick.zoom",null))},w=g=>{if(!f(a)||!f(x))return;const I=g?1.5:.75;j(f(a)).transition().duration(300).call(f(x).scaleBy,I)},S=()=>{!f(a)||!f(x)||j(f(a)).transition().duration(300).call(f(x).transform,dt)},Z=()=>{L(p,{k:1,x:0,y:0},!0),f(a)&&f(x)&&j(f(a)).call(f(x).transform,dt)};Ft(()=>{var g;B(),(g=e.registerResetFn)==null||g.call(e,Z)}),zt(()=>{f(p).k,Qt(".unscaled").each(function(){he(this,f(c))})});var h=de(),N=q(h);me(N,{get scale(){return f(M)},onZoomIn:()=>w(!0),onZoomOut:()=>w(!1),onZoomReset:S});var P=ut(N,2),A=q(P),K=q(A);E(K,()=>e.zoomableContent,()=>({scale:f(Q)})),F(A),F(P),nt(P,g=>L(a,g),()=>f(a));var D=ut(P,2);bt(D,"viewBox","0 0 1024 768"),nt(D,g=>L(c,g),()=>f(c)),F(h),kt(()=>{At(P,`cursor: ${r()};`),bt(P,"viewBox",`${f(d).x} ${f(d).y} ${f(d).width} ${f(d).height}`),bt(A,"transform",`translate(${f(p).x}, ${f(p).y}) scale(${f(p).k})`)}),T(n,h),V()}export{De as B,Se as D,Ze as H,Ce as Z,Ve as a,Ie as b,Re as c,Ee as d,Ne as e,Ae as g,Ye as u};
