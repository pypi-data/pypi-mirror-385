import{m as f,w as s,o as h,q as r}from"./C3xJX0nD.js";import{a as p}from"./BaFFwDFr.js";import{u as y}from"./BOmrKuMn.js";const o=s(new Set);function v(u){const{dataset_id:n,kind:i}=u,{tags:l}=y(),g=s(!1),c=s(null),e=s(!1),d=()=>{f(e)||(e.set(!0),p({path:{dataset_id:n}}).then(t=>{if(t.error)throw new Error(JSON.stringify(t.error));t.data&&l.set(t.data)}).catch(t=>{c.set(t)}).finally(()=>{e.set(!1)}))};!f(g)&&n&&(d(),g.set(!0));const S=h(l,t=>{const a=t??[];return i?a.filter(T=>i.includes(T.kind)):a}),m=t=>{o.update(a=>(a.has(t)?a.delete(t):a.add(t),new Set([...a])))},w=()=>{o.set(new Set)};return{tags:r(S),loadTags:d,tagsSelected:r(o),tagSelectionToggle:m,clearTagsSelected:w,isLoading:r(e),error:c}}export{v as u};
