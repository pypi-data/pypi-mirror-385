# QCC Web UI - 快速开始指南

## 🚀 安装

### 推荐：使用 uvx（零安装）

```bash
# 直接运行，无需安装
uvx qcc web start
```

### 开发模式安装

```bash
# 克隆项目
git clone https://github.com/lghguge520/qcc.git
cd qcc

# 使用 uvx 运行本地版本
uvx --from . qcc web start --dev
```

## 🎯 启动 Web UI

### 生产模式（推荐用于日常使用）

**一键启动：**
```bash
# 启动 Web UI（自动构建前端，默认端口 8080）
uvx qcc web start
```

首次启动会自动：
- ✅ 安装前端依赖
- ✅ 构建前端生产版本
- ✅ 启动后端服务
- ✅ 自动打开浏览器

**访问地址：** http://127.0.0.1:8080

**其他选项：**
```bash
# 指定端口
uvx qcc web start --port 9000

# 指定主机地址
uvx qcc web start --host 0.0.0.0 --port 8080

# 不自动打开浏览器
uvx qcc web start --no-browser
```

### 开发模式（推荐用于开发）

**一键启动前后端热重载：**
```bash
# 开发模式（前后端同时启动，支持热重载）
uvx qcc web start --dev
```

开发模式特性：
- ✅ **前端热重载**：修改代码立即生效
- ✅ **后端热重载**：API 变更自动更新
- ✅ **自动代理**：API 请求自动转发
- ✅ **双端口运行**：
  - 前端开发服务器：http://127.0.0.1:5173
  - 后端 API 服务器：http://127.0.0.1:8080

**开发建议：**
```bash
# 开发时推荐使用此命令
uvx qcc web start --dev --no-browser
```

然后访问前端开发地址：http://127.0.0.1:5173

### 查看运行状态

```bash
# 查看 Web UI 运行状态
uvx qcc web status
```

显示信息：
- 运行模式（生产/开发）
- 进程 ID
- 访问地址
- 运行时长

### 停止服务

```bash
# 停止 Web 服务器（自动停止前后端进程）
uvx qcc web stop
```

或在运行终端按 `Ctrl+C`

## 🌐 访问 Web UI

### 生产模式

- **Web UI**: http://127.0.0.1:8080
- **API 文档（Swagger）**: http://127.0.0.1:8080/api/docs
- **API 文档（ReDoc）**: http://127.0.0.1:8080/api/redoc

### 开发模式

- **前端开发**: http://127.0.0.1:5173 ⭐ 主要使用
- **后端 API**: http://127.0.0.1:8080
- **API 文档**: http://127.0.0.1:8080/api/docs

## 📖 主要功能

### 1. 仪表盘（Dashboard）

查看系统概览：
- 配置总数和存储方式
- 代理服务状态
- Endpoint 健康状况
- 代理组管理

### 2. 配置管理（Configs）

- ✅ 查看所有配置
- ✅ 创建新配置
- ✅ 编辑配置
- ✅ 删除配置
- ✅ 使用配置（应用到 Claude Code）
- ✅ 设置默认配置
- ✅ 同步云端配置

### 3. Endpoint 管理

- ✅ 创建 EndpointGroup（高可用代理组）
- ✅ 管理主节点和副节点
- ✅ 删除代理组

### 4. 代理服务（Proxy）

- ✅ 启动代理服务
- ✅ 停止代理服务
- ✅ 查看代理日志
- ✅ 实时监控代理状态

### 5. 健康监控（Health）

- ✅ 查看所有节点健康状态
- ✅ 成功率和响应时间统计
- ✅ 运行时节点管理（添加/移除/移动）
- ✅ 失败队列查看和重试

## 🔧 开发工作流

### 推荐：一键启动（最简单）

```bash
# 一条命令启动前后端，支持双重热重载
uvx qcc web start --dev
```

这是最推荐的开发方式，修改前后端代码都会自动重载。

### 其他开发方式

**方式 1: 仅开发前端**
```bash
# 启动生产模式后端
uvx qcc web start

# 在另一个终端单独启动前端开发
cd qcc-web
npm run dev
```

**方式 2: 仅开发后端**
```bash
# 使用已构建的前端 + 后端热重载
uvx qcc web start --dev
# 只修改后端代码，后端自动重载
```

### 热重载说明

| 修改类型 | 生产模式 | 开发模式 |
|---------|---------|---------|
| 前端代码 | ❌ 需重新构建 | ✅ 自动重载（<500ms） |
| 后端代码 | ❌ 需重启 | ✅ 自动重载（~2-3s） |
| 前端依赖 | ❌ 需重新安装 | ✅ 自动检测 |
| 后端依赖 | ❌ 需重新安装 | ❌ 需手动重启 |

## 🐛 常见问题

### 端口被占用

```bash
# 查看占用 8080 端口的进程
lsof -i :8080

# 使用其他端口
qcc web start --port 9000
```

### 前端页面空白

```bash
# 生产模式会自动构建，直接重启即可
uvx qcc web stop
uvx qcc web start

# 或手动构建
cd qcc-web
npm run build
cd ..
uvx qcc web start
```

### 查看日志

```bash
# Web 服务日志
tail -f ~/.fastcc/web.log

# 代理服务日志
qcc proxy logs
```

## 📚 更多文档

- [README.md](./README.md) - 完整功能说明和技术栈

## 💡 提示

- 首次使用建议先创建一个配置，然后创建 EndpointGroup
- 使用开发模式可以实时查看代码修改效果
- API 文档提供了完整的接口说明和测试功能

---

**开始使用 QCC Web UI，让配置管理更简单！** ✨
