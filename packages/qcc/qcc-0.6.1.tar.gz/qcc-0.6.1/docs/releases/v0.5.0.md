# QCC v0.5.0 发布说明

**发布日期**: 2025-10-18
**类型**: 功能增强版本
**重要性**: 🟢 推荐更新

## 🎉 主要功能

### Web UI 管理界面

全新的 Web 管理界面，让 QCC 代理服务器的配置和监控变得前所未有的简单！

#### ✨ 核心特性

1. **一键启动 Web UI**
   ```bash
   uvx qcc web start
   ```
   - 自动启动前后端服务
   - 智能端口检测和管理
   - 一键启动开发模式（支持热重载）

2. **可视化管理**
   - 📊 实时仪表盘 - 查看代理状态、请求统计
   - ⚙️ 配置管理 - 可视化编辑配置文件
   - 🔍 Endpoint 管理 - 查看和管理所有 API endpoints
   - 📈 健康监控 - 实时查看健康检查状态

3. **完整的生命周期管理**
   ```bash
   uvx qcc web start      # 启动服务
   uvx qcc web status     # 查看状态
   uvx qcc web stop       # 停止服务
   ```

4. **开发者友好**
   ```bash
   uvx qcc web start --dev     # 开发模式（热重载）
   uvx qcc web start --port    # 自定义端口
   ```

### EndpointGroup 功能

新增 EndpointGroup 支持，更灵活的 endpoint 组织方式。

#### 特性

- 📦 分组管理多个 endpoints
- 🎯 按组加载和切换配置
- 🔧 独立的组配置管理

### 配置管理增强

1. **配置删除功能**
   - 安全删除不需要的配置
   - 防止删除当前使用的配置

2. **存储方式显示**
   - 清晰显示配置来源（文件/数据库）
   - 更好的配置追踪

## 📝 详细更新

### 新增命令

#### Web UI 命令组
```bash
qcc web start [--dev] [--port PORT] [--no-browser]
  启动 Web UI 服务
  --dev: 开发模式（前后端热重载）
  --port: 指定端口（默认：前端 5173，后端 8080）
  --no-browser: 不自动打开浏览器

qcc web stop
  停止 Web UI 服务

qcc web status
  查看 Web UI 运行状态

qcc web restart [--dev]
  重启 Web UI 服务
```

### 技术架构

#### 前端
- **框架**: Vue 3 + TypeScript
- **构建**: Vite
- **UI 库**: Element Plus
- **默认端口**: 5173

#### 后端
- **框架**: FastAPI
- **服务器**: Uvicorn
- **默认端口**: 8080
- **API 文档**: http://127.0.0.1:8080/api/docs

### 文件结构

```
qcc/
├── qcc-web/              # Web UI 前端
│   ├── src/
│   ├── package.json
│   └── vite.config.ts
│
├── fastcc/
│   ├── cli.py           # 增强的 CLI（新增 web 命令组）
│   └── web_ui/          # Web UI 后端 API
│
└── docs/
    └── tasks/
        └── v0.5.0-web-ui/    # Web UI 开发文档
```

## 🐛 Bug 修复

1. **配置删除问题**
   - 修复删除配置时的异常处理
   - 添加删除保护机制

2. **健康监控显示**
   - 改进健康状态显示逻辑
   - 修复状态更新延迟问题

3. **进程管理**
   - 修复 Web UI 停止时的进程清理
   - 改进 Ctrl+C 信号处理

## 📚 文档更新

### 重新组织项目文档

- 📁 发布文档移至 `docs/releases/`
- 📁 开发文档按版本组织在 `docs/tasks/`
- 📁 脚本文件整理至 `scripts/`
- 📖 更新文档索引和导航

### 新增文档

- [Web UI 快速开始](../tasks/v0.5.0-web-ui/用户指南/快速开始.md)
- [Web UI 使用指南](../tasks/v0.5.0-web-ui/用户指南/README.md)
- [一键启动设计](../tasks/v0.5.0-web-ui/设计文档/web-ui-one-command-start.md)
- [开发模式实现](../tasks/v0.5.0-web-ui/设计文档/web-ui-dev-mode.md)

## 🔄 向后兼容性

✅ **完全兼容**: 所有现有功能保持不变
- 代理服务器功能不受影响
- 所有 CLI 命令继续工作
- 配置文件格式兼容

## 📦 升级方式

### 使用 uvx（推荐）
```bash
# uvx 会自动使用最新版本
uvx qcc --version
# 输出: qcc version 0.5.0
```

### 使用 pip
```bash
pip install --upgrade qcc
qcc --version
```

### 验证安装
```bash
# 检查版本
uvx qcc --version

# 启动 Web UI
uvx qcc web start

# 检查代理功能
uvx qcc proxy start --cluster prod
```

## 🚀 快速开始

### 1. 启动 Web UI
```bash
# 生产模式
uvx qcc web start

# 开发模式（热重载）
uvx qcc web start --dev
```

访问: http://127.0.0.1:5173

### 2. 查看 API 文档
访问: http://127.0.0.1:8080/api/docs

### 3. 管理配置
在 Web UI 中可视化管理：
- 查看所有配置
- 编辑配置参数
- 切换配置
- 删除不需要的配置

## 🎯 使用场景

### 场景 1: 快速配置管理
```bash
# 启动 Web UI
uvx qcc web start

# 在浏览器中编辑配置，无需手动编辑 JSON
```

### 场景 2: 实时监控
```bash
# 启动代理和 Web UI
uvx qcc proxy start --cluster prod
uvx qcc web start

# 在 Web UI 中查看实时状态
```

### 场景 3: 开发调试
```bash
# 启动开发模式
uvx qcc web start --dev

# 前后端代码修改会自动热重载
```

## 📊 性能改进

- 优化配置加载速度
- 改进健康检查性能
- 减少内存占用

## 🔍 已知问题

无已知严重问题。

## 📅 后续计划

### v0.6.0（规划中）
- [ ] Web UI 用户认证
- [ ] 高级监控和分析
- [ ] 配置版本管理
- [ ] 多语言支持
- [ ] 性能优化和压力测试

## 🙏 致谢

感谢所有用户的反馈和建议！

## 📞 获取帮助

- **文档**: [docs/tasks/v0.5.0-web-ui/](../tasks/v0.5.0-web-ui/)
- **Issues**: https://github.com/yxhpy/qcc/issues
- **快速参考**: [WEB_START_QUICK_REFERENCE.md](../tasks/v0.5.0-web-ui/用户指南/WEB_START_QUICK_REFERENCE.md)

---

## 🌟 亮点回顾

### 🎨 全新 Web UI
直观的可视化管理界面，让配置变得简单

### ⚡ 一键启动
`qcc web start` 即可启动完整的管理服务

### 🔧 开发者友好
热重载、API 文档、完善的错误处理

### 📦 EndpointGroup
更灵活的 endpoint 组织方式

### 📚 文档完善
重新组织的文档结构，更易查找和使用

---

**安装命令**:
```bash
uvx qcc
# 或
pip install --upgrade qcc
```

**快速体验 Web UI**:
```bash
uvx qcc web start
```

**完整文档**: [README.md](../../README.md)
