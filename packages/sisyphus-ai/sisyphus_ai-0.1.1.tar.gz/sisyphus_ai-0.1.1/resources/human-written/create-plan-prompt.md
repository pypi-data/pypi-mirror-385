루프 매니저, 프롬프트 매니저, 세션 매니저 셋 모두 새 agent 도구 지원이 될 때 마다 쉽게 확장이 가능한 구조여야 하고,
주요 다른 점은 프롬프트 자체가 달라질 수 있다는 점, 세션 매니징의 구체적인 구현체가 달라질 수 있다는 점이야. (없을수도있고, 아예 비활성화 할 수 도 있고)
그리고 세션 매니저와 agent 도구는 사실상 같이 묶여서 한 세트로 가는거지만 프롬프트 매니저는 configurable 해야 해. 전문 프롬프트와 command slash 형태의 프롬프트 ('/execute', '/architect') 모두 고를 수 있어야 하지만, 또 preferred 느낌으로 해서, 예를들어 claude code agent 는 command slash 기능을 first party 로 지원하니까 이걸 더 선호하게 기본값으로 설정 될 수 있도록 한다던지.

agentloop_sdk.py 처럼 typer based 이지만 그 안에서 async _main 을 호출하는 형태로 구성해주고,
textual 은 기본적으로 async 를 다룰 수 있으니까 고민하지 않아도 되겠다.

각 컴포넌트별로 레이어링을 잘 해줘서 (로직 / ui 엄격히 분리. 예를들어 로직에 ui 코드나 출력 코드가 섞여서는 안됨)
전체 프로젝트를 구상해줬으면 좋겠어.

단 특정 모듈에 대한 테스트는 그 안으로 들어가야해. 예시: services/agent.py 가 있다면 services/test/__init__.py services/test_agent.py 가 있어야 함

이런식으로 새로 만들고 싶은데, 아키텍쳐를 구상해줘. 그리고 그대로 계획서 작성해줘. (이후 몇번 티키타카. 과한 엔지니어링이나 불명확한 내용 수정 등)
