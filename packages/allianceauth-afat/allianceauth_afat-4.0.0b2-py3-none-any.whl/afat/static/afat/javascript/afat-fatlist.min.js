$(document).ready(()=>{'use strict';const t=afatSettings.dataTable.language,a=afatSettings.permissions.addFatLink||afatSettings.permissions.manageAfat,e=[{data:'fleet_name'},{data:'fleet_type'},{data:'doctrine'},{data:'creator_name'},{data:'fleet_time',render:{display:t=>moment(t.time).utc().format(AFAT_DATETIME_FORMAT),_:'timestamp'}},{data:'fats_number'},{data:'via_esi'},{data:'hash'}];a&&e.splice(-2,0,{data:'actions',render:t=>t});const n=[{targets:[5],createdCell:t=>{$(t).addClass('text-end')}},{targets:a?[7,8]:[6,7],visible:!1}];a&&n.splice(1,0,{targets:[6],orderable:!1,createdCell:t=>{$(t).addClass('text-end')}});const i=$('#link-list'),o=6e4;let s=Date.now()+o;const r=a=>i.DataTable({language:t,data:a,columns:e,columnDefs:n,order:[[4,'desc']],filterDropDown:{columns:[{idx:1},{idx:7,title:afatSettings.translation.dataTable.filter.viaEsi}],autoSize:!1,bootstrap:!0,bootstrap_version:5}}),l=()=>{const t=Date.now()-s;if(t>o){const t=window.location.pathname+window.location.search+window.location.hash;if(t.startsWith('/'))return void window.location.replace(t);console.error('Invalid redirect URL')}fetchGet({url:afatSettings.url.linkList}).then(t=>{i.DataTable().clear().rows.add(t).draw()}).catch(t=>{console.error('Error fetching updated data:',t)}),s+=o,setTimeout(l,Math.max(0,o-t))};fetchGet({url:afatSettings.url.linkList}).then(t=>{r(t),setTimeout(l,o)}).catch(t=>{console.error('Error fetching link list:',t)}),[afatSettings.modal.cancelEsiFleetModal.element,afatSettings.modal.deleteFatLinkModal.element].forEach(t=>{manageModal($(t))})});
//# sourceMappingURL=afat-fatlist.min.js.map