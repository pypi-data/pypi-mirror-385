$(document).ready(()=>{'use strict';const t=afatSettings.dataTable.language,e=$('#fleet-edit-fat-list'),a=$('#fleet-edit-ship-types'),o=t=>{const e={};t.forEach(t=>{e[t.ship_type]=(e[t.ship_type]||0)+1}),a.find('tbody').empty(),Object.entries(e).forEach(([t,e])=>{const o=convertStringToSlug(t);a.append(`<tr class="shiptype-${o}"><td class="ship-type">${t}</td><td class="ship-type-count text-end">${e}</td></tr>`)}),sortTable(a,'asc')},n=a=>{e.DataTable({language:t,data:a,columns:[{data:'character_name'},{data:'system'},{data:'ship_type'},{data:'actions'}],columnDefs:[{targets:[3],orderable:!1,createdCell:t=>{$(t).addClass('text-end')}}],order:[[0,'asc']],stateSave:!0,stateDuration:-1}),o(a)};if(fetchGet({url:afatSettings.url}).then(n).catch(t=>{console.error('Error fetching FAT list:',t)}),!0===afatSettings.reloadDatatable){const t=15e3;let a=Date.now()+t;const n=()=>{const s=Date.now()-a;if(s>t){const t=window.location.pathname+window.location.search+window.location.hash;if(t.startsWith('/'))return void window.location.replace(t);console.error('Invalid redirect URL')}fetchGet({url:afatSettings.url}).then(t=>{e.DataTable().clear().rows.add(t).draw(),o(t)}).catch(t=>{console.error('Error reloading data:',t)}),a+=t,setTimeout(n,Math.max(0,t-s))};setTimeout(n,t)}new ClipboardJS('.copy-btn').on('success',()=>{$('.copy-btn').tooltip('show')}),[afatSettings.modal.cancelEsiFleetModal.element,afatSettings.modal.deleteFatModal.element,afatSettings.modal.reopenFatLinkModal.element].forEach(t=>{manageModal($(t))})});
//# sourceMappingURL=afat-fatlink-details.min.js.map