{"version":3,"file":"markdown-worker.ddc38a925e8cf97d.js","sources":["webpack://knx-frontend/webpack/runtime/on_chunk_loaded","webpack://knx-frontend/webpack/runtime/startup_chunk_dependencies","webpack://knx-frontend/./homeassistant-frontend/src/resources/markdown-worker.ts","webpack://knx-frontend/webpack/runtime/compat_get_default_export","webpack://knx-frontend/webpack/runtime/define_property_getters","webpack://knx-frontend/webpack/runtime/ensure_chunk","webpack://knx-frontend/webpack/runtime/get javascript chunk filename","webpack://knx-frontend/webpack/runtime/has_own_property","webpack://knx-frontend/webpack/runtime/public_path","webpack://knx-frontend/webpack/runtime/rspack_version","webpack://knx-frontend/webpack/runtime/import_scripts_chunk_loading","webpack://knx-frontend/webpack/runtime/rspack_unique_id"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif (chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor (var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--)\n\t\t\tdeferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\nvar fn = deferred[i][1];\nvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif (\n\t\t\t\t(priority & (1 === 0) || notFulfilled >= priority) &&\n\t\t\t\tObject.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })\n\t\t\t) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif (priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif (fulfilled) {\n\t\t\tdeferred.splice(i--, 1);\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};\n","var next = __webpack_require__.x\n__webpack_require__.x = function() {\n  return Promise.all([__webpack_require__.e(\"9786\"),\n__webpack_require__.e(\"8587\")]).then(next);\n}","import { expose } from \"comlink\";\nimport type { MarkedOptions } from \"marked\";\nimport { marked } from \"marked\";\nimport type { IWhiteList } from \"xss\";\nimport { filterXSS, getDefaultWhiteList } from \"xss\";\n\nlet whiteListNormal: IWhiteList | undefined;\nlet whiteListSvg: IWhiteList | undefined;\n\nconst renderMarkdown = async (\n  content: string,\n  markedOptions: MarkedOptions,\n  hassOptions: {\n    // Do not allow SVG on untrusted content, it allows XSS.\n    allowSvg?: boolean;\n    allowDataUrl?: boolean;\n  } = {}\n): Promise<string> => {\n  if (!whiteListNormal) {\n    whiteListNormal = {\n      ...getDefaultWhiteList(),\n      input: [\"type\", \"disabled\", \"checked\"],\n      \"ha-icon\": [\"icon\"],\n      \"ha-svg-icon\": [\"path\"],\n      \"ha-alert\": [\"alert-type\", \"title\"],\n      \"ha-qr-code\": [\n        \"data\",\n        \"scale\",\n        \"width\",\n        \"margin\",\n        \"error-correction-level\",\n        \"center-image\",\n      ],\n    };\n  }\n\n  let whiteList: IWhiteList | undefined;\n\n  if (hassOptions.allowSvg) {\n    if (!whiteListSvg) {\n      whiteListSvg = {\n        ...whiteListNormal,\n        svg: [\"xmlns\", \"height\", \"width\"],\n        path: [\"transform\", \"stroke\", \"d\"],\n        img: [\"src\"],\n      };\n    }\n    whiteList = whiteListSvg;\n  } else {\n    whiteList = whiteListNormal;\n  }\n  if (hassOptions.allowDataUrl && whiteList.a) {\n    whiteList.a.push(\"download\");\n  }\n\n  return filterXSS(await marked(content, markedOptions), {\n    whiteList,\n    onTagAttr: (\n      tag: string,\n      name: string,\n      value: string\n    ): string | undefined => {\n      // Override the default `onTagAttr` behavior to only render\n      // our markdown checkboxes.\n      // Returning undefined causes the default measure to be taken\n      // in the xss library.\n      if (tag === \"input\") {\n        if (\n          (name === \"type\" && value === \"checkbox\") ||\n          name === \"checked\" ||\n          name === \"disabled\"\n        ) {\n          return undefined;\n        }\n        return \"\";\n      }\n      if (\n        hassOptions.allowDataUrl &&\n        tag === \"a\" &&\n        name === \"href\" &&\n        value.startsWith(\"data:\")\n      ) {\n        return `href=\"${value}\"`;\n      }\n      return undefined;\n    },\n  });\n};\n\nconst api = {\n  renderMarkdown,\n};\n\nexport type Api = typeof api;\n\nexpose(api);\n","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(\n\t\tObject.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t\t__webpack_require__.f[key](chunkId, promises);\n\t\t\treturn promises;\n\t\t}, [])\n\t);\n};","// This function allow to reference chunks\n__webpack_require__.u = function(chunkId) {\n  // return url for filenames not based on template\n  \n  // return url for filenames based on template\n  return \"\" + chunkId + \".\" + {\"8587\": \"999309affe9f877d\",\"9786\": \"354597b1b7ab2683\",}[chunkId] + \".js\"\n}","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/knx_static/frontend_es5/\";","__webpack_require__.rv = function() { return \"1.5.5\"; }","var installedChunks = {\"5640\": 1,};\n// importScripts chunk loading\nvar installChunk = function(data) {\n    var chunkIds = data[0];\nvar moreModules = data[1];\nvar runtime = data[2];\n    for (var moduleId in moreModules) {\n        if (__webpack_require__.o(moreModules, moduleId)) {\n            __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n    }\n    if (runtime) runtime(__webpack_require__);\n    while (chunkIds.length) installedChunks[chunkIds.pop()] = 1;\n    parentChunkLoadingFunction(data);\n};\n\n__webpack_require__.f.i = function(chunkId, promises) {\n    \n          // \"1\" is the signal for \"already loaded\n          if (!installedChunks[chunkId]) {\n            if (true) {\n              importScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n            }\n          }\n          \n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkknx_frontend\"] = self[\"webpackChunkknx_frontend\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;","__webpack_require__.ruid = \"bundler=rspack@1.5.5\";\n"],"names":["deferred","next","whiteListNormal","whiteListSvg","api","renderMarkdown","content","markedOptions","hassOptions","whiteList","Object","assign","getDefaultWhiteList","input","allowSvg","svg","path","img","allowDataUrl","a","push","filterXSS","marked","onTagAttr","tag","name","value","startsWith","expose","__webpack_require__","n","module","getter","__esModule","d","exports","definition","key","o","defineProperty","enumerable","get","f","e","chunkId","Promise","all","keys","reduce","promises","u","obj","prop","prototype","hasOwnProperty","call","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","every","splice","r","undefined","p","rv","x","then","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","data","moreModules","runtime","moduleId","m","pop","ruid"],"mappings":"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"}