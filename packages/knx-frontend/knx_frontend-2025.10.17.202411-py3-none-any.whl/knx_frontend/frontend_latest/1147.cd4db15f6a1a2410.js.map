{"version":3,"file":"1147.cd4db15f6a1a2410.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/resources/codemirror.ts"],"sourcesContent":["import { indentLess, indentMore } from \"@codemirror/commands\";\nimport {\n  foldService,\n  HighlightStyle,\n  StreamLanguage,\n  syntaxHighlighting,\n} from \"@codemirror/language\";\nimport { jinja2 } from \"@codemirror/legacy-modes/mode/jinja2\";\nimport { yaml } from \"@codemirror/legacy-modes/mode/yaml\";\nimport { Compartment } from \"@codemirror/state\";\nimport type { KeyBinding } from \"@codemirror/view\";\nimport { EditorView } from \"@codemirror/view\";\nimport { tags } from \"@lezer/highlight\";\n\nexport { autocompletion } from \"@codemirror/autocomplete\";\nexport { defaultKeymap, history, historyKeymap } from \"@codemirror/commands\";\nexport { highlightingFor, foldGutter } from \"@codemirror/language\";\nexport { highlightSelectionMatches, searchKeymap } from \"@codemirror/search\";\nexport { EditorState } from \"@codemirror/state\";\nexport {\n  crosshairCursor,\n  drawSelection,\n  EditorView,\n  highlightActiveLine,\n  keymap,\n  lineNumbers,\n  rectangularSelection,\n} from \"@codemirror/view\";\nexport { indentationMarkers } from \"@replit/codemirror-indentation-markers\";\nexport { tags } from \"@lezer/highlight\";\n\nexport const langs = {\n  jinja2: StreamLanguage.define(jinja2),\n  yaml: StreamLanguage.define(yaml),\n};\n\nexport const langCompartment = new Compartment();\nexport const readonlyCompartment = new Compartment();\nexport const linewrapCompartment = new Compartment();\nexport const foldingCompartment = new Compartment();\n\nexport const tabKeyBindings: KeyBinding[] = [\n  { key: \"Tab\", run: indentMore },\n  {\n    key: \"Shift-Tab\",\n    run: indentLess,\n  },\n];\n\nexport const haTheme = EditorView.theme({\n  \"&\": {\n    color: \"var(--primary-text-color)\",\n    backgroundColor:\n      \"var(--code-editor-background-color, var(--card-background-color))\",\n    borderRadius:\n      \"var(--mdc-shape-small, 4px) var(--mdc-shape-small, 4px) 0px 0px\",\n    caretColor: \"var(--secondary-text-color)\",\n    height: \"var(--code-mirror-height, auto)\",\n    maxHeight: \"var(--code-mirror-max-height, unset)\",\n  },\n\n  \"&.cm-editor\": {\n    \"--indent-marker-active-bg-color\": \"var(--divider-color)\",\n  },\n\n  \"&.cm-editor.cm-focused\": {\n    outline: \"none\",\n  },\n\n  \"&.cm-focused .cm-cursor\": {\n    borderLeftColor: \"var(--primary-color)\",\n  },\n\n  \".cm-selectionBackground, ::selection\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.1)\",\n  },\n\n  \"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.2)\",\n  },\n\n  \".cm-activeLine\": {\n    backgroundColor: \"rgba(var(--rgb-secondary-text-color), 0.1)\",\n  },\n\n  \".cm-scroller\": { outline: \"none\" },\n\n  \".cm-content\": {\n    caretColor: \"var(--secondary-text-color)\",\n    paddingTop: \"16px\",\n    paddingBottom: \"16px\",\n  },\n\n  \".cm-panels\": {\n    backgroundColor: \"var(--primary-background-color)\",\n    color: \"var(--primary-text-color)\",\n  },\n  \".cm-panels.top\": { borderBottom: \"1px solid var(--divider-color)\" },\n  \".cm-panels.bottom\": { borderTop: \"1px solid var(--divider-color)\" },\n\n  \".cm-button\": {\n    border: \"1px solid var(--primary-color)\",\n    padding: \"0px 16px\",\n    textTransform: \"uppercase\",\n    margin: \"4px\",\n    background: \"none\",\n    color: \"var(--primary-color)\",\n    fontFamily:\n      \"var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, var(--ha-font-family-body)))\",\n    fontSize: \"var(--mdc-typography-button-font-size, 0.875rem)\",\n    height: \"36px\",\n    fontWeight: \"var(--mdc-typography-button-font-weight, 500)\",\n    borderRadius: \"4px\",\n    letterSpacing: \"var(--mdc-typography-button-letter-spacing, 0.0892857em)\",\n  },\n\n  \".cm-textfield\": {\n    padding: \"4px 0px 5px\",\n    borderRadius: \"0\",\n    fontSize: \"16px\",\n    color: \"var(--primary-text-color)\",\n    border: \"0\",\n    background: \"none\",\n    fontFamily: \"Roboto\",\n    borderBottom: \"1px solid var(--secondary-text-color)\",\n    margin: \"4px 4px 0\",\n    \"& ::placeholder\": {\n      color: \"var(--secondary-text-color)\",\n    },\n    \"&:focus\": {\n      outline: \"none\",\n      borderBottom: \"2px solid var(--primary-color)\",\n      paddingBottom: \"4px\",\n    },\n  },\n\n  \".cm-tooltip\": {\n    color: \"var(--primary-text-color)\",\n    backgroundColor:\n      \"var(--code-editor-background-color, var(--card-background-color))\",\n    border: \"1px solid var(--divider-color)\",\n    borderRadius: \"var(--mdc-shape-medium, 4px)\",\n    boxShadow:\n      \"0px 5px 5px -3px rgb(0 0 0 / 20%), 0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%)\",\n  },\n\n  \"& .cm-tooltip.cm-tooltip-autocomplete > ul > li\": {\n    padding: \"4px 8px\",\n  },\n\n  \"& .cm-tooltip-autocomplete ul li[aria-selected]\": {\n    background: \"var(--primary-color)\",\n    color: \"var(--text-primary-color)\",\n  },\n\n  \".cm-completionIcon\": {\n    display: \"none\",\n  },\n\n  \".cm-completionDetail\": {\n    fontFamily: \"Roboto\",\n    color: \"var(--secondary-text-color)\",\n  },\n\n  \"li[aria-selected] .cm-completionDetail\": {\n    color: \"var(--text-primary-color)\",\n  },\n\n  \"& .cm-completionInfo.cm-completionInfo-right\": {\n    left: \"calc(100% + 4px)\",\n  },\n\n  \"& .cm-tooltip.cm-completionInfo\": {\n    padding: \"4px 8px\",\n    marginTop: \"-5px\",\n  },\n\n  \".cm-selectionMatch\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.1)\",\n  },\n\n  \".cm-searchMatch\": {\n    backgroundColor: \"rgba(var(--rgb-accent-color), .2)\",\n    outline: \"1px solid rgba(var(--rgb-accent-color), .4)\",\n  },\n  \".cm-searchMatch.selected\": {\n    backgroundColor: \"rgba(var(--rgb-accent-color), .4)\",\n    outline: \"1px solid var(--accent-color)\",\n  },\n\n  \".cm-gutters\": {\n    backgroundColor:\n      \"var(--code-editor-gutter-color, var(--secondary-background-color, whitesmoke))\",\n    color: \"var(--secondary-text-color)\",\n    border: \"none\",\n    borderRight: \"1px solid var(--secondary-text-color)\",\n    paddingRight: \"1px\",\n  },\n  \"&.cm-focused .cm-gutters\": {\n    borderRight: \"2px solid var(--primary-color)\",\n    paddingRight: \"0\",\n  },\n  \".cm-gutterElement.lineNumber\": { color: \"inherit\" },\n});\n\nconst haHighlightStyle = HighlightStyle.define([\n  { tag: tags.keyword, color: \"var(--codemirror-keyword, #6262FF)\" },\n  {\n    tag: [\n      tags.name,\n      tags.deleted,\n      tags.character,\n      tags.propertyName,\n      tags.macroName,\n    ],\n    color: \"var(--codemirror-property, #905)\",\n  },\n  {\n    tag: [tags.function(tags.variableName), tags.labelName],\n    color: \"var(--codemirror-variable, #07a)\",\n  },\n  {\n    tag: [tags.color, tags.constant(tags.name), tags.standard(tags.name)],\n    color: \"var(--codemirror-qualifier, #690)\",\n  },\n  {\n    tag: [tags.definition(tags.name), tags.separator],\n    color: \"var(--codemirror-def, #8DA6CE)\",\n  },\n  {\n    tag: [\n      tags.typeName,\n      tags.className,\n      tags.number,\n      tags.changed,\n      tags.annotation,\n      tags.modifier,\n      tags.self,\n      tags.namespace,\n    ],\n    color: \"var(--codemirror-number, #ca7841)\",\n  },\n  {\n    tag: [\n      tags.operator,\n      tags.operatorKeyword,\n      tags.url,\n      tags.escape,\n      tags.regexp,\n      tags.link,\n      tags.special(tags.string),\n    ],\n    color: \"var(--codemirror-operator, #cda869)\",\n  },\n  { tag: tags.comment, color: \"var(--codemirror-comment, #777)\" },\n  {\n    tag: tags.meta,\n    color: \"var(--codemirror-meta, var(--primary-text-color))\",\n  },\n  { tag: tags.strong, fontWeight: \"bold\" },\n  { tag: tags.emphasis, fontStyle: \"italic\" },\n  {\n    tag: tags.link,\n    color: \"var(--primary-color)\",\n    textDecoration: \"underline\",\n  },\n  { tag: tags.heading, fontWeight: \"bold\" },\n  { tag: tags.atom, color: \"var(--codemirror-atom, #F90)\" },\n  { tag: tags.bool, color: \"var(--codemirror-atom, #F90)\" },\n  {\n    tag: tags.special(tags.variableName),\n    color: \"var(--codemirror-variable-2, #690)\",\n  },\n  { tag: tags.processingInstruction, color: \"var(--secondary-text-color)\" },\n  { tag: tags.string, color: \"var(--codemirror-string, #07a)\" },\n  { tag: tags.inserted, color: \"var(--codemirror-string2, #07a)\" },\n  { tag: tags.invalid, color: \"var(--error-color)\" },\n]);\n\nexport const haSyntaxHighlighting = syntaxHighlighting(haHighlightStyle);\n\n// A folding service for indent-based languages such as YAML.\nexport const foldingOnIndent = foldService.of((state, from, to) => {\n  const line = state.doc.lineAt(from);\n\n  // empty lines continue their indentation from surrounding lines\n  if (!line.length || !line.text.trim().length) {\n    return null;\n  }\n\n  let onlyEmptyNext = true;\n\n  const lineCount = state.doc.lines;\n  const indent = line.text.search(/\\S|$/); // Indent level of the first line\n\n  let foldStart = from; // Start of the fold\n  let foldEnd = to; // End of the fold\n\n  // Check if the next line is on a deeper indent level\n  // If so, continue subsequent lines\n  // If not, go on with the foldEnd\n  let nextLine = line;\n  while (nextLine.number < lineCount) {\n    nextLine = state.doc.line(nextLine.number + 1); // Next line\n    const nextIndent = nextLine.text.search(/\\S|$/); // Indent level of the next line\n\n    // If the next line is on a deeper indent level, add it to the fold\n    // empty lines continue their indentation from surrounding lines\n    if (\n      !nextLine.length ||\n      !nextLine.text.trim().length ||\n      nextIndent > indent\n    ) {\n      if (onlyEmptyNext) {\n        onlyEmptyNext = nextLine.text.trim().length === 0;\n      }\n      // include this line in the fold and continue\n      foldEnd = nextLine.to;\n    } else {\n      // If the next line is not on a deeper indent level, we found the end of the region\n      break;\n    }\n  }\n\n  // Don't create fold if it's a single line\n  if (\n    onlyEmptyNext ||\n    state.doc.lineAt(foldStart).number === state.doc.lineAt(foldEnd).number\n  ) {\n    return null;\n  }\n\n  // Set the fold start to the end of the first line\n  // With this, the fold will not include the first line\n  foldStart = line.to;\n\n  // Return a fold that covers the entire indent level\n  return { from: foldStart, to: foldEnd };\n});\n"],"names":["langs","jinja2","StreamLanguage","yaml","langCompartment","Compartment","readonlyCompartment","linewrapCompartment","foldingCompartment","tabKeyBindings","key","run","indentMore","indentLess","haTheme","EditorView","color","backgroundColor","borderRadius","caretColor","height","maxHeight","outline","borderLeftColor","paddingTop","paddingBottom","borderBottom","borderTop","border","padding","textTransform","margin","background","fontFamily","fontSize","fontWeight","letterSpacing","boxShadow","display","left","marginTop","borderRight","paddingRight","haHighlightStyle","HighlightStyle","tag","tags","fontStyle","textDecoration","haSyntaxHighlighting","syntaxHighlighting","foldingOnIndent","foldService","state","from","to","line","doc","lineAt","length","text","trim","onlyEmptyNext","lineCount","lines","indent","search","foldStart","foldEnd","nextLine","number","nextIndent"],"mappings":"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"}