// Copyright 2024 Daniel Valdivia
// Licensed under the Apache License, Version 2.0

syntax = "proto3";

package test;

// Simple echo service for testing the tunnel implementation
service EchoService {
  // Echo returns the same message that was sent
  rpc Echo(EchoRequest) returns (EchoResponse);

  // EchoError returns an error with the specified code and message
  rpc EchoError(ErrorRequest) returns (EchoResponse);

  // EchoClientStream receives multiple messages and returns a summary
  rpc EchoClientStream(stream EchoRequest) returns (EchoResponse);

  // EchoServerStream receives one message and streams multiple responses
  rpc EchoServerStream(EchoRequest) returns (stream EchoResponse);

  // EchoBidiStream bidirectionally streams messages
  rpc EchoBidiStream(stream EchoRequest) returns (stream EchoResponse);
}

message EchoRequest {
  string message = 1;
}

message EchoResponse {
  string message = 1;
}

message ErrorRequest {
  int32 code = 1;
  string message = 2;
}
