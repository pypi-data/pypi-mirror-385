version: v2
plugins:
  # Generate Go protobuf code
  - remote: buf.build/protocolbuffers/go
    out: ../go-tunnel/pb
    opt:
      - paths=source_relative

  # Generate Go gRPC service stubs
  - remote: buf.build/grpc/go
    out: ../go-tunnel/pb
    opt:
      - paths=source_relative

  # Generate Python protobuf message code
  - remote: buf.build/protocolbuffers/python
    out: ../py-tunnel/pb

  # Generate Python gRPC service stubs
  - remote: buf.build/grpc/python
    out: ../py-tunnel/pb

  # Generate Python type stubs (pyi files)
  - remote: buf.build/protocolbuffers/pyi
    out: ../py-tunnel/pb
