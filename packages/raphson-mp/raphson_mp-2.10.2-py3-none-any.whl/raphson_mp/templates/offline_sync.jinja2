{% set title = gettext("Offline sync") %}
{% set back_url = "/" %}
{% set script = "offline_sync" %}
{% extends "base_static.jinja2" %}

{% block content %}

<h2>{% trans %}Settings{% endtrans %}</h2>

<form class="form form-large" action="/offline/settings" method="POST">
    <input type="hidden" name="csrf" value="{{ user.csrf }}">

    <label for="server">
        {% trans %}Server{% endtrans %}<br>
        <span class="secondary">Base URL for the music server, for example <code>https://music.raphson.nl</code></span>
    </label>
    <input type="text" id="server" name="server" value="{{ server }}" required>

    <label for="token">
        {% trans %}Authentication token{% endtrans %}<br>
        <span class="secondary">Obtain an authentication token by visiting <code>[server]/token</code> in a browser.</span>
    </label>
    <input type="password" id="token" name="token" value="{{ token }}" required>

    <label for="playlists">
        {% trans %}Playlists{% endtrans %}<br>
        <span class="secondary">Enter a semicolon-separated list of playlists to synchronize, or leave blank to synchronize favorite playlists.</span>
    </label>
    <input type="text" id="playlists" name="playlists" value="{{ playlists }}">

    <input type="submit" value="{% trans %}Save{% endtrans %}">
</form>

<h2>{% trans %}Synchronise{% endtrans %}</h2>

<p>{% trans %}You can leave this page while synchronization is in progress. It will continue in the background.{% endtrans %}</p>

<button hidden id="sync-button" class="button">Sync</button>
<button hidden id="stop-button" class="button">Stop</button>
<p id="wait">{% trans %}Loading downloader status, this may take a while. Please wait...{% endtrans %}</p>

<table hidden class="table" id="table">
    <thead>
        <tr>
            <th class="wrap">{% trans %}Task{% endtrans %}</th>
            <th class="icon-col"></th>
        </tr>
    </thead>
    <tbody id="log"></tbody>
</table>

{% endblock content %}
