Metadata-Version: 2.4
Name: cdmn-mcp-server
Version: 2.0.0
Summary: í•˜ì´ë¸Œë¦¬ë“œ DMN MCP ì„œë²„ - cDMN APIì™€ í‘œì¤€ XML íŒŒì‹±ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” FastMCP ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì„œë²„
Home-page: https://github.com/rickjang/cdmn-mcp-server
Author: rickjang
Author-email: rickjang <rickjang@example.com>
License: MIT
Project-URL: Homepage, https://github.com/rickjang/cdmn-mcp-server
Project-URL: Documentation, https://github.com/rickjang/cdmn-mcp-server#readme
Project-URL: Repository, https://github.com/rickjang/cdmn-mcp-server
Project-URL: Bug Tracker, https://github.com/rickjang/cdmn-mcp-server/issues
Keywords: mcp,dmn,decision,rules,engine,fastmcp,llm,natural language
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Office/Business :: Financial
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastmcp>=0.1.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: lxml>=4.9.0
Requires-Dist: uvloop>=0.17.0
Requires-Dist: aiofiles>=23.0.0
Requires-Dist: python-multipart>=0.0.6
Requires-Dist: httpx>=0.24.0
Provides-Extra: cdmn
Requires-Dist: cdmn>=2.0.0; extra == "cdmn"
Requires-Dist: idp-engine>=0.12.0; extra == "cdmn"
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: httpx>=0.24.0; extra == "dev"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# CDMN Decision MCP Server (Hybrid DMN)

í•˜ì´ë¸Œë¦¬ë“œ DMN MCP ì„œë²„ - cDMN APIì™€ í‘œì¤€ XML íŒŒì‹±ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” FastMCP ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì„œë²„ì…ë‹ˆë‹¤.

## ğŸš€ Features

### í•µì‹¬ ê¸°ëŠ¥
- **ğŸ”„ í•˜ì´ë¸Œë¦¬ë“œ DMN ì—”ì§„**: cDMN APIì™€ í‘œì¤€ XML íŒŒì‹±ì„ ëª¨ë‘ ì§€ì›
- **ğŸ¤– ìë™ ì—”ì§„ ì„ íƒ**: cDMN ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ XML íŒŒì„œë¡œ í´ë°±
- **ğŸ“„ DMN XML ì§€ì›**: DMN 1.3 í‘œì¤€ XML í˜•ì‹ ì™„ë²½ ì§€ì›
- **ğŸ¯ ë‹¤ì–‘í•œ Hit Policy**: FIRST, UNIQUE, ANY, PRIORITY ë“± ì§€ì›
- **ğŸ“Š ì˜ì‚¬ê²°ì • ì¶”ì **: ì‹¤í–‰ ê²½ë¡œì™€ ê·œì¹™ ë§¤ì¹­ ê³¼ì • ìƒì„¸ ì¶”ì 

### ê³ ê¸‰ ê¸°ëŠ¥
- **ì™„ì „íˆ ì œë„¤ë¦­í•œ ì˜ì‚¬ê²°ì • ì—”ì§„**: ê³ ì •ëœ ìŠ¤í‚¤ë§ˆ ì—†ì´ key-value í˜•íƒœì˜ ìœ ì—°í•œ ì…ë ¥ ì²˜ë¦¬
- **ìì—°ì–´ â†’ DMN í˜¸ì¶œ ìë™í™”**: LLM ê¸°ë°˜ ìì—°ì–´ íŒŒì‹±ìœ¼ë¡œ DMN ì¸í¼ëŸ°ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜
- **Rule ê´€ë¦¬ ê¸°ëŠ¥**: DMN XMLì„ ë¡œë“œ, ì €ì¥, ì¡°íšŒ ê°€ëŠ¥
- **ë™ì  ìŠ¤í‚¤ë§ˆ ì¡°íšŒ**: ê° ê·œì¹™ì˜ ì…ë ¥ ìš”êµ¬ì‚¬í•­ì„ ëŸ°íƒ€ì„ì— í™•ì¸ ê°€ëŠ¥
- **í˜¸ì¶œì¸¡ LLM ìµœì í™”**: ë§ˆí¬ë‹¤ìš´ ìƒì„±ì€ í˜¸ì¶œì¸¡ LLMì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„
- **í™•ì¥ ê°€ëŠ¥í•œ ê·œì¹™ ì‹œìŠ¤í…œ**: ìƒˆë¡œìš´ ê·œì¹™ì„ ë™ì ìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥
- **MCP í”„ë¡œí† ì½œ ì¤€ìˆ˜**: FastMCP ê¸°ë°˜ìœ¼ë¡œ LLMì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ ë° ì‘ë‹µ ì²˜ë¦¬ ê°€ëŠ¥

## ğŸ“‹ Requirements

- Python 3.11+
- FastMCP
- cDMN (ì„ íƒì‚¬í•­, ê³ ê¸‰ DMN ê¸°ëŠ¥ ì‚¬ìš© ì‹œ)
- idp-engine (cDMN ì‚¬ìš© ì‹œ í•„ìš”)

## ğŸ› ï¸ Installation

### Using pip

```bash
pip install cdmn-mcp-server
```

### With cDMN support (recommended)

```bash
pip install cdmn-mcp-server cdmn idp-engine
```

### From source

```bash
git clone https://github.com/rickjang/cdmn-mcp-server.git
cd cdmn-mcp-server
pip install -e .
```

## ğŸš€ Usage

### 1. Command Line

```bash
# ê¸°ë³¸ ì‹¤í–‰
cdmn-mcp-server

# ë˜ëŠ” Python ëª¨ë“ˆë¡œ ì‹¤í–‰
python -m cdmn_mcp_server.server_fully_generic
```

### 2. MCP ì„¤ì • íŒŒì¼

Claude Desktop ë“±ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •:

```json
{
  "mcpServers": {
    "cdmn-mcp-server": {
      "command": "uvx",
      "args": ["cdmn-mcp-server"]
    }
  }
}
```

### 3. Python API

```python
from cdmn_mcp_server.server_fully_generic import DMNModel

# DMN ëª¨ë¸ ì´ˆê¸°í™”
dmn_model = DMNModel()

# ê·œì¹™ ë¡œë“œ
await dmn_model.load_rule("insurance_premium")

# ì˜ì‚¬ê²°ì • ì‹¤í–‰
result = await dmn_model.evaluate_decision("insurance_premium", {
    "age": 65,
    "smoker": True,
    "health_score": 30
})

print(result.result)  # {'Risk Category': 'Very High'}
print(result.engine_used)  # 'cdmn' ë˜ëŠ” 'xml'
```

## ğŸ“š Available Tools

### 1. `load_rule(rule_name: str)`
DMN XML ê·œì¹™ì„ ë¡œë“œí•©ë‹ˆë‹¤.

### 2. `save_rule(rule_name: str, xml_content: str)`
ìƒˆë¡œìš´ DMN ê·œì¹™ì„ ì €ì¥í•©ë‹ˆë‹¤.

### 3. `list_rules()`
ë“±ë¡ëœ DMN ê·œì¹™ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

### 4. `delete_rule(rule_name: str)`
DMN ê·œì¹™ì„ ì‚­ì œí•©ë‹ˆë‹¤.

### 5. `get_rule_schema(rule_name: str)`
ê·œì¹™ì˜ ì…ë ¥ ìŠ¤í‚¤ë§ˆë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

### 6. `infer_decision(rule_name: str, context_input: Dict[str, Any])`
DMN ê·œì¹™ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜ì‚¬ê²°ì •ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

### 7. `register_rule(rule_name: str, rule_config: Dict[str, Any])`
ìƒˆë¡œìš´ ê·œì¹™ì„ ë™ì ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

### 8. `check_engine_status()`
í•˜ì´ë¸Œë¦¬ë“œ ì—”ì§„ì˜ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

## ğŸ¯ Examples

### ë³´í—˜ë£Œ ê³„ì‚°

```python
# ê·œì¹™ ë¡œë“œ
await load_rule("insurance_premium")

# ì˜ì‚¬ê²°ì • ì‹¤í–‰
result = await infer_decision("insurance_premium", {
    "age": 65,
    "smoker": True,
    "health_score": 30
})

# ê²°ê³¼:
# {
#   "result": {"Risk Category": "Very High"},
#   "engine_used": "xml",
#   "execution_time": 0.0001,
#   "trace": [...]
# }
```

### ëŒ€ì¶œ ìŠ¹ì¸

```python
result = await infer_decision("loan_approval", {
    "credit_score": 750,
    "income": 60000,
    "age": 35
})
```

## ğŸ”§ Engine Types

### cDMN API (ê³ ê¸‰)
- âœ… ëª¨ë¸ í™•ì¥: ëª¨ë“  ê°€ëŠ¥í•œ í•´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŒ
- âœ… ì „íŒŒ: ì…ë ¥ê°’ì„ í†µí•´ ì¶œë ¥ê°’ì„ ìë™ ê³„ì‚°
- âœ… ë¶ˆí™•ì‹¤ì„± ì²˜ë¦¬: í™•ì •ë˜ì§€ ì•Šì€ ê°’ë“¤ì„ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬
- âŒ ì œí•œì‚¬í•­: ì¼ë¶€ DMN XML í˜•ì‹ê³¼ í˜¸í™˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

### XML Parser (ê¸°ë³¸)
- âœ… ë²”ìš©ì„±: ëŒ€ë¶€ë¶„ì˜ í‘œì¤€ DMN XML í˜•ì‹ ì§€ì›
- âœ… í˜¸í™˜ì„±: ë‹¤ì–‘í•œ Hit Policy ì§€ì›
- âœ… ì•ˆì •ì„±: cDMN ì‹¤íŒ¨ ì‹œ ì•ˆì „í•œ í´ë°±
- âŒ ì œí•œì‚¬í•­: ê³ ê¸‰ ê¸°ëŠ¥(ëª¨ë¸ í™•ì¥ ë“±)ì€ ì§€ì›í•˜ì§€ ì•ŠìŒ

## ğŸ“ DMN XML Format

ì§€ì›ë˜ëŠ” DMN XML í˜•ì‹ ì˜ˆì œ:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             id="insurance-premium"
             name="Insurance Premium Calculation">
  
  <decision id="riskCategory" name="Risk Category">
    <decisionTable id="riskTable" hitPolicy="FIRST">
      <input id="ageInput" label="Age">
        <inputExpression typeRef="number">
          <text>age</text>
        </inputExpression>
      </input>
      <output id="riskOutput" label="Risk Category" typeRef="string"/>
      
      <rule id="rule1">
        <inputEntry id="age1">
          <text>age &gt;= 60</text>
        </inputEntry>
        <outputEntry id="risk1">
          <text>"High Risk"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  
</definitions>
```

## ğŸ› Troubleshooting

### cDMN API ì˜¤ë¥˜
- cDMN APIê°€ íŠ¹ì • XML í˜•ì‹ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ê²½ìš°, ìë™ìœ¼ë¡œ XML íŒŒì„œë¡œ í´ë°±ë©ë‹ˆë‹¤.
- ì´ëŠ” ì •ìƒì ì¸ ë™ì‘ì´ë©°, ëŒ€ë¶€ë¶„ì˜ ê²½ìš° XML íŒŒì„œë¡œ ì¶©ë¶„íˆ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### XML íŒŒì‹± ì˜¤ë¥˜
- XML í˜•ì‹ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ íƒœê·¸ êµ¬ì¡°ê°€ DMN 1.3 í‘œì¤€ì„ ë”°ë¥´ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- `<`, `>` ê°™ì€ íŠ¹ìˆ˜ ë¬¸ìëŠ” `&lt;`, `&gt;`ë¡œ ì´ìŠ¤ì¼€ì´í”„í•´ì•¼ í•©ë‹ˆë‹¤.

## ğŸ“„ License

MIT License

## ğŸ‘¤ Author

rickjang

## ğŸ”— Links

- [GitHub Repository](https://github.com/rickjang/cdmn-mcp-server)
- [PyPI Package](https://pypi.org/project/cdmn-mcp-server/)
- [cDMN Documentation](https://cdmn.readthedocs.io/)
- [FastMCP Documentation](https://gofastmcp.com/)

## ğŸ“ˆ Changelog

### 2.0.0 (2025-10-18)
- âœ¨ í•˜ì´ë¸Œë¦¬ë“œ DMN ì—”ì§„ ì¶”ê°€ (cDMN + XML)
- âœ¨ ìë™ ì—”ì§„ ì„ íƒ ë° í´ë°± ë©”ì»¤ë‹ˆì¦˜
- âœ¨ DMN 1.3 í‘œì¤€ XML ì™„ë²½ ì§€ì›
- âœ¨ ë‹¤ì–‘í•œ Hit Policy ì§€ì› (FIRST, UNIQUE, ANY, PRIORITY)
- âœ¨ ì‹¤í–‰ ì—”ì§„ ì •ë³´ ì¶”ì  ê¸°ëŠ¥
- ğŸ“š ë¬¸ì„œ ëŒ€í­ ê°œì„ 

### 1.3.0
- ì´ˆê¸° ì œë„¤ë¦­ ë²„ì „ ë¦´ë¦¬ìŠ¤

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
