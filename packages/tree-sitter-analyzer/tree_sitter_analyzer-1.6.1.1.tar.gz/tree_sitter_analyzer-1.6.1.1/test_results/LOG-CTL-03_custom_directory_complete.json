{
  "test_case_id": "LOG-CTL-03",
  "test_name": "カスタムディレクトリ指定: 指定したディレクトリにログが出力されることの確認",
  "execution_datetime": "2025-10-18T16:07:00.000Z",
  "execution_method": "CLI経由",
  "environment_variables": {
    "TREE_SITTER_ANALYZER_ENABLE_FILE_LOG": "true",
    "TREE_SITTER_ANALYZER_LOG_DIR": "./test_logs",
    "TREE_SITTER_ANALYZER_FILE_LOG_LEVEL": "未設定",
    "LOG_LEVEL": "未設定"
  },
  "test_parameters": {
    "enable_file_log": "true",
    "custom_log_dir": "./test_logs"
  },
  "expected_results": {
    "log_file_generated": true,
    "custom_directory_created": true,
    "log_file_location": "./test_logs/tree_sitter_analyzer.log",
    "command_execution_success": true,
    "logs_written_to_file": true
  },
  "actual_results": {
    "log_file_generated": true,
    "custom_directory_created": true,
    "log_file_location": "./test_logs/tree_sitter_analyzer.log",
    "command_execution_success": true,
    "exit_code": 0,
    "execution_time_ms": "約1500",
    "logs_written_to_file": true,
    "log_entries_count": 3,
    "log_levels_recorded": ["WARNING", "ERROR"],
    "directory_auto_created": true
  },
  "verification_steps": [
    {
      "step": "テストディレクトリクリア",
      "command": "if (Test-Path './test_logs') { Remove-Item './test_logs' -Recurse -Force }",
      "result": "テストディレクトリクリア完了"
    },
    {
      "step": "環境変数設定",
      "command": "[Environment]::SetEnvironmentVariable('TREE_SITTER_ANALYZER_ENABLE_FILE_LOG', 'true', 'Process'); [Environment]::SetEnvironmentVariable('TREE_SITTER_ANALYZER_LOG_DIR', './test_logs', 'Process')",
      "result": "正常設定完了"
    },
    {
      "step": "テストスクリプト実行",
      "command": "uv run python run_test.py",
      "result": "正常実行完了（exit code: 0）"
    },
    {
      "step": "カスタムディレクトリ作成確認",
      "command": "Test-Path './test_logs'",
      "result": "ディレクトリ自動作成確認済み"
    },
    {
      "step": "ログファイル生成確認",
      "command": "Get-ChildItem './test_logs'",
      "result": "tree_sitter_analyzer.logファイル生成確認済み"
    },
    {
      "step": "ログ内容検証",
      "command": "Get-Content './test_logs/tree_sitter_analyzer.log'",
      "checks": [
        "カスタムディレクトリ./test_logsが自動作成された",
        "指定したディレクトリにtree_sitter_analyzer.logが生成",
        "ログファイルにWARNINGとERRORレベルのログが記録",
        "テストスクリプトからの意図的なログメッセージが記録"
      ],
      "result": "すべて正常"
    }
  ],
  "test_status": "PASS",
  "notes": [
    "環境変数TREE_SITTER_ANALYZER_LOG_DIR=./test_logsによりカスタムディレクトリが正常に指定された",
    "指定したディレクトリが存在しない場合、自動的に作成される機能が正常に動作",
    "カスタムディレクトリ内にtree_sitter_analyzer.logファイルが正常に生成された",
    "ログファイルにはWARNINGとERRORレベルのログが記録された（デフォルトレベル）",
    "標準エラー出力にファイルログ有効化メッセージが表示され、カスタムパスが確認できた"
  ],
  "complete_actual_output": {
    "console_output": {
      "file_log_setup_message": "[logging_setup] File logging enabled: test_logs\\tree_sitter_analyzer.log",
      "test_execution": "正常実行（詳細ログは標準エラー出力に表示）"
    },
    "log_file_content": [
      "2025-10-19 01:06:46,513 - tree_sitter_analyzer - WARNING - No dynamic query module for 'unknown', using predefined queries.",
      "2025-10-19 01:06:46,589 - tree_sitter_analyzer - WARNING - This is a test warning message for single file test.",
      "2025-10-19 01:06:46,589 - tree_sitter_analyzer - ERROR - This is a test error message for single file test."
    ],
    "log_file_path": "./test_logs/tree_sitter_analyzer.log",
    "directory_info": {
      "created_automatically": true,
      "path": "./test_logs",
      "file_count": 1,
      "log_file_size_bytes": 347
    },
    "log_entries_analysis": {
      "total_entries": 3,
      "warning_entries": 2,
      "error_entries": 1,
      "debug_entries": 0,
      "info_entries": 0
    }
  }
}