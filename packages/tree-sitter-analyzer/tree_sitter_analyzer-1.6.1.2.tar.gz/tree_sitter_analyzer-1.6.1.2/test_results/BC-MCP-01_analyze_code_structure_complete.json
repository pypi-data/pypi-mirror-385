{
  "test_case_id": "BC-MCP-01",
  "test_name": "MCPツール (analyze_code_structure) 後方互換性テスト",
  "execution_datetime": "2025-10-18T23:03:53.325Z",
  "execution_method": "MCP経由",
  "mcp_server": "tree-sitter-analyzer-bc-test",
  "environment_variables": {
    "TREE_SITTER_ANALYZER_ENABLE_FILE_LOG": "未設定",
    "TREE_SITTER_ANALYZER_LOG_DIR": "未設定",
    "TREE_SITTER_ANALYZER_FILE_LOG_LEVEL": "未設定",
    "LOG_LEVEL": "未設定"
  },
  "test_parameters": {
    "file_path": "examples/BigService.java"
  },
  "expected_results": {
    "log_file_generated": false,
    "tool_execution_success": true,
    "output_format": "詳細なコード構造解析結果"
  },
  "actual_results": {
    "log_file_generated": false,
    "tool_execution_success": true,
    "execution_time_ms": 11231,
    "output_summary": {
      "format_type": "full",
      "language": "java",
      "metadata": {
        "classes_count": 1,
        "methods_count": 66,
        "fields_count": 9,
        "total_lines": 1419
      }
    }
  },
  "verification_steps": [
    {
      "step": "環境変数クリア確認",
      "command": "Remove-Item Env:TREE_SITTER_ANALYZER_* -ErrorAction SilentlyContinue",
      "result": "成功"
    },
    {
      "step": "ログファイル生成確認",
      "command": "Get-ChildItem -Path . -Filter '*.log' -Recurse | Where-Object { $_.LastWriteTime -gt (Get-Date).AddMinutes(-2) }",
      "result": "ログファイル生成なし（期待通り）"
    },
    {
      "step": "MCPツール実行",
      "tool": "analyze_code_structure",
      "result": "正常実行完了"
    }
  ],
  "test_status": "PASS",
  "notes": [
    "ログファイルが生成されていないことを確認済み",
    "BigService.javaの詳細な構造解析が正常に実行された",
    "66個のメソッド、9個のフィールドが正確に検出された",
    "パッケージ、インポート、クラス情報が適切に出力された"
  ],
  "complete_actual_output": {
    "table_output": "# com.example.service.BigService\n\n## Package\n`com.example.service`\n\n## Imports\n```java\njava.util\njava.time.LocalDateTime\njava.time.format.DateTimeFormatter\njava.sql.Connection\njava.sql.PreparedStatement\njava.sql.ResultSet\njava.sql.SQLException\njavax.sql.DataSource\n```\n\n## Class Info\n| Property | Value |\n|----------|-------|\n| Package | com.example.service |\n| Type | class |\n| Visibility | public |\n| Lines | 17-1419 |\n| Total Methods | 66 |\n| Total Fields | 9 |\n\n## BigService (17-1419)\n### Fields\n| Name | Type | Vis | Modifiers | Line | Doc |\n|------|------|-----|-----------|------|-----|\n| DEFAULT_ENCODING | String | - | private,static,final | 19 | - |\n| MAX_RETRY_COUNT | int | - | private,static,final | 20 | - |\n| TIMEOUT_MILLISECONDS | long | - | private,static,final | 21 | - |\n| DATE_FORMAT | String | - | private,static,final | 22 | - |\n| dataSource | DataSource | - | private | 24 | - |\n| configurationCache | Map<String, Object> | - | private | 25 | - |\n| activeConnections | List<String> | - | private | 26 | - |\n| validatedUsers | Set<String> | - | private | 27 | - |\n| pendingOperations | Queue<String> | - | private | 28 | - |\n\n### Constructors\n| Constructor | Signature | Vis | Lines | Cx | Doc |\n|-------------|-----------|-----|-------|----|----|\n| BigService | ():void | + | 33-39 | 1 | - |\n\n### Public Methods\n| Method | Signature | Vis | Lines | Cx | Doc |\n|--------|-----------|-----|-------|----|----|\n| authenticateUser | (username:String, password:String):boolean | + | 141-172 | 7 | - |\n| createSession | (username:String):String | + | 177-199 | 5 | - |\n| validateData | (data:Map<String, Object>):boolean | + | 204-246 | 14 | - |\n| logOperation | (operation:String, details:String):void | + | 280-290 | 6 | - |\n| manageCache | (key:String, value:Object):void | + | 295-308 | 4 | - |\n| performBackup | (backupType:String):void | + | 348-367 | 12 | - |\n| generateReport | (reportType:String, parameters:Map<String, Object>):void | + | 438-471 | 10 | - |\n| updateCustomerName | (customerId:String, newName:String):void | + | 601-617 | 4 | - |\n| getCustomerInfo | (customerId:String):Map<String, Object> | + | 622-652 | 9 | - |\n| deleteCustomer | (customerId:String):boolean | + | 657-691 | 9 | - |\n| processOrder | (customerId:String, items:List<String>, totalAmount:double):String | + | 696-736 | 11 | - |\n| manageInventory | (action:String, itemId:String, quantity:int):void | + | 741-773 | 10 | - |\n| sendNotification | (recipient:String, message:String, type:String):void | + | 855-884 | 15 | - |\n| shutdownSystem | ():void | + | 889-912 | 6 | - |\n| handleError | (error:Exception, context:String):void | + | 958-977 | 5 | - |\n| monitorPerformance | ():void | + | 1046-1067 | 4 | - |\n| performSecurityCheck | ():void | + | 1155-1171 | 4 | - |\n| synchronizeData | (sourceSystem:String, targetSystem:String):void | + | 1254-1283 | 7 | - |\n| main | (args:String[]):void [static] | + | 1385-1418 | 5 | - |\n\n### Private Methods\n| Method | Signature | Vis | Lines | Cx | Doc |\n|--------|-----------|-----|-------|----|----|\n| initializeService | ():void | - | 44-50 | 1 | - |\n| loadConfiguration | ():void | - | 55-65 | 4 | - |\n| setupDatabaseConnection | ():void | - | 70-77 | 2 | - |\n| validateSystemRequirements | ():void | - | 82-88 | 1 | - |\n| checkMemoryUsage | ():void | - | 93-106 | 2 | - |\n| checkDiskSpace | ():void | - | 111-117 | 2 | - |\n| checkNetworkConnectivity | ():void | - | 122-136 | 3 | - |\n| validateEmail | (email:String):boolean | - | 251-254 | 1 | - |\n| validatePhoneNumber | (phone:String):boolean | - | 259-262 | 1 | - |\n| validateDate | (date:String):boolean | - | 267-275 | 4 | - |\n| cleanupCache | ():void | - | 313-326 | 2 | - |\n| updateCacheStatistics | ():void | - | 331-335 | 1 | - |\n| calculateCacheHitRatio | ():double | - | 340-343 | 1 | - |\n| performFullBackup | ():void | - | 372-395 | 8 | - |\n| performIncrementalBackup | ():void | - | 400-414 | 8 | - |\n| performDifferentialBackup | ():void | - | 419-433 | 11 | - |\n| prepareReportData | (reportType:String, parameters:Map<String, Object>):void | - | 476-490 | 5 | - |\n| generateSalesReport | (parameters:Map<String, Object>):void | - | 495-513 | 7 | - |\n| generatePerformanceReport | (parameters:Map<String, Object>):void | - | 518-534 | 12 | - |\n| generateUserActivityReport | (parameters:Map<String, Object>):void | - | 539-553 | 4 | - |\n| generateSystemHealthReport | (parameters:Map<String, Object>):void | - | 558-574 | 5 | - |\n| finalizeReport | (reportType:String):void | - | 579-593 | 5 | - |\n| addInventory | (itemId:String, quantity:int):void | - | 778-792 | 6 | - |\n| removeInventory | (itemId:String, quantity:int):void | - | 797-811 | 5 | - |\n| updateInventory | (itemId:String, quantity:int):void | - | 816-830 | 5 | - |\n| checkInventory | (itemId:String):void | - | 835-850 | 6 | - |\n| savePendingOperations | ():void | - | 917-926 | 2 | - |\n| closeDatabaseConnections | ():void | - | 931-940 | 2 | - |\n| finalizeSystemLogs | ():void | - | 945-953 | 2 | - |\n| handleDatabaseError | (error:SQLException):void | - | 982-996 | 4 | - |\n| handleValidationError | (error:IllegalArgumentException):void | - | 1001-1009 | 2 | - |\n| handleRuntimeError | (error:RuntimeException):void | - | 1014-1028 | 5 | - |\n| handleGenericError | (error:Exception):void | - | 1033-1041 | 2 | - |\n| monitorCpuUsage | ():void | - | 1072-1086 | 4 | - |\n| monitorMemoryUsage | ():void | - | 1091-1112 | 4 | - |\n| monitorDiskIO | ():void | - | 1117-1131 | 4 | - |\n| monitorNetworkUsage | ():void | - | 1136-1150 | 4 | - |\n| checkAccessPermissions | ():void | - | 1176-1192 | 6 | - |\n| validateSecuritySettings | ():void | - | 1197-1211 | 4 | - |\n| performVulnerabilityScan | ():void | - | 1216-1230 | 8 | - |\n| reviewSecurityLogs | ():void | - | 1235-1249 | 5 | - |\n| prepareSynchronization | (sourceSystem:String, targetSystem:String):void | - | 1288-1302 | 4 | - |\n| extractData | (sourceSystem:String):void | - | 1307-1323 | 5 | - |\n| transformData | ():void | - | 1328-1342 | 9 | - |\n| loadData | (targetSystem:String):void | - | 1347-1361 | 4 | - |\n| verifySynchronization | (sourceSystem:String, targetSystem:String):void | - | 1366-1380 | 8 | - |",
    "format_type": "full",
    "file_path": "examples/BigService.java",
    "language": "java",
    "metadata": {
      "classes_count": 1,
      "methods_count": 66,
      "fields_count": 9,
      "total_lines": 1419
    }
  }
}