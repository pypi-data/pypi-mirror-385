[project]
name = "modaic"
version = "0.4.0"
description = "Modular Agent Infrastructure Collection, a python framework for managing and sharing DSPy agents"
authors = [{ name = "Tyrin", email = "tytodd@mit.edu" }, {name = "Farouk", email = "farouk@modaic.dev"}]
readme = "README.md"
license = {file = "LICENSE"}
requires-python = ">=3.10"
dependencies = [
    "aenum>=3.1.16",
    "dspy>=2.6.27",
    "duckdb>=1.3.2",
    "filetype>=1.2.0",
    "gitpython>=3.1.45",
    "immutables>=0.21",
    "langchain-community>=0.3.29",
    "langchain-core>=0.3.72",
    "langchain-text-splitters>=0.3.9",
    "more-itertools>=10.8.0",
    "openpyxl>=3.1.5",
    "opik==1.8.42",
    "pillow>=11.3.0",
    "pymilvus>=2.5.14",
    "sqlalchemy>=2.0.42",
    "tomlkit>=0.13.3",
]

[dependency-groups]
dev = [
    "colorama>=0.4.6",
    "ipykernel>=6.30.0",
    "mkdocs-material>=9.6.16",
    "mkdocstrings[python]>=0.30.0",
    "pydoc-markdown>=4.8.2",
    "pdoc>=15.0.4",
    "pytest>=8.4.1",
    "ruff>=0.12.7",
    "matplotlib>=3.10.6",
]
examples = [
    "langchain-text-splitters>=0.3.9",
    "pinecone>=7.3.0",
]
graph = [
    "gqlalchemy>=1.8.0",
    "pymgclient>=1.5.1",
]

[project.optional-dependencies]
pinecone = ["pinecone>=7.3.0"]

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.packages.find]
where = ["src"]
exclude = [
    "mintlify*",
]

[tool.ruff]
line-length = 120
fix = true
exclude = ["*scratchpad*.py", "**/*.ipynb"]

[tool.ruff.lint]
select = ["E", "F", "I", "B", "T20", "ERA", "ANN", "N"]
unfixable = [
  "F401",
  "F841",
]
ignore = ["ANN202","ANN002", "ANN003", "ANN204", "ANN401"]
extend-ignore = ["E501"]

#[tool.ruff.lint.flake8-todos]
#task-tags = ["TODO", "FIXME", "XXX", "BUG", "HACK", "NOTE", "CAVEAT", "DOCME"]

[tool.ruff.lint.flake8-annotations]
suppress-none-returning = true

[tool.uv.workspace]
members = [
    "tests/artifacts/test_repos/simple_repo",
    ".",
    "tests/artifacts/test_repos/simple_repo_with_compile",
    "tests/artifacts/test_repos/nested_repo",
    "tests/artifacts/test_repos/nested_repo_2",
    "tests/artifacts/test_repos/nested_repo_3",
    "tests/artifacts/test_repos/multi_module_repo",
    "tests/artifacts/test_repos/failing_repo",
]
