<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../..><link href=../context/ rel=next><link rel=icon href=../../assets/images/trademark.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Specification - Flywheel Gears</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=https://cdn.flywheel.io/static/mkdocs/stylesheets/custom.css><link rel=stylesheet href=https://cdn.flywheel.io/static/mkdocs/stylesheets/asciinema-player.css><link rel=stylesheet href=https://cdn.flywheel.io/static/mkdocs/stylesheets/asciinema-theme.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#flywheel-gear-spec-v030 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Flywheel Gears" class="md-header__button md-logo" aria-label="Flywheel Gears" data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Flywheel Gears </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Specification </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://gitlab.com/flywheel-io/scientific-solutions/lib/fw-gear.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitLab </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Flywheel Gears" class="md-nav__button md-logo" aria-label="Flywheel Gears" data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> Flywheel Gears </label> <div class=md-nav__source> <a href=https://gitlab.com/flywheel-io/scientific-solutions/lib/fw-gear.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitLab </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Specification </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Specification </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#structure-behavior-of-a-gear class=md-nav__link> <span class=md-ellipsis> Structure &amp; behavior of a gear </span> </a> <nav class=md-nav aria-label="Structure & behavior of a gear"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimum-container-requirements class=md-nav__link> <span class=md-ellipsis> Minimum container requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-base-folder class=md-nav__link> <span class=md-ellipsis> The base folder </span> </a> </li> <li class=md-nav__item> <a href=#the-manifest class=md-nav__link> <span class=md-ellipsis> The manifest </span> </a> <nav class=md-nav aria-label="The manifest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manifest-inputs class=md-nav__link> <span class=md-ellipsis> Manifest inputs </span> </a> </li> <li class=md-nav__item> <a href=#manifest-configuration class=md-nav__link> <span class=md-ellipsis> Manifest configuration </span> </a> </li> <li class=md-nav__item> <a href=#contextual-values class=md-nav__link> <span class=md-ellipsis> Contextual values </span> </a> </li> <li class=md-nav__item> <a href=#api-keys class=md-nav__link> <span class=md-ellipsis> API keys </span> </a> <nav class=md-nav aria-label="API keys"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#api-key-input class=md-nav__link> <span class=md-ellipsis> API key input </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-input-folder class=md-nav__link> <span class=md-ellipsis> The input folder </span> </a> </li> <li class=md-nav__item> <a href=#the-input-configuration class=md-nav__link> <span class=md-ellipsis> The input configuration </span> </a> </li> <li class=md-nav__item> <a href=#the-output-folder class=md-nav__link> <span class=md-ellipsis> The output folder </span> </a> </li> <li class=md-nav__item> <a href=#output-metadata class=md-nav__link> <span class=md-ellipsis> Output metadata </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-run-target-and-environment class=md-nav__link> <span class=md-ellipsis> The run target and environment </span> </a> <nav class=md-nav aria-label="The run target and environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-environment-for-the-run-script class=md-nav__link> <span class=md-ellipsis> The environment for the run script </span> </a> </li> <li class=md-nav__item> <a href=#custom-information class=md-nav__link> <span class=md-ellipsis> Custom information </span> </a> <nav class=md-nav aria-label="Custom information"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reserved-custom-keys class=md-nav__link> <span class=md-ellipsis> Reserved custom keys </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gear-design-rationale class=md-nav__link> <span class=md-ellipsis> Gear Design Rationale </span> </a> </li> <li class=md-nav__item> <a href=#contact class=md-nav__link> <span class=md-ellipsis> Contact </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../context/ class=md-nav__link> <span class=md-ellipsis> Context </span> </a> </li> <li class=md-nav__item> <a href=../utils/ class=md-nav__link> <span class=md-ellipsis> Utils </span> </a> </li> <li class=md-nav__item> <a href=../reference/ class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=../migrate-guide/how_to_migrate/ class=md-nav__link> <span class=md-ellipsis> Migration Guide </span> </a> </li> <li class=md-nav__item> <a href=../migrate-guide/general_feature_parity/ class=md-nav__link> <span class=md-ellipsis> Overall Parity </span> </a> </li> <li class=md-nav__item> <a href=../release_notes/ class=md-nav__link> <span class=md-ellipsis> Release Notes </span> </a> </li> <li class=md-nav__item> <a href=../migrate-guide/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#structure-behavior-of-a-gear class=md-nav__link> <span class=md-ellipsis> Structure &amp; behavior of a gear </span> </a> <nav class=md-nav aria-label="Structure & behavior of a gear"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#minimum-container-requirements class=md-nav__link> <span class=md-ellipsis> Minimum container requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-base-folder class=md-nav__link> <span class=md-ellipsis> The base folder </span> </a> </li> <li class=md-nav__item> <a href=#the-manifest class=md-nav__link> <span class=md-ellipsis> The manifest </span> </a> <nav class=md-nav aria-label="The manifest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manifest-inputs class=md-nav__link> <span class=md-ellipsis> Manifest inputs </span> </a> </li> <li class=md-nav__item> <a href=#manifest-configuration class=md-nav__link> <span class=md-ellipsis> Manifest configuration </span> </a> </li> <li class=md-nav__item> <a href=#contextual-values class=md-nav__link> <span class=md-ellipsis> Contextual values </span> </a> </li> <li class=md-nav__item> <a href=#api-keys class=md-nav__link> <span class=md-ellipsis> API keys </span> </a> <nav class=md-nav aria-label="API keys"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#api-key-input class=md-nav__link> <span class=md-ellipsis> API key input </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-input-folder class=md-nav__link> <span class=md-ellipsis> The input folder </span> </a> </li> <li class=md-nav__item> <a href=#the-input-configuration class=md-nav__link> <span class=md-ellipsis> The input configuration </span> </a> </li> <li class=md-nav__item> <a href=#the-output-folder class=md-nav__link> <span class=md-ellipsis> The output folder </span> </a> </li> <li class=md-nav__item> <a href=#output-metadata class=md-nav__link> <span class=md-ellipsis> Output metadata </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-run-target-and-environment class=md-nav__link> <span class=md-ellipsis> The run target and environment </span> </a> <nav class=md-nav aria-label="The run target and environment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-environment-for-the-run-script class=md-nav__link> <span class=md-ellipsis> The environment for the run script </span> </a> </li> <li class=md-nav__item> <a href=#custom-information class=md-nav__link> <span class=md-ellipsis> Custom information </span> </a> <nav class=md-nav aria-label="Custom information"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reserved-custom-keys class=md-nav__link> <span class=md-ellipsis> Reserved custom keys </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gear-design-rationale class=md-nav__link> <span class=md-ellipsis> Gear Design Rationale </span> </a> </li> <li class=md-nav__item> <a href=#contact class=md-nav__link> <span class=md-ellipsis> Contact </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!-- Disable annoying code fencing rule which gets triggered on admonitions --> <!-- markdownlint-disable MD046 --> <h1 id=flywheel-gear-spec-v030>Flywheel Gear Spec (v0.3.0)</h1> <p>This document describes the structure of a Flywheel Gear.</p> <h2 id=structure-behavior-of-a-gear>Structure &amp; behavior of a gear</h2> <p>A Flywheel gear is a tar file (.tar) of a container; the container must include a specific directory that contains two special files.</p> <p>This tar file can be created from most common container tools (e.g., Docker).</p> <h3 id=minimum-container-requirements>Minimum container requirements</h3> <p>The only requirement for the underlying container is that it must be a *nix system that provides a bash shell on the path.</p> <h2 id=the-base-folder>The base folder</h2> <p>To be a Flywheel gear, the container in the tar file must include a folder named: <code>/flywheel/v0</code>.</p> <p>All following references to folders are relative to this folder.</p> <p>The <code>/flywheel/v0</code> folder contains two specific files:</p> <ul> <li><code>manifest.json</code> - Describes critical properties of how the gear computes.</li> <li><code>run</code> - (Optional) Describes how to execute the algorithm in the gear. Alternately, use the manifest <code>command</code> key.</li> </ul> <p>The contents of these files are described here.</p> <h2 id=the-manifest>The manifest</h2> <p>Here's an example manifest.json that specifies a Flywheel gear which reads one dicom file as input and specifies one configuration parameter. The keys listed in this example are all required, unless marked otherwise.</p> <p>For other restrictions and required fields, you can view our.</p> <p>This document is a <a href=http://json-schema.org>JSON schema</a>, which allows for automatic validation of structured documents.</p> <p>Note, the <code>// comments</code> shown below are not JSON syntax and cannot be included in a real manifest file.</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w> </span><span class=c1>// Computer-friendly name; unique for your organization</span>
<span class=w> </span><span class=s2>&quot;name&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;example-gear&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// Human-friendly name; displayed in user interface</span>
<span class=w> </span><span class=s2>&quot;label&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Example Gear&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// A brief description of the gear&#39;s purpose; ideally 1-4 sentences</span>
<span class=w> </span><span class=s2>&quot;description&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;A gear that performs a task.&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// Human-friendly version identifier</span>
<span class=w> </span><span class=s2>&quot;version&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;1.0&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// The author of this gear or algorithm.</span>
<span class=w> </span><span class=s2>&quot;author&quot;</span><span class=o>:</span><span class=w>  </span><span class=s2>&quot;Flywheel&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// (Optional) the maintainer, which may be distinct from the algorithm author.</span>
<span class=w> </span><span class=c1>// Can be the same as the author field if both roles were filled by the same individual.</span>
<span class=w> </span><span class=s2>&quot;maintainer&quot;</span><span class=o>:</span><span class=w>  </span><span class=s2>&quot;Nathaniel Kofalt&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// (Optional) Any citations you wish to add.</span>
<span class=w> </span><span class=s2>&quot;cite&quot;</span><span class=o>:</span><span class=w>  </span><span class=s2>&quot;&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// Must be an OSI-approved SPDX license string or &#39;Other&#39;. Ref: https://spdx.org/licenses</span>
<span class=w> </span><span class=s2>&quot;license&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Apache-2.0&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// Where to go to learn more about the gear. You can leave this blank.</span>
<span class=w> </span><span class=s2>&quot;url&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;http://example.example&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// Where to go for the source code, if applicable. You can leave this blank.</span>
<span class=w> </span><span class=s2>&quot;source&quot;</span><span class=o>:</span><span class=w>  </span><span class=s2>&quot;http://example.example/code&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// (Optional) Environment variables to set for the gear.</span>
<span class=w> </span><span class=s2>&quot;environment&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>

<span class=w> </span><span class=p>},</span>

<span class=w> </span><span class=c1>// (Optional) Command to execute. Ran inside a bash shell.</span>
<span class=w> </span><span class=s2>&quot;command&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;python script.py&quot;</span>

<span class=w> </span><span class=c1>// Options that the gear can use</span>
<span class=w> </span><span class=s2>&quot;config&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>

<span class=w>  </span><span class=c1>// A name for this option to show in the user interface</span>
<span class=w>  </span><span class=s2>&quot;speed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;integer&quot;</span><span class=p>,</span>

<span class=w>   </span><span class=c1>// (Optional) json-schema syntax to provide further guidance</span>
<span class=w>   </span><span class=s2>&quot;minimum&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;maximum&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>3</span><span class=p>,</span>

<span class=w>   </span><span class=s2>&quot;description&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;How fast do you want the gear to run? Choose 0-3.&quot;</span>
<span class=w>  </span><span class=p>},</span>

<span class=w>  </span><span class=s2>&quot;coordinates&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;array&quot;</span><span class=p>,</span>

<span class=w>   </span><span class=s2>&quot;items&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span><span class=p>,</span>

<span class=w>    </span><span class=s2>&quot;minItems&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>3</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;maxItems&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>3</span><span class=p>,</span>
<span class=w>   </span><span class=p>},</span>

<span class=w>   </span><span class=s2>&quot;description&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;A set of 3D coordinates.&quot;</span>
<span class=w>  </span><span class=p>},</span>
<span class=w> </span><span class=p>},</span>

<span class=w> </span><span class=c1>// Inputs that the gear consumes</span>
<span class=w> </span><span class=s2>&quot;inputs&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>

<span class=w>  </span><span class=c1>// A label - describes one of the inputs. Used by the user interface and by the run script.</span>
<span class=w>  </span><span class=s2>&quot;dicom&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>

<span class=w>   </span><span class=c1>// Specifies that the input is a single file. For now, it&#39;s the only type.</span>
<span class=w>   </span><span class=s2>&quot;base&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;file&quot;</span><span class=p>,</span>

<span class=w>   </span><span class=c1>// (Optional) json-schema syntax to provide further guidance</span>
<span class=w>   </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=s2>&quot;enum&quot;</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;dicom&quot;</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=p>},</span>

<span class=w>   </span><span class=s2>&quot;description&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Any dicom file.&quot;</span>
<span class=w>  </span><span class=p>},</span>

<span class=w>  </span><span class=c1>// A contextual key-value, provided by the environment. Used for values that are</span>
<span class=w>  </span><span class=c1>//  generally the same for an entire project.</span>
<span class=w>  </span><span class=c1>// Not guaranteed to be found - the gear should decide if it can continue to run,</span>
<span class=w>  </span><span class=c1>//  or exit with an error.</span>
<span class=w>  </span><span class=s2>&quot;matlab_license_code&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;base&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;context&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=p>},</span>

<span class=w>  </span><span class=c1>// An API key, specific to this job, with the same access as the user that</span>
<span class=w>  </span><span class=c1>//  launched the gear.</span>
<span class=w>  </span><span class=c1>// Useful for aggregations, integrating with an external system, data analysis,</span>
<span class=w>  </span><span class=c1>//  or other automated tasks.</span>
<span class=w>  </span><span class=s2>&quot;key&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;base&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;api-key&quot;</span><span class=p>,</span>

<span class=w>   </span><span class=c1>// (Optional) request that the API key only be allowed read access.</span>
<span class=w>   </span><span class=s2>&quot;read-only&quot;</span><span class=o>:</span><span class=w> </span><span class=kc>true</span>
<span class=w>  </span><span class=p>}</span>
<span class=w> </span><span class=p>},</span>

<span class=w> </span><span class=c1>// Capabilities the gear requires. Not necessary unless you need a specific feature.</span>
<span class=w> </span><span class=s2>&quot;capabilities&quot;</span><span class=o>:</span><span class=w> </span><span class=p>[</span>
<span class=w>  </span><span class=s2>&quot;networking&quot;</span>
<span class=w> </span><span class=p>],</span>
<span class=p>}</span>
</code></pre></div> <h3 id=manifest-inputs>Manifest inputs</h3> <p>Each key of <code>inputs</code> specifies an input to the gear.</p> <p>At this point, the inputs are always files and the <code>"base": "file"</code> is part of the specification.</p> <p>Further constraints are an advanced feature, so feel free to leave this off until you want to pursue it. When present, they will be used to guide the user to give them hints as to which files are probably the right choice. In the example above, we add a constraint describing the <code>type</code> of file. File types will be matched against our <a href=https://github.com/scitran/core/wiki/Data-Model#file-subdocument-only>file data model</a>.</p> <p>Other constraints such as filename or file classification can be applied using the same approach. Below is a quick example on how to specify filename and file classification.</p> <div class=highlight><pre><span></span><code><span class=c1>// specify filename that matches the regex pattern</span>
<span class=s2>&quot;name&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=s2>&quot;pattern&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;.*.t1.dcm.zip&quot;</span><span class=p>,</span>
<span class=p>}</span>

<span class=c1>// or specify the classification of the file that is T1 or T2</span>
<span class=s2>&quot;classification&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=s2>&quot;properties&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;measurement&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<span class=w>      </span><span class=s2>&quot;enum&quot;</span><span class=o>:</span><span class=w> </span><span class=p>[</span>
<span class=w>         </span><span class=s2>&quot;T1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;T2&quot;</span>
<span class=w>        </span><span class=p>],</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>The example has named one input, called "dicom", and requests that the file's type be dicom.</p> <h3 id=manifest-configuration>Manifest configuration</h3> <p>Each key of <code>config</code> specifies a configuration option.</p> <p>Like the inputs, you can add JSON schema constraints as desired. Please specify a <code>type</code> on each key. Please only use non-object types: <code>string</code>, <code>integer</code>, <code>number</code>, <code>boolean</code>.</p> <p>The example has named one config option, called "speed", which must be an integer between zero and three, and another called "coordinates", which must be a set of three floats.</p> <p>In some cases, a configuration option may not have a safe default, and it only makes sense to sometimes omit it entirely. If that is the case, specify <code>"optional": true</code> on that config key.</p> <h3 id=contextual-values>Contextual values</h3> <p>Context inputs are values that are generally provided by the environment, rather than the human or process running the gear. These are generally values that are incidentally required rather than directly a part of the algorithm - for example, a license key.</p> <p>It is up to the gear executor to decide how (and if) context is provided. In the Flywheel system, the values can be provided by setting a <code>context.key-name</code> value on a container's metadata. For example, you could set <code>context.matlab_license_code: "AEX"</code> on the project, and then any gear running in that project with a context input called <code>matlab_license_code</code> would receive the value.</p> <p>Unlike a gear's config values, contexts are not guaranteed to exist <em>or</em> have a specific type or format. It is up to the gear to decide if it can continue, or exit with an error, when a context value does not match what the gear expects. In the example config file below, note that the <code>found</code> key can be checked to determine if a value was provided by the environment.</p> <p>Because context values are not namespaced, it is suggested that you use a specific and descriptive name. The <code>matlab_license_code</code> example is a good, self-explanatory key that many gears could likely reuse.</p> <h3 id=api-keys>API keys</h3> <p>It is possible to interact with the Flywheel data hierarchy using our <a href=https://flywheel-io.gitlab.io/product/backend/sdk/branches/master/python/index.html>python</a>, <a href=https://flywheel-io.gitlab.io/product/backend/sdk/branches/master/matlab/index.html>matlab</a>, and (slated for an overhaul) <a href=https://gitlab.com/flywheel-io/public/sdk>golang</a> SDKs.</p> <p>Generally, you will want to figure out a script that you like, using your normal user API key, before turning it into a gear. To do this, specify an <code>api-key</code> type input as show in the example above, and use that value in your gear script.</p> <p>The key provided will be a special key that has the same access as the running user (not necessarily the gear author), and only work while the job is running. After the job completes, the key is retired. This has write access by default, but you can make it read only by adding <code>"read-only": true</code> to the manifest as shown above.</p> <h4 id=api-key-input>API key input</h4> <p>The following is a sample snippet from a manifest.json which defines a <em>read-only</em> api key input. If you want a <em>read-write</em> api key input, you can remove the <code>read-only</code> line.</p> <div class=highlight><pre><span></span><code><span class=w>    </span><span class=err>...</span>
<span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=err>...</span>
<span class=w>        </span><span class=nt>&quot;api-key&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nt>&quot;base&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;api-key&quot;</span><span class=p>,</span>
<span class=w>          </span><span class=nt>&quot;read-only&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=err>...</span>
</code></pre></div> <h3 id=the-input-folder>The input folder</h3> <p>When a gear is executed, an <code>input</code> folder will be created relative to the base folder. If a gear has anything previously existing in the <code>input</code> folder it will be removed at launch time.</p> <p>In this example, the input is called "dicom", and so will be in a folder inside <code>input</code> called <code>dicom</code>. The full path would be, for example: <code>/flywheel/v0/input/dicom/my-data.dcm</code>.</p> <h3 id=the-input-configuration>The input configuration</h3> <p>Inside the <code>/flywheel/v0</code> folder a <code>config.json</code> file will be provided with any settings the user has provided, and information about provided files. For example, if your gear uses the example manifest above, you'd get a file like the following:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w> </span><span class=s2>&quot;config&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=s2>&quot;speed&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>  </span><span class=s2>&quot;coordinates&quot;</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=mf>3</span><span class=p>]</span>
<span class=w> </span><span class=p>},</span>
<span class=w> </span><span class=s2>&quot;inputs&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=s2>&quot;dicom&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;base&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;file&quot;</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;hierarchy&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;type&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;acquisition&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;id&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;5988d38b3b49ee001bde0853&quot;</span>
<span class=w>   </span><span class=p>},</span>
<span class=w>   </span><span class=s2>&quot;location&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;path&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;/flywheel/v0/input/dicom/example.dcm&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;name&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;example.dcm&quot;</span>
<span class=w>   </span><span class=p>},</span>
<span class=w>   </span><span class=s2>&quot;object&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;info&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>{},</span>
<span class=w>    </span><span class=s2>&quot;mimetype&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;application/octet-stream&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;tags&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=s2>&quot;measurements&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>[],</span>
<span class=w>    </span><span class=s2>&quot;type&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;dicom&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;modality&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;size&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mf>2913379</span>
<span class=w>   </span><span class=p>}</span>
<span class=w>  </span><span class=p>},</span>

<span class=w>  </span><span class=s2>&quot;matlab_license_code&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;base&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;context&quot;</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;found&quot;</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;value&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;ABC&quot;</span>
<span class=w>  </span><span class=p>}</span>
<span class=w> </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Each configuration key will have been checked server-side against any constraints you specified, so you can be assured that your gear will be provided valid values.</p> <p>The <code>inputs</code> key will hold useful information about the files. For example, you can use <code>inputs.dicom.path</code> to get the full path to the provided file. Also provided will be the location of the input in the hierarchy (if applicable) and any scientific information and metadata known at the time of the job creation. This <code>inputs</code> key will currently only be present when running on the Flywheel system.</p> <h3 id=the-output-folder>The output folder</h3> <p>When a gear is executed, an <code>output</code> folder will be created relative to the base folder. If a gear has anything previously existing in the <code>output</code> folder it will be removed at launch time.</p> <p>The gear should place any files that it wants saved into the <code>output</code> folder - and only those files. Anything in the <code>output</code> folder when the gear is complete will be saved as a result.</p> <p>If you don’t want results saved, it’s okay to leave this folder empty.<br> Do not remove the <code>output</code> folder.</p> <h3 id=output-metadata>Output metadata</h3> <p>Optionally, a gear can provide metadata about the files it produces. This is communicated via creating a <code>.metadata.json</code> file in the output folder.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Helpers for creating metadata are documented in the <a href=../context/#writing-metadata-non-sdk>Context Documentation</a></p> </div> <p>In general, try to place information under a single, top-level key, as in the example below. This is not a hard rule, but will generally help in avoiding errors on metadata upload</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w> </span><span class=s2>&quot;acquisition&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=s2>&quot;files&quot;</span><span class=o>:</span><span class=w> </span><span class=p>[</span>
<span class=w>   </span><span class=p>{</span>
<span class=w>    </span><span class=s2>&quot;name&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;example.nii.gz&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;type&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;nifti&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;instrument&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;mri&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=s2>&quot;info&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>     </span><span class=s2>&quot;value1&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;foo&quot;</span><span class=p>,</span>
<span class=w>     </span><span class=s2>&quot;value2&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bar&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>   </span><span class=p>}</span>
<span class=w>  </span><span class=p>]</span>
<span class=w> </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>If you are familiar with <a href=http://json-schema.org>JSON schema</a> you can look at our <a href=https://github.com/scitran/core/blob/master/swagger/schemas/input/enginemetadata.json>metadata schema</a> and our related <a href=https://github.com/scitran/core/blob/master/swagger/schemas/input/file.json>file schema</a>. In this example, the file <code>example.nii.gz</code> (which must exist in the output folder) is specified as being a nifti file from an MRI machine, with a few custom key/value pairs.</p> <p>If you are curious about the typical file types, you can find a <a href=https://github.com/scitran/core/blob/d4da9eb299db9a7c6c27bdee1032d36db7cef919/api/files.py#L245-L269>list of supported file types</a>. You can also set metadata on the acquisition itself or its parent containers, though these features are less-used; see the metadata schema for more details.</p> <p>As you might expect, gears cannot produce "normal" files called <code>.metadata.json</code>, and might cause the gear to fail if the file is improperly formed.</p> <h2 id=the-run-target-and-environment>The run target and environment</h2> <p>By default, the gear is invoked by running is <code>/flywheel/v0/run</code>. The file must be executable (<code>chmod +x run</code>). It can be a bash or a Python script, or any other executable. If it is a script, please make sure to include appropriate shebang (<code>#!</code>) leading line.</p> <p>You can change this by setting the <code>command</code> key of the manifest.</p> <p>Your run script is the only entry point used for the gear and must accomplish everything the gear sets out to do. On success, exit zero. If the algorithm encounters a failure, exit non-zero. Ideally, print something out before exiting non-zero, so that your users can check the logs to see why things did not work.</p> <h3 id=the-environment-for-the-run-script>The environment for the run script</h3> <p>An important consideration is the environment where the <code>run</code> command is executed. The command will be executed in the folder containing it (<code>/flywheel/v0</code>), and with no environment variables save the <code>PATH</code>:</p> <div class=highlight><pre><span></span><code>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
</code></pre></div> <p>Any required environment and path variables should be specified within the script. This can be important if, for example, you're producing a gear from a Dockerfile, as the variables there will not transfer over. We typically specify the path and environment variables in a <code>.bashrc</code> file, and source that file at the beginning of the <code>run</code> script.</p> <p>The file is also executed with no arguments. You must specify the inputs to the executables in the <code>run</code> script, such as the input file names or flags.</p> <h3 id=custom-information>Custom information</h3> <p>There is a final manifest key, <code>custom</code>, that is entirely freeform. If you have additional information you'd like to record about your gear - possibly as a result of some toolchain or wrapper - this is a great place to put it.</p> <p>An example:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w> </span><span class=s2>&quot;name&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;gear-with-custom-info&quot;</span><span class=p>,</span>

<span class=w> </span><span class=c1>// ...</span>

<span class=w> </span><span class=s2>&quot;custom&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>

<span class=w>  </span><span class=s2>&quot;generator&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=s2>&quot;generated-via&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;antlr&quot;</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;credit&quot;</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Terence Parr&quot;</span><span class=p>,</span>
<span class=w>   </span><span class=s2>&quot;version&quot;</span><span class=o>:</span><span class=w> </span><span class=mf>4</span>
<span class=w>  </span><span class=p>}</span>
<span class=w> </span><span class=p>}</span>
</code></pre></div> <p>In general, try to place your information under a single, top-level key, as in the example above.</p> <h4 id=reserved-custom-keys>Reserved custom keys</h4> <p>We use some custom keys for notekeeping, or to enable features that might change in the future. In this way, we can offer functionality without the more onerous process of standardizing it &amp; supporting in perpetuity.</p> <p>In general, avoid using the custom keys <code>custom.flywheel</code> or <code>custom.gear-builder</code>. Here's a full list:</p> <ul> <li><code>custom</code></li> <li><code>docker-image</code>: This is used to tell the <a href=https://github.com/flywheel-io/exchange>exchange</a> what docker image to pull and archive.</li> <li><code>flywheel</code><ul> <li><code>suite</code>: This identifies a gear as part of a larger suite of tools, such as "FSL 5.0.10".</li> </ul> </li> <li><code>gear-builder</code><ul> <li><code>image</code>: The docker image to use as a base for the gear builder, if applicable.</li> <li><code>container</code>: The docker container to use as a base for the gear builder, if applicable.</li> </ul> </li> </ul> <h2 id=gear-design-rationale>Gear Design Rationale</h2> <!-- markdownlint-disable MD033 --> <iframe width=100% height=800 src=/assets/rationale.pdf></iframe> <!-- markdownlint-enable MD033 --> <h2 id=contact>Contact</h2> <p>Please don't hesitate to contact us with questions or comments about the spec at <a href=mailto:support@flywheel.io>&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#102;&#108;&#121;&#119;&#104;&#101;&#101;&#108;&#46;&#105;&#111;</a> !</p> <!-- markdownlint-enable MD046 --> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
Extend original footer template to get page title from page.meta keep it sync with the original:
https://github.com/squidfunk/mkdocs-material/blob/master/src/partials/footer.html
--> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=footer.title> <!-- Link to previous page --> <a href=../.. class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> <!-- CUSTOM PART --> Introduction <!-- CUSTOM PART ENDS --> </div> </div> </a> <!-- Link to next page --> <a href=../context/ class="md-footer__link md-footer__link--next" aria-label="Next: Context" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> <!-- CUSTOM PART --> Context <!-- CUSTOM PART ENDS --> </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <!-- Social links --> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> <script src=https://cdn.jsdelivr.net/npm/ansi_up@5.1.0/ansi_up.min.js></script> <script src=https://cdn.flywheel.io/static/mkdocs/javascripts/ansi-renderer.js></script> <script src=https://cdn.flywheel.io/static/mkdocs/javascripts/asciinema-player.js></script> </body> </html>