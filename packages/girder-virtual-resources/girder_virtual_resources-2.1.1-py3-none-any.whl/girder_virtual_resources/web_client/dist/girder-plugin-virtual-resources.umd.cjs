(function(a){typeof define=="function"&&define.amd?define(a):a()})(function(){"use strict";const a="";function f(r,e,i,u){if(e===!1||e==null||!e&&(r==="class"||r==="style"))return"";if(e===!0)return" "+(u?r:r+'="'+r+'"');var t=typeof e;return t!=="object"&&t!=="function"||typeof e.toJSON!="function"||(e=e.toJSON()),typeof e=="string"||(e=JSON.stringify(e),i||e.indexOf('"')===-1)?(i&&(e=h(e))," "+r+'="'+e+'"'):" "+r+"='"+e.replace(/'/g,"&#39;")+"'"}function h(r){var e=""+r,i=k.exec(e);if(!i)return r;var u,t,n,s="";for(u=i.index,t=0;u<e.length;u++){switch(e.charCodeAt(u)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t!==u&&(s+=e.substring(t,u)),t=u+1,s+=n}return t!==u?s+e.substring(t,u):s}var k=/["&<>]/;function g(r,e,i,u){if(!(r instanceof Error))throw r;if(!(typeof window>"u"&&e||u))throw r.message+=" on line "+i,r;var t,n,s,F;try{u=u||require("fs").readFileSync(e,{encoding:"utf8"}),t=3,n=u.split(`
`),s=Math.max(i-t,0),F=Math.min(n.length,i+t)}catch(d){return r.message+=" - could not read from "+e+" ("+d.message+")",void g(r,null,i)}t=n.slice(s,F).map(function(d,_){var m=_+s+1;return(m==i?"  > ":"    ")+m+"| "+d}).join(`
`),r.path=e;try{r.message=(e||"Pug")+":"+i+`
`+t+`

`+r.message}catch{}throw r}function y(r){var e="",i,u;try{var t=r||{};(function(n,s){u=1,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<div class="g-enable-symlink">',u=2,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",n&&(u=3,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<div class="checkbox">',u=4,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+"<label>",u=5,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+"<input"+(' id="enable-symlink" type="checkbox"'+f("checked",s,!0,!1))+"/>",u=6,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+"Enable or disable symbolic link functionality.</label></div>",u=7,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<div class="form-group">',u=8,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<div class="g-symlink-target">',u=9,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<label class="control-label" for="g-symlink-target-id">',u=9,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+"Symlink Target</label>",u=10,i="/home/runner/work/girder-virtual-resources/girder-virtual-resources/girder_virtual_resources/web_client/templates/folderSymlinkWidget.pug",e=e+'<input class="input-sm form-control" id="g-symlink-target-id" type="text" placeholder="Enter symlink target path"/></div></div>'),e=e+"</div>"}).call(this,"isAdmin"in t?t.isAdmin:typeof isAdmin<"u"?isAdmin:void 0,"isSymlink"in t?t.isSymlink:typeof isSymlink<"u"?isSymlink:void 0)}catch(n){g(n,i,u)}return e}girder.$,girder._;const p=girder.views.View,{getCurrentUser:v}=girder.auth;var b=p.extend({initialize:function(r){this.folder=r.folder},render:function(){const r=v(),e=r&&r.get("admin");if(!this.folder||!e)return this.$el.empty(),this;const i=!!this.folder.get("isSymlink");return this.$el.html(y({isSymlink:i,isAdmin:e,targetId:this.folder.get("symlinkTargetId")||""})),this.$(".g-symlink-target").hide(),this.folder&&e&&(this.$("input#enable-symlink").prop("checked",i),this.$("input#g-symlink-target-id").val(this.folder.get("symlinkTargetId")||null),i&&this.$(".g-symlink-target").show()),this.$("input#enable-symlink").on("change",u=>{u.target.checked?this.$(".g-symlink-target").show():this.$(".g-symlink-target").hide(),this.$("input#g-symlink-target-id").val(this.folder.get("symlinkTargetId")||null)}),this}});const{getCurrentUser:c}=girder.auth,{wrap:l}=girder.utilities.PluginUtils,w=girder.views.widgets.FolderListWidget,o=girder.views.widgets.EditFolderWidget;l(w,"render",function(r){return r.call(this),this.collection.each(e=>{e.get("isSymlink")&&this.$(`.g-folder-list-link[g-folder-cid="${e.cid}"] i.icon-folder`).removeClass("icon-folder").addClass("icon-export")}),this}),l(o,"render",function(r){r.call(this);const e=new b({parentView:this,folder:this.folder}).render();return this.$(".modal-body>.g-validation-failed-message").before(e.el),this}),l(o,"updateFolder",function(r){var e=arguments[1];const i=c();return i&&i.get("admin")&&(e.isSymlink=this.$("input#enable-symlink").is(":checked"),e.symlinkTargetId=e.isSymlink?this.$("input#g-symlink-target-id").val():null,e.symlinkTargetId=e.symlinkTargetId===""?null:e.symlinkTargetId),r.call(this,e),this}),l(o,"createFolder",function(r){var e=arguments[1];const i=c();return i&&i.get("admin")&&(e.isSymlink=this.$("input#enable-symlink").is(":checked"),e.symlinkTargetId=e.isSymlink?this.$("input#g-symlink-target-id").val():null,e.symlinkTargetId=e.symlinkTargetId===""?null:e.symlinkTargetId),r.call(this,e),this})});
//# sourceMappingURL=girder-plugin-virtual-resources.umd.cjs.map
