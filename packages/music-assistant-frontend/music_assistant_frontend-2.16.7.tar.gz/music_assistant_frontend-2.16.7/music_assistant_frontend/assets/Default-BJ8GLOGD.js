import{_ as fa,T as ha,V as et}from"./Toolbar-Ba4dAxS1.js";import{_ as pa,s as a,d as O,r as A,c as g,o as r,n as le,a as k,b as c,e as x,u as t,f as ga,w as y,F as Y,g as ue,h as V,V as Qe,i as zt,j as ae,k as ba,t as C,l as Ce,m as we,p as Ie,q as Ae,v as M,M as F,P as Pt,x as Ne,$ as Z,y as tt,z as Je,A as _a,B as ce,C as de,D as wa,E as Xe,G as me,H as j,I as Ve,J as ka,K as ke,L as Pa,N as xa,O as S,Q as je,R as ot,S as Re,T as nt,U as Ia,W as rt,X as Be,Y as Dt,Z as ut,a0 as ct,a1 as Ge,a2 as U,a3 as Ot,a4 as dt,a5 as _e,a6 as Ca,a7 as mt,a8 as vt,a9 as Nt,aa as yt,ab as Wt,ac as $a,ad as ve,ae as ee,af as Ht,ag as Qa,ah as Va,ai as Ut,aj as Sa,ak as Ta,al as La,am as Ma,an as Ea,ao as Ba,ap as Ke,aq as Aa,ar as Te,as as ft,at as Ra,au as Fa,av as qa,aw as ht,ax as za,ay as Yt,az as Da,aA as Oa,aB as G,aC as Na,aD as Wa,aE as Ha,aF as Ua,aG as We,aH as Ya,aI as Xa,aJ as ja,aK as Ga,aL as Ka,aM as xt,aN as Za,aO as Ja,aP as el,aQ as tl,aR as al,aS as $e,aT as re,aU as Le,aV as He,aW as pt,aX as ie,aY as Me,aZ as Xt,a_ as Ue,a$ as ll,b0 as Fe,b1 as qe,b2 as Ye,b3 as at,b4 as Se,b5 as N,b6 as he,b7 as jt,b8 as Gt,b9 as lt,ba as Kt,bb as It,bc as Ct,bd as il,be as sl,bf as ol,bg as De,bh as nl,bi as $t,bj as Qt,bk as Vt,bl as be,bm as Zt,bn as rl,bo as ul,bp as cl,bq as dl}from"./index-Bn2Tzsay.js";import{D as ml}from"./constants-CXMxJR4j.js";import{V as ge,a as vl,m as yl,b as Jt}from"./VBtn-BQk37KYJ.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ee}from"./MediaItemThumb-B7hfZSf2.js";import{V as ea}from"./VDialog-DRfRMr5_.js";import{u as fl,c as hl,m as pl,a as gt,b as bt}from"./layout-kFqKNtL6.js";import{V as gl,a as bl}from"./VInfiniteScroll-DvbiA0kw.js";import{z as _l}from"./index-CBho6rsP.js";import{m as St,B as pe}from"./Button-r9Wpw3CQ.js";import{V as wl,P as _t,g as kl,a as ze}from"./PlayerCard-85PtdNO1.js";import{V as Pl}from"./VSlider-DnweLLtQ.js";import{L as xl}from"./ListItem-BNbxxrdg.js";import{M as se,a as it}from"./marquee_text_sync-CHIyYfjU.js";import{_ as Il}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-DCLVCnPO.js";import{V as Cl}from"./VToolbar-Z0nE2qFc.js";import{V as $l}from"./VVirtualScroll-B56qZ1Y0.js";import{V as Ql,a as Tt,b as Lt,c as Mt}from"./VExpansionPanels-DxWEyLfJ.js";import"./VInput-C_1AW61Q.js";const Vl=oe(pa,[["__scopeId","data-v-89a5b6dd"]]),ta=function(){const e=localStorage.getItem("frontend.settings.menu_items"),i=e?e.split(","):ml,l=[];for(const s of i)s==="home"&&l.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),s==="search"&&l.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),s==="artists"&&l.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),s==="albums"&&l.push({label:"albums",icon:"md:album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),s==="tracks"&&l.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),s==="playlists"&&l.push({label:"playlists",icon:"md:playlist_play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),s==="podcasts"&&l.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),s==="audiobooks"&&l.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),s==="radios"&&l.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),s==="browse"&&l.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),s==="settings"&&l.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return l},Sl={key:0,class:"sidebar-header-title"},Tl=O({__name:"Navigation",setup(e){const i=ga(),l=ta(),s=localStorage.getItem("frontend.settings.collapsed"),o=A(s==="true"),n=()=>{o.value=!o.value,localStorage.setItem("frontend.settings.collapsed",o.value.toString())};return(u,m)=>(r(),g("nav",{class:le(["sidebar",{collapsed:o.value}])},[k("div",{class:"sidebar-header",onClick:m[0]||(m[0]=f=>t(i).push({name:"home"}))},[m[1]||(m[1]=k("img",{src:fa,alt:"Music Assistant",class:"sidebar-header-logo"},null,-1)),o.value?x("",!0):(r(),g("div",Sl,"Music Assistant"))]),c(Ce,{class:"sidebar-list"},{default:y(()=>[(r(!0),g(Y,null,ue(t(l),f=>(r(),V(Qe,{key:f.label,slim:"",nav:"",class:"menuButton",to:f.path},zt({default:y(()=>[o.value?(r(),V(ae,{key:0,icon:f.icon,size:"24px"},null,8,["icon"])):x("",!0),o.value?x("",!0):(r(),V(ba,{key:1,textContent:C(u.$t(f.label))},null,8,["textContent"]))]),_:2},[o.value?void 0:{name:"prepend",fn:y(()=>[c(ae,{icon:f.icon,size:"24px"},null,8,["icon"])]),key:"0"}]),1032,["to"]))),128))]),_:1}),k("div",{class:le(o.value?"d-flex justify-center":"ml-auto")},[c(ge,{icon:o.value?"mdi-dock-left":"mdi-dock-right",class:"cursor-pointer mt-1",variant:"plain",onClick:n},null,8,["icon"])],2)],2))}}),Ll=oe(Tl,[["__scopeId","data-v-cc6c89ae"]]),Ml={class:"media-thumb"},El={style:{"margin-left":"-10px","padding-right":"5px"}},Bl=O({__name:"AddToPlaylistDialog",setup(e){const i=A(!1),l=A([]),s=A([]),o=A(),n=A([]);we(()=>{Ie.on("playlistdialog",async T=>{i.value=!0,n.value=T.items,o.value=T.parentItem,await u()}),Ae(()=>{Ie.off("playlistdialog")})});const u=async function(){l.value=[],s.value=[];const T=await M.getLibraryPlaylists();let w=n.value.length?n.value[0]:void 0;if(w){"provider_mappings"in w||(w=await M.getItem(w.media_type,w.item_id,w.provider));for(const d of T){if(!d.provider_mappings.filter(I=>I.available).length||!d.is_editable||o.value&&o.value.media_type===F.PLAYLIST&&d.item_id===o.value.item_id)continue;const $=M.providers[d.provider_mappings[0].provider_instance];$&&($.domain=="builtin"||$.is_streaming_provider||w?.provider_mappings.filter(I=>I.provider_instance==$.instance_id).length)&&l.value.push(d)}for(const d of Object.values(M.providers))d.supported_features.includes(Pt.PLAYLIST_CREATE)&&d.supported_features.includes(Pt.PLAYLIST_TRACKS_EDIT)&&(d.domain=="builtin"||d.is_streaming_provider||w?.provider_mappings.filter($=>$.provider_instance==d.instance_id).length)&&s.value.push(d.instance_id)}},m=async function(T){M.addPlaylistTracks(T.item_id,n.value.map(w=>w.uri)),v(),a.activeAlert={type:_a.INFO,message:Z("background_task_added"),persistent:!1}},f=async function(T){const w=prompt(Z("new_playlist_name"));if(!w)return;const d=await M.createPlaylist(w,T);m(d)},v=function(){i.value=!1};return(T,w)=>(r(),V(ea,{modelValue:i.value,"onUpdate:modelValue":[w[0]||(w[0]=d=>i.value=d),w[1]||(w[1]=d=>{t(a).dialogActive=d})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[c(Ne,null,{default:y(()=>[c(ha,{icon:"mdi-playlist-plus",title:t(Z)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),c(tt),w[4]||(w[4]=k("br",null,null,-1)),c(Ce,null,{default:y(()=>[(r(!0),g(Y,null,ue(l.value,d=>(r(),g("div",{key:d.item_id},[c(Qe,{onClick:$=>m(d)},{prepend:y(()=>[k("div",Ml,[c(Ee,{item:d,size:50},null,8,["item"])])]),title:y(()=>[k("div",null,C(d.name),1)]),subtitle:y(()=>[k("div",null,C(d.owner),1)]),append:y(()=>[d.provider_mappings?(r(),V(Je,{key:0,domain:d.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):x("",!0)]),_:2},1032,["onClick"])]))),128)),w[2]||(w[2]=k("div",{style:{height:"30px"}},null,-1)),c(tt),w[3]||(w[3]=k("div",{style:{height:"30px"}},null,-1)),(r(!0),g(Y,null,ue(s.value,d=>(r(),g("div",{key:d},[c(Qe,{onClick:$=>f(d)},{prepend:y(()=>[k("div",El,[c(Je,{domain:t(M).providers[d].domain,size:50},null,8,["domain"])])]),title:y(()=>[k("div",null,C(t(Z)("new_playlist")),1)]),subtitle:y(()=>[k("div",null,C(t(Z)("create_playlist_on",[t(M).providers[d].name])),1)]),append:y(()=>[c(Je,{domain:t(M).providers[d].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Al=oe(Bl,[["__scopeId","data-v-bd014719"]]),Rl=de({scrollable:Boolean,...ke(),...ka(),...Ve({tag:"main"})},"VMain"),Fl=ce()({name:"VMain",props:Rl(),setup(e,i){let{slots:l}=i;const{dimensionStyles:s}=wa(e),{mainStyles:o}=fl(),{ssrBootStyles:n}=Xe();return me(()=>c(e.tag,{class:le(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:j([o.value,n.value,s.value,e.style])},{default:()=>[e.scrollable?k("div",{class:"v-main__scroller"},[l.default?.()]):l.default?.()]})),{}}}),ql={class:"content-section"},zl=O({__name:"View",setup(e){return(i,l)=>{const s=xa("router-view");return r(),V(Fl,{id:"cont",class:"main-layout"},{default:y(()=>[t(a).mobileLayout?x("",!0):(r(),V(Ll,{key:0,class:"nav-section"})),k("div",ql,[c(s,null,{default:y(({Component:o})=>[(r(),V(Pa(o)))]),_:1}),c(Al),c(Vl),c(gl,{"model-value":t(a).activeAlert!==void 0,color:t(a).activeAlert?.type||"grey",text:t(a).activeAlert?.message,"close-on-content-click":"",position:"sticky",timeout:t(a).activeAlert?.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":l[0]||(l[0]=()=>t(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])])]),_:1})}}}),Et=oe(zl,[["__scopeId","data-v-1afe9eed"]]),Dl=e=>{const i=S(()=>{const{variant:n,width:u,height:m,staticWidth:f,staticHeight:v,maxWidth:T,maxHeight:w,minWidth:d,minHeight:$,badge:I,...E}=e,q={...E,size:e.size||f||void 0||v||void 0||(e.maxHeight?e.maxHeight:void 0)||(e.maxWidth?e.maxWidth:void 0)||"24px"};return _l(n).with("button",()=>({...q,class:e.class?`icon-button ${e.class}`:"icon-button"})).with("responsive",()=>({...q,class:e.class?`icon-responsive ${e.class}`:"icon-responsive"})).with("default",()=>({...q,class:e.class?`icon-default ${e.class}`:"icon-default"})).otherwise(()=>({...q,class:e.class?`icon-default ${e.class}`:"icon-default"}))}),l=S(()=>{const n={};if(e.staticWidth?n.width=e.staticWidth:e.width&&(n.width=e.width),e.staticHeight?n.height=e.staticHeight:e.height&&(n.height=e.height),e.maxWidth&&(n.maxWidth=e.maxWidth),e.maxHeight&&(n.maxHeight=e.maxHeight),e.minWidth&&(n.minWidth=e.minWidth),e.minHeight&&(n.minHeight=e.minHeight),typeof e.style=="object")Object.assign(n,e.style);else if(typeof e.style=="string"){const u=e.style.split(";").reduce((m,f)=>{const[v,T]=f.split(":").map(w=>w.trim());return v&&T&&(m[v]=T),m},{});Object.assign(n,u)}return n}),s=S(()=>St("icon-container",e.variant&&`icon-container--${e.variant}`,e.disabled&&"icon-container--disabled")),o=S(()=>St("icon",e.variant&&`icon--${e.variant}`));return{iconProps:i,containerStyle:l,containerClasses:s,iconClasses:o}},Ol={variant:"default",minWidth:"24px",minHeight:"24px",badge:!1,disabled:!1},Nl=de({...ke(),...nt(pl(),["fullHeight"]),...Re()},"VApp"),Wl=ce()({name:"VApp",props:Nl(),setup(e,i){let{slots:l}=i;const s=je(e),{layoutClasses:o,getLayoutItem:n,items:u,layoutRef:m}=hl({...e,fullHeight:!0}),{rtlClasses:f}=ot();return me(()=>k("div",{ref:m,class:le(["v-application",s.themeClasses.value,o.value,f.value,e.class]),style:j([e.style])},[k("div",{class:"v-application__wrap"},[l.default?.()])])),{getLayoutItem:n,items:u,theme:s}}}),Hl=de({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...yt(),...ke(),...Nt(),...vt(),...mt(),...bt({name:"bottom-navigation"}),...Ve({tag:"header"}),...Ca({selectedClass:"v-btn--selected"}),...Re()},"VBottomNavigation"),Ul=ce()({name:"VBottomNavigation",props:Hl(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const{themeClasses:s}=Ia(),{borderClasses:o}=rt(e),{backgroundColorClasses:n,backgroundColorStyles:u}=Be(()=>e.bgColor),{densityClasses:m}=Dt(e),{elevationClasses:f}=ut(e),{roundedClasses:v}=ct(e),{ssrBootStyles:T}=Xe(),w=S(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),d=Ge(e,"active",e.active),{layoutItemStyles:$}=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:U(()=>d.value?w.value:0),elementSize:w,active:d,absolute:U(()=>e.absolute)});return Ot(e,vl),dt({VBtn:{baseColor:U(()=>e.baseColor),color:U(()=>e.color),density:U(()=>e.density),stacked:U(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),me(()=>c(e.tag,{class:le(["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},s.value,n.value,o.value,m.value,f.value,v.value,e.class]),style:j([u.value,$.value,{height:_e(w.value)},T.value,e.style])},{default:()=>[l.default&&k("div",{class:"v-bottom-navigation__content"},[l.default()])]})),{}}}),Yl=e=>{const{touchstartX:i,touchendX:l,touchstartY:s,touchendY:o}=e,n=.5,u=16;e.offsetX=l-i,e.offsetY=o-s,Math.abs(e.offsetY)<n*Math.abs(e.offsetX)&&(e.left&&l<i-u&&e.left(e),e.right&&l>i+u&&e.right(e)),Math.abs(e.offsetX)<n*Math.abs(e.offsetY)&&(e.up&&o<s-u&&e.up(e),e.down&&o>s+u&&e.down(e))};function Xl(e,i){const l=e.changedTouches[0];i.touchstartX=l.clientX,i.touchstartY=l.clientY,i.start?.({originalEvent:e,...i})}function jl(e,i){const l=e.changedTouches[0];i.touchendX=l.clientX,i.touchendY=l.clientY,i.end?.({originalEvent:e,...i}),Yl(i)}function Gl(e,i){const l=e.changedTouches[0];i.touchmoveX=l.clientX,i.touchmoveY=l.clientY,i.move?.({originalEvent:e,...i})}function Kl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:l=>Xl(l,i),touchend:l=>jl(l,i),touchmove:l=>Gl(l,i)}}function Zl(e,i){const l=i.value,s=l?.parent?e.parentElement:e,o=l?.options??{passive:!0},n=i.instance?.$.uid;if(!s||n===void 0)return;const u=Kl(i.value);s._touchHandlers=s._touchHandlers??Object.create(null),s._touchHandlers[n]=u,Wt(u).forEach(m=>{s.addEventListener(m,u[m],o)})}function Jl(e,i){const l=i.value?.parent?e.parentElement:e,s=i.instance?.$.uid;if(!l?._touchHandlers||s===void 0)return;const o=l._touchHandlers[s];Wt(o).forEach(n=>{l.removeEventListener(n,o[n])}),delete l._touchHandlers[s]}const st={mounted:Zl,unmounted:Jl},aa=Symbol.for("vuetify:v-window"),la=Symbol.for("vuetify:v-window-group"),ia=de({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...ke(),...Ve(),...Re()},"VWindow"),Bt=ce()({name:"VWindow",directives:{vTouch:st},props:ia(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const{themeClasses:s}=je(e),{isRtl:o}=ot(),{t:n}=$a(),u=Ot(e,la),m=A(),f=S(()=>o.value?!e.reverse:e.reverse),v=ve(!1),T=S(()=>{if(e.crossfade)return"v-window-crossfade-transition";const z=e.direction==="vertical"?"y":"x",h=(f.value?!v.value:v.value)?"-reverse":"";return`v-window-${z}${h}-transition`}),w=ve(0),d=A(void 0),$=S(()=>u.items.value.findIndex(z=>u.selected.value.includes(z.id)));ee($,(z,b)=>{const h=u.items.value.length,Q=h-1;h<=2?v.value=z<b:z===Q&&b===0?v.value=!0:z===0&&b===Q?v.value=!1:v.value=z<b}),Va(aa,{transition:T,isReversed:v,transitionCount:w,transitionHeight:d,rootRef:m});const I=U(()=>e.continuous||$.value!==0),E=U(()=>e.continuous||$.value!==u.items.value.length-1);function q(){I.value&&u.prev()}function X(){E.value&&u.next()}const J=S(()=>{const z=[],b={icon:o.value?e.nextIcon:e.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:u.prev,"aria-label":n("$vuetify.carousel.prev")};z.push(I.value?l.prev?l.prev({props:b}):c(ge,b,null):k("div",null,null));const h={icon:o.value?e.prevIcon:e.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:u.next,"aria-label":n("$vuetify.carousel.next")};return z.push(E.value?l.next?l.next({props:h}):c(ge,h,null):k("div",null,null)),z}),W=S(()=>e.touch===!1?e.touch:{...{left:()=>{f.value?q():X()},right:()=>{f.value?X():q()},start:b=>{let{originalEvent:h}=b;h.stopPropagation()}},...e.touch===!0?{}:e.touch});return me(()=>Ht(c(e.tag,{ref:m,class:le(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},s.value,e.class]),style:j([e.style,e.transitionDuration&&!Qa?{"--v-window-transition-duration":_e(e.transitionDuration,"ms")}:void 0])},{default:()=>[k("div",{class:"v-window__container",style:{height:d.value}},[l.default?.({group:u}),e.showArrows!==!1&&k("div",{class:le(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[J.value])]),l.additional?.({group:u})]}),[[st,W.value]])),{group:u}}}),sa=de({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ke(),...Ba(),...Ea()},"VWindowItem"),At=ce()({name:"VWindowItem",directives:{vTouch:st},props:sa(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:l}=i;const s=Ut(aa),o=Sa(e,la),{isBooted:n}=Xe();if(!s||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=ve(!1),m=S(()=>n.value&&(s.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function f(){!u.value||!s||(u.value=!1,s.transitionCount.value>0&&(s.transitionCount.value-=1,s.transitionCount.value===0&&(s.transitionHeight.value=void 0)))}function v(){u.value||!s||(u.value=!0,s.transitionCount.value===0&&(s.transitionHeight.value=_e(s.rootRef.value?.clientHeight)),s.transitionCount.value+=1)}function T(){f()}function w(I){u.value&&Ke(()=>{!m.value||!u.value||!s||(s.transitionHeight.value=_e(I.clientHeight))})}const d=S(()=>{const I=s.isReversed.value?e.reverseTransition:e.transition;return m.value?{name:typeof I!="string"?s.transition.value:I,onBeforeEnter:v,onAfterEnter:f,onEnterCancelled:T,onBeforeLeave:v,onAfterLeave:f,onLeaveCancelled:T,onEnter:w}:!1}),{hasContent:$}=Ta(e,o.isSelected);return me(()=>c(Ma,{transition:d.value,disabled:!n.value},{default:()=>[Ht(k("div",{class:le(["v-window-item",o.selectedClass.value,e.class]),style:j(e.style)},[$.value&&l.default?.()]),[[La,o.isSelected.value]])]})),{groupItem:o}}}),ei=de({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...yt(),...ke(),...vt(),...bt(),...mt(),...Ve({tag:"footer"}),...Re()},"VFooter"),ti=ce()({name:"VFooter",props:ei(),setup(e,i){let{slots:l}=i;const s=A(),{themeClasses:o}=je(e),{backgroundColorClasses:n,backgroundColorStyles:u}=Be(()=>e.color),{borderClasses:m}=rt(e),{elevationClasses:f}=ut(e),{roundedClasses:v}=ct(e),T=ve(32),{resizeRef:w}=Aa($=>{$.length&&(T.value=$[0].target.clientHeight)}),d=S(()=>e.height==="auto"?T.value:parseInt(e.height,10));return Te(()=>e.app,()=>{const $=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:d,elementSize:S(()=>e.height==="auto"?void 0:d.value),active:U(()=>e.app),absolute:U(()=>e.absolute)});ft(()=>{s.value=$.layoutItemStyles.value})}),me(()=>c(e.tag,{ref:w,class:le(["v-footer",o.value,n.value,m.value,f.value,v.value,e.class]),style:j([u.value,e.app?s.value:{height:_e(e.height)},e.style])},l)),{}}});function ai(e){let{rootEl:i,isSticky:l,layoutItemStyles:s}=e;const o=ve(!1),n=ve(0),u=S(()=>{const v=typeof o.value=="boolean"?"top":o.value;return[l.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[v]:_e(n.value)}:{top:s.value.top}]});we(()=>{ee(l,v=>{v?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),Ae(()=>{window.removeEventListener("scroll",f)});let m=0;function f(){const v=m>window.scrollY?"up":"down",T=i.value.getBoundingClientRect(),w=parseFloat(s.value.top??0),d=window.scrollY-Math.max(0,n.value-w),$=T.height+Math.max(n.value,w)-window.scrollY-window.innerHeight,I=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;T.height<window.innerHeight-w?(o.value="top",n.value=w):v==="up"&&o.value==="bottom"||v==="down"&&o.value==="top"?(n.value=window.scrollY+T.top-I,o.value=!0):v==="down"&&$<=0?(n.value=0,o.value="bottom"):v==="up"&&d<=0&&(I?o.value!=="top"&&(n.value=-d+I+w,o.value="top"):(n.value=T.top+d,o.value="top")),m=window.scrollY}return{isStuck:o,stickyStyles:u}}const li=100,ii=20;function Rt(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Ft(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let i=0;for(let l=e.length-1;l>0;l--){if(e[l].t===e[l-1].t)continue;const s=Rt(i),o=(e[l].d-e[l-1].d)/(e[l].t-e[l-1].t);i+=(o-s)*Math.abs(o),l===e.length-1&&(i*=.5)}return Rt(i)*1e3}function si(){const e={};function i(o){Array.from(o.changedTouches).forEach(n=>{(e[n.identifier]??(e[n.identifier]=new Ra(ii))).push([o.timeStamp,n])})}function l(o){Array.from(o.changedTouches).forEach(n=>{delete e[n.identifier]})}function s(o){const n=e[o]?.values().reverse();if(!n)throw new Error(`No samples for touch id ${o}`);const u=n[0],m=[],f=[];for(const v of n){if(u[0]-v[0]>li)break;m.push({t:v[0],d:v[1].clientX}),f.push({t:v[0],d:v[1].clientY})}return{x:Ft(m),y:Ft(f),get direction(){const{x:v,y:T}=this,[w,d]=[Math.abs(v),Math.abs(T)];return w>d&&v>=0?"right":w>d&&v<=0?"left":d>w&&T>=0?"down":d>w&&T<=0?"up":oi()}}}return{addMovement:i,endTouch:l,getVelocity:s}}function oi(){throw new Error}function ni(e){let{el:i,isActive:l,isTemporary:s,width:o,touchless:n,position:u}=e;we(()=>{window.addEventListener("touchstart",J,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ae(()=>{window.removeEventListener("touchstart",J),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",z)});const m=S(()=>["left","right"].includes(u.value)),{addMovement:f,endTouch:v,getVelocity:T}=si();let w=!1;const d=ve(!1),$=ve(0),I=ve(0);let E;function q(h,Q){return(u.value==="left"?h:u.value==="right"?document.documentElement.clientWidth-h:u.value==="top"?h:u.value==="bottom"?document.documentElement.clientHeight-h:xe())-(Q?o.value:0)}function X(h){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const L=u.value==="left"?(h-I.value)/o.value:u.value==="right"?(document.documentElement.clientWidth-h-I.value)/o.value:u.value==="top"?(h-I.value)/o.value:u.value==="bottom"?(document.documentElement.clientHeight-h-I.value)/o.value:xe();return Q?Fa(L):L}function J(h){if(n.value)return;const Q=h.changedTouches[0].clientX,L=h.changedTouches[0].clientY,B=25,R=u.value==="left"?Q<B:u.value==="right"?Q>document.documentElement.clientWidth-B:u.value==="top"?L<B:u.value==="bottom"?L>document.documentElement.clientHeight-B:xe(),_=l.value&&(u.value==="left"?Q<o.value:u.value==="right"?Q>document.documentElement.clientWidth-o.value:u.value==="top"?L<o.value:u.value==="bottom"?L>document.documentElement.clientHeight-o.value:xe());(R||_||l.value&&s.value)&&(E=[Q,L],I.value=q(m.value?Q:L,l.value),$.value=X(m.value?Q:L),w=I.value>-20&&I.value<80,v(h),f(h))}function W(h){const Q=h.changedTouches[0].clientX,L=h.changedTouches[0].clientY;if(w){if(!h.cancelable){w=!1;return}const R=Math.abs(Q-E[0]),_=Math.abs(L-E[1]);(m.value?R>_&&R>3:_>R&&_>3)?(d.value=!0,w=!1):(m.value?_:R)>3&&(w=!1)}if(!d.value)return;h.preventDefault(),f(h);const B=X(m.value?Q:L,!1);$.value=Math.max(0,Math.min(1,B)),B>1?I.value=q(m.value?Q:L,!0):B<0&&(I.value=q(m.value?Q:L,!1))}function z(h){if(w=!1,!d.value)return;f(h),d.value=!1;const Q=T(h.changedTouches[0].identifier),L=Math.abs(Q.x),B=Math.abs(Q.y);(m.value?L>B&&L>400:B>L&&B>3)?l.value=Q.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||xe()):l.value=$.value>.5}const b=S(()=>d.value?{transform:u.value==="left"?`translateX(calc(-100% + ${$.value*o.value}px))`:u.value==="right"?`translateX(calc(100% - ${$.value*o.value}px))`:u.value==="top"?`translateY(calc(-100% + ${$.value*o.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${$.value*o.value}px))`:xe(),transition:"none"}:void 0);return Te(d,()=>{const h=i.value?.style.transform??null,Q=i.value?.style.transition??null;ft(()=>{i.value?.style.setProperty("transform",b.value?.transform||"none"),i.value?.style.setProperty("transition",b.value?.transition||null)}),qa(()=>{i.value?.style.setProperty("transform",h),i.value?.style.setProperty("transition",Q)})}),{isDragging:d,dragProgress:$,dragStyles:b}}function xe(){throw new Error}const ri=["start","end","left","right","top","bottom"],ui=de({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ri.includes(e)},sticky:Boolean,...yt(),...ke(),...Ua(),...Ha({mobile:null}),...vt(),...bt(),...mt(),...Ve({tag:"nav"}),...Re()},"VNavigationDrawer"),ci=ce()({name:"VNavigationDrawer",props:ui(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,i){let{attrs:l,emit:s,slots:o}=i;const{isRtl:n}=ot(),{themeClasses:u}=je(e),{borderClasses:m}=rt(e),{backgroundColorClasses:f,backgroundColorStyles:v}=Be(()=>e.color),{elevationClasses:T}=ut(e),{displayClasses:w,mobile:d}=ht(e),{roundedClasses:$}=ct(e),I=za(),E=Ge(e,"modelValue",null,H=>!!H),{ssrBootStyles:q}=Xe(),{scopeId:X}=Yt(),J=A(),W=ve(!1),{runOpenDelay:z,runCloseDelay:b}=Na(e,H=>{W.value=H}),h=S(()=>e.rail&&e.expandOnHover&&W.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),Q=S(()=>Da(e.location,n.value)),L=U(()=>e.persistent),B=S(()=>!e.permanent&&(d.value||e.temporary)),R=S(()=>e.sticky&&!B.value&&Q.value!=="bottom");Te(()=>e.expandOnHover&&e.rail!=null,()=>{ee(W,H=>s("update:rail",!H))}),Te(()=>!e.disableResizeWatcher,()=>{ee(B,H=>!e.permanent&&Ke(()=>E.value=!H))}),Te(()=>!e.disableRouteWatcher&&!!I,()=>{ee(I.currentRoute,()=>B.value&&(E.value=!1))}),ee(()=>e.permanent,H=>{H&&(E.value=!0)}),e.modelValue==null&&!B.value&&(E.value=e.permanent||!d.value);const{isDragging:_,dragProgress:p}=ni({el:J,isActive:E,isTemporary:B,width:h,touchless:U(()=>e.touchless),position:Q}),P=S(()=>{const H=B.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):h.value;return _.value?H*p.value:H}),{layoutItemStyles:D,layoutItemScrimStyles:K}=gt({id:e.name,order:S(()=>parseInt(e.order,10)),position:Q,layoutSize:P,elementSize:h,active:Oa(E),disableTransitions:U(()=>_.value),absolute:S(()=>e.absolute||R.value&&typeof te.value!="string")}),{isStuck:te,stickyStyles:ye}=ai({rootEl:J,isSticky:R,layoutItemStyles:D}),ne=Be(()=>typeof e.scrim=="string"?e.scrim:null),fe=S(()=>({..._.value?{opacity:p.value*.2,transition:"none"}:void 0,...K.value}));return dt({VList:{bgColor:"transparent"}}),me(()=>{const H=o.image||e.image;return k(Y,null,[c(e.tag,G({ref:J,onMouseenter:z,onMouseleave:b,class:["v-navigation-drawer",`v-navigation-drawer--${Q.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":W.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":B.value,"v-navigation-drawer--persistent":L.value,"v-navigation-drawer--active":E.value,"v-navigation-drawer--sticky":R.value},u.value,f.value,m.value,w.value,T.value,$.value,e.class],style:[v.value,D.value,q.value,ye.value,e.style]},X,l),{default:()=>[H&&k("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?c(Ya,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},o.image):c(We,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),o.prepend&&k("div",{class:"v-navigation-drawer__prepend"},[o.prepend?.()]),k("div",{class:"v-navigation-drawer__content"},[o.default?.()]),o.append&&k("div",{class:"v-navigation-drawer__append"},[o.append?.()])]}),c(Wa,{name:"fade-transition"},{default:()=>[B.value&&(_.value||E.value)&&!!e.scrim&&k("div",G({class:["v-navigation-drawer__scrim",ne.backgroundColorClasses.value],style:[fe.value,ne.backgroundColorStyles.value],onClick:()=>{L.value||(E.value=!1)}},X),null)]})])}),{isStuck:te}}}),wt=Symbol.for("vuetify:v-tabs"),oa=de({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...nt(yl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Oe=ce()({name:"VTab",props:oa(),setup(e,i){let{slots:l,attrs:s}=i;const{textColorClasses:o,textColorStyles:n}=Xa(()=>e.sliderColor),u=A(),m=A(),f=S(()=>e.direction==="horizontal"),v=S(()=>u.value?.group?.isSelected.value??!1);function T(w){let{value:d}=w;if(d){const $=u.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),I=m.value;if(!$||!I)return;const E=getComputedStyle($).color,q=$.getBoundingClientRect(),X=I.getBoundingClientRect(),J=f.value?"x":"y",W=f.value?"X":"Y",z=f.value?"right":"bottom",b=f.value?"width":"height",h=q[J],Q=X[J],L=h>Q?q[z]-X[z]:q[J]-X[J],B=Math.sign(L)>0?f.value?"right":"bottom":Math.sign(L)<0?f.value?"left":"top":"center",_=(Math.abs(L)+(Math.sign(L)<0?q[b]:X[b]))/Math.max(q[b],X[b])||0,p=q[b]/X[b]||0,P=1.5;Ga(I,{backgroundColor:[E,"currentcolor"],transform:[`translate${W}(${L}px) scale${W}(${p})`,`translate${W}(${L/P}px) scale${W}(${(_-1)/P+1})`,"none"],transformOrigin:Array(3).fill(B)},{duration:225,easing:Ka})}}return me(()=>{const w=ge.filterProps(e);return c(ge,G({symbol:wt,ref:u,class:["v-tab",e.class],style:e.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},w,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":T}),{...l,default:()=>k(Y,null,[l.default?.()??e.text,!e.hideSlider&&k("div",{ref:m,class:le(["v-tab__slider",o.value]),style:j(n.value)},null)])})}),ja({},u)}}),di=de({...nt(ia(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),mi=ce()({name:"VTabsWindow",props:di(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const s=Ut(wt,null),o=Ge(e,"modelValue"),n=S({get(){return o.value!=null||!s?o.value:s.items.value.find(u=>s.selected.value.includes(u.id))?.value},set(u){o.value=u}});return me(()=>{const u=Bt.filterProps(e);return c(Bt,G({_as:"VTabsWindow"},u,{modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),l)}),{}}}),vi=de({...sa()},"VTabsWindowItem"),yi=ce()({name:"VTabsWindowItem",props:vi(),setup(e,i){let{slots:l}=i;return me(()=>{const s=At.filterProps(e);return c(At,G({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),l)}),{}}});function fi(e){return e?e.map(i=>el(i)?i:{text:i,value:i}):[]}const hi=de({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ja(oa(),["spaced"]),...Za({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Nt(),...Ve()},"VTabs"),pi=ce()({name:"VTabs",props:hi(),emits:{"update:modelValue":e=>!0},setup(e,i){let{attrs:l,slots:s}=i;const o=Ge(e,"modelValue"),n=S(()=>fi(e.items)),{densityClasses:u}=Dt(e),{backgroundColorClasses:m,backgroundColorStyles:f}=Be(()=>e.bgColor),{scopeId:v}=Yt();return dt({VTab:{color:U(()=>e.color),direction:U(()=>e.direction),stacked:U(()=>e.stacked),fixed:U(()=>e.fixedTabs),sliderColor:U(()=>e.sliderColor),hideSlider:U(()=>e.hideSlider)}}),me(()=>{const T=xt.filterProps(e),w=!!(s.window||e.items.length>0);return k(Y,null,[c(xt,G(T,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,m.value,e.class],style:[{"--v-tabs-height":_e(e.height)},f.value,e.style],role:"tablist",symbol:wt},v,l),{default:()=>[s.default?.()??n.value.map(d=>s.tab?.({item:d})??c(Oe,G(d,{key:d.text,value:d.value,spaced:e.spaced}),{default:s[`tab.${d.value}`]?()=>s[`tab.${d.value}`]?.({item:d}):void 0}))]}),w&&c(mi,G({modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,key:"tabs-window"},v),{default:()=>[n.value.map(d=>s.item?.({item:d})??c(yi,{value:d.value},{default:()=>s[`item.${d.value}`]?.({item:d})})),s.window?.()]})])}),{}}}),gi=O({__name:"Icon",props:tl({variant:{},width:{},height:{},staticWidth:{},staticHeight:{},maxWidth:{},maxHeight:{},minWidth:{},minHeight:{},icon:{},color:{},disabled:{type:Boolean},size:{},badge:{type:Boolean},class:{},style:{}},Ol),emits:["click"],setup(e,{emit:i}){const l=e,s=i,{iconProps:o,containerStyle:n,containerClasses:u,iconClasses:m}=Dl(l),f=A(),v=A(),T=async()=>{if(!(l.variant!=="responsive"||!f.value||!v.value)){await Ke();try{const d=f.value.offsetWidth,$=f.value.offsetHeight,I=Math.min(d,$);v.value.$el&&(v.value.$el.style.fontSize=`${I}px`)}catch(d){console.error("Icon sizing adjustment failed:",d)}}},w=d=>{if(l.disabled){d.preventDefault(),d.stopPropagation();return}s("click",d)};return we(()=>{l.variant==="responsive"&&(T(),window.addEventListener("resize",T))}),Ae(()=>{l.variant==="responsive"&&window.removeEventListener("resize",T)}),(d,$)=>(r(),g("div",{ref_key:"iconContainer",ref:f,class:le(t(u)),style:j(t(n)),onClick:w},[c(et,{"model-value":e.badge===!0,color:"error",dot:""},{default:y(()=>[c(t(ae),G({ref_key:"iconElement",ref:v},t(o),{class:t(m)}),zt({_:2},[ue(d.$slots,(I,E)=>({name:E,fn:y(()=>[al(d.$slots,E,{},void 0,!0)])}))]),1040,["class"])]),_:3},8,["model-value"])],6))}}),Pe=oe(gi,[["__scopeId","data-v-3db51b10"]]),na=O({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){return(i,l)=>e.isVisible&&e.playerQueue?(r(),V(Pe,G({key:0},e.icon,{disabled:!e.playerQueue.active||e.playerQueue.items==0,color:t($e)(e.icon?.color,[[e.playerQueue.repeat_mode==t(re).OFF,null],[e.playerQueue.repeat_mode==t(re).ALL,"primary"],[e.playerQueue.repeat_mode==t(re).ONE,"primary"]]),icon:t($e)(e.icon?.icon,[[e.playerQueue.repeat_mode==t(re).OFF,"mdi-repeat-off"],[e.playerQueue.repeat_mode==t(re).ALL,"mdi-repeat"],[e.playerQueue.repeat_mode==t(re).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:l[0]||(l[0]=s=>t(M).queueCommandRepeat(e.playerQueue.queue_id||"",t($e)(null,[[e.playerQueue.repeat_mode==t(re).OFF,t(re).ONE],[e.playerQueue.repeat_mode==t(re).ALL,t(re).OFF],[e.playerQueue.repeat_mode==t(re).ONE,t(re).ALL]])))}),null,16,["disabled","color","icon"])):x("",!0)}}),ra=O({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=e,l=S(()=>i.playerQueue?.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1),s=S(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>e.isVisible&&e.player?(r(),V(Pe,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:"mdi-skip-next-outline",variant:"button",onClick:n[0]||(n[0]=u=>t(M).playerCommandNext(e.player.player_id))}),null,16,["disabled"])):x("",!0)}}),ua=O({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(e){const i=e,l=S(()=>i.playerQueue?i.playerQueue.items>0:!1),s=S(()=>!(!i.player||i.playerQueue?.active||!i.player.current_media)),o=S(()=>i.player?.playback_state==He.PLAYING?"mdi-pause":"mdi-play");return(n,u)=>e.isVisible&&e.player?(r(),V(Pe,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:e.iconStyle?`${o.value}-${e.iconStyle}`:o.value,variant:"button",onClick:u[0]||(u[0]=m=>t(M).playerCommandPlayPause(e.player.player_id))}),null,16,["disabled","icon"])):x("",!0)}}),ca=O({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=e,l=S(()=>!i.playerQueue?.active||!i.playerQueue?.items||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0),s=S(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Le.NEXT_PREVIOUS));return(o,n)=>e.isVisible&&e.player?(r(),V(Pe,G({key:0},e.icon,{disabled:!l.value&&!s.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:n[0]||(n[0]=u=>t(M).playerCommandPrevious(e.player.player_id))}),null,16,["disabled"])):x("",!0)}}),da=O({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){return(i,l)=>e.isVisible&&e.playerQueue?(r(),V(Pe,G({key:0},e.icon,{disabled:!e.playerQueue.active||e.playerQueue.items==0,color:t($e)(e.icon?.color,[[e.playerQueue.shuffle_enabled,"primary",""]]),icon:t($e)(e.icon?.icon,[[e.playerQueue.shuffle_enabled,"mdi-shuffle"],[e.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:l[0]||(l[0]=s=>t(M).queueCommandShuffle(e.playerQueue.queue_id,!e.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):x("",!0)}}),bi={key:0,class:"player-controls"},_i={key:0,class:"player-controls-elements"},wi={key:1,class:"player-controls-elements"},ki={key:2},Pi={key:3,class:"player-controls-elements"},xi={key:4,class:"player-controls-elements"},qt=O({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(e){return(i,l)=>e.visibleComponents?(r(),g("div",bi,[e.visibleComponents&&e.visibleComponents.shuffle?.isVisible?(r(),g("div",_i,[c(da,{"player-queue":t(a).activePlayerQueue,class:"media-controls-item",icon:e.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):x("",!0),e.visibleComponents&&e.visibleComponents.previous?.isVisible?(r(),g("div",wi,[c(ca,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item",icon:e.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):x("",!0),e.visibleComponents&&e.visibleComponents.play?.isVisible?(r(),g("div",ki,[c(ua,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:e.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):x("",!0),e.visibleComponents&&e.visibleComponents.next?.isVisible?(r(),g("div",Pi,[c(ra,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,icon:e.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):x("",!0),e.visibleComponents&&e.visibleComponents.repeat?.isVisible?(r(),g("div",xi,[c(na,{"player-queue":t(a).activePlayerQueue,icon:e.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):x("",!0)])):x("",!0)}}),ma=O({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(e){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(l,s)=>e.isVisible?(r(),V(Pe,G({key:0},e.icon,{disabled:!t(a).activePlayerId||t(a).showFullscreenPlayer&&!t(a).curQueueItem&&!t(a).showQueueItems,icon:"mdi-playlist-play",color:t($e)(e.icon?.color,[[t(a).showFullscreenPlayer&&t(a).showQueueItems,"primary",""]]),variant:"button",onClick:i}),null,16,["disabled","color"])):x("",!0)}}),va=O({__name:"SpeakerBtn",props:{color:{}},setup(e){return(i,l)=>(r(),V(pe,{variant:"icon",ripple:!1,icon:"",onClick:l[0]||(l[0]=s=>t(a).showPlayersMenu=!0)},{default:y(()=>[c(ae,{color:e.color?e.color:"",size:24,icon:t(a).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1}))}}),Ii={key:0},Ci={key:0},$i={class:"text-caption"},Qi={key:1},Vi=O({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(e){const i=e,l=A(!1);return(s,o)=>i.isVisible&&t(a).activePlayer?(r(),g("div",Ii,[c(pt,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value=n),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:s.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:n})=>[t(ie)("bp6")||!e.responsiveVolumeSize?(r(),g("div",Ci,[c(_t,{style:"margin-right: 0px; margin-left: 0px;",width:e.volumeSize,"is-powered":!0,"model-value":t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":o[0]||(o[0]=u=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayer?.player_id||"",u):t(M).playerCommandVolumeSet(t(a).activePlayer?.player_id||"",u))},{prepend:y(()=>[c(pe,G({variant:"icon",size:"48",ripple:!1},{...n}),{default:y(()=>[c(ae,{color:i.color?e.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),k("div",$i,C(t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0)),1)]),_:1},16)]),_:2},1032,["width","model-value"])])):(r(),g("div",Qi,[c(pe,G({...n},{size:"48",variant:"icon"}),{default:y(()=>[c(ae,{color:i.color?e.color:"",icon:"mdi-volume-high"},null,8,["color"]),k("div",{class:"text-caption",style:j({color:i.color?e.color:""})},C(t(a).activePlayer.group_members.length>0?Math.round(t(a).activePlayer?.group_volume||0):Math.round(t(a).activePlayer?.volume_level||0)),5)]),_:1},16)]))]),default:y(()=>[c(Ne,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[t(a).activePlayer?(r(),V(wl,{key:0,player:t(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):x("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):x("",!0)}}),Si=oe(Vi,[["__scopeId","data-v-70c82677"]]),Ti=O({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(e){return(i,l)=>(r(),g(Y,null,[e.player&&e.player.isVisible?(r(),V(va,{key:0,color:e.player.color},null,8,["color"])):x("",!0),e.queue&&e.queue.isVisible?(r(),V(ma,{key:1,color:e.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):x("",!0),e.volume&&e.volume.isVisible?(r(),V(Si,{key:2,color:e.volume.color,"volume-size":e.volume.volumeSize,"responsive-volume-size":e.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):x("",!0)],64))}}),Li={style:{width:"auto",height:"24px"}},Mi={key:0,style:{width:"100%"}},Ei=["onClick"],Bi={key:0,class:"time-text-row"},Ai={class:"text-caption time-text-right"},Ri=O({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(e){const i=A(!1),l=A(!0),s=A(!1),o=A(0),n=A(0),u=S(()=>a.curQueueItem?i.value?`-${Me(a.curQueueItem.duration-f.value)}`:`${Me(f.value)}`:"0:00"),m=S(()=>{if(!a.curQueueItem||!a.curQueueItem.duration||a.curQueueItem.media_item?.media_type==F.RADIO)return"";const $=a.curQueueItem.duration;return Me($)}),f=S(()=>s.value?(n.value=o.value,o.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),v=S(()=>{const $={};return a.curQueueItem?.media_item?.metadata?.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(I=>{$[I.start]=I.name}),$});ee(f,$=>{s.value||(o.value=$)});const T=function(){s.value=!0},w=()=>{s.value=!1,!s.value&&a.activePlayer&&M.playerCommandSeek(a.activePlayer.player_id,Math.round(n.value))},d=function($){if(a.curQueueItem?.media_item?.metadata?.chapters){for(const I of a.curQueueItem.media_item.metadata.chapters)if(I.start==$){M.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,I.position.toString());return}}};return($,I)=>(r(),g("div",Li,[t(a).activePlayerQueue?(r(),g("div",Mi,[c(Pl,{modelValue:o.value,"onUpdate:modelValue":I[0]||(I[0]=E=>o.value=E),disabled:!t(a).curQueueItem||!t(a).curQueueItem.media_item||!t(a).curQueueItem.duration||t(a).curQueueItem.media_item.media_type==t(F).RADIO||t(a).activePlayer?.powered==!1,style:{width:"100%"},min:0,max:t(a).curQueueItem?.duration,"hide-details":"","track-size":4,"thumb-size":l.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:e.color,onTouchstart:I[1]||(I[1]=E=>l.value=!1),onTouchend:I[2]||(I[2]=E=>l.value=!0),onMouseenter:I[3]||(I[3]=E=>l.value=!1),onMouseleave:I[4]||(I[4]=E=>l.value=!0),onStart:T,onEnd:w},{"tick-label":y(({tick:E})=>[e.showLabels&&!l.value&&Object.values(v.value).length<6?(r(),g("a",{key:0,class:"text-caption",onClick:q=>d(E.value)},C(E.label),9,Ei)):x("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),e.showLabels?(r(),g("div",Bi,[k("div",{class:"text-caption time-text-left",onClick:I[5]||(I[5]=E=>i.value?i.value=!1:i.value=!0)},C(u.value),1),k("div",Ai,C(m.value),1)])):x("",!0)])):x("",!0)]))}}),ya=oe(Ri,[["__scopeId","data-v-43d849c6"]]),Fi={class:"lyrics-container"},qi={key:0,class:"lyrics-loading"},zi={key:1,class:"lyrics-empty"},Di={key:2,class:"lyrics-intro"},Oi={class:"song-title"},Ni={class:"artist-name"},Wi={class:"lyrics-coming-soon"},Hi=O({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1}},setup(e){Xt(b=>({v3c09aed1:b.textColor}));const i=e,l=(b,h=!0)=>{if(h&&!i.debugMode)return;(h?console.debug:console.log)(`[lyricSynch] ${b}`)},s=A([]),o=A(!1),n=A(-1),u=A(null),m=A(!1),f=A(0),v=A(0),T=S(()=>{if(!d.value||!s.value.length)return!1;const b=s.value[0].time,h=i.position||0;return n.value===-1&&h<b}),w=S(()=>{if(!i.mediaItem)return"";if("media_type"in i.mediaItem&&i.mediaItem.media_type==="track"){const b=i.mediaItem;if(b.artists?.length)return b.artists.map(h=>h.name).join(", ")}return"media_type"in i.mediaItem&&i.mediaItem.media_type==="artist"?i.mediaItem.name:""});S(()=>{const b=i.mediaItem?.metadata?.lyrics,h=i.mediaItem?.metadata?.lrc_lyrics;return!!b&&b.trim().length>0||!!h&&h.trim().length>0});const d=S(()=>{if(s.value.some(Q=>Q.time>0))return!0;const b=i.mediaItem?.metadata?.lrc_lyrics,h=i.mediaItem?.metadata?.lyrics;return!!(b&&b.includes("[")||h&&/\[\d+:\d+[.:]?\d*\]/.test(h))}),$=b=>{const h=b.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(h){const Q=parseInt(h[1]);let L=parseInt(h[2]),B=0;if(h[3]){const p=h[3].replace(/[.:]/,".");B=Math.round(parseFloat(p)*1e3)}return{time:(Q*60*1e3+L*1e3+B)/1e3,text:h[4].trim()||" "}}return{time:0,text:b.trim()||" "}},I=()=>{if(!i.mediaItem){s.value=[];return}o.value=!0;try{const b=i.mediaItem.metadata?.lrc_lyrics||"",h=i.mediaItem.metadata?.lyrics||"";let Q="",L=!1;if(b?(Q=b,L=!0):h&&/\[\d+:\d+[.:]?\d*\]/.test(h)?(Q=h,L=!0):h&&(Q=h,L=!1),L){const B=Q.split(`
`).filter(R=>R.trim());s.value=B.map(R=>$(R)).filter(R=>R.text.trim()).sort((R,_)=>R.time-_.time),l(`Loaded ${s.value.length} synchronized lyrics lines`,!1)}else if(Q){const B=Q.split(`
`).filter(R=>R.trim());s.value=B.map(R=>({time:0,text:R.trim()})).filter(R=>R.text),l(`Loaded ${s.value.length} plain text lyrics lines`,!1)}else s.value=[]}catch(b){l(`Error processing lyrics: ${b}`,!1),s.value=[]}finally{o.value=!1}},E=b=>{const h=b;l(`Calculating look-ahead at ${b.toFixed(3)}s`);let Q=-1,L=-1;for(let ne=0;ne<s.value.length;ne++)if(s.value[ne].time<=h)Q=ne;else{L=ne;break}if(l(`Current lyric index: ${Q}, Next lyric index: ${L}`),L===0){const fe=s.value[0].time-h;if(l(`Pre-lyrics intro: ${fe.toFixed(2)}s until first lyric`),fe>5){l("Long intro - using fixed look-ahead: 0.3s"),f.value=.3;return}else if(fe>2){const H=Math.min(1,fe*.15);l(`Medium intro - calculated look-ahead: ${H.toFixed(2)}s`),f.value=H;return}l("Short intro - using standard calculation")}if(L===-1||Q===-1){l("Cannot determine appropriate look-ahead, using default: 0.3s"),f.value=.3;return}const B=s.value[Q].time,R=s.value[L].time,_=R-B,p=f.value;l(`Gap analysis:
    - Current lyric time: ${B.toFixed(3)}s
    - Next lyric time: ${R.toFixed(3)}s
    - Gap between lyrics: ${_.toFixed(3)}s
    - Previous look-ahead: ${p.toFixed(3)}s`);let P;_<.5?(P=.3,l(`Very rapid lyrics detected (${_.toFixed(2)}s gap) - using 30% look-ahead`)):_<.8?(P=.1,l(`Fast lyrics detected (${_.toFixed(2)}s gap) - using 10% look-ahead`)):_<1.5?(P=.2,l(`Medium lyrics detected (${_.toFixed(2)}s gap) - using 20% look-ahead`)):_<3?(P=.3,l(`Slower lyrics detected (${_.toFixed(2)}s gap) - using 30% look-ahead`)):_>10?(P=.02,l(`Very slow lyrics detected (${_.toFixed(2)}s gap) - using 2% look-ahead`)):(P=.4,l(`Slow lyrics detected (${_.toFixed(2)}s gap) - using 40% look-ahead`));const D=Math.min(1.5,_*P);l(`Target look-ahead: ${D.toFixed(3)}s`);const K=Math.abs(D-p),te=Math.min(.8,.3+K*.5),ye=p*(1-te)+D*te;l(`Smoothed look-ahead: ${ye.toFixed(3)}s (adaptation rate: ${(te*100).toFixed(0)}%)`),Math.abs(ye-p)>.3&&l(`Look-ahead adjusted: ${p.toFixed(2)}s â†’ ${ye.toFixed(2)}s`,!1),f.value=ye},q=b=>b===void 0||!s.value.length||!d.value||m.value,X=b=>{const h=Math.round((b+f.value)*1e3);let Q=-1;for(let L=0;L<s.value.length&&Math.round(s.value[L].time*1e3)<=h;L++)Q=L;return Q},J=(b,h)=>{b<0||b===n.value||(l(`Lyric activated: "${s.value[b].text}"`),l(`Activating lyric at ${h.toFixed(2)}s (adjusted: ${(h+f.value).toFixed(2)}s):
    - Index: ${b}
    - Lyric time: ${s.value[b].time.toFixed(2)}s`),l(`Transition details:
    - Raw position: ${h.toFixed(3)}s
    - Dynamic look-ahead: ${f.value.toFixed(3)}s
    - Adjusted position: ${(h+f.value).toFixed(3)}s`),b>0&&W(b,h),v.value=h,n.value=b,Ke(()=>z()))},W=(b,h)=>{const Q=h-v.value,L=s.value[b].time-s.value[b-1].time;l(`Timing analysis:
    - Expected gap: ${L.toFixed(3)}s
    - Actual gap: ${Q.toFixed(3)}s
    - Difference: ${(Q-L).toFixed(3)}s`)},z=()=>{const b=document.querySelector(".lyrics-line.active"),h=u.value;b&&h&&b.scrollIntoView({behavior:"smooth",block:"center"})};return ee(()=>i.mediaItem?.item_id,()=>{I()},{immediate:!0}),ee(()=>i.position,b=>{if(q(b))return;const h=b??0;E(h);const Q=X(h);Q!==n.value&&J(Q,h)}),we(()=>{const b=u.value;b&&b.addEventListener("scroll",()=>{m.value=!0,setTimeout(()=>{m.value=!1},8e3)},{passive:!0})}),(b,h)=>(r(),g("div",Fi,[o.value?(r(),g("div",qi,[c(Jt,{indeterminate:"",color:e.textColor},null,8,["color"]),k("div",null,C(t(Z)("loading_lyrics")),1)])):s.value.length?T.value&&d.value?(r(),g("div",Di,[k("div",Oi,C(i.mediaItem?.name),1),k("div",Ni,C(w.value),1),k("div",Wi,C(t(Z)("lyrics_will_appear_soon")),1)])):(r(),g("div",{key:3,ref_key:"lyricsContainer",ref:u,class:le(["lyrics-scroll-container",{"static-lyrics":!d.value}])},[(r(!0),g(Y,null,ue(s.value,(Q,L)=>(r(),g("div",{key:L,class:le(["lyrics-line",{active:n.value===L||!d.value}])},C(Q.text),3))),128))],2)):(r(),g("div",zi,C(t(Z)("no_lyrics_available")),1))]))}}),Ui=oe(Hi,[["__scopeId","data-v-a59ccea0"]]),Yi=["onClick"],Xi={class:"main"},ji={key:0,class:"main-media-details"},Gi={key:0,class:"main-media-details-image"},Ki={class:"main-media-details-track-info"},Zi={key:0},Ji={key:0},es={key:12,style:{margin:"auto","padding-top":"20px"}},ts={key:1,class:"main-queue-items"},as={class:"queue-items-scroll-box"},ls={class:"media-thumb listitem-media-thumb"},is={class:"title-row"},ss={class:"d-flex"},os={style:{"white-space":"nowrap"},class:"pr-1"},ns={key:0},rs={key:0,style:{"margin-left":"50px"}},us={key:0,class:"text-caption"},cs={key:1,class:"lyrics-wrapper"},ds={key:2,class:"main-queue-items"},ms={class:"main-media-details-image main-media-details-image-alt"},vs={class:"player-bottom"},ys={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},fs={class:"media-controls"},hs={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ps={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},gs=O({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(e){const{name:i}=ht(),l=e,s=new it,o=A(-1),n=new it,u=A([]),m=A(0),f=A(!1),v=S(()=>a.activePlayerQueue?u.value.slice(a.activePlayerQueue.current_index):[]),T=S(()=>a.activePlayerQueue?u.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),w=S(()=>{const _=a.curQueueItem?.media_item?.metadata?.lyrics,p=a.curQueueItem?.media_item?.metadata?.lrc_lyrics;return!!_&&_.trim().length>0||!!p&&p.trim().length>0}),d=S(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),$=S(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),I=S(()=>Ue.display.height.value>800),E=function(_){a.showFullscreenPlayer=!1,It.push({name:_.media_type,params:{itemId:_.item_id,provider:_.provider}})},q=function(_){a.globalSearchTerm=_,It.push({name:"search"}),a.showFullscreenPlayer=!1},X=function(_,p){const P=u.value.indexOf(p),D=[{label:"play_now",labelArgs:[],action:()=>{W(p,"play_now")},icon:"mdi-play-circle-outline",disabled:P===a.activePlayerQueue?.current_index||P===a.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{W(p,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{W(p,"up")},icon:"mdi-arrow-up",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{W(p,"down")},icon:"mdi-arrow-down",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{W(p,"delete")},icon:"mdi-delete",disabled:P<=(a.activePlayerQueue?.index_in_buffer||0)}];p?.media_item?.media_type==F.TRACK&&D.push({label:"show_info",labelArgs:[],action:()=>{E(p.media_item)},icon:"mdi-information-outline",disabled:!1}),Ie.emit("contextmenu",{items:D,posX:_.clientX,posY:_.clientY})},J=function(_){a.activePlayer&&Ie.emit("contextmenu",{items:kl(a.activePlayer,a.activePlayerQueue),posX:_.clientX,posY:_.clientY})},W=function(_,p){!_||!a.activePlayerQueue||(p=="play_now"?M.queueCommandPlayIndex(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="move_next"?M.queueCommandMoveNext(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="up"?M.queueCommandMoveUp(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="down"?M.queueCommandMoveDown(a.activePlayerQueue?.queue_id,_.queue_item_id):p=="delete"&&M.queueCommandDelete(a.activePlayerQueue?.queue_id,_.queue_item_id))},z=async function(){f.value=!0,u.value=[],await Ct(100),f.value=!1},b=async function({done:_}){if(!a.activePlayerQueue||a.activePlayerQueue.items==0){_("empty");return}if(u.value.length>=a.activePlayerQueue?.items){_("empty");return}const p=u.value.length,P=(a.activePlayerQueue.current_index||0)+50,D=await M.getPlayerQueueItems(a.activePlayerQueue.queue_id,P,p);u.value.push(...D),D.length<50?_("empty"):_("ok")};we(()=>{const _=M.subscribe(ll.QUEUE_ITEMS_UPDATED,p=>{p.object_id==a.activePlayerQueue?.queue_id&&(p.data,z())});Ae(_)});const h=async function(_){if(!a.curQueueItem?.media_item)return;if(!a.curQueueItem.media_item.favorite){M.toggleFavorite(a.curQueueItem.media_item);return}let p=a.curQueueItem.media_item;(p.provider!="library"||!("provider_mappings"in p))&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&(p=await M.getLibraryItem(p.media_type,p.item_id,p.provider)||p);const P=[];"favorite"in p&&p.favorite&&p.provider=="library"&&[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&P.push({label:"favorites_remove",labelArgs:[],action:()=>{M.removeItemFromFavorites(p.media_type,p.item_id),p.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[F.ALBUM,F.ARTIST,F.AUDIOBOOK,F.PLAYLIST,F.PODCAST,F.RADIO,F.TRACK].includes(p.media_type)&&P.push({label:"add_playlist",labelArgs:[],action:()=>{Ie.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Ie.emit("contextmenu",{items:P,posX:_.clientX,posY:_.clientY})},Q=function(){f.value=!0,Ct(100).then(()=>{f.value=!1})},L=function(_,p){M.playMedia(_.uri,il.PLAY,void 0,p.position.toString())};ee(()=>a.activePlayerId,_=>{z()},{immediate:!0});const B=A(void 0),R=A(void 0);return ft(()=>{const _=Fe("white"),p=Fe("black"),P=5,D=.05,K=Ue.theme.current.value.dark?l.colorPalette.darkColor||"#000":l.colorPalette.lightColor||"#fff";let te=Fe(K);const ye=_.contrast(te),ne=p.contrast(te),fe=ye>=ne;let H=fe?_:p,Ze=Math.max(ye,ne);if(Ze<P){let kt=D;for(;Ze<P&&kt<=.5;)fe?te=te.darken(D):te=te.lighten(D),Ze=Fe(H).contrast(te),kt+=D}document.documentElement.style.setProperty("--text-color",H.hex()),B.value=H.hex(),R.value=te.hex()}),(_,p)=>(r(),V(ea,{modelValue:t(a).showFullscreenPlayer,"onUpdate:modelValue":p[13]||(p[13]=P=>t(a).showFullscreenPlayer=P),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[c(Ne,{color:R.value},{default:y(()=>[c(Cl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[c(pe,{icon:"",onClick:p[0]||(p[0]=P=>t(a).showFullscreenPlayer=!1)},{default:y(()=>[c(ae,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>[t(a).activePlayerQueue?.radio_source.length?(r(),V(pt,{key:0,scrim:""},{activator:y(({props:P})=>[c(pe,G(P,{icon:""}),{default:y(()=>[c(ae,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:y(()=>[c(Ne,{title:t(Z)("queue_radio_enabled"),subtitle:t(Z)("queue_radio_based_on")},{text:y(()=>[(r(!0),g(Y,null,ue(t(a).activePlayerQueue?.radio_source,P=>(r(),g("div",{key:P.uri},[k("a",{onClick:D=>E(P)},C(P.name),9,Yi)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):x("",!0),I.value?x("",!0):(r(),V(va,{key:1})),c(pe,{icon:"",onClick:qe(J,["stop"])},{default:y(()=>[c(ae,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),k("div",Xi,[t(ie)("bp7")||!t(a).showQueueItems?(r(),g("div",ji,[_.$vuetify.display.height>600?(r(),g("div",Gi,[t(a).activePlayer?.powered!=!1&&t(a).curQueueItem?(r(),V(Ee,{key:0,item:t(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:_.$vuetify.theme.current.dark?t(Ye):t(at)},null,8,["item","fallback"])):t(a).activePlayer?.powered!=!1&&!t(a).curQueueItem?.image&&t(a).activePlayer?.current_media?.image_url?(r(),V(We,{key:1,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:t(a).activePlayer.current_media.image_url},null,8,["src"])):(r(),V(We,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:_.$vuetify.theme.current.dark?t(Ye):t(at)},null,8,["src"]))])):x("",!0),k("div",Ki,[t(a).activePlayer?.powered==!1?(r(),V(Se,{key:0,style:j(`font-size: ${d.value};`)},{default:y(()=>[N(C(t(a).activePlayer?.name),1)]),_:1},8,["style"])):t(a).curQueueItem?.media_item?(r(),V(Se,{key:1,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:p[1]||(p[1]=P=>E(t(a).curQueueItem.media_item))},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem.media_item.name)+" ",1),"version"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.version?(r(),g("span",Zi,"("+C(t(a).curQueueItem.media_item.version)+")",1)):x("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!t(a).activePlayerQueue&&t(a).activePlayer?.current_media?.title?(r(),V(Se,{key:2},{default:y(()=>[t(a).activePlayer?.current_media?.artist?(r(),g("div",Ji,[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).activePlayer?.current_media?.artist),1)]),_:1},8,["sync"])])):x("",!0),t(a).activePlayer?.current_media?.title?(r(),g("div",{key:1,style:j(`font-size: ${$.value};`)},[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).activePlayer?.current_media?.title),1)]),_:1},8,["sync"])],4)):x("",!0)]),_:1})):(r(),V(Se,{key:3,style:j(`font-size: ${d.value};cursor:pointer;`),onClick:p[2]||(p[2]=P=>t(a).showPlayersMenu=!0)},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).activePlayer?.name||t(Z)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),t(a).activePlayer?.powered==!1?(r(),V(he,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[N(C(t(Z)("off")),1)]),_:1})):x("",!0),t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title&&t(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),V(he,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:p[3]||(p[3]=P=>q(`${t(a).curQueueItem?.streamdetails?.stream_metadata.artist} - ${t(a).curQueueItem?.streamdetails?.stream_metadata.title}`))},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+C(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):x("",!0),t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),V(he,{key:6,class:"text-h6 text-md-h5 text-lg-h4",onClick:p[4]||(p[4]=P=>q(t(a).curQueueItem?.streamdetails?.stream_metadata.title))},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)]),_:1},8,["sync"])]),_:1})):x("",!0),t(a).curQueueItem?.media_item&&"album"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.album&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:7,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:p[5]||(p[5]=P=>E(t(a).curQueueItem.media_item.album))},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):x("",!0),t(a).curQueueItem?.media_item&&"artists"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.artists.length&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:8,style:j(`font-size: ${$.value};cursor:pointer;`),onClick:p[6]||(p[6]=P=>E(t(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):x("",!0),t(a).curQueueItem?.media_item&&"podcast"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.podcast?(r(),V(he,{key:9,style:j(`font-size: ${$.value};`)},{default:y(()=>[c(se,{sync:t(s)},{default:y(()=>[N(C(t(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):t(a).activePlayer&&t(a).activePlayer?.active_source!=t(a).activePlayer?.player_id&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:10},{default:y(()=>[N(C(t(Z)("external_source_active",[t(jt)(t(a).activePlayer)])),1)]),_:1})):t(a).activePlayerQueue&&t(a).activePlayerQueue.items==0&&t(a).activePlayer?.powered!=!1?(r(),V(he,{key:11,style:j(`font-size: ${$.value}`)},{default:y(()=>[N(C(t(Z)("queue_empty")),1)]),_:1},8,["style"])):x("",!0),t(a).activePlayer?.powered!=!1?(r(),g("div",es,[c(Gt)])):x("",!0)])])):x("",!0),t(a).showQueueItems?(r(),g("div",ts,[c(pi,{modelValue:m.value,"onUpdate:modelValue":p[7]||(p[7]=P=>m.value=P),"hide-slider":"",density:"compact",onClick:Q},{default:y(()=>[c(Oe,{value:0},{default:y(()=>[N(C(t(Z)("queue"))+" ",1),c(et,{color:"grey",content:(t(a).activePlayerQueue?.items||0)-(t(a).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),c(Oe,{value:1},{default:y(()=>[N(C(t(Z)("played"))+" ",1),c(et,{color:"grey",content:t(a).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),w.value?(r(),V(Oe,{key:0,value:2},{default:y(()=>[N(C(t(Z)("lyrics")),1)]),_:1})):x("",!0)]),_:1},8,["modelValue"]),k("div",as,[!f.value&&m.value!==2?(r(),V(bl,{key:0,onLoad:b,"empty-text":"",height:"100%"},{default:y(()=>[c($l,{"item-height":70,"max-height":"90%",items:m.value==0?v.value:T.value},{default:y(({item:P,index:D})=>[c(xl,{link:"","show-menu-btn":!0,disabled:!P.available,onClick:qe(K=>X(K,P),["stop"]),onMenu:qe(K=>X(K,P),["stop"]),onMouseenter:K=>o.value=D,onMouseleave:p[8]||(p[8]=K=>o.value=-1)},{prepend:y(()=>[k("div",ls,[c(Ee,{size:"50",item:P},null,8,["item"])])]),title:y(()=>[k("div",is,[c(se,{sync:D==0&&m.value==0?t(s):t(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[k("span",{class:le({"is-playing":P.queue_item_id===t(a).curQueueItem?.queue_item_id})},C(P.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:y(()=>[k("div",ss,[k("span",os,C(t(Me)(P.duration))+" | ",1),c(se,{sync:D==0&&m.value==0?t(s):t(n),disabled:!(D==0&&m.value==0||o.value==D)},{default:y(()=>[P.media_item&&"album"in P.media_item&&P.media_item.album?(r(),g("span",ns,C(P.media_item.album.name),1)):x("",!0)]),_:2},1032,["sync","disabled"])])]),append:y(()=>[P.queue_item_id===t(a).curQueueItem?.queue_item_id&&t(a).activePlayer?.playback_state!=t(He).IDLE?(r(),V(Il,{key:0,"show-badge":t(ie)("bp4")},null,8,["show-badge"])):x("",!0),P.available?x("",!0):(r(),V(ae,{key:1},{default:y(()=>[...p[14]||(p[14]=[N("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),P.queue_item_id==t(a).curQueueItem?.queue_item_id&&P.media_item?.metadata?.chapters?.length?(r(),g("div",rs,[(r(!0),g(Y,null,ue(P.media_item.metadata?.chapters,K=>(r(),V(Qe,{key:K.position,onClick:qe(te=>L(P.media_item,K),["stop"])},{title:y(()=>[k("div",null,C(K.name),1)]),append:y(()=>[K.end?(r(),g("span",us,C(t(Me)(K.end-K.start)),1)):x("",!0)]),_:2},1032,["onClick"]))),128))])):x("",!0)]),_:1},8,["items"])]),_:1})):x("",!0),m.value===2?(r(),g("div",cs,[c(Ui,{"media-item":t(a).curQueueItem?.media_item,position:t(a).activePlayerQueue?.elapsed_time,duration:t(a).curQueueItem?.duration,"stream-details":t(a).curQueueItem?.streamdetails,"text-color":B.value},null,8,["media-item","position","duration","stream-details","text-color"])])):x("",!0)])])):x("",!0),!t(a).showQueueItems&&_.$vuetify.display.height<=600?(r(),g("div",ds,[k("div",ms,[c(Ee,{item:t(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):x("",!0)]),k("div",vs,[k("div",ys,[c(ya,{"show-labels":!0,color:B.value},null,8,["color"])]),k("div",fs,[t(a).activePlayerQueue?(r(),V(Pe,{key:0,disabled:!t(a).curQueueItem?.media_item,icon:t(a).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:t(Z)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:h},null,8,["disabled","icon","title"])):x("",!0),_.$vuetify.display.mdAndUp?(r(),V(da,{key:1,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):x("",!0),c(ca,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),c(ua,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),c(ra,{player:t(a).activePlayer,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),_.$vuetify.display.mdAndUp?(r(),V(na,{key:2,"player-queue":t(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):x("",!0),t(a).activePlayerQueue?(r(),V(ma,{key:3,class:"media-controls-item","max-height":"30px"})):x("",!0)]),t(a).activePlayer&&t(a).activePlayer.volume_control!=t(lt)?(r(),g("div",hs,[c(_t,{width:"100%","is-powered":t(a).activePlayer?.powered!=!1,disabled:!t(a).activePlayer||!t(a).activePlayer?.available,"model-value":Math.round(t(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:B.value,"allow-wheel":!0,"onUpdate:modelValue":p[9]||(p[9]=P=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayerId,P):t(M).playerCommandVolumeSet(t(a).activePlayerId,P)),"onClick:prepend":p[10]||(p[10]=P=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeDown(t(a).activePlayerId):t(M).playerCommandVolumeDown(t(a).activePlayerId)),"onClick:append":p[11]||(p[11]=P=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeUp(t(a).activePlayerId):t(M).playerCommandVolumeUp(t(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):x("",!0),I.value?(r(),g("div",ps,[c(ge,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:p[12]||(p[12]=P=>t(a).showPlayersMenu=!0)},{default:y(()=>[c(ae,{icon:t(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),N(" "+C(t(a).activePlayer?t(Kt)(t(a).activePlayer):""),1)]),_:1})])):x("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),bs=oe(gs,[["__scopeId","data-v-291f8a20"]]),_s={key:1},ws={key:2,class:"icon-thumb"},ks={key:0},Ps={key:2},xs={key:3},Is={key:4},Cs={key:0,class:"pl-4"},$s={key:0},Qs={key:1},Vs={key:2},Ss={key:3},Ts={key:4},Ls={key:5},Ms={key:6,class:"line-clamp-1"},Es={key:7},Bs={key:8,class:"line-clamp-1"},As={key:9,class:"line-clamp-1"},Rs={key:0},Fs=O({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(e){const i=new it,l=e,s=S(()=>a.activePlayerQueue?.current_item?.streamdetails);return(o,n)=>(r(),g(Y,null,[c(Qe,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>[k("div",{class:"media-thumb player-media-thumb",style:j(`cursor: pointer;height: ${t(ie)({breakpoint:"phone"})?60:64}px; width: ${t(ie)({breakpoint:"phone"})?60:64}px; `),onClick:n[0]||(n[0]=u=>t(a).showFullscreenPlayer=!0)},[t(a).activePlayer?.powered!=!1&&t(a).curQueueItem?(r(),V(Ee,{key:0,item:t(a).curQueueItem,fallback:t(Ye)},null,8,["item","fallback"])):t(a).activePlayer?.powered!=!1&&t(a).activePlayer?.current_media?.image_url?(r(),g("div",_s,[c(We,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:t(a).activePlayer.current_media.image_url},null,8,["src"])])):(r(),g("div",ws,[c(ae,{size:"24",icon:t(a).activePlayer?.type==t(De).PLAYER&&t(a).activePlayer?.group_members.length?"mdi-speaker-multiple":t(a).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:y(()=>[k("div",{style:j({cursor:"pointer",color:e.primaryColor})},[t(a).activePlayer?.powered==!1?(r(),g("div",{key:0,onClick:n[1]||(n[1]=u=>t(a).showPlayersMenu=!0)},C(t(a).activePlayer?.name),1)):t(a).curQueueItem?.media_item?(r(),g("div",{key:1,onClick:n[2]||(n[2]=u=>t(a).showFullscreenPlayer=!0)},[c(se,{sync:t(i)},{default:y(()=>[N(C(t(a).curQueueItem.media_item.name)+" ",1),"version"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.version?(r(),g("span",ks,"("+C(t(a).curQueueItem.media_item.version)+")",1)):x("",!0)]),_:1},8,["sync"])])):t(a).curQueueItem?(r(),g("div",Ps,C(t(a).curQueueItem.name),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.current_media?.title?(r(),g("div",xs,C(t(a).activePlayer.current_media.title),1)):t(a).activePlayer?(r(),g("div",Is,C(t(a).activePlayer?.name),1)):(r(),g("div",{key:5,onClick:n[3]||(n[3]=u=>t(a).showPlayersMenu=!0)},C(o.$t("no_player")),1))],4)]),append:y(()=>[s.value?.audio_format.content_type&&!t(ie)({breakpoint:"phone"})&&e.showQualityDetailsBtn?(r(),g("div",Cs,[c(Gt)])):x("",!0)]),subtitle:y(()=>[k("div",{style:j({cursor:"pointer",color:e.primaryColor}),class:"line-clamp-1",onClick:n[4]||(n[4]=u=>t(a).showFullscreenPlayer=!0)},[c(se,{sync:t(i)},{default:y(()=>[t(a).activePlayer?.powered==!1?(r(),g("div",$s,C(o.$t("off")),1)):t(a).curQueueItem&&t(a).curQueueItem.media_item?.media_type==t(F).TRACK&&"album"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.album&&!l.showOnlyArtist?(r(),g("div",Qs,C(t(sl)(t(a).curQueueItem.media_item.artists))+" â€¢ "+C(t(a).curQueueItem.media_item.album.name),1)):t(a).curQueueItem?.media_item&&"artists"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.artists.length>0?(r(),g("div",Vs,C(t(a).curQueueItem.media_item.artists[0].name),1)):t(a).curQueueItem?.media_item&&"podcast"in t(a).curQueueItem.media_item&&t(a).curQueueItem.media_item.podcast?.name?(r(),g("div",Ss,C(t(a).curQueueItem.media_item.podcast.name),1)):t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title&&t(a).curQueueItem?.streamdetails?.stream_metadata.artist?(r(),g("div",Ts,C(t(a).curQueueItem?.streamdetails?.stream_metadata.artist)+" - "+C(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):t(a).curQueueItem?.streamdetails?.stream_metadata&&t(a).curQueueItem?.streamdetails?.stream_metadata.title?(r(),g("div",Ls,C(t(a).curQueueItem?.streamdetails?.stream_metadata.title),1)):t(a).curQueueItem?.media_item?.metadata.description?(r(),g("div",Ms,C(t(ol)(t(a).curQueueItem.media_item.metadata.description,100)),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.active_source&&t(a).activePlayer?.current_media?.artist?(r(),g("div",Es,C(t(a).activePlayer.current_media.artist),1)):!t(a).activePlayerQueue&&t(a).activePlayer?.active_source?(r(),g("div",Bs,C(o.$t("external_source_active",[t(jt)(t(a).activePlayer)])),1)):t(a).activePlayerQueue&&t(a).activePlayerQueue.items==0?(r(),g("div",As,C(o.$t("queue_empty")),1)):x("",!0)]),_:1},8,["sync"]),t(a).activePlayer&&t(a).activePlayer?.powered!=!1?(r(),g("div",Rs,C(t(Kt)(t(a).activePlayer)),1)):x("",!0)],4)]),_:1}),c(bs,{"show-fullscreen":t(a).showFullscreenPlayer,"color-palette":e.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),qs=oe(Fs,[["__scopeId","data-v-4af10a97"]]),zs=["data-floating"],Ds=["data-mobile"],Os={class:"mediacontrols-left"},Ns={class:"mediacontrols-bottom-center"},Ws={class:"mediacontrols-bottom-right"},Hs={key:0,class:"volume-slider"},Us=O({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(e){Xt(n=>({v0920870d:o.value}));const{mobile:i}=ht({mobileBreakpoint:576}),l=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),s=new Image;s.src=Ue.theme.current.value.dark?Ye:at,s.crossOrigin="Anonymous",s.addEventListener("load",function(){l.value=nl(s)});const o=S(()=>Ue.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor:"#CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor:"#CCCCCC26");return ee(()=>a.curQueueItem?.queue_item_id,()=>{a.curQueueItem?.media_item?s.src=$t(a.curQueueItem.media_item,Qt.THUMB)||"":a.curQueueItem?s.src=$t(a.curQueueItem,Qt.THUMB)||"":s.src=""}),(n,u)=>(r(),g(Y,null,[k("div",{class:"mediacontrols-bg","data-floating":e.useFloatingPlayer},null,8,zs),k("div",{class:"mediacontrols","data-mobile":t(i)},[k("div",Os,[c(qs,{"show-quality-details-btn":!!t(ie)("bp8"),"show-only-artist":!t(ie)("bp7"),"color-palette":l.value,"primary-color":n.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),k("div",Ns,[c(qt,{"visible-components":{repeat:{isVisible:t(ie)("bp3")},shuffle:{isVisible:t(ie)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:t(ie)("bp3")},next:{isVisible:t(ie)("bp3")}}},null,8,["visible-components"]),t(ie)("bp6")?(r(),V(ya,{key:0,"is-progress-bar":!1,disabled:!t(a).activePlayerQueue?.active||t(a).activePlayerQueue?.current_item?.media_item?.media_type!==t(F).TRACK},null,8,["disabled"])):x("",!0)]),k("div",Ws,[k("div",null,[c(Ti,{queue:{isVisible:t(ie)("bp3"),color:n.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:n.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!t(i)&&(t(a).activePlayer?.volume_control!=t(lt)||t(a).activePlayer?.group_members.length>0),color:n.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(qt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:t(ie)({breakpoint:"bp3",condition:"lt"}),icon:{staticWidth:"40px",staticHeight:"40px",color:n.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Ds),t(i)&&(t(a).activePlayer?.volume_control!=t(lt)||t(a).activePlayer?.group_members.length>0)?(r(),g("div",Hs,[c(_t,{width:"100%",color:"secondary","is-powered":t(a).activePlayer?.powered!=!1,disabled:!t(a).activePlayer||!t(a).activePlayer?.available,"model-value":Math.round(t(a).activePlayer?.group_volume||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":u[0]||(u[0]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolume(t(a).activePlayerId,m):t(M).playerCommandVolumeSet(t(a).activePlayerId,m)),"onClick:prepend":u[1]||(u[1]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeDown(t(a).activePlayerId):t(M).playerCommandVolumeDown(t(a).activePlayerId)),"onClick:append":u[2]||(u[2]=m=>t(a).activePlayer.group_members.length>0?t(M).playerCommandGroupVolumeUp(t(a).activePlayerId):t(M).playerCommandVolumeUp(t(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):x("",!0)],64))}}),Ys=oe(Us,[["__scopeId","data-v-f0b417b2"]]),Xs={class:"menuButton"},js={class:"menuButton"},Gs=O({__name:"BottomNavigation",props:{height:{}},setup(e){const i=ta(),l=A(!1);return(s,o)=>(r(),V(Ul,{height:e.height,"bg-color":"default",grow:"",role:"navigation"},{default:y(()=>[(r(!0),g(Y,null,ue(t(i).filter(n=>!n.isLibraryNode),n=>(r(),V(ge,{key:n.label,to:n.path,"aria-label":s.$t(n.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:y(()=>[c(ae,{size:"xx-large"},{default:y(()=>[N(C(n.icon),1)]),_:2},1024),k("span",Xs,C(s.$t(n.label)),1)]),_:2},1032,["to","aria-label"]))),128)),c(pt,null,{activator:y(({props:n})=>[c(ge,G(n,{"aria-haspopup":"true","aria-expanded":l.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:y(()=>[c(ae,{size:"xx-large"},{default:y(()=>[...o[0]||(o[0]=[N("mdi-bookshelf",-1)])]),_:1}),k("span",js,C(s.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:y(()=>[c(Ce,null,{default:y(()=>[(r(!0),g(Y,null,ue(t(i).filter(n=>n.isLibraryNode),n=>(r(),V(Qe,{key:n.label,title:s.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Ks=O({__name:"Footer",setup(e){const i=S(()=>a.isInStandaloneMode?100:80);return(l,s)=>(r(),g(Y,null,[t(a).mobileLayout?(r(),g("div",{key:0,class:le(l.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):x("",!0),t(a).mobileLayout?(r(),V(Gs,{key:1,height:i.value},null,8,["height"])):x("",!0),c(ti,{app:"",color:"default",class:le(`py-0 px-0 ${t(a).mobileLayout?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:y(()=>[c(Ys,{"use-floating-player":t(a).mobileLayout},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),Zs={style:{float:"right","margin-right":"-20px"}},Js=O({__name:"PlayerSelect",setup(e){const i=A(!1),l=A(null),s=S(()=>Object.values(M.players).filter(m=>Vt(m)).filter(m=>m.player_id!==be.player_id).sort((m,f)=>m.name.toUpperCase()>f.name?.toUpperCase()?1:-1));ee(()=>a.activePlayerId,m=>{m&&localStorage.setItem("mass.LastPlayerId",m)}),ee(()=>M.players,m=>{m&&!a.activePlayer&&n()},{deep:!0}),ee(()=>M.state,m=>{m.value!=ul.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function o(m,f=!1){a.activePlayerId==m.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=m.player_id),f&&(a.showPlayersMenu=!1)}we(()=>{n()});const n=function(){if(a.activePlayer&&Vt(a.activePlayer))return;const m=u();m&&(a.activePlayerId=m)},u=function(){const m=localStorage.getItem("mass.LastPlayerId");if(m&&m in M.players&&M.players[m].available)return m};return(m,f)=>(r(),g(Y,null,[c(Zt,{modelValue:t(a).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=v=>t(a).showPlayersMenu=v)},null,8,["modelValue"]),t(a).showPlayersMenu?(r(),V(ci,{key:0,modelValue:t(a).showPlayersMenu,"onUpdate:modelValue":f[4]||(f[4]=v=>t(a).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{default:y(()=>[k("div",null,[c(Se,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[k("b",null,C(m.$t("players")),1),k("div",Zs,[c(pe,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[c(ae,{size:"30"},{default:y(()=>[...f[5]||(f[5]=[N("mdi-cog-outline",-1)])]),_:1})]),_:1}),c(pe,{variant:"icon",onClick:f[1]||(f[1]=v=>t(a).showPlayersMenu=!1)},{default:y(()=>[c(ae,{size:"30"},{default:y(()=>[...f[6]||(f[6]=[N("mdi-window-close",-1)])]),_:1})]),_:1})])]),_:1}),c(tt),c(Ce,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:y(()=>[t(be).mode===t(rl).BUILTIN&&t(be).player_id&&t(M).players[t(be).player_id]?(r(),V(ze,{key:0,id:t(be).player_id,style:{margin:"10px 0px"},player:t(M).players[t(be).player_id],"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,"allow-power-control":!0,onClick:f[2]||(f[2]=v=>o(t(M).players[t(be).player_id]))},null,8,["id","player"])):x("",!0),(r(!0),g(Y,null,ue(s.value.filter(v=>[t(He).PLAYING,t(He).PAUSED].includes(v.playback_state)||t(M).queues[v.player_id]?.items>0&&v.powered!=!1),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"10px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),c(Ql,{modelValue:l.value,"onUpdate:modelValue":f[3]||(f[3]=v=>l.value=v),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[c(Tt,{style:{padding:"0"}},{default:y(()=>[c(Lt,null,{default:y(()=>[k("h3",null,C(m.$t("all_players")),1)]),_:1}),c(Mt,{style:{padding:"0"}},{default:y(()=>[c(Ce,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),g(Y,null,ue(s.value.filter(v=>v.type!=t(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),s.value.filter(v=>v.type==t(De).GROUP).length?(r(),V(Tt,{key:0,style:{padding:"0"}},{default:y(()=>[c(Lt,null,{default:y(()=>[k("h3",null,C(m.$t("all_groups")),1)]),_:1}),c(Mt,{style:{padding:"0"}},{default:y(()=>[c(Ce,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(r(!0),g(Y,null,ue(s.value.filter(v=>v.type==t(De).GROUP),v=>(r(),V(ze,{id:v.player_id,key:v.player_id,style:{margin:"5px 0px"},player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==t(a).activePlayerId,"show-sync-controls":v.supported_features.includes(t(Le).SET_MEMBERS),"allow-power-control":!0,onClick:T=>o(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):x("",!0)],64))}}),eo=oe(Js,[["__scopeId","data-v-cc077ef3"]]);function to(e={}){const{immediate:i=!1,onNeedRefresh:l,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:u}=e;let m,f,v;const T=async(d=!0)=>{await f,v?.()};async function w(){if("serviceWorker"in navigator){if(m=await cl(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:d}},[],import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{u?.(d)}),!m)return;v=()=>{m?.messageSkipWaiting()};{let d=!1;const $=()=>{d=!0,m?.addEventListener("controlling",I=>{I.isUpdate&&window.location.reload()}),l?.()};m.addEventListener("installed",I=>{typeof I.isUpdate>"u"?typeof I.isExternal<"u"&&I.isExternal?$():!d&&s?.():I.isUpdate||s?.()}),m.addEventListener("waiting",$)}m.register({immediate:i}).then(d=>{n?n("./sw.js",d):o?.(d)}).catch(d=>{u?.(d)})}}return f=w(),T}function ao(e={}){const{immediate:i=!0,onNeedRefresh:l,onOfflineReady:s,onRegistered:o,onRegisteredSW:n,onRegisterError:u}=e,m=A(!1),f=A(!1);return{updateServiceWorker:to({immediate:i,onNeedRefresh(){m.value=!0,l?.()},onOfflineReady(){f.value=!0,s?.()},onRegistered:o,onRegisteredSW:n,onRegisterError:u}),offlineReady:f,needRefresh:m}}const lo={key:0,class:"pwa-toast",role:"alert"},io={class:"message"},so={key:0},oo={key:1},no=O({__name:"ReloadPrompt",setup(e){const{offlineReady:i,needRefresh:l,updateServiceWorker:s}=ao(),o=async()=>{i.value=!1,l.value=!1};return(n,u)=>t(i)||t(l)?(r(),g("div",lo,[k("div",io,[t(i)?(r(),g("span",so," App ready to work offline ")):(r(),g("span",oo," New content available, click on reload button to update. "))]),t(l)?(r(),g("button",{key:0,onClick:u[0]||(u[0]=m=>t(s)())},"Reload")):x("",!0),k("button",{onClick:o},"Close")])):x("",!0)}}),ro=O({__name:"Default",setup(e){const i=dl();return ee([()=>i.query.player,()=>Object.keys(M.players).length],([l])=>{if(!l)return;const s=l.toString().toLowerCase(),o=Object.values(M.players).find(n=>n.player_id.toLowerCase()===s||n.name.toLowerCase()===s)?.player_id;o&&(a.activePlayerId=o)},{immediate:!0}),ee(()=>i.query.showFullscreenPlayer,l=>{a.showFullscreenPlayer=!!l},{immediate:!0}),ee(()=>i.query.frameless,l=>{l&&(a.frameless=!0)},{immediate:!0}),(l,s)=>(r(),g(Y,null,[t(a).connected?(r(),V(Wl,{key:0},{default:y(()=>[t(a).frameless?(r(),V(Et,{key:0})):(r(),g(Y,{key:1},[c(eo),c(Et),c(Ks)],64))]),_:1})):(r(),V(Zt,{key:1,class:"centeredoverlay",persistent:"","model-value":!t(a).connected},{default:y(()=>[k("div",null,[c(Jt,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),t(a).isInStandaloneMode?(r(),V(no,{key:2})):x("",!0)],64))}}),So=oe(ro,[["__scopeId","data-v-3dcdb3ba"]]);export{So as default};
