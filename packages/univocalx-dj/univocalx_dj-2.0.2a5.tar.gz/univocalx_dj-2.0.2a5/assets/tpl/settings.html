{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}">
{% endblock %}

{% block content %}

{% if saved %}
  <div class="save-message fade-out">Settings Saved!</div>
{% endif %}

<h2>Registry Settings</h2>

<form method="POST">
    <div class="settings-container">
        <fieldset class="settings-section">
            <legend>S3 Settings</legend>

            <label for="s3endpoint">S3 Endpoint:</label>
            <input type="text" id="s3endpoint" name="s3endpoint" value="{{ config.s3endpoint or '' }}">

            <label for="s3bucket">S3 Bucket:</label>
            <input type="text" id="s3bucket" name="s3bucket" value="{{ config.s3bucket or '' }}">

            <label for="s3prefix">S3 Prefix:</label>
            <input type="text" id="s3prefix" name="s3prefix" value="{{ config.s3prefix or '' }}">
        </fieldset>

        <fieldset class="settings-section">
            <legend>Database Settings</legend>

            <label for="db_driver">Driver:</label>
            <select id="db_driver" name="db_driver">
                <option value="sqlite" {% if db_fields.driver == "sqlite" %}selected{% endif %}>SQLite</option>
                <option value="postgresql" {% if db_fields.driver == "postgresql" %}selected{% endif %}>PostgreSQL</option>
            </select>

            <label for="db_username">Username:</label>
            <input type="text" id="db_username" name="db_username" value="{{ db_fields.username }}">

            <label for="db_password">Password:</label>
            <input type="password" id="db_password" name="db_password" value="{{ db_fields.password }}">

            <label for="db_host">Host (or path for SQLite):</label>
            <input type="text" id="db_host" name="db_host" value="{{ db_fields.host }}">

            <label for="db_name">Database Name:</label>
            <input type="text" id="db_name" name="db_name" value="{{ db_fields.db_name }}">
        </fieldset>
    </div>

    <button type="submit">Save</button>
</form>
{% endblock %}
