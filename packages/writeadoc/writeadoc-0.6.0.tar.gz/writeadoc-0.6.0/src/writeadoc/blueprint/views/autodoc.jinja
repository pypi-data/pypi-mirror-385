{# def ds, level=2 #}
{# import "autodoc.jinja" as Autodoc #}

<h{{ level }}>
  <code class="autodoc-symbol autodoc-symbol-{{ ds.symbol }}">{{ ds.symbol }}</code>
  <span class="autodoc-name autodoc-name-{{ ds.symbol }}">{{ ds.name }}</span>
  {% if ds.label -%}
  <code class="autodoc-label autodoc-label-{{ ds.label }}">{{ ds.label }}</code>
  {%- endif %}
</h{{ level }}>

{%- if ds.short_description -%}
<div class="autodoc-short-description">
  {{ ds.short_description | markdown }}
</div>
{% endif -%}

{%- if ds.signature -%}
<div class="autodoc-signature">
  {{ ds.signature | markdown("python") }}
</div>
{% endif -%}

{%- if ds.bases -%}
<div class="autodoc-bases">
  <p>Bases:
  {%- for base in ds.bases %} <code>{{ base }}</code>{% if not loop.last %}, {% endif %}
  {%- endfor %}</p>
</div>
{% endif -%}

{%- if ds.params -%}
<div class="autodoc-table">
  <table class="autodoc-arguments">
    <thead><tr><th>Argument</th><th>Description</th></tr></thead>
  <tbody>
    {%- for param in ds.params %}
    <tr>
      <td><code>{{ param.name }}</code></td>
      <td>{{ param.description | markdown }}</td>
    </tr>
    {%- endfor %}
  </tbody>
</table>
</div>
{% endif -%}

{%- if ds.long_description -%}
<div class="autodoc-long-description">
  {{ ds.long_description | markdown }}
</div>
{% endif -%}

{% if ds.examples -%}
<div class="autodoc-examples">
  <p><strong>Example:</strong></p>
  {% for ex in ds.examples -%}
  <div>
  {%- if ex.description %}{{ ex.description | markdown }}{% endif -%}
  {%- if ex.snippet %}
  {{ ex.snippet | markdown("python") }}
  {% endif -%}
  </div>
  {% endfor -%}
</div>
{% endif -%}

{%- if ds.returns or ds.many_returns -%}
<div class="autodoc-returns">
  <p><strong>Returns:</strong></p>
  {%- if ds.returns -%}
  <p>{{ ds.returns.description | markdown }}</p>
  {%- elif ds.many_returns -%}
  <ul>
    {% for return in ds.many_returns %}
    <li>
      <strong>{{ return.return_name }}: <strong>
      {{ return.description | markdown }}
    </li>
    {%- endfor %}
  </ul>
  {% endif -%}
</div>
{% endif -%}

{%- if ds.raises -%}
<div class="autodoc-raises">
  <p><strong>Raises:</strong></p>
  <ul>
    {% for raises in ds.raises -%}
    <li>{{ raises.description | markdown }}</li>
    {% endfor -%}
  </ul>
</div>
{% endif -%}

{%- if ds.attrs-%}
<div class="autodoc-attrs">
  {% for attr in ds.attrs -%}
  <Autodoc ds={{ attr }} level={{ level + 1 }} />
  {% endfor %}
</div>
{% endif -%}

{%- if ds.properties -%}
<div class="autodoc-properties">
  {% for attr in ds.properties -%}
  <Autodoc ds={{ attr }} level={{ level + 1 }} />
  {%- endfor %}
</div>
{% endif -%}

{%- if ds.methods -%}
<div class="autodoc-methods">
{% for method in ds.methods -%}
<Autodoc ds={{ method }} level={{ level + 1 }} />
{%- endfor %}
</div>
{% endif -%}