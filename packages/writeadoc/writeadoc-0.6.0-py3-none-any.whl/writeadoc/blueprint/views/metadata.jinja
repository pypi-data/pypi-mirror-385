{% set site_name = site.name | striptags -%}
{% set title = page.title | striptags if page.title else site_name -%}
{% set description = (page.meta.get('description', site.description) or '') | striptags -%}
{% set image = site.base_url ~ (page.meta.get('image', '/assets/images/opengraph.png')) -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "headline": "{{ title }}",
  "description": "{{ description }}",
  "url": "{{ site.base_url }}{{ page.url }}",
  "image": "{{ image }}",
  "datePublished": "{{ page.meta.get('date', _now.strftime('%Y-%m-%d')) }}",
	{%- if page.meta.get('keywords') %}
	"keywords": "{{ page.meta.get('keywords') | join(', ') | striptags }}"
	{%- endif %}
}
</script>

<link rel="canonical" href="{{ site.base_url }}{{ page.url }}" />
<link rel="icon" href="/assets/images/favicon.svg" />
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />
<link rel="sitemap" href="{{ site.base_url }}/sitemap.xml" type="application/xml" title="Sitemap">
<meta name="description" content="{{ description }}" />
{# OpenGraph #}
<meta property="og:site_name" content="{{ site_name }}" />
<meta property="og:title" content="{{ title }}" />
<meta property="og:description" content="{{ description }}" />
<meta property="og:image" content="{{ image }}" />
<meta property="og:url" content="{{ site.base_url }}{{ page.url }}" />
<meta property="og:type" content="website" />
{# Twitter #}
<meta name="twitter:title" content="{{ title }}" />
<meta name="twitter:description" content="{{ description }}" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="{{ image }}" />
<meta name="twitter:image:alt" content="{{ site_name }}" />
