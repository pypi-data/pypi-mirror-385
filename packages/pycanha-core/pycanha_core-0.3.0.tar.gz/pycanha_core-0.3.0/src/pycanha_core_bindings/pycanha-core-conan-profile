# This profile ensures that pycanha-core and its dependencies are built in Release mode (for MSVC, GCC, CLANG or others)
[settings]
arch = x86_64
build_type = Release

# In the future you might want to set this only for msvc
{% if platform.system()=="Windows" %}
compiler = msvc
compiler.runtime_type = Release
compiler.cppstd = 23
compiler.runtime = dynamic
compiler.version = 193
os = Windows

{% else %}
# Linux gcc
compiler = gcc
compiler.cppstd = 23
compiler.libcxx = libstdc++11
compiler.version = 12
os = Linux

[buildenv]
# gcc-13 was working fine until an update to the github ubuntu runner (I think). Now it
# compiles the wheel with a too recent version of glibc, which is not compatible with
# manylinux wheels. So I'm using gcc-12 for now. To check the compatibility of the wheel
# with manylinux, you can use the auditwheel tool.
CC =gcc-12
CXX = g++-12

{% endif %}
