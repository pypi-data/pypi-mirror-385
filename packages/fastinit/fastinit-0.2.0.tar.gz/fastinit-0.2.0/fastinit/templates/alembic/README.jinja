# Alembic Database Migrations

This directory contains database migrations managed by Alembic.

## Configuration

Alembic is configured to automatically import database settings from your application's `Settings` class (defined in `app/core/config.py`). This means:

- No need to manually set the database URL in `alembic.ini`
- Database credentials are automatically read from `.env` file
- The same settings used by your application are used for migrations

## Usage

### Create a new migration

After modifying your SQLAlchemy models:

```bash
alembic revision --autogenerate -m "Description of changes"
```

### Apply migrations

To upgrade to the latest version:

```bash
alembic upgrade head
```

### Rollback migrations

To rollback the last migration:

```bash
alembic downgrade -1
```

To rollback to a specific revision:

```bash
alembic downgrade <revision_id>
```

### View migration history

```bash
alembic history
```

### View current revision

```bash
alembic current
```

## Important Notes

1. **Import all models**: Make sure all your SQLAlchemy models are imported in `app/models/__init__.py` so that Alembic can detect them.

2. **Database URL**: The database URL is automatically read from `app.core.config.settings.DATABASE_URL`, which in turn reads from your `.env` file.

3. **Environment**: Ensure your `.env` file is properly configured with the correct `DATABASE_URL` before running migrations.

## Directory Structure

- `env.py` - Main Alembic environment configuration (imports settings automatically)
- `script.py.mako` - Template for generating new migration files
- `versions/` - Directory containing migration scripts
