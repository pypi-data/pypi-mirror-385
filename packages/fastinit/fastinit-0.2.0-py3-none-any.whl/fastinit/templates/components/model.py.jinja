"""{{ model_name }} model."""

from sqlalchemy import Column, Integer, String, Boolean, DateTime, Float, Text
from sqlalchemy.sql import func
from db.base import Base


class {{ model_name }}(Base):
    """{{ model_name }} database model."""
    
    __tablename__ = "{{ table_name }}"
    
    id = Column(Integer, primary_key=True, index=True)
    {% for field_name, field_type in fields.items() %}
    {% if field_type in ['str', 'string'] %}
    {{ field_name }} = Column(String(255), nullable=False)
    {% elif field_type in ['int', 'integer'] %}
    {{ field_name }} = Column(Integer, nullable=False)
    {% elif field_type in ['float', 'decimal'] %}
    {{ field_name }} = Column(Float, nullable=False)
    {% elif field_type in ['bool', 'boolean'] %}
    {{ field_name }} = Column(Boolean, default=False)
    {% elif field_type in ['text'] %}
    {{ field_name }} = Column(Text, nullable=True)
    {% elif field_type in ['datetime'] %}
    {{ field_name }} = Column(DateTime(timezone=True), server_default=func.now())
    {% else %}
    {{ field_name }} = Column(String(255))  # Default to String for unknown types
    {% endif %}
    {% endfor %}
    created_at = Column(DateTime(timezone=True), server_default=func.now())
    updated_at = Column(DateTime(timezone=True), onupdate=func.now())
    
    def __repr__(self):
        return f"<{{ model_name }}(id={self.id})>"
