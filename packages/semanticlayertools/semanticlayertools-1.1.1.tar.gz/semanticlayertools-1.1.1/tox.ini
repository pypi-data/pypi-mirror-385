[tox]
requires =
    tox>=4
env_list = lint, type, 3.12

[testenv]
description = run unit tests
deps =
    pytest>=8
    pytest-sugar
    https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.8.0/en_core_web_sm-3.8.0-py3-none-any.whl
commands =
    pytest {posargs:tests}

[testenv:lint]
description = run linters
skip_install = true
deps =
    black
commands = black {posargs:.}

;  [testenv:type]
;  description = run type checks
;  deps =
;      mypy
;  commands =
;      mypy {posargs:src tests}


[testenv:docs]
description = build documentation
basepython = python3.12
deps =
  .[ml]
  sphinx>=4
  myst-parser
  sphinx_rtd_theme
commands =
  sphinx-build -d "{envtmpdir}{/}doctree" docs "{toxworkdir}{/}docs_out" --color -b html
  python -c 'print(r"documentation available under file://{toxworkdir}{/}docs_out{/}index.html")'
