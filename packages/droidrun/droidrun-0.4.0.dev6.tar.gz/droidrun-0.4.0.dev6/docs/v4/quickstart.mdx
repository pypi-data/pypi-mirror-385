---
title: 'Quickstart'
description: 'Get up and running with Droidrun v4 quickly and effectively'
---

<iframe
  className="w-full aspect-video rounded-xl"
  src="https://www.youtube.com/embed/4WT7FXJah2I"
  title="YouTube video player"
  frameBorder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

This guide will help you get Droidrun v4 installed and running quickly, controlling your Android device through natural language in minutes. Droidrun v4 introduces a config-driven architecture, making it easier to customize agent behavior, LLM selection, and execution modes.

### Prerequisites

Before installing Droidrun, ensure you have:

1. **Python 3.11+** installed on your system
2. [Android Debug Bridge (adb)](https://developer.android.com/studio/releases/platform-tools) installed and configured
3. **Android device** with:
   - [Developer options enabled](https://developer.android.com/studio/debug/dev-options)
   - USB debugging enabled
   - Connected via USB or on the same network (for wireless debugging)

### Installation

Droidrun v4 is installed using [`uv`](https://docs.astral.sh/uv/), a fast Python package installer and resolver.

**Install uv (if not already installed):**

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Choose your installation method:**

**For CLI usage only:**
```bash
uv tool install 'droidrun[google,anthropic,openai,deepseek,ollama,openrouter]'
```

**For CLI + Python code integration:**
```bash
uv pip install 'droidrun[google,anthropic,openai,deepseek,ollama,openrouter]'
```

<Note>
If you only need specific providers, you can install just those. For example, `uv tool install 'droidrun[google,openai]'` installs only Google Gemini and OpenAI support.
</Note>

### Setup the Portal APK

Droidrun requires the Portal app to be installed on your Android device for device control. The Portal app provides accessibility services that expose the UI accessibility tree, enabling the agent to see and interact with UI elements.

```bash
droidrun setup
```

This command automatically:
1. Downloads the latest Portal APK
2. Installs it on your connected device
3. Enables the accessibility service

### Test Connection

Verify that Droidrun can communicate with your device:

```bash
droidrun ping
```

If successful, you'll see:
```
✓ Portal is running
✓ Accessibility service enabled
✓ Device ready
```

### Configure Your LLM

Droidrun v4 uses a configuration-driven approach. On first run, Droidrun creates a `config.yaml` file with default settings. You'll need to set your API key for your chosen LLM provider.

**Set your API key:**

```bash
# For Google Gemini (default)
export GOOGLE_API_KEY=your-api-key-here

# For OpenAI
export OPENAI_API_KEY=your-api-key-here

# For Anthropic Claude
export ANTHROPIC_API_KEY=your-api-key-here

# For DeepSeek
export DEEPSEEK_API_KEY=your-api-key-here
```

### Run Your First Command via CLI

Now you're ready to control your device with natural language:

```bash
# Using default configuration (Google Gemini)
droidrun run "Open the settings app and tell me the Android version"

# Override provider and model
droidrun run "Check the battery level" --provider OpenAI --model gpt-4o

# Enable vision mode (sends screenshots to LLM)
droidrun run "What app is currently open?" --vision

# Enable reasoning mode (uses Manager-Executor workflow for complex tasks)
droidrun run "Find a contact named John and send him an email" --reasoning
```

**Common CLI flags:**
- `--provider` - LLM provider (GoogleGenAI, OpenAI, Anthropic, etc.)
- `--model` - Model name (models/gemini-2.5-pro, gpt-4o, etc.)
- `--vision` - Enable screenshot processing
- `--reasoning` - Enable multi-agent planning mode
- `--steps N` - Maximum execution steps (default: 15)
- `--debug` - Enable detailed logging

### Create a Simple Agent via Script

For complex automation or integration into your Python projects, create a script:

```python
import asyncio
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig

async def main():
    # Use default configuration with built-in LLM profiles
    config = DroidrunConfig()

    # Create agent
    # LLMs are automatically loaded from config.llm_profiles
    agent = DroidAgent(
        goal="Open Settings and check battery level",
        config=config,
    )

    # Run agent
    result = await agent.run()

    # Check results (result is a ResultEvent object)
    print(f"Success: {result.success}")
    print(f"Reason: {result.reason}")
    print(f"Steps: {result.steps}")

if __name__ == "__main__":
    asyncio.run(main())
```

**Advanced example with custom LLMs:**

```python
import asyncio
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig, AgentConfig
from llama_index.llms.openai import OpenAI

async def main():
    # Load base configuration
    config = DroidrunConfig()

    # Create custom agent config with overrides
    agent_config = AgentConfig(
        max_steps=30,
        reasoning=True,
    )
    agent_config.manager.vision = True

    # Create custom LLM (overrides config LLM profiles)
    custom_llm = OpenAI(model="gpt-4o", temperature=0.2)

    agent = DroidAgent(
        goal="Book a flight to New York next Friday",
        config=config,
        agent_config=agent_config,  # Override agent config
        llms=custom_llm,  # Single LLM for all agents (or pass dict for per-agent)
    )

    result = await agent.run()
    print(f"Success: {result.success}")
    print(f"Reason: {result.reason}")
    print(f"Steps: {result.steps}")

if __name__ == "__main__":
    asyncio.run(main())
```

### Configuration Options

Droidrun v4 provides flexible configuration through:

**1. Default Configuration (No File Required):**
```python
config = DroidrunConfig()  # Uses built-in defaults
```

**2. Load from YAML File:**
```python
config = DroidrunConfig.from_yaml("config.yaml")  # Load custom config
```

**3. Programmatic Configuration:**
```python
from droidrun.config_manager.config_manager import DroidrunConfig, AgentConfig

config = DroidrunConfig()
config.agent.max_steps = 25
config.agent.reasoning = True
config.agent.codeact.vision = True
```

**Key Configuration Areas:**

- **Agent Settings**: `max_steps`, `reasoning`, vision modes
- **LLM Profiles**: Per-agent model configurations (manager, executor, codeact)
- **Device**: Serial number, platform (android/ios), TCP mode
- **Execution**: Safe execution, prompt templates, app cards
- **Telemetry**: Tracing and logging options


<Tip>
For detailed configuration options, see the [Configuration Guide](/v4/sdk/configuration). The CLI uses `ConfigManager` which auto-creates config.yaml on first run.
</Tip>

### Structured Output Extraction

Droidrun v4 supports structured output extraction using Pydantic models:

```python
import asyncio
from pydantic import BaseModel, Field
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig

class BatteryInfo(BaseModel):
    """Battery information."""
    level: int = Field(description="Battery percentage (0-100)")
    is_charging: bool = Field(description="Whether device is charging")
    temperature: float = Field(description="Battery temperature in Celsius")

async def main():
    config = DroidrunConfig()

    agent = DroidAgent(
        goal="Check battery status",
        config=config,
        output_model=BatteryInfo  # Request structured output
    )

    result = await agent.run()

    # Access structured data (result.structured_output is a Pydantic model instance)
    battery = result.structured_output
    if battery:
        print(f"Battery: {battery.level}%")
        print(f"Charging: {battery.is_charging}")
        print(f"Temperature: {battery.temperature}°C")

if __name__ == "__main__":
    asyncio.run(main())
```

### Execution Modes

Droidrun v4 supports two execution modes:

**Direct Mode (Default):**
- Fast execution for simple tasks
- Uses CodeActAgent to generate and execute Python code
- Best for: Simple commands, quick actions

```bash
droidrun run "Open YouTube"
```

```python
# In scripts
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig

config = DroidrunConfig()
agent = DroidAgent(goal="Open YouTube", config=config)
```

**Reasoning Mode:**
- Strategic planning for complex tasks
- Uses Manager-Executor multi-agent workflow
- Manager creates plans, Executor executes atomic actions
- Best for: Multi-step workflows, complex navigation

```bash
droidrun run "Find contacts from California and export to CSV" --reasoning
```

```python
# In scripts - Option 1: Override config
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig, AgentConfig

config = DroidrunConfig()

config.agent.reasoning = True
agent = DroidAgent(goal="...", config=config)

# Option 2: Pass custom agent_config
agent_config = AgentConfig(reasoning=True)
agent = DroidAgent(goal="...", config=config, agent_config=agent_config)
```

## Next Steps

Now that you've got Droidrun v4 running, explore these topics:

### Core Concepts
- [Architecture](/v4/concepts/architecture) - Multi-agent system architecture
- [Events and Workflows](/v4/concepts/events-and-workflows) - Event-driven coordination and real-time execution monitoring

### Configuration
- [Configuration System](/v4/sdk/configuration) - Complete configuration guide
- [Custom Tools & Credentials](/v4/guides/custom-tools-credentials) - Extend functionality
- [Custom Variables](/v4/guides/custom-variables) - Pass custom data to agents
- [Structured Output](/v4/guides/structured-output) - Extract structured data

### Device Setup
- [Device Setup](/v4/guides/device-setup) - Advanced device configuration
- [App Cards](/v4/guides/app-cards) - App-specific instruction cards

### Advanced Topics
- [Vision Mode](/v4/concepts/architecture#vision-configuration) - Screenshot processing
- [Safe Execution](/v4/sdk/configuration#safe-execution) - Secure code execution
- [Tracing & Telemetry](/v4/sdk/configuration#tracing-settings) - Debugging and monitoring
- [Custom Prompts](/v4/sdk/configuration#prompt-customization) - Customize agent behavior

---

**Welcome to Droidrun v4!** The config-driven architecture gives you complete control over agent behavior, making it easier than ever to build powerful device automation workflows.
