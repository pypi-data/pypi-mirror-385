---
title: 'Telemetry & Tracing'
description: 'Configure anonymous telemetry, Phoenix tracing, and trajectory recording'
---

# Telemetry & Tracing

Droidrun provides three monitoring capabilities:

1. **Anonymous Telemetry** - Usage analytics sent to PostHog (enabled by default)
2. **Arize Phoenix Tracing** - Real-time LLM and agent execution tracing (opt-in)
3. **Trajectory Recording** - Local screenshots and UI state for debugging (opt-in)

## Quick Reference

```sh
# Disable anonymous telemetry
export DROIDRUN_TELEMETRY_ENABLED=false

# Enable Phoenix tracing
droidrun run "task" --tracing

# Enable trajectory recording
droidrun run "task" --save-trajectory step
```

---

## Arize Phoenix Tracing

Phoenix provides real-time tracing of LLM calls, agent execution, and tool invocations. Use it to debug agent behavior, monitor token usage, and analyze execution flow.

### Setup

**1. Install Phoenix:**

```sh
uv pip install arize-phoenix
```

**2. Start Phoenix server:**

```sh
phoenix serve
```

The server starts at `http://localhost:6006` and provides a web UI for viewing traces.

**3. Enable tracing in Droidrun:**

**Via CLI:**

```sh
droidrun run "Open settings" --tracing
```

**Via config.yaml:**

```yaml
tracing:
  enabled: true
```

**Via code:**

```python
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig

config = DroidrunConfig()
config.tracing.enabled = True

agent = DroidAgent(goal="Open settings", config=config)
agent.run()
```

**4. View traces:**

Navigate to `http://localhost:6006` to see:
- LLM calls with prompts, responses, and token counts
- Agent workflow execution (Manager, Executor, CodeAct)
- Tool invocations and their results
- Execution timings and errors

For more on using Phoenix, see the [Arize Phoenix documentation](https://docs.arize.com/phoenix).

### Configuration

Set environment variables to customize Phoenix:

```sh
# Custom Phoenix server URL (default: http://127.0.0.1:6006)
export phoenix_url=http://localhost:6006

# Project name for organizing traces
export phoenix_project_name=my_droidrun_project
```

<Note>
Environment variable names are lowercase: `phoenix_url` and `phoenix_project_name`.
</Note>

---

## Anonymous Telemetry

Droidrun collects anonymous usage analytics via PostHog to help improve the framework. Telemetry is enabled by default.

### What's Collected

- Task goals and completion status
- LLM providers and configuration settings (max steps, timeout, vision/reasoning mode, debug flags)
- Available tools and packages/activities visited
- Anonymous UUID stored in `~/.droidrun/user_id`

### What's NOT Collected

- Screenshots or screen content
- API keys or credentials
- LLM responses
- Device serial numbers
- Detailed action history

### Disable Telemetry

Disable via environment variable:

```sh
export DROIDRUN_TELEMETRY_ENABLED=false
```

Make it permanent by adding to your shell config:

```sh
echo 'export DROIDRUN_TELEMETRY_ENABLED=false' >> ~/.bashrc
source ~/.bashrc
```

<Note>
Telemetry is currently controlled only by the `DROIDRUN_TELEMETRY_ENABLED` environment variable. The `telemetry.enabled` config option is not yet implemented.
</Note>

---

## Trajectory Recording

Trajectory recording saves screenshots and UI state locally for offline debugging and analysis. Unlike telemetry (sent to PostHog) and tracing (sent to Phoenix), trajectories stay on your machine.

### Recording Levels

| Level | What's Saved | When to Use |
|-------|--------------|-------------|
| `none` (default) | Nothing | Production use, saves disk space |
| `step` | Screenshot + state per agent step | General debugging, recommended for most use cases |
| `action` | Screenshot + state per atomic action | Detailed debugging, captures every tap/swipe/type |

**Note:** `action` level generates significantly more files than `step` level.

### Enable Recording

**Via CLI:**

```sh
droidrun run "Open settings" --save-trajectory step
```

**Via config.yaml:**

```yaml
logging:
  save_trajectory: step  # none | step | action
```

**Via code:**

```python
from droidrun import DroidAgent
from droidrun.config_manager.config_manager import DroidrunConfig

config = DroidrunConfig()
config.logging.save_trajectory = "action"

agent = DroidAgent(goal="Open settings", config=config)
agent.run()
```

### Output Location

Trajectories are saved to `trajectories/` in your working directory:

```
trajectories/
└── 2025-10-17_14-30-45_open_settings/
    ├── step_000_screenshot.png
    ├── step_000_state.json
    ├── step_001_screenshot.png
    └── step_001_state.json
```

Each trajectory folder contains:
- **Screenshots** - PNG images of the device screen at each step/action
- **State files** - JSON files with:
  - UI accessibility tree (element hierarchy with IDs, text, bounds)
  - Action executed (e.g., `click(5)`, `type("hello", 3)`)
  - Agent reasoning and step number
  - Device state (current app package, activity)

Use these files to:
- Debug why the agent made specific decisions
- Replay failed executions
- Analyze UI element detection issues
- Build training datasets for agent improvement

---

## Summary

| Feature | Data Location | Default | Purpose | Opt-In/Out |
|---------|--------------|---------|---------|------------|
| **Anonymous Telemetry** | PostHog (cloud) | Enabled | Help improve Droidrun | `DROIDRUN_TELEMETRY_ENABLED=false` |
| **Phoenix Tracing** | Phoenix server (local/cloud) | Disabled | Debug LLM calls and agent flow | `--tracing` flag or config |
| **Trajectory Recording** | Local disk (`trajectories/`) | Disabled | Offline debugging with screenshots | `--save-trajectory step/action` |

---

## Related Documentation

- [Configuration System](/v4/sdk/configuration) - Configure tracing and telemetry settings
- [Events and Workflows](/v4/concepts/events-and-workflows) - Build custom monitoring integrations
- [CLI Usage](/v4/guides/cli) - Command-line flags for monitoring
