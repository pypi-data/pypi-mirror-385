import{J,K as N,al as se,bK as Ve,r as O,bL as G,a9 as R,aK as ee,bM as re,aG as D,B as f,aV as me,bN as we,bO as he,ag as ue,aF as pe,bP as Pe,bf as ge,V as $,Q as ye,be as Se,s as F,bk as ie,k as A,bQ as ke,bR as be,bm as ae,bl as Te,ao as xe,au as Ie,bS as Ce,o as Ae,bT as De,bo as Z,aB as Re,av as Ee,bU as Be,bV as Fe,a5 as ce,bW as Le,b4 as Oe,bX as Me,aP as _e,bY as He,aD as Ke,bZ as de,Z as fe,aM as Ue,a1 as Ne,aN as ve,b3 as qe,b_ as ze,b$ as $e,_ as We,D as je}from"#entry";const Qe=N({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...we({origin:"center center",scrollStrategy:"block",transition:{component:he},zIndex:2400})},"VDialog"),rt=J()({name:"VDialog",props:Qe(),emits:{"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,v){let{emit:a,slots:c}=v;const o=se(e,"modelValue"),{scopeId:m}=Ve(),d=O();function u(g){const S=g.relatedTarget,i=g.target;if(S!==i&&d.value?.contentEl&&d.value?.globalTop&&![document,d.value.contentEl].includes(i)&&!d.value.contentEl.contains(i)){const w=Pe(d.value.contentEl);if(!w.length)return;const k=w[0],b=w[w.length-1];S===k?b.focus():k.focus()}}G&&R(()=>o.value&&e.retainFocus,g=>{g?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function n(){d.value?.contentEl&&!d.value.contentEl.contains(document.activeElement)&&d.value.contentEl.focus({preventScroll:!0})}function V(){a("afterLeave")}return R(o,async g=>{g||(await ue(),d.value.activatorEl?.focus({preventScroll:!0}))}),ee(()=>{const g=re.filterProps(e),S=D({"aria-haspopup":"dialog","aria-expanded":String(o.value)},e.activatorProps),i=D({tabindex:-1},e.contentProps);return f(re,D({ref:d,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},g,{modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,"aria-modal":"true",activatorProps:S,contentProps:i,role:"dialog",onAfterEnter:n,onAfterLeave:V},m),{activator:c.activator,default:function(){for(var w=arguments.length,k=new Array(w),b=0;b<w;b++)k[b]=arguments[b];return f(pe,{root:"VDialog"},{default:()=>[c.default?.(...k)]})}})}),me({},d)}}),Xe=N({renderless:Boolean,...ye()},"VVirtualScrollItem"),Ye=J()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xe(),emits:{"update:height":e=>!0},setup(e,v){let{attrs:a,emit:c,slots:o}=v;const{resizeRef:m,contentRect:d}=ge(void 0,"border");R(()=>d.value?.height,u=>{u!=null&&c("update:height",u)}),ee(()=>e.renderless?f($,null,[o.default?.({itemRef:m})]):f("div",D({ref:m,class:["v-virtual-scroll__item",e.class],style:e.style},a),[o.default?.()]))}}),Ze=-1,Ge=1,oe=100,Je=N({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function et(e,v){const a=Se(),c=F(0);ie(()=>{c.value=parseFloat(e.itemHeight||0)});const o=F(0),m=F(Math.ceil((parseInt(e.height)||a.height.value)/(c.value||16))||1),d=F(0),u=F(0),n=O(),V=O();let g=0;const{resizeRef:S,contentRect:i}=ge();ie(()=>{S.value=n.value});const w=A(()=>n.value===document.documentElement?a.height.value:i.value?.height||parseInt(e.height)||0),k=A(()=>!!(n.value&&V.value&&w.value&&c.value));let b=Array.from({length:v.value.length}),h=Array.from({length:v.value.length});const M=F(0);let E=-1;function W(t){return b[t]||c.value}const C=ke(()=>{const t=performance.now();h[0]=0;const s=v.value.length;for(let P=1;P<=s-1;P++)h[P]=(h[P-1]||0)+W(P-1);M.value=Math.max(M.value,performance.now()-t)},M),j=R(k,t=>{t&&(j(),g=V.value.offsetTop,C.immediate(),B(),~E&&ue(()=>{G&&window.requestAnimationFrame(()=>{Y(E),E=-1})}))});be(()=>{C.clear()});function te(t,s){const P=b[t],y=c.value;c.value=y?Math.min(c.value,s):s,(P!==s||y!==c.value)&&(b[t]=s,C())}function T(t){return t=ae(t,0,v.value.length-1),h[t]||0}function Q(t){return tt(h,t)}let _=0,L=0,q=0;R(w,(t,s)=>{s&&(B(),t<s&&requestAnimationFrame(()=>{L=0,B()}))});function le(){if(!n.value||!V.value)return;const t=n.value.scrollTop,s=performance.now();s-q>500?(L=Math.sign(t-_),g=V.value.offsetTop):L=t-_,_=t,q=s,B()}function H(){!n.value||!V.value||(L=0,q=0,B())}let X=-1;function B(){cancelAnimationFrame(X),X=requestAnimationFrame(ne)}function ne(){if(!n.value||!w.value)return;const t=_-g,s=Math.sign(L),P=Math.max(0,t-oe),y=ae(Q(P),0,v.value.length),r=t+w.value+oe,p=ae(Q(r)+1,y+1,v.value.length);if((s!==Ze||y<o.value)&&(s!==Ge||p>m.value)){const x=T(o.value)-T(y),K=T(p)-T(m.value);Math.max(x,K)>oe?(o.value=y,m.value=p):(y<=0&&(o.value=y),p>=v.value.length&&(m.value=p))}d.value=T(o.value),u.value=T(v.value.length)-T(m.value)}function Y(t){const s=T(t);!n.value||t&&!s?E=t:n.value.scrollTop=s}const l=A(()=>v.value.slice(o.value,m.value).map((t,s)=>({raw:t,index:s+o.value})));return R(v,()=>{b=Array.from({length:v.value.length}),h=Array.from({length:v.value.length}),C.immediate(),B()},{deep:!0}),{containerRef:n,markerRef:V,computedItems:l,paddingTop:d,paddingBottom:u,scrollToIndex:Y,handleScroll:le,handleScrollend:H,handleItemResize:te}}function tt(e,v){let a=e.length-1,c=0,o=0,m=null,d=-1;if(e[a]<v)return a;for(;c<=a;)if(o=c+a>>1,m=e[o],m>v)a=o-1;else if(m<v)d=o,c=o+1;else return m===v?o:c;return d}const lt=N({items:{type:Array,default:()=>[]},renderless:Boolean,...Je(),...ye(),...Re()},"VVirtualScroll"),nt=J()({name:"VVirtualScroll",props:lt(),setup(e,v){let{slots:a}=v;const c=Te("VVirtualScroll"),{dimensionStyles:o}=xe(e),{containerRef:m,markerRef:d,handleScroll:u,handleScrollend:n,handleItemResize:V,scrollToIndex:g,paddingTop:S,paddingBottom:i,computedItems:w}=et(e,Ie(e,"items"));return Ce(()=>e.renderless,()=>{function k(){const h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[h]("scroll",u,{passive:!0}),document[h]("scrollend",n)):(m.value?.[h]("scroll",u,{passive:!0}),m.value?.[h]("scrollend",n))}Ae(()=>{m.value=De(c.vnode.el,!0),k(!0)}),be(k)}),ee(()=>{const k=w.value.map(b=>f(Ye,{key:b.index,renderless:e.renderless,"onUpdate:height":h=>V(b.index,h)},{default:h=>a.default?.({item:b.raw,index:b.index,...h})}));return e.renderless?f($,null,[f("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:Z(S.value)}},null),k,f("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Z(i.value)}},null)]):f("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:u,onScrollend:n,style:[o.value,e.style]},[f("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:Z(S.value),paddingBottom:Z(i.value)}},[k])])}),{scrollToIndex:g}}});function at(e,v){const a=F(!1);let c;function o(u){cancelAnimationFrame(c),a.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{a.value=!1})})}async function m(){await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>{if(a.value){const n=R(a,()=>{n(),u()})}else u()})}async function d(u){if(u.key==="Tab"&&v.value?.focus(),!["PageDown","PageUp","Home","End"].includes(u.key))return;const n=e.value?.$el;if(!n)return;(u.key==="Home"||u.key==="End")&&n.scrollTo({top:u.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await m();const V=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(u.key==="PageDown"||u.key==="Home"){const g=n.getBoundingClientRect().top;for(const S of V)if(S.getBoundingClientRect().top>=g){S.focus();break}}else{const g=n.getBoundingClientRect().bottom;for(const S of[...V].reverse())if(S.getBoundingClientRect().bottom<=g){S.focus();break}}}return{onListScroll:o,onListKeydown:d}}const ot=N({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...He({itemChildren:!1})},"Select"),st=N({...ot(),...Oe(Me({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Le({transition:{component:he}})},"VSelect"),it=J()({name:"VSelect",props:st(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:a}=v;const{t:c}=Ee(),o=O(),m=O(),d=O(),u=se(e,"menu"),n=A({get:()=>u.value,set:l=>{u.value&&!l&&m.value?.Î¨openChildren||(u.value=l)}}),{items:V,transformIn:g,transformOut:S}=Be(e),i=se(e,"modelValue",[],l=>g(l===null?[null]:_e(l)),l=>{const t=S(l);return e.multiple?t:t[0]??null}),w=A(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),k=Fe(),b=A(()=>i.value.map(l=>l.value)),h=F(!1),M=A(()=>n.value?e.closeText:e.openText);let E="",W;const C=A(()=>e.hideSelected?V.value.filter(l=>!i.value.some(t=>e.valueComparator(t,l))):V.value),j=A(()=>e.hideNoData&&!C.value.length||e.readonly||k?.isReadonly.value),te=A(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),T=O(),{onListScroll:Q,onListKeydown:_}=at(T,o);function L(l){e.openOnClear&&(n.value=!0)}function q(){j.value||(n.value=!n.value)}function le(l){if(!l.key||e.readonly||k?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(n.value=!0),["Escape","Tab"].includes(l.key)&&(n.value=!1),l.key==="Home"?T.value?.focus("first"):l.key==="End"&&T.value?.focus("last");const t=1e3;function s(r){const p=r.key.length===1,x=!r.ctrlKey&&!r.metaKey&&!r.altKey;return p&&x}if(e.multiple||!s(l))return;const P=performance.now();P-W>t&&(E=""),E+=l.key.toLowerCase(),W=P;const y=V.value.find(r=>r.title.toLowerCase().startsWith(E));if(y!==void 0){i.value=[y];const r=C.value.indexOf(y);G&&window.requestAnimationFrame(()=>{r>=0&&d.value?.scrollToIndex(r)})}}function H(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const s=i.value.findIndex(y=>e.valueComparator(y.value,l.value)),P=t??!~s;if(~s){const y=P?[...i.value,l]:[...i.value];y.splice(s,1),i.value=y}else P&&(i.value=[...i.value,l])}else{const s=t!==!1;i.value=s?[l]:[],ue(()=>{n.value=!1})}}function X(l){T.value?.$el.contains(l.relatedTarget)||(n.value=!1)}function B(){h.value&&o.value?.focus()}function ne(l){h.value=!0}function Y(l){if(l==null)i.value=[];else if(de(o.value,":autofill")||de(o.value,":-webkit-autofill")){const t=V.value.find(s=>s.title===l);t&&H(t)}else o.value&&(o.value.value="")}return R(n,()=>{if(!e.hideSelected&&n.value&&i.value.length){const l=C.value.findIndex(t=>i.value.some(s=>e.valueComparator(s.value,t.value)));G&&window.requestAnimationFrame(()=>{l>=0&&d.value?.scrollToIndex(l)})}}),R(()=>e.items,(l,t)=>{n.value||h.value&&!t.length&&l.length&&(n.value=!0)}),ee(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||C.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),s=i.value.length>0,P=ce.filterProps(e),y=s||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(ce,D({ref:o},P,{modelValue:i.value.map(r=>r.props.value).join(", "),"onUpdate:modelValue":Y,focused:h.value,"onUpdate:focused":r=>h.value=r,validationValue:i.externalValue,counterValue:w.value,dirty:s,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:y,"onClick:clear":L,"onMousedown:control":q,onBlur:X,onKeydown:le,"aria-label":c(M.value),title:c(M.value)}),{...a,default:()=>f($,null,[f(Ue,D({ref:m,modelValue:n.value,"onUpdate:modelValue":r=>n.value=r,activator:"parent",contentClass:"v-select__content",disabled:j.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:B},te.value),{default:()=>[t&&f(Ne,D({ref:T,selected:b.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:_,onFocusin:ne,onScrollPassive:Q,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>[a["prepend-item"]?.(),!C.value.length&&!e.hideNoData&&(a["no-data"]?.()??f(ve,{title:c(e.noDataText)},null)),f(nt,{ref:d,renderless:!0,items:C.value},{default:r=>{let{item:p,index:x,itemRef:K}=r;const U=D(p.props,{ref:K,key:x,onClick:()=>H(p,null)});return a.item?.({item:p,index:x,props:U})??f(ve,D(U,{role:"option"}),{prepend:z=>{let{isSelected:I}=z;return f($,null,[e.multiple&&!e.hideSelected?f(qe,{key:p.value,modelValue:I,ripple:!1,tabindex:"-1"},null):void 0,p.props.prependAvatar&&f(ze,{image:p.props.prependAvatar},null),p.props.prependIcon&&f(fe,{icon:p.props.prependIcon},null)])}})}}),a["append-item"]?.()]})]}),i.value.map((r,p)=>{function x(I){I.stopPropagation(),I.preventDefault(),H(r,!1)}const K={"onClick:close":x,onKeydown(I){I.key!=="Enter"&&I.key!==" "||(I.preventDefault(),I.stopPropagation(),x(I))},onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},U=l?!!a.chip:!!a.selection,z=U?$e(l?a.chip({item:r,index:p,props:K}):a.selection({item:r,index:p})):void 0;if(!(U&&!z))return f("div",{key:r.value,class:"v-select__selection"},[l?a.chip?f(pe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[z]}):f(We,D({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},K),null):z??f("span",{class:"v-select__selection-text"},[r.title,e.multiple&&p<i.value.length-1&&f("span",{class:"v-select__selection-comma"},[je(",")])])])})]),"append-inner":function(){for(var r=arguments.length,p=new Array(r),x=0;x<r;x++)p[x]=arguments[x];return f($,null,[a["append-inner"]?.(...p),e.menuIcon?f(fe,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),me({isFocused:h,menu:n,select:H},o)}});export{rt as V,it as a};
