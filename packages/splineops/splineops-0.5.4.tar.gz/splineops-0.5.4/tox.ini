# splineops/tox.ini

[tox]
env_list = py310, py311, py312
minversion = 4.13.0

[testenv]
description = run the tests with pytest
package = editable
deps = pytest>=6
commands = pytest {tty:--color=yes} {posargs}

[testenv:format]
description = run formatters
skip_install = true
deps = black>=23.10
commands = black {posargs:src tests examples}

[testenv:type]
description = run type checks
deps = mypy>=1.8
commands = mypy {posargs:src}

[testenv:build]
description = build wheels for distribution
skip_install = true
deps = build
commands = python -m build -w

[testenv:smoke]
description = import the native module inside the tox env
package = wheel
wheel_build_env = .pkg
deps =
commands =
    python -c "import sys, importlib.util as u; print('Python:', sys.version.split()[0]); print('has _lsresize:', u.find_spec('splineops._lsresize') is not None)"
