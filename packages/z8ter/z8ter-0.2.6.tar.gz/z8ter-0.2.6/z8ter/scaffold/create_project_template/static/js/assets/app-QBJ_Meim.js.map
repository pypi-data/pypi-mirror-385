{"version":3,"mappings":"wlCAGMA,EAAQ,sCAAAC,EAAA,wCAEd,SAASC,GAAwB,CAC/B,OAAO,SAAS,MAAM,SAAS,MAAM,QAAU,SACjD,CACA,SAASC,EAAQC,EAAoB,CACnC,MAAO,WAAWA,EAAG,MAAM,GAAG,EAAE,KAAK,GAAG,CAAC,KAC3C,CAEA,eAAeC,EAAID,EAAY,CAC7B,MAAME,EAAMH,EAAQC,CAAE,EACtB,QAAQ,MAAM,eAAgBA,EAAI,OAAQE,EAAK,aAAc,OAAO,KAAKN,CAAK,CAAC,EAC/E,MAAMO,EAAWP,EAAMM,CAAG,EAC1B,GAAI,CAACC,EAAU,CACb,QAAQ,KAAK,4BAA6BD,CAAG,EAC7C,MACF,CAEA,MADY,MAAMC,EAAA,GACR,UAAU,CAAE,OAAQH,EAAI,GAAAA,EAAI,KAAM,SAAS,KAAM,CAC7D,CAEA,SAAS,iBAAiB,mBAAoB,SAAY,CACxD,MAAMC,EAAI,QAAQ,EAClB,MAAMA,EAAIH,GAAe,CAC3B,CAAC","names":["pages","__vitePreload","pageIdFromDOM","idToKey","id","run","key","importer"],"ignoreList":[],"sources":["../../../src/ts/app.ts"],"sourcesContent":["type PageCtx = { pageId: string; id: string; body: HTMLElement };\ntype PageModule = { default?: (ctx: PageCtx) => void | Promise<void> };\n\nconst pages = import.meta.glob<PageModule>(\"./pages/**/*.ts\", { eager: false });\n\nfunction pageIdFromDOM(): string {\n  return document.body?.dataset?.page?.trim() || \"default\";\n}\nfunction idToKey(id: string): string {\n  return `./pages/${id.split(\".\").join(\"/\")}.ts`;\n}\n\nasync function run(id: string) {\n  const key = idToKey(id);\n  console.debug(\"[z8] pageId:\", id, \"key:\", key, \"seen keys:\", Object.keys(pages));\n  const importer = pages[key];\n  if (!importer) {\n    console.warn(\"[z8] missing page module:\", key);\n    return;\n  }\n  const mod = await importer();\n  await mod.default?.({ pageId: id, id, body: document.body });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  await run(\"common\");\n  await run(pageIdFromDOM());\n});\n"],"file":"assets/app-QBJ_Meim.js"}