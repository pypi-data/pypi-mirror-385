[tool.poetry]
name = "brevettiai"
version = "0.9.7"
readme = "README.md"
homepage = "https://platform.brevetti.ai"
documentation = "https://docs.brevetti.ai/"
repository = "https://bitbucket.org/criterionai/core.git"
description = "Brevetti AI library"
license = "Apache-2.0"
authors = ["Emil Tyge <emil@brevetti.ai>"]
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: OS Independent",
]
include = [
    "LICENSE",
]

[tool.poetry.dependencies]
python = "^3.8"
importlib-metadata = ">=4.1"
minio = ">=7.0,<7.1"
numpy = "^1.21"
requests = ">=2.23"
pydantic = "^1.9, !=1.9.1"
tqdm = ">=4.62"
toml = "^0.10.2"
pandas = ">=1.5.3"
parse = "^1.19.0"
cryptography = ">=36.0.1" # webapi
shapely = ">=2.0" # Annotations
smart-open = "^6.3.0"
cloudpathlib = "^0.14"
boto3 = "1.26.146"
semidbm = "^0.5.1"

mmh3 = ">=3.0"  # only sample integrity
backoff = ">=1.10" # Only in io.minio

tf2onnx = ">=1.9.0"  # onnx export
onnxruntime = ">=1.6.0"  # Benchmarking
onnxruntime-gpu = { version = ">=1.6.0", optional = true } # Benchmarking
h5py = "^3.6.0" # Metadata
py7zr = ">=0.18.9,<0.21" # AI package


tensorflow = { version = ">=2.7, !=2.9.2, <2.11", optional = true, markers = "sys_platform != 'darwin'" }
protobuf = { version = "<3.20", optional = true }
tensorflow-macos = { version = "^2.8", optional = true, markers = "sys_platform == 'darwin'" }
tensorflow-metal = { version = "^0.5", optional = true, markers = "sys_platform == 'darwin'" }
tensorflow_addons = { version = ">=0.16.1,<0.19", optional = true }
tensorflow-io-gcs-filesystem = { version = "^0.31.0", optional = true, python = ">=3.8,<3.12" }

opencv-python-headless = { version = ">=4.1", optional = true }
opencv-python = { version = ">=4.1", optional = true }
oauthlib = "^3.2.2"
requests-oauthlib = "^1.3.1"


[tool.poetry.dev-dependencies]
matplotlib = "*"
coverage = "^6.2"
pylint = "*"
pdoc3 = "^0.10.0"
GitPython = "^3.1.27"
configparser = ">=5.0"

[tool.poetry.extras]
# Tensorflow packages
tf = ["tensorflow", "tensorflow-macos", "tensorflow-metal", "tensorflow-io-gcs-filesystem", "protobuf"]
tfa = ["tensorflow-addons"]

# opencv with / without headless
cv2 = ["opencv-python"]
cv2-headless = ["opencv-python-headless"]

# Export options (gpu/no-gpu/nothing)
export-gpu = ["onnxruntime-gpu"]


[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"
