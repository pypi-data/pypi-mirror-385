#
# This element requires flatpak and ostree to be provided in the build dependencies,
# and uses these tools to create a flatpak repo as output.
#
# When specifying dependencies, one needs to specify which dependencies
# are to be wrapped up into the repo, these artifacts are expected to have
# the structure generated by the `flatpak_image` plugin.
#
# You can specify the images explicitly using the `flatpak-image` configuration,
# or you can specify a whole stack of images by specifying the `flatpak-stack`
# configuration, in which case the stack is expected to be a `stack` element
# with only `flatpak_image` dependencies. The `branch` configuration can specify
# the flatpak branch to use for each image, or for the stack of images.
#
# E.g.:
#
# build-depends:
# - base-with-flatpak-and-ostree.bst
# - filename: flatpak-image.bst
#   config:
#     flatpak-image: True
#     branch: 'stable'
# - filename: flatpak-stack.bst
#   config:
#     flatpak-stack: True
#     branch: 'beta'
#

config:
  # refs of which a copy is to be made using flatpak build-commit-from
  # a list of mappings containing keys `src` and `dest`
  copy-refs: []

  # the mode of the ostree repo (one of archive, bare, bare-user, bare-user-only)
  repo-mode: 'archive'

  # Used to specify the architecture of the resulting flatpak repo
  arch: '%{arch}'

  # Used to specify the default branch of flatpak images in the repo
  branch: '%{branch}'
