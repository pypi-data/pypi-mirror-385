{"ast":null,"code":"import _toConsumableArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import AddIcon from'@mui/icons-material/Add';import DeleteIcon from'@mui/icons-material/Delete';import{Button,TextField}from'@mui/material';import React,{useEffect,useRef,useState}from'react';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddVirtualenv=function AddVirtualenv(_ref){var virtualenv=_ref.virtualenv,onChangeVirtualenv=_ref.onChangeVirtualenv,scrollRef=_ref.scrollRef;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(function(){return virtualenv.packages.map(function(){return\"\".concat(Date.now(),\"-\").concat(Math.random());});}),_useState2=_slicedToArray(_useState,2),packageKeys=_useState2[0],setPackageKeys=_useState2[1];var prevPackagesLenRef=useRef(virtualenv.packages.length);useEffect(function(){var newLen=virtualenv.packages.length;if(newLen>prevPackagesLenRef.current){scrollRef.current.scrollTo({top:scrollRef.current.scrollHeight,behavior:'smooth'});}prevPackagesLenRef.current=newLen;setPackageKeys(function(prevKeys){var lengthDiff=virtualenv.packages.length-prevKeys.length;if(lengthDiff>0){return[].concat(_toConsumableArray(prevKeys),_toConsumableArray(new Array(lengthDiff).fill(0).map(function(){return\"\".concat(Date.now(),\"-\").concat(Math.random());})));}else if(lengthDiff<0){return prevKeys.slice(0,virtualenv.packages.length);}return prevKeys;});},[virtualenv.packages]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{marginBottom:'20px',marginRight:'20px'},children:t('registerModel.packages')}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",endIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:function onClick(){return onChangeVirtualenv('add');},children:t('registerModel.more')}),/*#__PURE__*/_jsx(\"div\",{children:virtualenv.packages.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:5,marginTop:'10px',marginLeft:50},children:[/*#__PURE__*/_jsx(TextField,{style:{width:'100%'},size:\"small\",value:item,onChange:function onChange(e){onChangeVirtualenv('change',index,e.target.value);}}),/*#__PURE__*/_jsx(DeleteIcon,{onClick:function onClick(){return onChangeVirtualenv('delete',index);},style:{cursor:'pointer',color:'#1976d2'}})]},packageKeys[index]);})})]});};export default AddVirtualenv;","map":{"version":3,"names":["AddIcon","DeleteIcon","Button","TextField","React","useEffect","useRef","useState","useTranslation","jsx","_jsx","jsxs","_jsxs","AddVirtualenv","_ref","virtualenv","onChangeVirtualenv","scrollRef","_useTranslation","t","_useState","packages","map","concat","Date","now","Math","random","_useState2","_slicedToArray","packageKeys","setPackageKeys","prevPackagesLenRef","length","newLen","current","scrollTo","top","scrollHeight","behavior","prevKeys","lengthDiff","_toConsumableArray","Array","fill","slice","children","style","marginBottom","marginRight","variant","size","endIcon","onClick","item","index","display","alignItems","gap","marginTop","marginLeft","width","value","onChange","e","target","cursor","color"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/scenes/register_model/components/addVirtualenv.js"],"sourcesContent":["import AddIcon from '@mui/icons-material/Add'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport { Button, TextField } from '@mui/material'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\n\nconst AddVirtualenv = ({ virtualenv, onChangeVirtualenv, scrollRef }) => {\n  const { t } = useTranslation()\n\n  const [packageKeys, setPackageKeys] = useState(() =>\n    virtualenv.packages.map(() => `${Date.now()}-${Math.random()}`)\n  )\n\n  const prevPackagesLenRef = useRef(virtualenv.packages.length)\n\n  useEffect(() => {\n    const newLen = virtualenv.packages.length\n    if (newLen > prevPackagesLenRef.current) {\n      scrollRef.current.scrollTo({\n        top: scrollRef.current.scrollHeight,\n        behavior: 'smooth',\n      })\n    }\n    prevPackagesLenRef.current = newLen\n\n    setPackageKeys((prevKeys) => {\n      const lengthDiff = virtualenv.packages.length - prevKeys.length\n\n      if (lengthDiff > 0) {\n        return [\n          ...prevKeys,\n          ...new Array(lengthDiff)\n            .fill(0)\n            .map(() => `${Date.now()}-${Math.random()}`),\n        ]\n      } else if (lengthDiff < 0) {\n        return prevKeys.slice(0, virtualenv.packages.length)\n      }\n\n      return prevKeys\n    })\n  }, [virtualenv.packages])\n\n  return (\n    <div>\n      <label style={{ marginBottom: '20px', marginRight: '20px' }}>\n        {t('registerModel.packages')}\n      </label>\n      <Button\n        variant=\"contained\"\n        size=\"small\"\n        endIcon={<AddIcon />}\n        onClick={() => onChangeVirtualenv('add')}\n      >\n        {t('registerModel.more')}\n      </Button>\n\n      <div>\n        {virtualenv.packages.map((item, index) => (\n          <div\n            key={packageKeys[index]}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 5,\n              marginTop: '10px',\n              marginLeft: 50,\n            }}\n          >\n            <TextField\n              style={{ width: '100%' }}\n              size=\"small\"\n              value={item}\n              onChange={(e) => {\n                onChangeVirtualenv('change', index, e.target.value)\n              }}\n            />\n            <DeleteIcon\n              onClick={() => onChangeVirtualenv('delete', index)}\n              style={{ cursor: 'pointer', color: '#1976d2' }}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default AddVirtualenv\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}