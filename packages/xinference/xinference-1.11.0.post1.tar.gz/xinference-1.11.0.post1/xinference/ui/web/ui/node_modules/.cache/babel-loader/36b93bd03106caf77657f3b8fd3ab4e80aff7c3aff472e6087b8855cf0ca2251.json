{"ast":null,"code":"import _toConsumableArray from \"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridColumnFieldsSelector, gridColumnDefinitionsSelector, gridColumnLookupSelector, gridColumnsStateSelector, gridColumnVisibilityModelSelector, gridVisibleColumnDefinitionsSelector, gridColumnPositionsSelector } from './gridColumnsSelector';\nimport { GridSignature, useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridRegisterPipeProcessor, useGridRegisterPipeApplier } from '../../core/pipeProcessing';\nimport { hydrateColumnsWidth, createColumnsState, mergeColumnsState, COLUMNS_DIMENSION_PROPERTIES } from './gridColumnsUtils';\nimport { GridPreferencePanelsValue } from '../preferencesPanel';\nimport { getGridDefaultColumnTypes } from '../../../colDef';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar defaultColumnTypes = getGridDefaultColumnTypes();\nexport var columnsStateInitializer = function columnsStateInitializer(state, props, apiRef) {\n  var _props$initialState, _ref, _props$columnVisibili, _props$initialState2;\n  var columnsState = createColumnsState({\n    apiRef: apiRef,\n    columnTypes: defaultColumnTypes,\n    columnsToUpsert: props.columns,\n    initialState: (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.columns,\n    columnVisibilityModel: (_ref = (_props$columnVisibili = props.columnVisibilityModel) != null ? _props$columnVisibili : (_props$initialState2 = props.initialState) == null || (_props$initialState2 = _props$initialState2.columns) == null ? void 0 : _props$initialState2.columnVisibilityModel) != null ? _ref : {},\n    keepOnlyColumnsToUpsert: true\n  });\n  return _extends({}, state, {\n    columns: columnsState\n  });\n};\n\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridDimensions (method, event) - can be after\n * TODO: Impossible priority - useGridParamsApi also needs to be after useGridColumns\n */\nexport function useGridColumns(apiRef, props) {\n  var _props$initialState4, _props$slotProps2;\n  var logger = useGridLogger(apiRef, 'useGridColumns');\n  var columnTypes = defaultColumnTypes;\n  var previousColumnsProp = React.useRef(props.columns);\n  var previousColumnTypesProp = React.useRef(columnTypes);\n  apiRef.current.registerControlState({\n    stateId: 'visibleColumns',\n    propModel: props.columnVisibilityModel,\n    propOnChange: props.onColumnVisibilityModelChange,\n    stateSelector: gridColumnVisibilityModelSelector,\n    changeEvent: 'columnVisibilityModelChange'\n  });\n  var setGridColumnsState = React.useCallback(function (columnsState) {\n    logger.debug('Updating columns state.');\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    apiRef.current.forceUpdate();\n    apiRef.current.publishEvent('columnsChange', columnsState.orderedFields);\n  }, [logger, apiRef]);\n\n  /**\n   * API METHODS\n   */\n  var getColumn = React.useCallback(function (field) {\n    return gridColumnLookupSelector(apiRef)[field];\n  }, [apiRef]);\n  var getAllColumns = React.useCallback(function () {\n    return gridColumnDefinitionsSelector(apiRef);\n  }, [apiRef]);\n  var getVisibleColumns = React.useCallback(function () {\n    return gridVisibleColumnDefinitionsSelector(apiRef);\n  }, [apiRef]);\n  var getColumnIndex = React.useCallback(function (field) {\n    var useVisibleColumns = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var columns = useVisibleColumns ? gridVisibleColumnDefinitionsSelector(apiRef) : gridColumnDefinitionsSelector(apiRef);\n    return columns.findIndex(function (col) {\n      return col.field === field;\n    });\n  }, [apiRef]);\n  var getColumnPosition = React.useCallback(function (field) {\n    var index = getColumnIndex(field);\n    return gridColumnPositionsSelector(apiRef)[index];\n  }, [apiRef, getColumnIndex]);\n  var setColumnVisibilityModel = React.useCallback(function (model) {\n    var currentModel = gridColumnVisibilityModelSelector(apiRef);\n    if (currentModel !== model) {\n      apiRef.current.setState(function (state) {\n        return _extends({}, state, {\n          columns: createColumnsState({\n            apiRef: apiRef,\n            columnTypes: columnTypes,\n            columnsToUpsert: [],\n            initialState: undefined,\n            columnVisibilityModel: model,\n            keepOnlyColumnsToUpsert: false\n          })\n        });\n      });\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, columnTypes]);\n  var updateColumns = React.useCallback(function (columns) {\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: columns,\n      initialState: undefined,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, setGridColumnsState, columnTypes]);\n  var setColumnVisibility = React.useCallback(function (field, isVisible) {\n    var _columnVisibilityMode;\n    var columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n    var isCurrentlyVisible = (_columnVisibilityMode = columnVisibilityModel[field]) != null ? _columnVisibilityMode : true;\n    if (isVisible !== isCurrentlyVisible) {\n      var newModel = _extends({}, columnVisibilityModel, _defineProperty({}, field, isVisible));\n      apiRef.current.setColumnVisibilityModel(newModel);\n    }\n  }, [apiRef]);\n  var getColumnIndexRelativeToVisibleColumns = React.useCallback(function (field) {\n    var allColumns = gridColumnFieldsSelector(apiRef);\n    return allColumns.findIndex(function (col) {\n      return col === field;\n    });\n  }, [apiRef]);\n  var setColumnIndex = React.useCallback(function (field, targetIndexPosition) {\n    var allColumns = gridColumnFieldsSelector(apiRef);\n    var oldIndexPosition = getColumnIndexRelativeToVisibleColumns(field);\n    if (oldIndexPosition === targetIndexPosition) {\n      return;\n    }\n    logger.debug(\"Moving column \".concat(field, \" to index \").concat(targetIndexPosition));\n    var updatedColumns = _toConsumableArray(allColumns);\n    var fieldRemoved = updatedColumns.splice(oldIndexPosition, 1)[0];\n    updatedColumns.splice(targetIndexPosition, 0, fieldRemoved);\n    setGridColumnsState(_extends({}, gridColumnsStateSelector(apiRef.current.state), {\n      orderedFields: updatedColumns\n    }));\n    var params = {\n      column: apiRef.current.getColumn(field),\n      targetIndex: apiRef.current.getColumnIndexRelativeToVisibleColumns(field),\n      oldIndex: oldIndexPosition\n    };\n    apiRef.current.publishEvent('columnIndexChange', params);\n  }, [apiRef, logger, setGridColumnsState, getColumnIndexRelativeToVisibleColumns]);\n  var setColumnWidth = React.useCallback(function (field, width) {\n    var _apiRef$current$getRo, _apiRef$current$getRo2;\n    logger.debug(\"Updating column \".concat(field, \" width to \").concat(width));\n    var columnsState = gridColumnsStateSelector(apiRef.current.state);\n    var column = columnsState.lookup[field];\n    var newColumn = _extends({}, column, {\n      width: width,\n      hasBeenResized: true\n    });\n    setGridColumnsState(hydrateColumnsWidth(_extends({}, columnsState, {\n      lookup: _extends({}, columnsState.lookup, _defineProperty({}, field, newColumn))\n    }), (_apiRef$current$getRo = (_apiRef$current$getRo2 = apiRef.current.getRootDimensions()) == null ? void 0 : _apiRef$current$getRo2.viewportInnerSize.width) != null ? _apiRef$current$getRo : 0));\n    apiRef.current.publishEvent('columnWidthChange', {\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: newColumn,\n      width: width\n    });\n  }, [apiRef, logger, setGridColumnsState]);\n  var columnApi = {\n    getColumn: getColumn,\n    getAllColumns: getAllColumns,\n    getColumnIndex: getColumnIndex,\n    getColumnPosition: getColumnPosition,\n    getVisibleColumns: getVisibleColumns,\n    getColumnIndexRelativeToVisibleColumns: getColumnIndexRelativeToVisibleColumns,\n    updateColumns: updateColumns,\n    setColumnVisibilityModel: setColumnVisibilityModel,\n    setColumnVisibility: setColumnVisibility,\n    setColumnWidth: setColumnWidth\n  };\n  var columnReorderApi = {\n    setColumnIndex: setColumnIndex\n  };\n  useGridApiMethod(apiRef, columnApi, 'public');\n  useGridApiMethod(apiRef, columnReorderApi, props.signature === GridSignature.DataGrid ? 'private' : 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  var stateExportPreProcessing = React.useCallback(function (prevState, context) {\n    var _props$initialState$c, _props$initialState3;\n    var columnsStateToExport = {};\n    var columnVisibilityModelToExport = gridColumnVisibilityModelSelector(apiRef);\n    var shouldExportColumnVisibilityModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.columnVisibilityModel != null ||\n    // Always export if the model has been initialized\n    // TODO v6 Do a nullish check instead to export even if the initial model equals \"{}\"\n    Object.keys((_props$initialState$c = (_props$initialState3 = props.initialState) == null || (_props$initialState3 = _props$initialState3.columns) == null ? void 0 : _props$initialState3.columnVisibilityModel) != null ? _props$initialState$c : {}).length > 0 ||\n    // Always export if the model is not empty\n    Object.keys(columnVisibilityModelToExport).length > 0;\n    if (shouldExportColumnVisibilityModel) {\n      columnsStateToExport.columnVisibilityModel = columnVisibilityModelToExport;\n    }\n    columnsStateToExport.orderedFields = gridColumnFieldsSelector(apiRef);\n    var columns = gridColumnDefinitionsSelector(apiRef);\n    var dimensions = {};\n    columns.forEach(function (colDef) {\n      if (colDef.hasBeenResized) {\n        var colDefDimensions = {};\n        COLUMNS_DIMENSION_PROPERTIES.forEach(function (propertyName) {\n          var propertyValue = colDef[propertyName];\n          if (propertyValue === Infinity) {\n            propertyValue = -1;\n          }\n          colDefDimensions[propertyName] = propertyValue;\n        });\n        dimensions[colDef.field] = colDefDimensions;\n      }\n    });\n    if (Object.keys(dimensions).length > 0) {\n      columnsStateToExport.dimensions = dimensions;\n    }\n    return _extends({}, prevState, {\n      columns: columnsStateToExport\n    });\n  }, [apiRef, props.columnVisibilityModel, (_props$initialState4 = props.initialState) == null ? void 0 : _props$initialState4.columns]);\n  var stateRestorePreProcessing = React.useCallback(function (params, context) {\n    var _context$stateToResto;\n    var columnVisibilityModelToImport = (_context$stateToResto = context.stateToRestore.columns) == null ? void 0 : _context$stateToResto.columnVisibilityModel;\n    var initialState = context.stateToRestore.columns;\n    if (columnVisibilityModelToImport == null && initialState == null) {\n      return params;\n    }\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: [],\n      initialState: initialState,\n      columnVisibilityModel: columnVisibilityModelToImport,\n      keepOnlyColumnsToUpsert: false\n    });\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    if (initialState != null) {\n      apiRef.current.publishEvent('columnsChange', columnsState.orderedFields);\n    }\n    return params;\n  }, [apiRef, columnTypes]);\n  var preferencePanelPreProcessing = React.useCallback(function (initialValue, value) {\n    if (value === GridPreferencePanelsValue.columns) {\n      var _props$slotProps;\n      var ColumnsPanel = props.slots.columnsPanel;\n      return /*#__PURE__*/_jsx(ColumnsPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.columnsPanel));\n    }\n    return initialValue;\n  }, [props.slots.columnsPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.columnsPanel]);\n  var addColumnMenuItems = React.useCallback(function (columnMenuItems) {\n    if (props.disableColumnSelector) {\n      return columnMenuItems;\n    }\n    return [].concat(_toConsumableArray(columnMenuItems), ['columnMenuColumnsItem']);\n  }, [props.disableColumnSelector]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItems);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n\n  /**\n   * EVENTS\n   */\n  var prevInnerWidth = React.useRef(null);\n  var handleGridSizeChange = function handleGridSizeChange(viewportInnerSize) {\n    if (prevInnerWidth.current !== viewportInnerSize.width) {\n      prevInnerWidth.current = viewportInnerSize.width;\n      setGridColumnsState(hydrateColumnsWidth(gridColumnsStateSelector(apiRef.current.state), viewportInnerSize.width));\n    }\n  };\n  useGridApiEventHandler(apiRef, 'viewportInnerSizeChange', handleGridSizeChange);\n\n  /**\n   * APPLIERS\n   */\n  var hydrateColumns = React.useCallback(function () {\n    logger.info(\"Columns pipe processing have changed, regenerating the columns\");\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: [],\n      initialState: undefined,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, logger, setGridColumnsState, columnTypes]);\n  useGridRegisterPipeApplier(apiRef, 'hydrateColumns', hydrateColumns);\n\n  /**\n   * EFFECTS\n   */\n  // The effect do not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n  var isFirstRender = React.useRef(true);\n  React.useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    logger.info(\"GridColumns have changed, new length \".concat(props.columns.length));\n    if (previousColumnsProp.current === props.columns && previousColumnTypesProp.current === columnTypes) {\n      return;\n    }\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      initialState: undefined,\n      // If the user provides a model, we don't want to set it in the state here because it has it's dedicated `useEffect` which calls `setColumnVisibilityModel`\n      columnsToUpsert: props.columns,\n      keepOnlyColumnsToUpsert: true\n    });\n    previousColumnsProp.current = props.columns;\n    previousColumnTypesProp.current = columnTypes;\n    setGridColumnsState(columnsState);\n  }, [logger, apiRef, setGridColumnsState, props.columns, columnTypes]);\n  React.useEffect(function () {\n    if (props.columnVisibilityModel !== undefined) {\n      apiRef.current.setColumnVisibilityModel(props.columnVisibilityModel);\n    }\n  }, [apiRef, logger, props.columnVisibilityModel]);\n}","map":{"version":3,"names":["_extends","React","useGridApiMethod","useGridLogger","gridColumnFieldsSelector","gridColumnDefinitionsSelector","gridColumnLookupSelector","gridColumnsStateSelector","gridColumnVisibilityModelSelector","gridVisibleColumnDefinitionsSelector","gridColumnPositionsSelector","GridSignature","useGridApiEventHandler","useGridRegisterPipeProcessor","useGridRegisterPipeApplier","hydrateColumnsWidth","createColumnsState","mergeColumnsState","COLUMNS_DIMENSION_PROPERTIES","GridPreferencePanelsValue","getGridDefaultColumnTypes","jsx","_jsx","defaultColumnTypes","columnsStateInitializer","state","props","apiRef","_props$initialState","_ref","_props$columnVisibili","_props$initialState2","columnsState","columnTypes","columnsToUpsert","columns","initialState","columnVisibilityModel","keepOnlyColumnsToUpsert","useGridColumns","_props$initialState4","_props$slotProps2","logger","previousColumnsProp","useRef","previousColumnTypesProp","current","registerControlState","stateId","propModel","propOnChange","onColumnVisibilityModelChange","stateSelector","changeEvent","setGridColumnsState","useCallback","debug","setState","forceUpdate","publishEvent","orderedFields","getColumn","field","getAllColumns","getVisibleColumns","getColumnIndex","useVisibleColumns","arguments","length","undefined","findIndex","col","getColumnPosition","index","setColumnVisibilityModel","model","currentModel","updateColumns","setColumnVisibility","isVisible","_columnVisibilityMode","isCurrentlyVisible","newModel","_defineProperty","getColumnIndexRelativeToVisibleColumns","allColumns","setColumnIndex","targetIndexPosition","oldIndexPosition","concat","updatedColumns","_toConsumableArray","fieldRemoved","splice","params","column","targetIndex","oldIndex","setColumnWidth","width","_apiRef$current$getRo","_apiRef$current$getRo2","lookup","newColumn","hasBeenResized","getRootDimensions","viewportInnerSize","element","getColumnHeaderElement","colDef","columnApi","columnReorderApi","signature","DataGrid","stateExportPreProcessing","prevState","context","_props$initialState$c","_props$initialState3","columnsStateToExport","columnVisibilityModelToExport","shouldExportColumnVisibilityModel","exportOnlyDirtyModels","Object","keys","dimensions","forEach","colDefDimensions","propertyName","propertyValue","Infinity","stateRestorePreProcessing","_context$stateToResto","columnVisibilityModelToImport","stateToRestore","preferencePanelPreProcessing","initialValue","value","_props$slotProps","ColumnsPanel","slots","columnsPanel","slotProps","addColumnMenuItems","columnMenuItems","disableColumnSelector","prevInnerWidth","handleGridSizeChange","hydrateColumns","info","isFirstRender","useEffect"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@mui/x-data-grid/hooks/features/columns/useGridColumns.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridColumnFieldsSelector, gridColumnDefinitionsSelector, gridColumnLookupSelector, gridColumnsStateSelector, gridColumnVisibilityModelSelector, gridVisibleColumnDefinitionsSelector, gridColumnPositionsSelector } from './gridColumnsSelector';\nimport { GridSignature, useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridRegisterPipeProcessor, useGridRegisterPipeApplier } from '../../core/pipeProcessing';\nimport { hydrateColumnsWidth, createColumnsState, mergeColumnsState, COLUMNS_DIMENSION_PROPERTIES } from './gridColumnsUtils';\nimport { GridPreferencePanelsValue } from '../preferencesPanel';\nimport { getGridDefaultColumnTypes } from '../../../colDef';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultColumnTypes = getGridDefaultColumnTypes();\nexport const columnsStateInitializer = (state, props, apiRef) => {\n  var _props$initialState, _ref, _props$columnVisibili, _props$initialState2;\n  const columnsState = createColumnsState({\n    apiRef,\n    columnTypes: defaultColumnTypes,\n    columnsToUpsert: props.columns,\n    initialState: (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.columns,\n    columnVisibilityModel: (_ref = (_props$columnVisibili = props.columnVisibilityModel) != null ? _props$columnVisibili : (_props$initialState2 = props.initialState) == null || (_props$initialState2 = _props$initialState2.columns) == null ? void 0 : _props$initialState2.columnVisibilityModel) != null ? _ref : {},\n    keepOnlyColumnsToUpsert: true\n  });\n  return _extends({}, state, {\n    columns: columnsState\n  });\n};\n\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridDimensions (method, event) - can be after\n * TODO: Impossible priority - useGridParamsApi also needs to be after useGridColumns\n */\nexport function useGridColumns(apiRef, props) {\n  var _props$initialState4, _props$slotProps2;\n  const logger = useGridLogger(apiRef, 'useGridColumns');\n  const columnTypes = defaultColumnTypes;\n  const previousColumnsProp = React.useRef(props.columns);\n  const previousColumnTypesProp = React.useRef(columnTypes);\n  apiRef.current.registerControlState({\n    stateId: 'visibleColumns',\n    propModel: props.columnVisibilityModel,\n    propOnChange: props.onColumnVisibilityModelChange,\n    stateSelector: gridColumnVisibilityModelSelector,\n    changeEvent: 'columnVisibilityModelChange'\n  });\n  const setGridColumnsState = React.useCallback(columnsState => {\n    logger.debug('Updating columns state.');\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    apiRef.current.forceUpdate();\n    apiRef.current.publishEvent('columnsChange', columnsState.orderedFields);\n  }, [logger, apiRef]);\n\n  /**\n   * API METHODS\n   */\n  const getColumn = React.useCallback(field => gridColumnLookupSelector(apiRef)[field], [apiRef]);\n  const getAllColumns = React.useCallback(() => gridColumnDefinitionsSelector(apiRef), [apiRef]);\n  const getVisibleColumns = React.useCallback(() => gridVisibleColumnDefinitionsSelector(apiRef), [apiRef]);\n  const getColumnIndex = React.useCallback((field, useVisibleColumns = true) => {\n    const columns = useVisibleColumns ? gridVisibleColumnDefinitionsSelector(apiRef) : gridColumnDefinitionsSelector(apiRef);\n    return columns.findIndex(col => col.field === field);\n  }, [apiRef]);\n  const getColumnPosition = React.useCallback(field => {\n    const index = getColumnIndex(field);\n    return gridColumnPositionsSelector(apiRef)[index];\n  }, [apiRef, getColumnIndex]);\n  const setColumnVisibilityModel = React.useCallback(model => {\n    const currentModel = gridColumnVisibilityModelSelector(apiRef);\n    if (currentModel !== model) {\n      apiRef.current.setState(state => _extends({}, state, {\n        columns: createColumnsState({\n          apiRef,\n          columnTypes,\n          columnsToUpsert: [],\n          initialState: undefined,\n          columnVisibilityModel: model,\n          keepOnlyColumnsToUpsert: false\n        })\n      }));\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, columnTypes]);\n  const updateColumns = React.useCallback(columns => {\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: columns,\n      initialState: undefined,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, setGridColumnsState, columnTypes]);\n  const setColumnVisibility = React.useCallback((field, isVisible) => {\n    var _columnVisibilityMode;\n    const columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n    const isCurrentlyVisible = (_columnVisibilityMode = columnVisibilityModel[field]) != null ? _columnVisibilityMode : true;\n    if (isVisible !== isCurrentlyVisible) {\n      const newModel = _extends({}, columnVisibilityModel, {\n        [field]: isVisible\n      });\n      apiRef.current.setColumnVisibilityModel(newModel);\n    }\n  }, [apiRef]);\n  const getColumnIndexRelativeToVisibleColumns = React.useCallback(field => {\n    const allColumns = gridColumnFieldsSelector(apiRef);\n    return allColumns.findIndex(col => col === field);\n  }, [apiRef]);\n  const setColumnIndex = React.useCallback((field, targetIndexPosition) => {\n    const allColumns = gridColumnFieldsSelector(apiRef);\n    const oldIndexPosition = getColumnIndexRelativeToVisibleColumns(field);\n    if (oldIndexPosition === targetIndexPosition) {\n      return;\n    }\n    logger.debug(`Moving column ${field} to index ${targetIndexPosition}`);\n    const updatedColumns = [...allColumns];\n    const fieldRemoved = updatedColumns.splice(oldIndexPosition, 1)[0];\n    updatedColumns.splice(targetIndexPosition, 0, fieldRemoved);\n    setGridColumnsState(_extends({}, gridColumnsStateSelector(apiRef.current.state), {\n      orderedFields: updatedColumns\n    }));\n    const params = {\n      column: apiRef.current.getColumn(field),\n      targetIndex: apiRef.current.getColumnIndexRelativeToVisibleColumns(field),\n      oldIndex: oldIndexPosition\n    };\n    apiRef.current.publishEvent('columnIndexChange', params);\n  }, [apiRef, logger, setGridColumnsState, getColumnIndexRelativeToVisibleColumns]);\n  const setColumnWidth = React.useCallback((field, width) => {\n    var _apiRef$current$getRo, _apiRef$current$getRo2;\n    logger.debug(`Updating column ${field} width to ${width}`);\n    const columnsState = gridColumnsStateSelector(apiRef.current.state);\n    const column = columnsState.lookup[field];\n    const newColumn = _extends({}, column, {\n      width,\n      hasBeenResized: true\n    });\n    setGridColumnsState(hydrateColumnsWidth(_extends({}, columnsState, {\n      lookup: _extends({}, columnsState.lookup, {\n        [field]: newColumn\n      })\n    }), (_apiRef$current$getRo = (_apiRef$current$getRo2 = apiRef.current.getRootDimensions()) == null ? void 0 : _apiRef$current$getRo2.viewportInnerSize.width) != null ? _apiRef$current$getRo : 0));\n    apiRef.current.publishEvent('columnWidthChange', {\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: newColumn,\n      width\n    });\n  }, [apiRef, logger, setGridColumnsState]);\n  const columnApi = {\n    getColumn,\n    getAllColumns,\n    getColumnIndex,\n    getColumnPosition,\n    getVisibleColumns,\n    getColumnIndexRelativeToVisibleColumns,\n    updateColumns,\n    setColumnVisibilityModel,\n    setColumnVisibility,\n    setColumnWidth\n  };\n  const columnReorderApi = {\n    setColumnIndex\n  };\n  useGridApiMethod(apiRef, columnApi, 'public');\n  useGridApiMethod(apiRef, columnReorderApi, props.signature === GridSignature.DataGrid ? 'private' : 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState$c, _props$initialState3;\n    const columnsStateToExport = {};\n    const columnVisibilityModelToExport = gridColumnVisibilityModelSelector(apiRef);\n    const shouldExportColumnVisibilityModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.columnVisibilityModel != null ||\n    // Always export if the model has been initialized\n    // TODO v6 Do a nullish check instead to export even if the initial model equals \"{}\"\n    Object.keys((_props$initialState$c = (_props$initialState3 = props.initialState) == null || (_props$initialState3 = _props$initialState3.columns) == null ? void 0 : _props$initialState3.columnVisibilityModel) != null ? _props$initialState$c : {}).length > 0 ||\n    // Always export if the model is not empty\n    Object.keys(columnVisibilityModelToExport).length > 0;\n    if (shouldExportColumnVisibilityModel) {\n      columnsStateToExport.columnVisibilityModel = columnVisibilityModelToExport;\n    }\n    columnsStateToExport.orderedFields = gridColumnFieldsSelector(apiRef);\n    const columns = gridColumnDefinitionsSelector(apiRef);\n    const dimensions = {};\n    columns.forEach(colDef => {\n      if (colDef.hasBeenResized) {\n        const colDefDimensions = {};\n        COLUMNS_DIMENSION_PROPERTIES.forEach(propertyName => {\n          let propertyValue = colDef[propertyName];\n          if (propertyValue === Infinity) {\n            propertyValue = -1;\n          }\n          colDefDimensions[propertyName] = propertyValue;\n        });\n        dimensions[colDef.field] = colDefDimensions;\n      }\n    });\n    if (Object.keys(dimensions).length > 0) {\n      columnsStateToExport.dimensions = dimensions;\n    }\n    return _extends({}, prevState, {\n      columns: columnsStateToExport\n    });\n  }, [apiRef, props.columnVisibilityModel, (_props$initialState4 = props.initialState) == null ? void 0 : _props$initialState4.columns]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    var _context$stateToResto;\n    const columnVisibilityModelToImport = (_context$stateToResto = context.stateToRestore.columns) == null ? void 0 : _context$stateToResto.columnVisibilityModel;\n    const initialState = context.stateToRestore.columns;\n    if (columnVisibilityModelToImport == null && initialState == null) {\n      return params;\n    }\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: [],\n      initialState,\n      columnVisibilityModel: columnVisibilityModelToImport,\n      keepOnlyColumnsToUpsert: false\n    });\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    if (initialState != null) {\n      apiRef.current.publishEvent('columnsChange', columnsState.orderedFields);\n    }\n    return params;\n  }, [apiRef, columnTypes]);\n  const preferencePanelPreProcessing = React.useCallback((initialValue, value) => {\n    if (value === GridPreferencePanelsValue.columns) {\n      var _props$slotProps;\n      const ColumnsPanel = props.slots.columnsPanel;\n      return /*#__PURE__*/_jsx(ColumnsPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.columnsPanel));\n    }\n    return initialValue;\n  }, [props.slots.columnsPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.columnsPanel]);\n  const addColumnMenuItems = React.useCallback(columnMenuItems => {\n    if (props.disableColumnSelector) {\n      return columnMenuItems;\n    }\n    return [...columnMenuItems, 'columnMenuColumnsItem'];\n  }, [props.disableColumnSelector]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItems);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n\n  /**\n   * EVENTS\n   */\n  const prevInnerWidth = React.useRef(null);\n  const handleGridSizeChange = viewportInnerSize => {\n    if (prevInnerWidth.current !== viewportInnerSize.width) {\n      prevInnerWidth.current = viewportInnerSize.width;\n      setGridColumnsState(hydrateColumnsWidth(gridColumnsStateSelector(apiRef.current.state), viewportInnerSize.width));\n    }\n  };\n  useGridApiEventHandler(apiRef, 'viewportInnerSizeChange', handleGridSizeChange);\n\n  /**\n   * APPLIERS\n   */\n  const hydrateColumns = React.useCallback(() => {\n    logger.info(`Columns pipe processing have changed, regenerating the columns`);\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: [],\n      initialState: undefined,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, logger, setGridColumnsState, columnTypes]);\n  useGridRegisterPipeApplier(apiRef, 'hydrateColumns', hydrateColumns);\n\n  /**\n   * EFFECTS\n   */\n  // The effect do not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    logger.info(`GridColumns have changed, new length ${props.columns.length}`);\n    if (previousColumnsProp.current === props.columns && previousColumnTypesProp.current === columnTypes) {\n      return;\n    }\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      initialState: undefined,\n      // If the user provides a model, we don't want to set it in the state here because it has it's dedicated `useEffect` which calls `setColumnVisibilityModel`\n      columnsToUpsert: props.columns,\n      keepOnlyColumnsToUpsert: true\n    });\n    previousColumnsProp.current = props.columns;\n    previousColumnTypesProp.current = columnTypes;\n    setGridColumnsState(columnsState);\n  }, [logger, apiRef, setGridColumnsState, props.columns, columnTypes]);\n  React.useEffect(() => {\n    if (props.columnVisibilityModel !== undefined) {\n      apiRef.current.setColumnVisibilityModel(props.columnVisibilityModel);\n    }\n  }, [apiRef, logger, props.columnVisibilityModel]);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}