{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box}from'@mui/material';import Paper from'@mui/material/Paper';import Grid from'@mui/material/Unstable_Grid2';import React,{useContext,useEffect}from'react';import{useCookies}from'react-cookie';import{useTranslation}from'react-i18next';import{useNavigate}from'react-router-dom';import{ApiContext}from'../../components/apiContext';import TableTitle from'../../components/tableTitle';import Title from'../../components/Title';import{isValidBearerToken}from'../../components/utils';import NodeInfo from'./nodeInfo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ClusterInfo=function ClusterInfo(){var endPoint=useContext(ApiContext).endPoint;var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,1),cookie=_useCookies2[0];var navigate=useNavigate();var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){if(sessionStorage.getItem('auth')==='true'&&!isValidBearerToken(sessionStorage.getItem('token'))&&!isValidBearerToken(cookie.token)){navigate('/login',{replace:true});}},[cookie.token]);var handleGoBack=function handleGoBack(){var lastUrl=sessionStorage.getItem('lastActiveUrl');if(lastUrl==='launch_model'){navigate(sessionStorage.getItem('modelType'));}else if(lastUrl==='running_models'){navigate(sessionStorage.getItem('runningModelType'));}else if(lastUrl==='register_model'){navigate(sessionStorage.getItem('registerModelType'));}else{navigate('/launch_model/llm');}};return/*#__PURE__*/_jsxs(Box,{sx:{height:'100%',width:'100%',padding:'20px 20px 0 20px'},children:[/*#__PURE__*/_jsx(Title,{title:t('menu.clusterInfo')}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,style:{width:'100%'},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:t('clusterInfo.supervisor')}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Supervisor\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack,t:t})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:t('clusterInfo.workers')}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Worker\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack,t:t})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,display:'flex',overflow:'auto',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TableTitle,{children:t('clusterInfo.workerDetails')}),/*#__PURE__*/_jsx(NodeInfo,{nodeRole:\"Worker-Details\",endpoint:endPoint,cookie:cookie,handleGoBack:handleGoBack,t:t})]})})]})]});};export default ClusterInfo;","map":{"version":3,"names":["Box","Paper","Grid","React","useContext","useEffect","useCookies","useTranslation","useNavigate","ApiContext","TableTitle","Title","isValidBearerToken","NodeInfo","jsx","_jsx","jsxs","_jsxs","ClusterInfo","endPoint","_useCookies","_useCookies2","_slicedToArray","cookie","navigate","_useTranslation","t","sessionStorage","getItem","token","replace","handleGoBack","lastUrl","sx","height","width","padding","children","title","container","spacing","style","item","xs","display","overflow","flexDirection","nodeRole","endpoint"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/scenes/cluster_info/index.js"],"sourcesContent":["import { Box } from '@mui/material'\nimport Paper from '@mui/material/Paper'\nimport Grid from '@mui/material/Unstable_Grid2'\nimport React, { useContext, useEffect } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useTranslation } from 'react-i18next'\nimport { useNavigate } from 'react-router-dom'\n\nimport { ApiContext } from '../../components/apiContext'\nimport TableTitle from '../../components/tableTitle'\nimport Title from '../../components/Title'\nimport { isValidBearerToken } from '../../components/utils'\nimport NodeInfo from './nodeInfo'\n\nconst ClusterInfo = () => {\n  const endPoint = useContext(ApiContext).endPoint\n  const [cookie] = useCookies(['token'])\n  const navigate = useNavigate()\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    if (\n      sessionStorage.getItem('auth') === 'true' &&\n      !isValidBearerToken(sessionStorage.getItem('token')) &&\n      !isValidBearerToken(cookie.token)\n    ) {\n      navigate('/login', { replace: true })\n    }\n  }, [cookie.token])\n\n  const handleGoBack = () => {\n    const lastUrl = sessionStorage.getItem('lastActiveUrl')\n    if (lastUrl === 'launch_model') {\n      navigate(sessionStorage.getItem('modelType'))\n    } else if (lastUrl === 'running_models') {\n      navigate(sessionStorage.getItem('runningModelType'))\n    } else if (lastUrl === 'register_model') {\n      navigate(sessionStorage.getItem('registerModelType'))\n    } else {\n      navigate('/launch_model/llm')\n    }\n  }\n\n  return (\n    <Box\n      sx={{\n        height: '100%',\n        width: '100%',\n        padding: '20px 20px 0 20px',\n      }}\n    >\n      <Title title={t('menu.clusterInfo')} />\n      <Grid container spacing={3} style={{ width: '100%' }}>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>{t('clusterInfo.supervisor')}</TableTitle>\n            <NodeInfo\n              nodeRole=\"Supervisor\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n              t={t}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>{t('clusterInfo.workers')}</TableTitle>\n            <NodeInfo\n              nodeRole=\"Worker\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n              t={t}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Paper\n            sx={{\n              padding: 2,\n              display: 'flex',\n              overflow: 'auto',\n              flexDirection: 'column',\n            }}\n          >\n            <TableTitle>{t('clusterInfo.workerDetails')}</TableTitle>\n            <NodeInfo\n              nodeRole=\"Worker-Details\"\n              endpoint={endPoint}\n              cookie={cookie}\n              handleGoBack={handleGoBack}\n              t={t}\n            />\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n\nexport default ClusterInfo\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}