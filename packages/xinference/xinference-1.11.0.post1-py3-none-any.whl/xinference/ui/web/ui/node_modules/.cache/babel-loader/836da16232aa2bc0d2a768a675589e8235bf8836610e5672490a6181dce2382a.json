{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box}from'@mui/material';import Button from'@mui/material/Button';import Container from'@mui/material/Container';import TextField from'@mui/material/TextField';import Typography from'@mui/material/Typography';import*as React from'react';import{Fragment,useContext,useState}from'react';import{useCookies}from'react-cookie';import{useNavigate}from'react-router-dom';import{ApiContext}from'../../components/apiContext';import ErrorMessageSnackBar from'../../components/errorMessageSnackBar';import{getEndpoint}from'../../components/utils';import Header from'./header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,2),setCookie=_useCookies2[1];var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useContext=useContext(ApiContext),setErrorMsg=_useContext.setErrorMsg;var endpoint=getEndpoint();var handleSubmit=function handleSubmit(){fetch(endpoint+'/token',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(res){if(!res.ok){res.json().then(function(errorData){setErrorMsg(\"Login failed: \".concat(res.status,\" - \").concat(errorData.detail||'Unknown error'));});}else{res.json().then(function(data){setCookie('token',data['access_token'],{path:'/'});sessionStorage.setItem('token',data['access_token']);navigate('/launch_model/llm');});}});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xl\",sx:{marginTop:20},children:[/*#__PURE__*/_jsx(ErrorMessageSnackBar,{}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"LOGIN\"}),/*#__PURE__*/_jsxs(Box,{component:\"main\",noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",value:username,onChange:function onChange(e){setUsername(e.target.value);},autoFocus:true}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},onClick:handleSubmit,children:\"Sign In\"})]})]})]})]});}export default Login;","map":{"version":3,"names":["Box","Button","Container","TextField","Typography","React","Fragment","useContext","useState","useCookies","useNavigate","ApiContext","ErrorMessageSnackBar","getEndpoint","Header","jsx","_jsx","jsxs","_jsxs","Login","_useCookies","_useCookies2","_slicedToArray","setCookie","navigate","_useState","_useState2","username","setUsername","_useState3","_useState4","password","setPassword","_useContext","setErrorMsg","endpoint","handleSubmit","fetch","method","headers","body","JSON","stringify","then","res","ok","json","errorData","concat","status","detail","data","path","sessionStorage","setItem","children","component","maxWidth","sx","marginTop","display","flexDirection","alignItems","variant","noValidate","mt","margin","required","fullWidth","id","label","name","value","onChange","e","target","autoFocus","type","autoComplete","mb","onClick"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/scenes/login/login.js"],"sourcesContent":["import { Box } from '@mui/material'\nimport Button from '@mui/material/Button'\nimport Container from '@mui/material/Container'\nimport TextField from '@mui/material/TextField'\nimport Typography from '@mui/material/Typography'\nimport * as React from 'react'\nimport { Fragment, useContext, useState } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useNavigate } from 'react-router-dom'\n\nimport { ApiContext } from '../../components/apiContext'\nimport ErrorMessageSnackBar from '../../components/errorMessageSnackBar'\nimport { getEndpoint } from '../../components/utils'\nimport Header from './header'\n\nfunction Login() {\n  const [, setCookie] = useCookies(['token'])\n  const navigate = useNavigate()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const { setErrorMsg } = useContext(ApiContext)\n  const endpoint = getEndpoint()\n\n  const handleSubmit = () => {\n    fetch(endpoint + '/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password,\n      }),\n    }).then((res) => {\n      if (!res.ok) {\n        res.json().then((errorData) => {\n          setErrorMsg(\n            `Login failed: ${res.status} - ${\n              errorData.detail || 'Unknown error'\n            }`\n          )\n        })\n      } else {\n        res.json().then((data) => {\n          setCookie('token', data['access_token'], { path: '/' })\n          sessionStorage.setItem('token', data['access_token'])\n          navigate('/launch_model/llm')\n        })\n      }\n    })\n  }\n\n  return (\n    <Fragment>\n      <Header />\n      <Container component=\"main\" maxWidth=\"xl\" sx={{ marginTop: 20 }}>\n        <ErrorMessageSnackBar />\n        <Box\n          sx={{\n            marginTop: 8,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <Typography component=\"h1\" variant=\"h5\">\n            LOGIN\n          </Typography>\n          <Box component=\"main\" noValidate sx={{ mt: 1 }}>\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"username\"\n              label=\"Username\"\n              name=\"username\"\n              value={username}\n              onChange={(e) => {\n                setUsername(e.target.value)\n              }}\n              autoFocus\n            />\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => {\n                setPassword(e.target.value)\n              }}\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              sx={{ mt: 3, mb: 2 }}\n              onClick={handleSubmit}\n            >\n              Sign In\n            </Button>\n          </Box>\n        </Box>\n      </Container>\n    </Fragment>\n  )\n}\n\nexport default Login\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}