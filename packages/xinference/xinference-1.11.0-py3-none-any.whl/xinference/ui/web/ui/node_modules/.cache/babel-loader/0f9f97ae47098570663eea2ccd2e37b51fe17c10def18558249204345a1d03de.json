{"ast":null,"code":"import { createSelector, createSelectorMemoized } from '../../../utils/createSelector';\nimport { gridExpandedSortedRowEntriesSelector, gridExpandedSortedRowIdsSelector, gridFilteredSortedTopLevelRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { gridRowMaximumTreeDepthSelector, gridRowTreeSelector } from '../rows/gridRowsSelector';\nimport { getPageCount } from './gridPaginationUtils';\n\n/**\n * @category Pagination\n * @ignore - do not document.\n */\nexport var gridPaginationSelector = function gridPaginationSelector(state) {\n  return state.pagination;\n};\n\n/**\n * Get the pagination model\n * @category Pagination\n */\nexport var gridPaginationModelSelector = createSelector(gridPaginationSelector, function (pagination) {\n  return pagination.paginationModel;\n});\n\n/**\n * Get the row count\n * @category Pagination\n */\nexport var gridPaginationRowCountSelector = createSelector(gridPaginationSelector, function (pagination) {\n  return pagination.rowCount;\n});\n\n/**\n * Get the index of the page to render if the pagination is enabled\n * @category Pagination\n */\nexport var gridPageSelector = createSelector(gridPaginationModelSelector, function (paginationModel) {\n  return paginationModel.page;\n});\n\n/**\n * Get the maximum amount of rows to display on a single page if the pagination is enabled\n * @category Pagination\n */\nexport var gridPageSizeSelector = createSelector(gridPaginationModelSelector, function (paginationModel) {\n  return paginationModel.pageSize;\n});\n\n/**\n * Get the amount of pages needed to display all the rows if the pagination is enabled\n * @category Pagination\n */\nexport var gridPageCountSelector = createSelector(gridPageSizeSelector, gridPaginationRowCountSelector, function (pageSize, rowCount) {\n  return getPageCount(rowCount, pageSize);\n});\n\n/**\n * Get the index of the first and the last row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport var gridPaginationRowRangeSelector = createSelectorMemoized(gridPaginationModelSelector, gridRowTreeSelector, gridRowMaximumTreeDepthSelector, gridExpandedSortedRowEntriesSelector, gridFilteredSortedTopLevelRowEntriesSelector, function (paginationModel, rowTree, rowTreeDepth, visibleSortedRowEntries, visibleSortedTopLevelRowEntries) {\n  var visibleTopLevelRowCount = visibleSortedTopLevelRowEntries.length;\n  var topLevelFirstRowIndex = Math.min(paginationModel.pageSize * paginationModel.page, visibleTopLevelRowCount - 1);\n  var topLevelLastRowIndex = Math.min(topLevelFirstRowIndex + paginationModel.pageSize - 1, visibleTopLevelRowCount - 1);\n\n  // The range contains no element\n  if (topLevelFirstRowIndex === -1 || topLevelLastRowIndex === -1) {\n    return null;\n  }\n\n  // The tree is flat, there is no need to look for children\n  if (rowTreeDepth < 2) {\n    return {\n      firstRowIndex: topLevelFirstRowIndex,\n      lastRowIndex: topLevelLastRowIndex\n    };\n  }\n  var topLevelFirstRow = visibleSortedTopLevelRowEntries[topLevelFirstRowIndex];\n  var topLevelRowsInCurrentPageCount = topLevelLastRowIndex - topLevelFirstRowIndex + 1;\n  var firstRowIndex = visibleSortedRowEntries.findIndex(function (row) {\n    return row.id === topLevelFirstRow.id;\n  });\n  var lastRowIndex = firstRowIndex;\n  var topLevelRowAdded = 0;\n  while (lastRowIndex < visibleSortedRowEntries.length && topLevelRowAdded <= topLevelRowsInCurrentPageCount) {\n    var _rowTree$row$id;\n    var row = visibleSortedRowEntries[lastRowIndex];\n    var depth = (_rowTree$row$id = rowTree[row.id]) == null ? void 0 : _rowTree$row$id.depth;\n    if (depth === undefined) {\n      lastRowIndex += 1;\n    } else {\n      if (topLevelRowAdded < topLevelRowsInCurrentPageCount || depth > 0) {\n        lastRowIndex += 1;\n      }\n      if (depth === 0) {\n        topLevelRowAdded += 1;\n      }\n    }\n  }\n  return {\n    firstRowIndex: firstRowIndex,\n    lastRowIndex: lastRowIndex - 1\n  };\n});\n\n/**\n * Get the id and the model of each row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport var gridPaginatedVisibleSortedGridRowEntriesSelector = createSelectorMemoized(gridExpandedSortedRowEntriesSelector, gridPaginationRowRangeSelector, function (visibleSortedRowEntries, paginationRange) {\n  if (!paginationRange) {\n    return [];\n  }\n  return visibleSortedRowEntries.slice(paginationRange.firstRowIndex, paginationRange.lastRowIndex + 1);\n});\n\n/**\n * Get the id of each row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport var gridPaginatedVisibleSortedGridRowIdsSelector = createSelectorMemoized(gridExpandedSortedRowIdsSelector, gridPaginationRowRangeSelector, function (visibleSortedRowIds, paginationRange) {\n  if (!paginationRange) {\n    return [];\n  }\n  return visibleSortedRowIds.slice(paginationRange.firstRowIndex, paginationRange.lastRowIndex + 1);\n});","map":{"version":3,"names":["createSelector","createSelectorMemoized","gridExpandedSortedRowEntriesSelector","gridExpandedSortedRowIdsSelector","gridFilteredSortedTopLevelRowEntriesSelector","gridRowMaximumTreeDepthSelector","gridRowTreeSelector","getPageCount","gridPaginationSelector","state","pagination","gridPaginationModelSelector","paginationModel","gridPaginationRowCountSelector","rowCount","gridPageSelector","page","gridPageSizeSelector","pageSize","gridPageCountSelector","gridPaginationRowRangeSelector","rowTree","rowTreeDepth","visibleSortedRowEntries","visibleSortedTopLevelRowEntries","visibleTopLevelRowCount","length","topLevelFirstRowIndex","Math","min","topLevelLastRowIndex","firstRowIndex","lastRowIndex","topLevelFirstRow","topLevelRowsInCurrentPageCount","findIndex","row","id","topLevelRowAdded","_rowTree$row$id","depth","undefined","gridPaginatedVisibleSortedGridRowEntriesSelector","paginationRange","slice","gridPaginatedVisibleSortedGridRowIdsSelector","visibleSortedRowIds"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@mui/x-data-grid/hooks/features/pagination/gridPaginationSelector.js"],"sourcesContent":["import { createSelector, createSelectorMemoized } from '../../../utils/createSelector';\nimport { gridExpandedSortedRowEntriesSelector, gridExpandedSortedRowIdsSelector, gridFilteredSortedTopLevelRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { gridRowMaximumTreeDepthSelector, gridRowTreeSelector } from '../rows/gridRowsSelector';\nimport { getPageCount } from './gridPaginationUtils';\n\n/**\n * @category Pagination\n * @ignore - do not document.\n */\nexport const gridPaginationSelector = state => state.pagination;\n\n/**\n * Get the pagination model\n * @category Pagination\n */\nexport const gridPaginationModelSelector = createSelector(gridPaginationSelector, pagination => pagination.paginationModel);\n\n/**\n * Get the row count\n * @category Pagination\n */\nexport const gridPaginationRowCountSelector = createSelector(gridPaginationSelector, pagination => pagination.rowCount);\n\n/**\n * Get the index of the page to render if the pagination is enabled\n * @category Pagination\n */\nexport const gridPageSelector = createSelector(gridPaginationModelSelector, paginationModel => paginationModel.page);\n\n/**\n * Get the maximum amount of rows to display on a single page if the pagination is enabled\n * @category Pagination\n */\nexport const gridPageSizeSelector = createSelector(gridPaginationModelSelector, paginationModel => paginationModel.pageSize);\n\n/**\n * Get the amount of pages needed to display all the rows if the pagination is enabled\n * @category Pagination\n */\nexport const gridPageCountSelector = createSelector(gridPageSizeSelector, gridPaginationRowCountSelector, (pageSize, rowCount) => getPageCount(rowCount, pageSize));\n\n/**\n * Get the index of the first and the last row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport const gridPaginationRowRangeSelector = createSelectorMemoized(gridPaginationModelSelector, gridRowTreeSelector, gridRowMaximumTreeDepthSelector, gridExpandedSortedRowEntriesSelector, gridFilteredSortedTopLevelRowEntriesSelector, (paginationModel, rowTree, rowTreeDepth, visibleSortedRowEntries, visibleSortedTopLevelRowEntries) => {\n  const visibleTopLevelRowCount = visibleSortedTopLevelRowEntries.length;\n  const topLevelFirstRowIndex = Math.min(paginationModel.pageSize * paginationModel.page, visibleTopLevelRowCount - 1);\n  const topLevelLastRowIndex = Math.min(topLevelFirstRowIndex + paginationModel.pageSize - 1, visibleTopLevelRowCount - 1);\n\n  // The range contains no element\n  if (topLevelFirstRowIndex === -1 || topLevelLastRowIndex === -1) {\n    return null;\n  }\n\n  // The tree is flat, there is no need to look for children\n  if (rowTreeDepth < 2) {\n    return {\n      firstRowIndex: topLevelFirstRowIndex,\n      lastRowIndex: topLevelLastRowIndex\n    };\n  }\n  const topLevelFirstRow = visibleSortedTopLevelRowEntries[topLevelFirstRowIndex];\n  const topLevelRowsInCurrentPageCount = topLevelLastRowIndex - topLevelFirstRowIndex + 1;\n  const firstRowIndex = visibleSortedRowEntries.findIndex(row => row.id === topLevelFirstRow.id);\n  let lastRowIndex = firstRowIndex;\n  let topLevelRowAdded = 0;\n  while (lastRowIndex < visibleSortedRowEntries.length && topLevelRowAdded <= topLevelRowsInCurrentPageCount) {\n    var _rowTree$row$id;\n    const row = visibleSortedRowEntries[lastRowIndex];\n    const depth = (_rowTree$row$id = rowTree[row.id]) == null ? void 0 : _rowTree$row$id.depth;\n    if (depth === undefined) {\n      lastRowIndex += 1;\n    } else {\n      if (topLevelRowAdded < topLevelRowsInCurrentPageCount || depth > 0) {\n        lastRowIndex += 1;\n      }\n      if (depth === 0) {\n        topLevelRowAdded += 1;\n      }\n    }\n  }\n  return {\n    firstRowIndex,\n    lastRowIndex: lastRowIndex - 1\n  };\n});\n\n/**\n * Get the id and the model of each row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport const gridPaginatedVisibleSortedGridRowEntriesSelector = createSelectorMemoized(gridExpandedSortedRowEntriesSelector, gridPaginationRowRangeSelector, (visibleSortedRowEntries, paginationRange) => {\n  if (!paginationRange) {\n    return [];\n  }\n  return visibleSortedRowEntries.slice(paginationRange.firstRowIndex, paginationRange.lastRowIndex + 1);\n});\n\n/**\n * Get the id of each row to include in the current page if the pagination is enabled.\n * @category Pagination\n */\nexport const gridPaginatedVisibleSortedGridRowIdsSelector = createSelectorMemoized(gridExpandedSortedRowIdsSelector, gridPaginationRowRangeSelector, (visibleSortedRowIds, paginationRange) => {\n  if (!paginationRange) {\n    return [];\n  }\n  return visibleSortedRowIds.slice(paginationRange.firstRowIndex, paginationRange.lastRowIndex + 1);\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}