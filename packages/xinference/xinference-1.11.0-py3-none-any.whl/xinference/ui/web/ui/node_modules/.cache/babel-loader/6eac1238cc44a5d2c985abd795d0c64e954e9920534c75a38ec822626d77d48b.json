{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from'react';import{Navigate,useRoutes}from'react-router-dom';import{useNavigate}from'react-router-dom';import{ApiContext}from'../components/apiContext';import Layout from'../scenes/_layout';import ClusterInfo from'../scenes/cluster_info';import LaunchModel from'../scenes/launch_model';import Login from'../scenes/login/login';import RegisterModel from'../scenes/register_model';import RunningModels from'../scenes/running_models';import{jsx as _jsx}from\"react/jsx-runtime\";var LoginAuth=function LoginAuth(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),authority=_useState2[0],setAuthority=_useState2[1];var navigate=useNavigate();var _useContext=useContext(ApiContext),endPoint=_useContext.endPoint;useEffect(function(){fetch(endPoint+'/v1/cluster/auth',{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(res){if(res.ok){res.json().then(function(data){setAuthority(data.auth);sessionStorage.setItem('auth',String(data.auth));// sessionStorage only can set string value\n});}});},[]);useEffect(function(){if(!authority)navigate('/launch_model/llm');},[authority]);return/*#__PURE__*/_jsx(Login,{});};var routes=[{path:'/',element:/*#__PURE__*/_jsx(Layout,{}),children:[{path:'/',element:/*#__PURE__*/_jsx(Navigate,{to:\"launch_model/llm\",replace:true})},{path:'launch_model/:Modeltype/:subType?',element:/*#__PURE__*/_jsx(LaunchModel,{})},{path:'running_models/:runningModelType',element:/*#__PURE__*/_jsx(RunningModels,{})},{path:'register_model/:registerModelType/:model_name?',element:/*#__PURE__*/_jsx(RegisterModel,{})},{path:'cluster_info',element:/*#__PURE__*/_jsx(ClusterInfo,{})}]},{path:'/login',element:/*#__PURE__*/_jsx(LoginAuth,{})},{path:'*',element:/*#__PURE__*/_jsx(Navigate,{to:\"launch_model/llm\",replace:true})}];var WraperRoutes=function WraperRoutes(){var element=useRoutes(routes);return element;};export default WraperRoutes;","map":{"version":3,"names":["useContext","useEffect","useState","Navigate","useRoutes","useNavigate","ApiContext","Layout","ClusterInfo","LaunchModel","Login","RegisterModel","RunningModels","jsx","_jsx","LoginAuth","_useState","_useState2","_slicedToArray","authority","setAuthority","navigate","_useContext","endPoint","fetch","method","headers","then","res","ok","json","data","auth","sessionStorage","setItem","String","routes","path","element","children","to","replace","WraperRoutes"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/router/index.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react'\nimport { Navigate, useRoutes } from 'react-router-dom'\nimport { useNavigate } from 'react-router-dom'\n\nimport { ApiContext } from '../components/apiContext'\nimport Layout from '../scenes/_layout'\nimport ClusterInfo from '../scenes/cluster_info'\nimport LaunchModel from '../scenes/launch_model'\nimport Login from '../scenes/login/login'\nimport RegisterModel from '../scenes/register_model'\nimport RunningModels from '../scenes/running_models'\n\nconst LoginAuth = () => {\n  const [authority, setAuthority] = useState(true)\n\n  const navigate = useNavigate()\n  const { endPoint } = useContext(ApiContext)\n\n  useEffect(() => {\n    fetch(endPoint + '/v1/cluster/auth', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then((res) => {\n      if (res.ok) {\n        res.json().then((data) => {\n          setAuthority(data.auth)\n          sessionStorage.setItem('auth', String(data.auth)) // sessionStorage only can set string value\n        })\n      }\n    })\n  }, [])\n\n  useEffect(() => {\n    if (!authority) navigate('/launch_model/llm')\n  }, [authority])\n\n  return <Login />\n}\n\nconst routes = [\n  {\n    path: '/',\n    element: <Layout />,\n    children: [\n      {\n        path: '/',\n        element: <Navigate to=\"launch_model/llm\" replace />,\n      },\n      {\n        path: 'launch_model/:Modeltype/:subType?',\n        element: <LaunchModel />,\n      },\n      {\n        path: 'running_models/:runningModelType',\n        element: <RunningModels />,\n      },\n      {\n        path: 'register_model/:registerModelType/:model_name?',\n        element: <RegisterModel />,\n      },\n      {\n        path: 'cluster_info',\n        element: <ClusterInfo />,\n      },\n    ],\n  },\n  {\n    path: '/login',\n    element: <LoginAuth />,\n  },\n  {\n    path: '*',\n    element: <Navigate to=\"launch_model/llm\" replace />,\n  },\n]\nconst WraperRoutes = () => {\n  let element = useRoutes(routes)\n  return element\n}\n\nexport default WraperRoutes\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}