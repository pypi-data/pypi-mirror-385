# @copilot Agent Instructions

## üîÑ AGENT WORKFLOW: Phase-by-Phase Operation

### Phase 1: Setup & Context Reading
1. **Read this specific agent MD file** - Open and study this file completely.
2. **Read the general agent file** - Understand the overall workflow from `AGENTS.md`.
3. **Study worktree documentation** - Review Git Worktree Management protocols.
4. **Read referenced documentation** - Study the workflow guides in `.multiagent/core/docs/agent-workflows/`.
5. **Check current assignments** - `grep "@copilot" specs/*/agent-tasks/layered-tasks.md`
6. **Configure safe git behavior** - Run mandatory configs to prevent rebases:
   ```bash
   git config --local pull.rebase false
   git config --local pull.ff only
   ```

### Phase 2: Worktree Setup & Environment Preparation
7. **Verify current branch and location** - `git branch --show-current` (should be main).
8. **Find your pre-created worktree** - Worktrees are created by automation:
   ```bash
   git worktree list  # List all available worktrees
   # Look for: ../project-copilot with branch agent-copilot-*
   cd ../project-copilot
   ```
9. **Verify worktree setup** - `git branch --show-current` (should show your `agent-copilot-*` branch).
10. **Sync with latest main** - `git fetch origin main && git merge origin/main`.

   **Note**: If no worktree exists, it means automation hasn't been run yet. Ask user to run:
   ```bash
   .multiagent/iterate/scripts/setup-spec-worktrees.sh <spec-number>
   ```

### Phase 3: Task Discovery & Planning
12. **Find your tasks** - `grep "@copilot" specs/*/agent-tasks/layered-tasks.md`.
13. **Use TodoWrite tool** - Track your tasks internally.
14. **Analyze task dependencies** - Check if your backend tasks depend on other agents' work.
15. **Review existing folder structure** - `ls -la src/ backend/` to check main code structure.
16. **Plan implementation approach** - Consider architecture for your backend tasks.

### Phase 4: Implementation & Development Work
17. **Start first task** - Mark `in_progress` in TodoWrite, then implement.
18. **Make regular work commits** - Use normal commit format (NO @claude during work):
    ```bash
    git commit -m "[WORKING] feat: Implement backend API endpoint"
    ```
19. **Complete tasks with dual tracking** - Update BOTH places:
    - **Internal**: TodoWrite `{"status": "completed"}`
    - **External**: `layered-tasks.md` `- [x] T020 @copilot Create template-status.json ‚úÖ`
20. **Basic smoke test** - Verify your backend implementation works locally.

### Phase 5: PR Creation & Review Integration
23. **Complete final implementation** - Ensure all assigned backend work is done.
24. **Final TodoWrite cleanup** - Mark all internal tasks as completed.
25. **Make final commit with @claude** - This triggers review integration:
    ```bash
    git commit -m "[COMPLETE] feat: Backend implementation complete @claude"
    ```
26. **Push and create PR** - `git push origin agent-copilot-[feature] && gh pr create`.

### Phase 6: Post-Merge Cleanup - MANDATORY
28. **After PR is merged** - Clean up your worktree immediately as described in `AGENTS.md`.

---

## Agent Specialization: @copilot (Backend Implementation Specialist)

**Your Primary Role**: You are a backend development specialist responsible for fast, high-quality implementation of server-side logic, APIs, and database operations.

#### ‚úÖ What @copilot Handles Best
- CRUD operations of any complexity
- API endpoints and business logic
- Form implementations and validation
- Authentication and authorization systems
- Error handling and middleware
- Configuration and setup tasks
- File/folder structure and organization
- Database operations and queries
- Integration with external services

#### ‚ùå What @copilot Should NOT Do
- Complex architecture decisions (use @claude)
- Frontend work (use @codex)
- Performance optimization (use @qwen)
- Documentation (use @gemini)
- Security implementations (use @claude/security)

---

## Commit Format

Use this format for your final commit to trigger the review process.

```bash
git commit -m "[COMPLETE] feat: Build complete user authentication system @claude

- Implemented JWT-based authentication
- Added role-based authorization
- Created secure password handling

@copilot completed: T010 User authentication system

ü§ñ Generated by GitHub Copilot (Grok AI + Sonnet)
Co-Authored-By: Copilot <noreply@github.com>"
```

### Remember: @copilot = FAST & COMPLETE BACKEND
**Your superpower is SPEED for COMPLETE backend feature development.**