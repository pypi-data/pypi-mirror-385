{
  "graph": {
    "id": "Mosaic XRF: single detector",
    "label": "Mosaic XRF: single detector",
    "schema_version": "1.1"
  },
  "nodes": [
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.fit.fit_single_scan_single_det.FitSingleScanSingleDetector",
      "label": "Fit scan (single detector)",
      "id": "0"
    },
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.regrid.regrid.Regrid",
      "label": "Regrid",
      "id": "1"
    },
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.normalization.norm_results.NormalizeXrfResults",
      "label": "Normalize",
      "id": "2"
    },
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.raw_counters.extract_counters.ExtractRawCounters",
      "label": "Raw Counters",
      "id": "3"
    },
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.input.concat_bliss.ConcatBliss",
      "label": "Concat BLISS scans",
      "id": "4"
    },
    {
      "task_type": "class",
      "task_identifier": "ewoksfluo.tasks.input.pick_scans.PickScans",
      "label": "Pick scans",
      "id": "5"
    },
    {
      "id": "sidecar.ewoks.mimosa.autoproc.ErrorHandler0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.mimosa.autoproc.ErrorHandler",
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 450,
          "y": 525
        }
      }
    },
    {
      "id": "sidecar.ewoks.mimosa.autoproc.EndJob0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.mimosa.autoproc.EndJob",
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 675,
          "y": 240
        }
      }
    },
    {
      "id": "sidecar.ewoks.mimosa.autoproc.StartJob0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.mimosa.autoproc.StartJob",
      "default_inputs": [
        {
          "name": "process_name",
          "value": "PyMCA"
        }
      ],
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 15,
          "y": 120
        }
      }
    },
    {
      "id": "sidecar.ewoks.mimosa.autoproc.AddAttachment0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.mimosa.autoproc.AddAttachment",
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 450,
          "y": 405
        }
      }
    },
    {
      "id": "sidecar.ewoks.pymca.parser.ParseResults0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.pymca.parser.ParseResults",
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 450,
          "y": 405
        }
      }
    },
    {
      "id": "sidecar.ewoks.notify.NotifyBeamline0",
      "task_type": "class",
      "task_identifier": "sidecar.ewoks.notify.NotifyBeamline",
      "default_inputs": [
        {
          "name": "beamline",
          "value": "id00"
        },
        {
          "name": "message",
          "value": {
            "type": "xrf_map",
            "action": "update"
          }
        }
      ],
      "uiProps": {
        "icon": "default.png",
        "position": {
          "x": 450,
          "y": 405
        }
      }
    }
  ],
  "links": [
    {
      "data_mapping": [
        {
          "source_output": "xrf_results_uri",
          "target_input": "xrf_results_uri"
        },
        {
          "source_output": "bliss_scan_uri",
          "target_input": "bliss_scan_uri"
        },
        {
          "source_output": "detector_name",
          "target_input": "detector_name"
        },
        {
          "source_output": "output_root_uri",
          "target_input": "output_root_uri"
        }
      ],
      "source": "0",
      "target": "2"
    },
    {
      "data_mapping": [
        {
          "source_output": "xrf_results_uri",
          "target_input": "xrf_results_uri"
        },
        {
          "source_output": "output_root_uri",
          "target_input": "output_root_uri"
        },
        {
          "source_output": "bliss_scan_uri",
          "target_input": "bliss_scan_uri"
        }
      ],
      "source": "2",
      "target": "3"
    },
    {
      "data_mapping": [
        {
          "source_output": "bliss_scan_uri",
          "target_input": "bliss_scan_uri"
        },
        {
          "source_output": "output_root_uri",
          "target_input": "output_root_uri"
        },
        {
          "source_output": "xrf_results_uri",
          "target_input": "xrf_results_uri"
        }
      ],
      "source": "3",
      "target": "1"
    },
    {
      "data_mapping": [
        {
          "source_output": "bliss_scan_uri",
          "target_input": "bliss_scan_uri"
        }
      ],
      "source": "4",
      "target": "0"
    },
    {
      "data_mapping": [
        {
          "source_output": "bliss_scan_uris",
          "target_input": "bliss_scan_uris"
        }
      ],
      "source": "5",
      "target": "4"
    },
    {
      "source": "sidecar.ewoks.mimosa.autoproc.StartJob0",
      "target": "sidecar.ewoks.mimosa.autoproc.ErrorHandler0",
      "data_mapping": [
        {
          "source_output": "autoProcProgramId",
          "target_input": "autoProcProgramId"
        },
        {
          "source_output": "output_directory",
          "target_input": "output_directory"
        }
      ],
      "required": true
    },
    {
      "source": "sidecar.ewoks.mimosa.autoproc.StartJob0",
      "target": "sidecar.ewoks.mimosa.autoproc.EndJob0",
      "data_mapping": [
        {
          "source_output": "autoProcProgramId",
          "target_input": "autoProcProgramId"
        }
      ],
      "required": true
    },
    {
      "source": "sidecar.ewoks.mimosa.autoproc.StartJob0",
      "target": "sidecar.ewoks.pymca.parser.ParseResults0",
      "data_mapping": [
        {
          "source_output": "autoProcProgramId",
          "target_input": "autoProcProgramId"
        }
      ],
      "required": true
    },
    {
      "source": "sidecar.ewoks.mimosa.autoproc.StartJob0",
      "target": "sidecar.ewoks.mimosa.autoproc.AddAttachment0",
      "data_mapping": [
        {
          "source_output": "autoProcProgramId",
          "target_input": "autoProcProgramId"
        }
      ],
      "required": true
    },
    {
      "source": "ewoksfluo.tasks.fit.tasks.FitSingleScanSingleDetector0",
      "target": "sidecar.ewoks.mimosa.autoproc.AddAttachment0",
      "data_mapping": [
        {
          "source_output": "xrf_results_uri",
          "target_input": "nxdata_url"
        }
      ],
      "required": true
    },
    {
      "source": "ewoksfluo.tasks.fit.tasks.FitSingleScanSingleDetector0",
      "target": "sidecar.ewoks.mimosa.autoproc.EndJob0",
      "data_mapping": [
        {
          "source_output": "xrf_results_uri",
          "target_input": "nxdata_url"
        }
      ],
      "required": true
    },
    {
      "source": "ewoksfluo.tasks.fit.tasks.FitSingleScanSingleDetector0",
      "target": "sidecar.ewoks.mimosa.autoproc.ErrorHandler0",
      "on_error": true,
      "map_all_data": true
    },
    {
      "source": "ewoksfluo.tasks.normalization.norm_results.NormalizeXrfResults0",
      "target": "sidecar.ewoks.pymca.parser.ParseResults0",
      "data_mapping": [
        {
          "source_output": "xrf_results_uri",
          "target_input": "nxdata_url"
        }
      ],
      "required": true
    },
    {
      "source": "sidecar.ewoks.pymca.parser.ParseResults0",
      "target": "sidecar.ewoks.notify.NotifyBeamline0"
    }
  ]
}
