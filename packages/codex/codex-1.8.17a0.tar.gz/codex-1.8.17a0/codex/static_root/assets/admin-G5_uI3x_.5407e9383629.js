import{p as I,o as X,g as W,r as R,c as $,u as L,a as i,m as h,s as ie,b as D,n as de,d as P,F as V,i as ce,e as Y,f as ue,t as S,h as me,j as be,k as fe,_ as A,l as ve,q as pe,v as T,w as m,x as f,y as u,z as v,A as j,B as J,C as we,D as K,E as ge,G as k,H as Q,I as _e,J as Se,K as he}from"./main-D4SEGtZa.js";import{A as ye,V as Te,a as Ve,b as Ae,U as Ce,c as xe}from"./unauthorized-DcwVauu8.js";import{S as ke,a as Be}from"./settings-drawer-IP9K98eK.js";import{useAdminStore as B,TABS as Z}from"./admin-D_7moI8h.js";import{m as $e,u as De,V as F,f as Pe,a as Ie,b as We,c as Le,d as Ue,e as ze}from"./forwardRefs-ChIujdCb.js";import{V as M,m as Ee,a as H,b as Me}from"./VWindowItem-CUNgnC9t.js";import{V as q,m as He}from"./VDivider-DVXAM-o1.js";import{u as Ne}from"./VDialog-DqZpNQj0.js";import"./change-password-dialog-CjxNUfnd.js";import"./VForm-CrcbQXkT.js";import"./VSelectionControl-DeWPIIPX.js";import"./ssrBoot-CUYhwwEr.js";import"./copy-to-clipboard-DoUvDJVx.js";const N=Symbol.for("vuetify:v-tabs"),ee=I({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...X($e({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),te=W()({name:"VTab",props:ee(),setup(e,t){let{slots:c,attrs:s}=t;const{textColorClasses:r,textColorStyles:n}=De(()=>e.sliderColor),a=R(),l=R(),d=$(()=>e.direction==="horizontal"),b=$(()=>a.value?.group?.isSelected.value??!1);function U(y){let{value:o}=y;if(o){const z=a.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),E=l.value;if(!z||!E)return;const ae=getComputedStyle(z).color,p=z.getBoundingClientRect(),w=E.getBoundingClientRect(),C=d.value?"x":"y",x=d.value?"X":"Y",G=d.value?"right":"bottom",g=d.value?"width":"height",se=p[C],ne=w[C],_=se>ne?p[G]-w[G]:p[C]-w[C],oe=Math.sign(_)>0?d.value?"right":"bottom":Math.sign(_)<0?d.value?"left":"top":"center",re=(Math.abs(_)+(Math.sign(_)<0?p[g]:w[g]))/Math.max(p[g],w[g])||0,le=p[g]/w[g]||0,O=1.5;Ie(E,{backgroundColor:[ae,"currentcolor"],transform:[`translate${x}(${_}px) scale${x}(${le})`,`translate${x}(${_/O}px) scale${x}(${(re-1)/O+1})`,"none"],transformOrigin:Array(3).fill(oe)},{duration:225,easing:ie})}}return L(()=>{const y=F.filterProps(e);return i(F,h({symbol:N,ref:a,class:["v-tab",e.class],style:e.style,tabindex:b.value?0:-1,role:"tab","aria-selected":String(b.value),active:!1},y,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":U}),{...c,default:()=>D(V,null,[c.default?.()??e.text,!e.hideSlider&&D("div",{ref:l,class:P(["v-tab__slider",r.value]),style:de(n.value)},null)])})}),Pe({},a)}}),Ge=I({...X(Ee(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Oe=W()({name:"VTabsWindow",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:c}=t;const s=ce(N,null),r=Y(e,"modelValue"),n=$({get(){return r.value!=null||!s?r.value:s.items.value.find(a=>s.selected.value.includes(a.id))?.value},set(a){r.value=a}});return L(()=>{const a=M.filterProps(e);return i(M,h({_as:"VTabsWindow"},a,{modelValue:n.value,"onUpdate:modelValue":l=>n.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),c)}),{}}}),Re=I({...Me()},"VTabsWindowItem"),je=W()({name:"VTabsWindowItem",props:Re(),setup(e,t){let{slots:c}=t;return L(()=>{const s=H.filterProps(e);return i(H,h({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),c)}),{}}});function Fe(e){return e?e.map(t=>fe(t)?t:{text:t,value:t}):[]}const qe=I({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...be(ee(),["spaced"]),...He({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ze(),...Ue()},"VTabs"),Xe=W()({name:"VTabs",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:c,slots:s}=t;const r=Y(e,"modelValue"),n=$(()=>Fe(e.items)),{densityClasses:a}=We(e),{backgroundColorClasses:l,backgroundColorStyles:d}=Le(()=>e.bgColor),{scopeId:b}=Ne();return ue({VTab:{color:S(()=>e.color),direction:S(()=>e.direction),stacked:S(()=>e.stacked),fixed:S(()=>e.fixedTabs),sliderColor:S(()=>e.sliderColor),hideSlider:S(()=>e.hideSlider)}}),L(()=>{const U=q.filterProps(e),y=!!(s.window||e.items.length>0);return D(V,null,[i(q,h(U,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},a.value,l.value,e.class],style:[{"--v-tabs-height":me(e.height)},d.value,e.style],role:"tablist",symbol:N},b,c),{default:()=>[s.default?.()??n.value.map(o=>s.tab?.({item:o})??i(te,h(o,{key:o.text,value:o.value,spaced:e.spaced}),{default:s[`tab.${o.value}`]?()=>s[`tab.${o.value}`]?.({item:o}):void 0}))]}),y&&i(Oe,h({modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,key:"tabs-window"},b),{default:()=>[n.value.map(o=>s.item?.({item:o})??i(je,{value:o.value},{default:()=>s[`item.${o.value}`]?.({item:o})})),s.window?.()]})])}),{}}}),Ye={name:"AdminTitleToolbar",components:{AppBanner:ye,SettingsDrawerButton:ke},data(){return{TABS:Z}},head(){return{title:"Admin / "+this.activeTab}},computed:{...ve(B,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const c=e.path.split("/").at(-1);this.activeTab=pe(c)}}};function Je(e,t,c,s,r,n){const a=m("AppBanner"),l=m("SettingsDrawerButton");return u(),T("header",{id:"adminHeader",class:P({drawerMargin:!n.mdAndDown})},[i(a),i(Te,{id:"titleBar",flat:"",density:"compact"},{default:f(()=>[t[2]||(t[2]=D("span",{id:"buttonSpacer"},null,-1)),i(Ve,{class:"codexToolbarTitle"},{default:f(()=>[...t[1]||(t[1]=[j(" Codex Administration ",-1)])]),_:1}),(u(),v(l,{key:n.mdAndDown,class:P(["adminSettingsButton",{invisible:!n.mdAndDown}]),disabled:!n.mdAndDown},null,8,["class","disabled"]))]),_:1}),i(Xe,{class:"adminTabs",grow:"","show-arrows":""},{default:f(()=>[(u(!0),T(V,null,J(r.TABS,d=>(u(),v(te,{key:d,modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=b=>e.activeTab=b),to:d.toLowerCase()},{default:f(()=>[j(we(d),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Ke=A(Ye,[["render",Je],["__scopeId","data-v-f32749ed"]]),Qe={name:"AdminSettingsPanel",components:{AdminBrowserLink:Ae}};function Ze(e,t,c,s,r,n){const a=m("AdminBrowserLink");return u(),v(a)}const et=A(Qe,[["render",Ze]]),tt={name:"AdminSettingsDrawer",components:{SettingsDrawer:Be,AdminSettingsPanel:et},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...K(ge,["setSettingsDrawerOpen"])}};function at(e,t,c,s,r,n){const a=m("AdminSettingsPanel"),l=m("SettingsDrawer");return u(),v(l,{title:"Admin",temporary:n.mdAndDown},{panel:f(()=>[i(a)]),_:1},8,["temporary"])}const st=A(tt,[["render",at]]),nt={name:"AdminTabs",data(){return{TABS:Z}},computed:{...k(B,["doNormalComicLibrariesExist"]),...k(Q,["isBanner"]),...k(B,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...K(B,["loadTables"])}},ot={key:0,id:"noLibraries"};function rt(e,t,c,s,r,n){const a=m("router-view");return u(),T(V,null,[i(M,{modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.activeTab=l),class:P(n.classes),touch:!1},{default:f(()=>[(u(!0),T(V,null,J(r.TABS,l=>(u(),v(a,{key:l},{default:f(({Component:d})=>[i(H,{value:l,class:"tabItemContainer"},{default:f(()=>[(u(),v(Se(d)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?_e("",!0):(u(),T("div",ot," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const lt=A(nt,[["render",rt],["__scopeId","data-v-51c14a36"]]),it={name:"MainAdmin",components:{AdminHeader:Ke,AdminSettingsDrawer:st,AdminTabs:lt,Unauthorized:Ce},data(){return{mdiLogin:he}},computed:{...k(Q,["isUserAdmin"])}};function dt(e,t,c,s,r,n){const a=m("AdminHeader"),l=m("AdminTabs"),d=m("AdminSettingsDrawer"),b=m("Unauthorized");return e.isUserAdmin?(u(),v(xe,{key:0},{default:f(()=>[i(a),i(l),i(d)]),_:1})):(u(),v(b,{key:1}))}const Vt=A(it,[["render",dt]]);export{Vt as default};
