import{bP as Zt,bQ as Jt,_ as Z,bR as ea,z as q,m as C,x as ae,y as G,A as $e,C as Ge,D as at,bS as Ke,N as Ue,w as oe,a as S,b as x,J as ta,d as Y,r as U,bT as aa,g as K,p as B,e as X,aD as ue,aE as la,aB as na,br as Se,aV as ge,f as be,bh as ra,c as _,b9 as de,t as D,u as J,n as lt,aC as sa,L as oa,M as E,bb as Ye,aZ as Xe,aW as He,bU as nt,ba as Ae,i as le,aY as ne,bV as ia,h as A,bl as ua,bW as da,bX as ca,bG as Ee,bI as rt,bY as he,bZ as ce,F as Q,bu as je,b_ as fa,b$ as fe,c0 as Oe,ac as ve,j as Le,c1 as me,c2 as st,o as va,X as ma,B as ot,a7 as ga,c3 as ba,v as Qe}from"./main-D4SEGtZa.js";import{V as M,A as ha,d as ya,F as pa,j as xa,t as Sa,e as we,v as wa,D as Pa,c as ka,L as Ia,H as _a,k as Ze}from"./forwardRefs-ChIujdCb.js";import{S as Da,V as Va}from"./VForm-CrcbQXkT.js";import{useAdminStore as it}from"./admin-D_7moI8h.js";import{V as Ta}from"./VDialog-DqZpNQj0.js";import{d as ut,c as ze,h as Ca,i as Ba,j as Fa}from"./VSelect-E5kKkuai.js";import{V as Me}from"./VCheckboxBtn-CrWaiahS.js";import{m as Ra,V as ye}from"./VTable-DcP-nyBg.js";import{m as dt,u as ct}from"./filter-D8MAlk56.js";import{a as Aa}from"./VDivider-DVXAM-o1.js";import{C as Ea}from"./confirm-dialog-CYkMojaN.js";function Je(e,t,a){return Object.keys(e).filter(l=>Zt(l)&&l.endsWith(t)).reduce((l,n)=>(l[n.slice(0,-t.length)]=r=>Jt(e[n],r,a(r)),l),{})}const Oa={name:"AdminCreateUpdateButton",props:{update:{type:Boolean,default:!1},table:{type:String,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{mdiPencil:ea}}};function $a(e,t,a,l,n,r){return a.update?(G(),q(M,C({key:0,icon:n.mdiPencil},e.$attrs,{size:a.size,density:a.density}),null,16,["icon","size","density"])):(G(),q(M,C({key:1},e.$attrs,{size:a.size,density:a.density}),{default:ae(()=>[$e(" + "+Ge(a.table),1)]),_:1},16,["size","density"]))}const La=Z(Oa,[["render",$a]]),Na={name:"AdminCreateUpdateDialog",components:{AdminCreateUpdateButton:La,SubmitFooter:Da},props:{table:{type:String,required:!0},label:{type:String,default:""},oldRow:{type:[Object,Boolean],default:!1},inputs:{type:Object,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{row:{},showDialog:!1,submitButtonEnabled:!1}},computed:{verb(){return this.oldRow?"Update":"Add"},title(){return this.label||this.table},buttonTitle(){return(this.oldRow?"Edit":"Add")+" "+this.title}},watch:{showDialog(e){this.row=this.getRow(e)}},methods:{...at(it,["createRow","updateRow"]),validate(){let e=!1;for(const[a,l]of Object.entries(this.row))if(!Ke(this.oldRow[a],l)){e=!0;break}if(!e)return!1;const t=this.$refs.form;return t?t.validate().then(({valid:a})=>a).catch(()=>!1):!1},change(e){this.row=e,this.submitButtonEnabled=this.validate()},getRow(e){if(!e||!this.oldRow)return Ue(this.inputs.EMPTY_ROW);const t={};for(const a of this.inputs.UPDATE_KEYS)t[a]=Ue(this.oldRow[a]);return t},doUpdate:function(){const e={};for(const[t,a]of Object.entries(this.row))Ke(this.oldRow[t],a)||(e[t]=a);this.updateRow(this.table,this.oldRow.pk,e).then(()=>(this.showDialog=!1,!0)).catch(console.error)},doCreate:function(){this.createRow(this.table,this.row).then(()=>(this.showDialog=!1,!0)).catch(console.error)},submit:function(){const e=this.$refs.form;e&&e.validate().then(({valid:t})=>{if(t)return this.oldRow?this.doUpdate():this.doCreate()}).catch(console.warn)}}};function Ga(e,t,a,l,n,r){const s=oe("AdminCreateUpdateButton"),i=oe("SubmitFooter");return G(),q(Ta,C({modelValue:n.showDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>n.showDialog=o),transition:"scale-transition"},e.$attrs),{activator:ae(({props:o})=>[S(s,C({update:!!a.oldRow,table:a.table,label:a.label},o,{size:a.size,density:a.density,title:r.buttonTitle}),null,16,["update","table","label","size","density","title"])]),default:ae(()=>[S(Va,{ref:"form",class:"cuForm"},{default:ae(()=>[x("h2",null,Ge(r.title),1),(G(),q(ta(a.inputs),{"old-row":a.oldRow,onChange:r.change},null,40,["old-row","onChange"])),S(i,{verb:r.verb,table:a.table,label:a.label,disabled:!n.submitButtonEnabled,onSubmit:r.submit,onCancel:t[0]||(t[0]=o=>n.showDialog=!1)},null,8,["verb","table","label","disabled","onSubmit"])]),_:1},512)]),_:1},16,["modelValue"])}const Al=Z(Na,[["render",Ga],["__scopeId","data-v-b61575f9"]]),Ha={name:"GroupChip",props:{titleKey:{type:String,default:""},groupType:{type:Boolean,default:void 0},item:{type:Object,default:void 0}},computed:{classes(){let e={};return this.groupType&&this.item&&(e.include=!this.item.exclude,e.exclude=this.item.exclude),e},text(){return this.item&&this.titleKey?this.item[this.titleKey]:""},value(){if(this.item)return this.groupType?this.item.exclude:this.item.value}}};function ja(e,t,a,l,n,r){return G(),q(ut,{class:Y(r.classes),text:r.text,value:r.value},null,8,["class","text","value"])}const ft=Z(Ha,[["render",ja],["__scopeId","data-v-fe7786ef"]]),za={name:"AdminRelationPicker",components:{GroupChip:ft},props:{objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{vuetifyItems(){const e=[];for(const t of this.objs)e.push({...t,value:t.pk,title:t[this.titleKey]});return e}}};function Ma(e,t,a,l,n,r){const s=oe("GroupChip");return G(),q(ze,C({chips:!0,"closable-chips":!0,density:"compact",multiple:!0,items:r.vuetifyItems},e.$attrs),{chip:ae(({item:i})=>[S(s,{"title-key":"title",item:i,"group-type":a.groupType},null,8,["item","group-type"])]),_:1},16,["items"])}const El=Z(za,[["render",Ma]]);function qa(){const e=U([]);aa(()=>e.value=[]);function t(a,l){e.value[l]=a}return{refs:e,updateRef:t}}const Wa=B({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:E,default:"$first"},prevIcon:{type:E,default:"$prev"},nextIcon:{type:E,default:"$next"},lastIcon:{type:E,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...wa(),...oa(),...we(),...Sa(),...xa(),...pa(),...ya({tag:"nav"}),...sa(),...ha({variant:"text"})},"VPagination"),et=K()({name:"VPagination",props:Wa(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:l}=t;const n=X(e,"modelValue"),{t:r,n:s}=ue(),{isRtl:i}=la(),{themeClasses:o}=na(e),{width:u}=Se(),f=ge(-1);be(void 0,{scoped:!0});const{resizeRef:g}=ra(y=>{if(!y.length)return;const{target:p,contentRect:d}=y[0],P=p.querySelector(".v-pagination__list > *");if(!P)return;const V=d.width,N=P.offsetWidth+parseFloat(getComputedStyle(P).marginRight)*2;f.value=b(V,N)}),c=_(()=>parseInt(e.length,10)),m=_(()=>parseInt(e.start,10)),w=_(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):f.value>=0?f.value:b(u.value,58));function b(y,p){const d=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((y-p*d)/p).toFixed(2))))}const v=_(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(w.value<=0)return[];if(w.value===1)return[n.value];if(c.value<=w.value)return de(c.value,m.value);const y=w.value%2===0,p=y?w.value/2:Math.floor(w.value/2),d=y?p:p+1,P=c.value-p;if(d-n.value>=0)return[...de(Math.max(1,w.value-1),m.value),e.ellipsis,c.value];if(n.value-P>=(y?1:0)){const V=w.value-1,N=c.value-V+m.value;return[m.value,e.ellipsis,...de(V,N)]}else{const V=Math.max(1,w.value-2),N=V===1?n.value:n.value-Math.ceil(V/2)+m.value;return[m.value,e.ellipsis,...de(V,N),e.ellipsis,c.value]}});function T(y,p,d){y.preventDefault(),n.value=p,d&&l(d,p)}const{refs:h,updateRef:k}=qa();be({VPaginationBtn:{color:D(()=>e.color),border:D(()=>e.border),density:D(()=>e.density),size:D(()=>e.size),variant:D(()=>e.variant),rounded:D(()=>e.rounded),elevation:D(()=>e.elevation)}});const F=_(()=>v.value.map((y,p)=>{const d=P=>k(P,p);if(typeof y=="string")return{isActive:!1,key:`ellipsis-${p}`,page:y,props:{ref:d,ellipsis:!0,icon:!0,disabled:!0}};{const P=y===n.value;return{isActive:P,key:y,page:s(y),props:{ref:d,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:P?e.activeColor:e.color,"aria-current":P,"aria-label":r(P?e.currentPageAriaLabel:e.pageAriaLabel,y),onClick:V=>T(V,y)}}}})),I=_(()=>{const y=!!e.disabled||n.value<=m.value,p=!!e.disabled||n.value>=m.value+c.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:d=>T(d,m.value,"first"),disabled:y,"aria-label":r(e.firstAriaLabel),"aria-disabled":y}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:d=>T(d,n.value-1,"prev"),disabled:y,"aria-label":r(e.previousAriaLabel),"aria-disabled":y},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:d=>T(d,n.value+1,"next"),disabled:p,"aria-label":r(e.nextAriaLabel),"aria-disabled":p},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:d=>T(d,m.value+c.value-1,"last"),disabled:p,"aria-label":r(e.lastAriaLabel),"aria-disabled":p}:void 0}});function R(){const y=n.value-m.value;h.value[y]?.$el.focus()}function L(y){y.key===Ye.left&&!e.disabled&&n.value>Number(e.start)?(n.value=n.value-1,Xe(R)):y.key===Ye.right&&!e.disabled&&n.value<m.value+c.value-1&&(n.value=n.value+1,Xe(R))}return J(()=>S(e.tag,{ref:g,class:Y(["v-pagination",o.value,e.class]),style:lt(e.style),role:"navigation","aria-label":r(e.ariaLabel),onKeydown:L,"data-test":"v-pagination-root"},{default:()=>[x("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&x("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(I.value.first):S(M,C({_as:"VPaginationBtn"},I.value.first),null)]),x("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(I.value.prev):S(M,C({_as:"VPaginationBtn"},I.value.prev),null)]),F.value.map((y,p)=>x("li",{key:y.key,class:Y(["v-pagination__item",{"v-pagination__item--is-active":y.isActive}]),"data-test":"v-pagination-item"},[a.item?a.item(y):S(M,C({_as:"VPaginationBtn"},y.props),{default:()=>[y.page]})])),x("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(I.value.next):S(M,C({_as:"VPaginationBtn"},I.value.next),null)]),e.showFirstLastPage&&x("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(I.value.last):S(M,C({_as:"VPaginationBtn"},I.value.last),null)])])]})),{}}}),Ka=B({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),vt=Symbol.for("vuetify:data-table-pagination");function Ua(e){const t=X(e,"page",void 0,l=>Number(l??1)),a=X(e,"itemsPerPage",void 0,l=>Number(l??10));return{page:t,itemsPerPage:a}}function Ya(e){const{page:t,itemsPerPage:a,itemsLength:l}=e,n=_(()=>a.value===-1?0:a.value*(t.value-1)),r=_(()=>a.value===-1?l.value:Math.min(l.value,n.value+a.value)),s=_(()=>a.value===-1||l.value===0?1:Math.ceil(l.value/a.value));He([t,s],()=>{t.value>s.value&&(t.value=s.value)});function i(c){a.value=c,t.value=1}function o(){t.value=Ae(t.value+1,1,s.value)}function u(){t.value=Ae(t.value-1,1,s.value)}function f(c){t.value=Ae(c,1,s.value)}const g={page:t,itemsPerPage:a,startIndex:n,stopIndex:r,pageCount:s,itemsLength:l,nextPage:o,prevPage:u,setPage:f,setItemsPerPage:i};return ne(vt,g),g}function Xa(){const e=le(vt);if(!e)throw new Error("Missing pagination!");return e}function Qa(e){const t=nt("usePaginatedItems"),{items:a,startIndex:l,stopIndex:n,itemsPerPage:r}=e,s=_(()=>r.value<=0?a.value:a.value.slice(l.value,n.value));return He(s,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:s}}const mt=B({prevIcon:{type:E,default:"$prev"},nextIcon:{type:E,default:"$next"},firstIcon:{type:E,default:"$first"},lastIcon:{type:E,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),tt=K()({name:"VDataTableFooter",props:mt(),setup(e,t){let{slots:a}=t;const{t:l}=ue(),{page:n,pageCount:r,startIndex:s,stopIndex:i,itemsLength:o,itemsPerPage:u,setItemsPerPage:f}=Xa(),g=_(()=>e.itemsPerPageOptions.map(c=>typeof c=="number"?{value:c,title:c===-1?l("$vuetify.dataFooter.itemsPerPageAll"):String(c)}:{...c,title:isNaN(Number(c.title))?l(c.title):c.title}));return J(()=>{const c=et.filterProps(e);return x("div",{class:"v-data-table-footer"},[a.prepend?.(),x("div",{class:"v-data-table-footer__items-per-page"},[x("span",{"aria-label":l(e.itemsPerPageText)},[l(e.itemsPerPageText)]),S(ze,{items:g.value,modelValue:u.value,"onUpdate:modelValue":m=>f(Number(m)),density:"compact",variant:"outlined",hideDetails:!0},null)]),x("div",{class:"v-data-table-footer__info"},[x("div",null,[l(e.pageText,o.value?s.value+1:0,i.value,o.value)])]),x("div",{class:"v-data-table-footer__pagination"},[S(et,C({modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},c),null)])])}),{}}}),ie=ia({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const l=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return S(l,{class:Y(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:A(e.height),width:A(e.width),maxWidth:A(e.maxWidth),left:n==="start"?A(e.fixedOffset||null):void 0,right:n==="end"?A(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?A(e.indent):void 0}},{default:()=>[a.default?.()]})}),Za=B({headers:Array},"DataTable-header"),gt=Symbol.for("vuetify:data-table-headers"),bt={title:"",sortable:!1},Ja={...bt,width:48};function el(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,l)=>{let n=!1;for(let r=0;r<t.length;r++)if(t[r].priority>l){t.splice(r,0,{element:a,priority:l}),n=!0;break}n||t.push({element:a,priority:l})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const l=Math.floor(t[0].priority);for(let n=0;n<t.length;n++)Math.floor(t[n].priority)===l&&(a+=1);return a},dequeue:()=>t.shift()}}function Ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)Ne(a,t);return t}function ht(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&ht(a.children,t);return t}function tl(e){if(e.key){if(e.key==="data-table-group")return bt;if(["data-table-expand","data-table-select"].includes(e.key))return Ja}}function qe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>qe(a,t+1))):t}function al(e){let t=!1;function a(r,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(i!=="none"&&(r.fixed=i),r.fixed===!0&&(r.fixed="start"),r.fixed===s)if(r.children)if(s==="start")for(let o=r.children.length-1;o>=0;o--)a(r.children[o],s,s);else for(let o=0;o<r.children.length;o++)a(r.children[o],s,s);else!t&&s==="start"?r.lastFixed=!0:!t&&s==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?ca(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(s==="start")for(let o=r.children.length-1;o>=0;o--)a(r.children[o],s);else for(let o=0;o<r.children.length;o++)a(r.children[o],s);else t=!1}for(let r=e.length-1;r>=0;r--)a(e[r],"start");for(let r=0;r<e.length;r++)a(e[r],"end");let l=0;for(let r=0;r<e.length;r++)l=yt(e[r],l);let n=0;for(let r=e.length-1;r>=0;r--)n=pt(e[r],n)}function yt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=yt(a,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function pt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const a of e.children)t=pt(a,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function ll(e,t){const a=[];let l=0;const n=el(e);for(;n.size()>0;){let s=n.count();const i=[];let o=1;for(;s>0;){const{element:u,priority:f}=n.dequeue(),g=t-l-qe(u);if(i.push({...u,rowspan:g??1,colspan:u.children?Ne(u).length:1}),u.children)for(const c of u.children){const m=f%1+o/Math.pow(10,l+2);n.enqueue(c,l+g+m)}o+=1,s-=1}l+=1,a.push(i)}return{columns:e.map(s=>Ne(s)).flat(),headers:a}}function xt(e){const t=[];for(const a of e){const l={...tl(a),...a},n=l.key??(typeof l.value=="string"?l.value:null),r=l.value??n??null,s={...l,key:n,value:r,sortable:l.sortable??(l.key!=null||!!l.sort),children:l.children?xt(l.children):void 0};t.push(s)}return t}function St(e,t){const a=U([]),l=U([]),n=U({}),r=U({}),s=U({});ua(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(b=>({key:b,title:da(b)}))).slice(),f=ht(u);t?.groupBy?.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const g=xt(u);al(g);const c=Math.max(...g.map(b=>qe(b)))+1,m=ll(g,c);a.value=m.headers,l.value=m.columns;const w=m.headers.flat(1);for(const b of w)b.key&&(b.sortable&&(b.sort&&(n.value[b.key]=b.sort),b.sortRaw&&(r.value[b.key]=b.sortRaw)),b.filter&&(s.value[b.key]=b.filter))});const i={headers:a,columns:l,sortFunctions:n,sortRawFunctions:r,filterFunctions:s};return ne(gt,i),i}function Pe(){const e=le(gt);if(!e)throw new Error("Missing headers!");return e}const nl={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:a}=e;return new Set(a?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},wt={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,currentPage:a,selected:l}=e;return wt.select({items:a,value:t,selected:l})}},Pt={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,allItems:a,selected:l}=e;return Pt.select({items:a,value:t,selected:l})}},rl=B({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:rt}},"DataTable-select"),kt=Symbol.for("vuetify:data-table-selection");function It(e,t){let{allItems:a,currentPage:l}=t;const n=X(e,"modelValue",e.modelValue,h=>new Set(Ee(h).map(k=>a.value.find(F=>e.valueComparator(k,F.value))?.value??k)),h=>[...h.values()]),r=_(()=>a.value.filter(h=>h.selectable)),s=_(()=>l.value.filter(h=>h.selectable)),i=_(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return nl;case"all":return Pt;case"page":default:return wt}}),o=ge(null);function u(h){return Ee(h).every(k=>n.value.has(k.value))}function f(h){return Ee(h).some(k=>n.value.has(k.value))}function g(h,k){const F=i.value.select({items:h,value:k,selected:new Set(n.value)});n.value=F}function c(h,k,F){const I=[];if(k=k??l.value.findIndex(R=>R.value===h.value),e.selectStrategy!=="single"&&F?.shiftKey&&o.value!==null){const[R,L]=[o.value,k].sort((y,p)=>y-p);I.push(...l.value.slice(R,L+1).filter(y=>y.selectable))}else I.push(h),o.value=k;g(I,!u([h]))}function m(h){const k=i.value.selectAll({value:h,allItems:r.value,currentPage:s.value,selected:new Set(n.value)});n.value=k}const w=_(()=>n.value.size>0),b=_(()=>{const h=i.value.allSelected({allItems:r.value,currentPage:s.value});return!!h.length&&u(h)}),v=D(()=>i.value.showSelectAll),T={toggleSelect:c,select:g,selectAll:m,isSelected:u,isSomeSelected:f,someSelected:w,allSelected:b,showSelectAll:v,lastSelectedIndex:o,selectStrategy:i};return ne(kt,T),T}function ke(){const e=le(kt);if(!e)throw new Error("Missing selection!");return e}const sl=B({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),_t=Symbol.for("vuetify:data-table-sort");function Dt(e){const t=X(e,"sortBy"),a=D(()=>e.mustSort),l=D(()=>e.multiSort);return{sortBy:t,mustSort:a,multiSort:l}}function Vt(e){const{sortBy:t,mustSort:a,multiSort:l,page:n}=e,r=o=>{if(o.key==null)return;let u=t.value.map(g=>({...g}))??[];const f=u.find(g=>g.key===o.key);f?f.order==="desc"?a.value&&u.length===1?f.order="asc":u=u.filter(g=>g.key!==o.key):f.order="desc":l.value?u.push({key:o.key,order:"asc"}):u=[{key:o.key,order:"asc"}],t.value=u,n&&(n.value=1)};function s(o){return!!t.value.find(u=>u.key===o.key)}const i={sortBy:t,toggleSort:r,isSorted:s};return ne(_t,i),i}function Tt(){const e=le(_t);if(!e)throw new Error("Missing sort!");return e}function Ct(e,t,a,l){const n=ue();return{sortedItems:_(()=>a.value.length?ol(t.value,a.value,n.current.value,{transform:l?.transform,sortFunctions:{...e.customKeySort,...l?.sortFunctions?.value},sortRawFunctions:l?.sortRawFunctions?.value}):t.value)}}function ol(e,t,a,l){const n=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(s=>[s,l?.transform?l.transform(s):s]).sort((s,i)=>{for(let o=0;o<t.length;o++){let u=!1;const f=t[o].key,g=t[o].order??"asc";if(g===!1)continue;let c=he(s[1],f),m=he(i[1],f),w=s[0].raw,b=i[0].raw;if(g==="desc"&&([c,m]=[m,c],[w,b]=[b,w]),l?.sortRawFunctions?.[f]){const v=l.sortRawFunctions[f](w,b);if(v==null)continue;if(u=!0,v)return v}if(l?.sortFunctions?.[f]){const v=l.sortFunctions[f](c,m);if(v==null)continue;if(u=!0,v)return v}if(!u&&(c instanceof Date&&m instanceof Date&&(c=c.getTime(),m=m.getTime()),[c,m]=[c,m].map(v=>v!=null?v.toString().toLocaleLowerCase():v),c!==m))return ce(c)&&ce(m)?0:ce(c)?-1:ce(m)?1:!isNaN(c)&&!isNaN(m)?Number(c)-Number(m):n.compare(c,m)}return 0}).map(s=>{let[i]=s;return i})}const Bt=B({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:E,default:"$sortAsc"},sortDescIcon:{type:E,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...we(),...je(),..._a()},"VDataTableHeaders"),pe=K()({name:"VDataTableHeaders",props:Bt(),setup(e,t){let{slots:a}=t;const{t:l}=ue(),{toggleSort:n,sortBy:r,isSorted:s}=Tt(),{someSelected:i,allSelected:o,selectAll:u,showSelectAll:f}=ke(),{columns:g,headers:c}=Pe(),{loaderClasses:m}=Pa(e);function w(p,d){if(!(e.sticky||e.fixedHeader)&&!p.fixed)return;const P=typeof p.fixed=="string"?p.fixed:p.fixed?"start":"none";return{position:"sticky",left:P==="start"?A(p.fixedOffset):void 0,right:P==="end"?A(p.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${d})`:void 0}}function b(p,d){p.key==="Enter"&&!e.disableSort&&n(d)}function v(p){const d=r.value.find(P=>P.key===p.key);return d?d.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:T,backgroundColorStyles:h}=ka(()=>e.color),{displayClasses:k,mobile:F}=Se(e),I=_(()=>({headers:c.value,columns:g.value,toggleSort:n,isSorted:s,sortBy:r.value,someSelected:i.value,allSelected:o.value,selectAll:u,getSortIcon:v})),R=_(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},k.value,m.value]),L=p=>{let{column:d,x:P,y:V}=p;const N=d.key==="data-table-select"||d.key==="data-table-expand",ee=d.key==="data-table-group"&&d.width===0&&!d.title,re=C(e.headerProps??{},d.headerProps??{});return S(ie,C({tag:"th",align:d.align,class:[{"v-data-table__th--sortable":d.sortable&&!e.disableSort,"v-data-table__th--sorted":s(d),"v-data-table__th--fixed":d.fixed},...R.value],style:{width:A(d.width),minWidth:A(d.minWidth),maxWidth:A(d.maxWidth),...w(d,V)},colspan:d.colspan,rowspan:d.rowspan,fixed:d.fixed,nowrap:d.nowrap,lastFixed:d.lastFixed,firstFixedEnd:d.firstFixedEnd,noPadding:N,empty:ee,tabindex:d.sortable?0:void 0,onClick:d.sortable?()=>n(d):void 0,onKeydown:d.sortable?H=>b(H,d):void 0},re),{default:()=>{const H=`header.${d.key}`,W={column:d,selectAll:u,isSorted:s,toggleSort:n,sortBy:r.value,someSelected:i.value,allSelected:o.value,getSortIcon:v};return a[H]?a[H](W):ee?"":d.key==="data-table-select"?a["header.data-table-select"]?.(W)??(f.value&&S(Me,{density:e.density,modelValue:o.value,indeterminate:i.value&&!o.value,"onUpdate:modelValue":u},null)):x("div",{class:"v-data-table-header__content"},[x("span",null,[d.title]),d.sortable&&!e.disableSort&&S(Ze,{key:"icon",class:"v-data-table-header__sort-icon",icon:v(d)},null),e.multiSort&&s(d)&&x("div",{key:"badge",class:Y(["v-data-table-header__sort-badge",...T.value]),style:lt(h.value)},[r.value.findIndex(se=>se.key===d.key)+1])])}})},y=()=>{const p=_(()=>g.value.filter(P=>P?.sortable&&!e.disableSort)),d=_(()=>{if(g.value.find(V=>V.key==="data-table-select")!=null)return o.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return S(ie,C({tag:"th",class:[...R.value],colspan:c.value.length+1},e.headerProps),{default:()=>[x("div",{class:"v-data-table-header__content"},[S(ze,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:p.value,label:l("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:d.value,"onClick:append":()=>u(!o.value)},{chip:P=>S(ut,{onClick:P.item.raw?.sortable?()=>n(P.item.raw):void 0,onMousedown:V=>{V.preventDefault(),V.stopPropagation()}},{default:()=>[P.item.title,S(Ze,{class:Y(["v-data-table__td-sort-icon",s(P.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:v(P.item.raw),size:"small"},null)]})})])]})};J(()=>F.value?x("tr",null,[S(y,null,null)]):x(Q,null,[a.headers?a.headers(I.value):c.value.map((p,d)=>x("tr",null,[p.map((P,V)=>S(L,{column:P,x:V,y:d},null))])),e.loading&&x("tr",{class:"v-data-table-progress"},[x("th",{colspan:g.value.length},[S(Ia,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Ft=B({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Rt=Symbol.for("vuetify:data-table-group");function At(e){return{groupBy:X(e,"groupBy")}}function Et(e){const{disableSort:t,groupBy:a,sortBy:l}=e,n=U(new Set),r=_(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t?.value?[]:l.value));function s(f){return n.value.has(f.id)}function i(f){const g=new Set(n.value);s(f)?g.delete(f.id):g.add(f.id),n.value=g}function o(f){function g(c){const m=[];for(const w of c.items)"type"in w&&w.type==="group"?m.push(...g(w)):m.push(w);return[...new Set(m)]}return g({items:f})}const u={sortByWithGroups:r,toggleGroup:i,opened:n,groupBy:a,extractRows:o,isGroupOpen:s};return ne(Rt,u),u}function Ot(){const e=le(Rt);if(!e)throw new Error("Missing group!");return e}function il(e,t){if(!e.length)return[];const a=new Map;for(const l of e){const n=he(l.raw,t);a.has(n)||a.set(n,[]),a.get(n).push(l)}return a}function $t(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const n=il(e,t[0]),r=[],s=t.slice(1);return n.forEach((i,o)=>{const u=t[0],f=`${l}_${u}_${o}`;r.push({depth:a,id:f,key:u,value:o,items:s.length?$t(i,s,a+1,f):i,type:"group"})}),r}function Lt(e,t,a){const l=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&l.push(n),(t.has(n.id)||n.value==null)&&(l.push(...Lt(n.items,t,a)),a&&l.push({...n,type:"group-summary"}))):l.push(n);return l}function Nt(e,t,a,l){return{flatItems:_(()=>{if(!t.value.length)return e.value;const r=$t(e.value,t.value.map(s=>s.key));return Lt(r,a.value,fa(l))})}}const Gt=B({item:{type:Object,required:!0},groupCollapseIcon:{type:E,default:"$tableGroupCollapse"},groupExpandIcon:{type:E,default:"$tableGroupExpand"},...we()},"VDataTableGroupHeaderRow"),ul=K()({name:"VDataTableGroupHeaderRow",props:Gt(),setup(e,t){let{slots:a}=t;const{isGroupOpen:l,toggleGroup:n,extractRows:r}=Ot(),{isSelected:s,isSomeSelected:i,select:o}=ke(),{columns:u}=Pe(),f=_(()=>r([e.item])),g=D(()=>u.value.length-(u.value.some(c=>c.key==="data-table-select")?1:0));return()=>x("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(c=>{if(c.key==="data-table-group"){const m=l(e.item)?e.groupCollapseIcon:e.groupExpandIcon,w=()=>n(e.item);return a["data-table-group"]?.({item:e.item,count:f.value.length,props:{icon:m,onClick:w}})??S(ie,{class:"v-data-table-group-header-row__column",colspan:g.value},{default:()=>[S(M,{size:"small",variant:"text",icon:m,onClick:w},null),x("span",null,[e.item.value]),x("span",null,[$e("("),f.value.length,$e(")")])]})}else if(c.key==="data-table-select"){const m=s(f.value),w=i(f.value)&&!m,b=v=>o(f.value,v);return a["data-table-select"]?.({props:{modelValue:m,indeterminate:w,"onUpdate:modelValue":b}})??S(ie,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[S(Me,{density:e.density,modelValue:m,indeterminate:w,"onUpdate:modelValue":b},null)]})}return""})])}}),dl=B({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Ht=Symbol.for("vuetify:datatable:expanded");function jt(e){const t=D(()=>e.expandOnClick),a=X(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function l(i,o){const u=new Set(a.value),f=fe(i.value);if(o)u.add(f);else{const g=[...a.value].find(c=>fe(c)===f);u.delete(g)}a.value=u}function n(i){const o=fe(i.value);return[...a.value].some(u=>fe(u)===o)}function r(i){l(i,!n(i))}const s={expand:l,expanded:a,expandOnClick:t,isExpanded:n,toggleExpand:r};return ne(Ht,s),s}function zt(){const e=le(Ht);if(!e)throw new Error("foo");return e}const Mt=B({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:E,default:"$collapse"},expandIcon:{type:E,default:"$expand"},onClick:Oe(),onContextmenu:Oe(),onDblclick:Oe(),...we(),...je()},"VDataTableRow"),qt=K()({name:"VDataTableRow",props:Mt(),setup(e,t){let{slots:a}=t;const{displayClasses:l,mobile:n}=Se(e,"v-data-table__tr"),{isSelected:r,toggleSelect:s,someSelected:i,allSelected:o,selectAll:u}=ke(),{isExpanded:f,toggleExpand:g}=zt(),{toggleSort:c,sortBy:m,isSorted:w}=Tt(),{columns:b}=Pe();J(()=>x("tr",{class:Y(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},l.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&b.value.map((v,T)=>{const h=e.item,k=`item.${v.key}`,F=`header.${v.key}`,I={index:e.index,item:h.raw,internalItem:h,value:he(h.columns,v.key),column:v,isSelected:r,toggleSelect:s,isExpanded:f,toggleExpand:g},R={column:v,selectAll:u,isSorted:w,toggleSort:c,sortBy:m.value,someSelected:i.value,allSelected:o.value,getSortIcon:()=>""},L=typeof e.cellProps=="function"?e.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value,column:v}):e.cellProps,y=typeof v.cellProps=="function"?v.cellProps({index:I.index,item:I.item,internalItem:I.internalItem,value:I.value}):v.cellProps,p=v.key==="data-table-select"||v.key==="data-table-expand",d=v.key==="data-table-group"&&v.width===0&&!v.title;return S(ie,C({align:v.align,indent:v.intent,class:{"v-data-table__td--expanded-row":v.key==="data-table-expand","v-data-table__td--select-row":v.key==="data-table-select"},fixed:v.fixed,fixedOffset:v.fixedOffset,fixedEndOffset:v.fixedEndOffset,lastFixed:v.lastFixed,firstFixedEnd:v.firstFixedEnd,maxWidth:n.value?void 0:v.maxWidth,noPadding:p,empty:d,nowrap:v.nowrap,width:n.value?void 0:v.width},L,y),{default:()=>{if(v.key==="data-table-select")return a["item.data-table-select"]?.({...I,props:{disabled:!h.selectable,modelValue:r([h]),onClick:ve(()=>s(h),["stop"])}})??S(Me,{disabled:!h.selectable,density:e.density,modelValue:r([h]),onClick:ve(V=>s(h,e.index,V),["stop"])},null);if(v.key==="data-table-expand")return a["item.data-table-expand"]?.({...I,props:{icon:f(h)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ve(()=>g(h),["stop"])}})??S(M,{icon:f(h)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ve(()=>g(h),["stop"])},null);if(a[k]&&!n.value)return a[k](I);const P=Ge(I.value);return n.value?x(Q,null,[x("div",{class:"v-data-table__td-title"},[a[F]?.(R)??v.title]),x("div",{class:"v-data-table__td-value"},[a[k]?.(I)??P])]):P}})})]))}}),Wt=B({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Le(Mt(),["collapseIcon","expandIcon","density"]),...Le(Gt(),["groupCollapseIcon","groupExpandIcon","density"]),...je()},"VDataTableRows"),xe=K()({name:"VDataTableRows",inheritAttrs:!1,props:Wt(),setup(e,t){let{attrs:a,slots:l}=t;const{columns:n}=Pe(),{expandOnClick:r,toggleExpand:s,isExpanded:i}=zt(),{isSelected:o,toggleSelect:u}=ke(),{toggleGroup:f,isGroupOpen:g}=Ot(),{t:c}=ue(),{mobile:m}=Se(e);return J(()=>{const w=Le(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||l.loading)?x("tr",{class:"v-data-table-rows-loading",key:"loading"},[x("td",{colspan:n.value.length},[l.loading?.()??c(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?x("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[x("td",{colspan:n.value.length},[l["no-data"]?.()??c(e.noDataText)])]):x(Q,null,[e.items.map((b,v)=>{if(b.type==="group"){const k={index:v,item:b,columns:n.value,isExpanded:i,toggleExpand:s,isSelected:o,toggleSelect:u,toggleGroup:f,isGroupOpen:g};return l["group-header"]?l["group-header"](k):S(ul,C({key:`group-header_${b.id}`,item:b},Je(a,":groupHeader",()=>k),w),l)}if(b.type==="group-summary"){const k={index:v,item:b,columns:n.value,toggleGroup:f};return l["group-summary"]?.(k)??""}const T={index:v,item:b.raw,internalItem:b,columns:n.value,isExpanded:i,toggleExpand:s,isSelected:o,toggleSelect:u},h={...T,props:C({key:`item_${b.key??b.index}`,onClick:r.value?()=>{s(b)}:void 0,index:v,item:b,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:m.value},Je(a,":row",()=>T),typeof e.rowProps=="function"?e.rowProps({item:T.item,index:T.index,internalItem:T.internalItem}):e.rowProps)};return x(Q,{key:h.props.key},[l.item?l.item(h):S(qt,h.props,l),i(b)&&l["expanded-row"]?.(T)])})])}),{}}}),cl=B({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function fl(e,t,a,l){const n=e.returnObject?t:me(t,e.itemValue),r=me(t,e.itemSelectable,!0),s=l.reduce((i,o)=>(o.key!=null&&(i[o.key]=me(t,o.value)),i),{});return{type:"item",key:e.returnObject?me(t,e.itemValue):n,index:a,value:n,selectable:r,columns:s,raw:t}}function vl(e,t,a){return t.map((l,n)=>fl(e,l,n,a))}function Kt(e,t){return{items:_(()=>vl(e,e.items,t.value))}}function Ut(e){let{page:t,itemsPerPage:a,sortBy:l,groupBy:n,search:r}=e;const s=nt("VDataTable"),i=()=>({page:t.value,itemsPerPage:a.value,sortBy:l.value,groupBy:n.value,search:r.value});let o=null;He(i,u=>{rt(o,u)||(o&&o.search!==u.search&&(t.value=1),s.emit("update:options",u),o=u)},{deep:!0,immediate:!0})}const Yt=B({...Wt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...dl(),...Ft(),...Za(),...cl(),...rl(),...sl(),...Bt(),...Ra()},"DataTable"),ml=B({...Ka(),...Yt(),...dt(),...mt()},"VDataTable");K()({name:"VDataTable",props:ml(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=At(e),{sortBy:r,multiSort:s,mustSort:i}=Dt(e),{page:o,itemsPerPage:u}=Ua(e),{disableSort:f}=st(e),{columns:g,headers:c,sortFunctions:m,sortRawFunctions:w,filterFunctions:b}=St(e,{groupBy:n,showSelect:D(()=>e.showSelect),showExpand:D(()=>e.showExpand)}),{items:v}=Kt(e,g),T=D(()=>e.search),{filteredItems:h}=ct(e,v,T,{transform:j=>j.columns,customKeyFilter:b}),{toggleSort:k}=Vt({sortBy:r,multiSort:s,mustSort:i,page:o}),{sortByWithGroups:F,opened:I,extractRows:R,isGroupOpen:L,toggleGroup:y}=Et({groupBy:n,sortBy:r,disableSort:f}),{sortedItems:p}=Ct(e,h,F,{transform:j=>({...j.raw,...j.columns}),sortFunctions:m,sortRawFunctions:w}),{flatItems:d}=Nt(p,n,I,()=>!!l["group-summary"]),P=_(()=>d.value.length),{startIndex:V,stopIndex:N,pageCount:ee,setItemsPerPage:re}=Ya({page:o,itemsPerPage:u,itemsLength:P}),{paginatedItems:H}=Qa({items:d,startIndex:V,stopIndex:N,itemsPerPage:u}),W=_(()=>R(H.value)),{isSelected:se,select:Ie,selectAll:_e,toggleSelect:De,someSelected:Ve,allSelected:Te}=It(e,{allItems:v,currentPage:W}),{isExpanded:Ce,toggleExpand:Be}=jt(e);Ut({page:o,itemsPerPage:u,sortBy:r,groupBy:n,search:T}),be({VDataTableRows:{hideNoData:D(()=>e.hideNoData),noDataText:D(()=>e.noDataText),loading:D(()=>e.loading),loadingText:D(()=>e.loadingText)}});const O=_(()=>({page:o.value,itemsPerPage:u.value,sortBy:r.value,pageCount:ee.value,toggleSort:k,setItemsPerPage:re,someSelected:Ve.value,allSelected:Te.value,isSelected:se,select:Ie,selectAll:_e,toggleSelect:De,isExpanded:Ce,toggleExpand:Be,isGroupOpen:L,toggleGroup:y,items:W.value.map(j=>j.raw),internalItems:W.value,groupedItems:H.value,columns:g.value,headers:c.value}));return J(()=>{const j=tt.filterProps(e),Fe=pe.filterProps(e),z=xe.filterProps(e),$=ye.filterProps(e);return S(ye,C({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},$,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(O.value),default:()=>l.default?l.default(O.value):x(Q,null,[l.colgroup?.(O.value),!e.hideDefaultHeader&&x("thead",{key:"thead"},[S(pe,Fe,l)]),l.thead?.(O.value),!e.hideDefaultBody&&x("tbody",null,[l["body.prepend"]?.(O.value),l.body?l.body(O.value):S(xe,C(a,z,{items:H.value}),l),l["body.append"]?.(O.value)]),l.tbody?.(O.value),l.tfoot?.(O.value)]),bottom:()=>l.bottom?l.bottom(O.value):!e.hideDefaultFooter&&x(Q,null,[S(Aa,null,null),S(tt,j,{prepend:l["footer.prepend"]})])})}),{}}});const gl=B({...va(Yt(),["hideDefaultFooter"]),...Ft(),...Ba(),...dt()},"VDataTableVirtual"),bl=K()({name:"VDataTableVirtual",props:gl(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=At(e),{sortBy:r,multiSort:s,mustSort:i}=Dt(e),{disableSort:o}=st(e),{columns:u,headers:f,filterFunctions:g,sortFunctions:c,sortRawFunctions:m}=St(e,{groupBy:n,showSelect:D(()=>e.showSelect),showExpand:D(()=>e.showExpand)}),{items:w}=Kt(e,u),b=D(()=>e.search),{filteredItems:v}=ct(e,w,b,{transform:$=>$.columns,customKeyFilter:g}),{toggleSort:T}=Vt({sortBy:r,multiSort:s,mustSort:i}),{sortByWithGroups:h,opened:k,extractRows:F,isGroupOpen:I,toggleGroup:R}=Et({groupBy:n,sortBy:r,disableSort:o}),{sortedItems:L}=Ct(e,v,h,{transform:$=>({...$.raw,...$.columns}),sortFunctions:c,sortRawFunctions:m}),{flatItems:y}=Nt(L,n,k,()=>!!l["group-summary"]),p=_(()=>F(y.value)),{isSelected:d,select:P,selectAll:V,toggleSelect:N,someSelected:ee,allSelected:re}=It(e,{allItems:p,currentPage:p}),{isExpanded:H,toggleExpand:W}=jt(e),{containerRef:se,markerRef:Ie,paddingTop:_e,paddingBottom:De,computedItems:Ve,handleItemResize:Te,handleScroll:Ce,handleScrollend:Be,calculateVisibleItems:O,scrollToIndex:j}=Ca(e,y),Fe=_(()=>Ve.value.map($=>$.raw));Ut({sortBy:r,page:ge(1),itemsPerPage:ge(-1),groupBy:n,search:b}),be({VDataTableRows:{hideNoData:D(()=>e.hideNoData),noDataText:D(()=>e.noDataText),loading:D(()=>e.loading),loadingText:D(()=>e.loadingText)}});const z=_(()=>({sortBy:r.value,toggleSort:T,someSelected:ee.value,allSelected:re.value,isSelected:d,select:P,selectAll:V,toggleSelect:N,isExpanded:H,toggleExpand:W,isGroupOpen:I,toggleGroup:R,items:p.value.map($=>$.raw),internalItems:p.value,groupedItems:y.value,columns:u.value,headers:f.value}));return J(()=>{const $=pe.filterProps(e),Xt=xe.filterProps(e),Qt=ye.filterProps(e);return S(ye,C({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Qt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(z.value),wrapper:()=>x("div",{ref:se,onScrollPassive:Ce,onScrollend:Be,class:"v-table__wrapper",style:{height:A(e.height)}},[x("table",null,[l.colgroup?.(z.value),!e.hideDefaultHeader&&x("thead",{key:"thead"},[S(pe,$,l)]),l.thead?.(z.value),!e.hideDefaultBody&&x("tbody",{key:"tbody"},[x("tr",{ref:Ie,style:{height:A(_e.value),border:0}},[x("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),l["body.prepend"]?.(z.value),S(xe,C(a,Xt,{items:Fe.value}),{...l,item:te=>S(Fa,{key:te.internalItem.index,renderless:!0,"onUpdate:height":Re=>Te(te.internalItem.index,Re)},{default:Re=>{let{itemRef:We}=Re;return l.item?.({...te,itemRef:We})??S(qt,C(te.props,{ref:We,key:te.internalItem.index,index:te.internalItem.index}),l)}})}),l["body.append"]?.(z.value),x("tr",{style:{height:A(De.value),border:0}},[x("td",{colspan:u.value.length,style:{height:0,border:0}},null)])]),l.tbody?.(z.value),l.tfoot?.(z.value)])]),bottom:()=>l.bottom?.(z.value)})}),{calculateVisibleItems:O,scrollToIndex:j}}}),hl={name:"AdminTable"};function yl(e,t,a,l,n,r){return G(),q(bl,{"fixed-header":"","item-value":"pk",mobile:e.$vuetify.display.xs},ma({_:2},[ot(e.$slots,(s,i)=>({name:i,fn:ae(o=>[ga(e.$slots,i,C({props:s},o),void 0,!0)])}))]),1032,["mobile"])}const Ol=Z(hl,[["render",yl],["__scopeId","data-v-8b5d9183"]]),pl={name:"AdminDeleteRowDialog",components:{ConfirmDialog:Ea},props:{table:{type:String,required:!0},pk:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{mdiTrashCan:ba}},computed:{titleText(){return`Delete ${this.table}`}},methods:{...at(it,["deleteRow"]),confirm(){this.deleteRow(this.table,this.pk),this.showDialog=!1}}};function xl(e,t,a,l,n,r){const s=oe("ConfirmDialog");return G(),q(s,{icon:n.mdiTrashCan,"title-text":r.titleText,text:a.name,"confirm-text":r.titleText,onConfirm:r.confirm},null,8,["icon","title-text","text","confirm-text","onConfirm"])}const $l=Z(pl,[["render",xl]]),Sl={name:"RelationChips",components:{GroupChip:ft},props:{pks:{type:Array,required:!0},objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{map(){const e={};for(const t of this.objs)e[t.pk]=t;return e}}};function wl(e,t,a,l,n,r){const s=oe("GroupChip");return G(),Qe("span",null,[(G(!0),Qe(Q,null,ot(a.pks,i=>(G(),q(s,{key:i,"title-key":a.titleKey,"group-type":a.groupType,item:r.map[i]},null,8,["title-key","group-type","item"]))),128))])}const Ll=Z(Sl,[["render",wl]]);export{El as A,ft as G,Ll as R,Al as a,$l as b,Ol as c};
