import{g as ke,p as he,f as lt,t as z,u as ye,b as m,n as re,d as I,L as Re,a_ as $e,_ as T,z as f,X as Ve,B as ue,x as C,m as W,y as l,a7 as Ne,a as d,G as M,a$ as ut,O as x,v as p,I as h,C as w,ax as dt,af as Te,b0 as ct,b1 as mt,aA as ht,w as y,D as de,b2 as ft,b3 as pt,b4 as vt,b5 as Fe,q as gt,H as bt,b6 as kt,ac as yt,V as _t,a1 as Le,A as $,b7 as St,F as me,ah as wt,ad as Ct,ae as Tt,aa as qe,Z as Mt,c as b,b8 as De,aE as Ie,aV as Ee,r as be,b9 as Bt,ba as Me,aZ as Rt,aY as Vt,i as He,bb as Nt,h as ie,U as ze,aS as Lt,e as It}from"./main-BYF-1NPs.js";import{A as xt,V as _e,k as ne,n as Pt,t as $t,j as Ft,R as Oe,s as Dt,u as Et,c as Be,i as zt,f as Ot}from"./forwardRefs-BJr0Q13I.js";import{c as At,d as Gt}from"./VSelect-Dd8Yt6FY.js";import{a as jt,c as Ut,d as qt,V as Ht}from"./VDialog-CyxhTz_Z.js";import{C as Kt}from"./change-password-dialog-Dk4jRl-v.js";import{d as Yt,u as Zt,f as Wt,g as Xt,h as Ae,m as Qt,i as Jt,j as ea}from"./VSelectionControl-BBKhy5E1.js";import{V as Ke}from"./VTable-w4hUrOLl.js";import{C as Ye}from"./confirm-dialog-CtMdLhNl.js";import{P as ta,V as aa}from"./unauthorized-B9BuWT8l.js";const sa=he({...Re(),...xt({variant:"text"})},"VToolbarItems"),bi=ke()({name:"VToolbarItems",props:sa(),setup(e,t){let{slots:a}=t;return lt({VBtn:{color:z(()=>e.color),height:"inherit",variant:z(()=>e.variant)}}),ye(()=>m("div",{class:I(["v-toolbar-items",e.class]),style:re(e.style)},[a.default?.()])),{}}}),Ce=new Set(["",$e,$e.toString(),void 0]),ia=function(e){let t;if(Ce.has(e))t=e;else if(e instanceof Object)if("ids"in e){const a=new Set(e.ids);Ce.intersection(a).size>0?t=void 0:t={value:e.ids.join(","),title:e.name}}else Ce.has(e.pk)?t=void 0:t={value:e.pk,title:e.name};else t={value:e,title:e.toString()};return e?.url&&(t.url=e.url),t},na=function(e,t){return e.title.localeCompare(t.title)},ra=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},Ge=function({items:e,filter:t,numeric:a=!1,sort:r=!0}){const n=e||[],s=t&&t.toLowerCase();let i=[];for(const o of n){const u=ia(o);u!=null&&(!s||u?.title?.toLowerCase().includes(s))&&i.push(u)}if(r){const o=a?ra:na;i=i.sort(o)}return i},oa={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function la(e,t,a,r,n,s){return l(),f(At,W(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:s.style,variant:"plain"}),Ve({item:C(({item:i,props:o})=>[d(jt,W(o,{density:"compact",variant:"plain",title:i.title,value:i.value}),null,16,["title","value"])]),_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(u=>[Ne(e.$slots,o,W({props:i},u),void 0,!0)])}))]),1040,["label","aria-label","style"])}const ki=T(oa,[["render",la],["__scopeId","data-v-cda2da63"]]),yi=Ut("v-spacer","div","VSpacer"),ua={name:"BookCover",props:{group:{type:String,required:!0},pks:{type:Array,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},mtime:{type:Number,default:Date.now()}},data(){return{showPlaceholder:!1}},computed:{...M(x,["coverSettings"]),coverSrc(){return ut({group:this.group,pks:this.pks},this.coverSettings,this.mtime)},multiPkClasses(){const e=this.pks.length,t={};return e>=4?t.stack4=!0:e>1&&(t[`stack${e}`]=!0),t}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},da={class:"bookCover"},ca={key:1,class:"childCount"};function ma(e,t,a,r,n,s){return l(),p("div",da,[d(qt,{src:s.coverSrc,class:I(["coverImg",s.multiPkClasses])},null,8,["src","class"]),a.finished!==!0?(l(),p("div",{key:0,class:I({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):h("",!0),a.group!=="c"?(l(),p("span",ca,w(a.childCount),1)):h("",!0)])}const ha=T(ua,[["render",ma],["__scopeId","data-v-8e8f21d5"]]),fa=10,pa={name:"DownloadButton",components:{ConfirmDialog:Ye},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},data(){return{mdiDownload:ht}},computed:{...M(x,["filterOnlySettings","groupNames"]),show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},isOneComic(){return this.item?.group==="c"&&this.item?.ids?.length===1},downloadFn(){return this.isOneComic?this.item.name:`${this.groupNames[this.item?.group]} - ${this.item.name} Comics.zip`},downloadURL(){let e="";if(this.isOneComic){const t=this.item.ids[0];e=ct({pk:t},this.downloadFn,this.item?.mtime)}else{const t=this.item?.group,a=this.item?.ids,r=this.filterOnlySettings;e=mt({group:t,pks:a},this.downloadFn,r,this.item?.mtime)}return e},formattedChildren(){return Te.format(this.item?.childCount)},title(){let e="Download";return e+=this.isOneComic?" Book":` ${this.formattedChildren} Books`,e},confirm(){return this.item?.childCount>fa},confirmText(){return this.confirm?`Download ${this.formattedChildren} books`:""}},methods:{download(){const e=this.downloadURL,t=this.downloadFn;if(this.isOneComic)dt(e,t);else{const a=document.createElement("a");a.download=this.downloadFn,a.href=this.downloadURL,a.click(),a.remove()}}}};function va(e,t,a,r,n,s){const i=y("ConfirmDialog");return s.show?(l(),f(i,{key:0,button:a.button,"button-text":s.title,confirm:s.confirm,"confirm-text":"Download","prepend-icon":n.mdiDownload,"title-text":s.title,text:"May take a while",onConfirm:s.download},null,8,["button","button-text","confirm","prepend-icon","title-text","onConfirm"])):h("",!0)}const ga=T(pa,[["render",va],["__scopeId","data-v-4c14087b"]]),ba=1,ka={name:"MarkReadButton",components:{ConfirmDialog:Ye},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},computed:{...M(x,["groupNames"]),verb(){return this.item.finished?"Unread":"Read"},confirm(){return this.item.children>ba},show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},icon(){return this.item.finished?ft:pt},confirmText(){return this.confirm?`Mark ${this.verb}`:""},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");const t=this.groupNames[this.item.group];return e.push(t,this.verb),e.join(" ")},itemName(){return this.item.name||"(Empty)"}},methods:{...de(x,["setBookmarkFinished"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished)}}};function ya(e,t,a,r,n,s){const i=y("ConfirmDialog");return s.show?(l(),f(i,{key:0,button:a.button,"button-text":s.markReadText,confirm:s.confirm,"confirm-text":s.confirmText,"prepend-icon":s.icon,"title-text":s.markReadText,text:s.itemName,onConfirm:s.toggleRead},null,8,["button","button-text","confirm","confirm-text","prepend-icon","title-text","text","onConfirm"])):h("",!0)}const _a=T(ka,[["render",ya],["__scopeId","data-v-7b148c61"]]),Ze=["writer","author","plotter","plot","script","scripter","story","interviewer","translator","artist","penciller","breakdowns","pencils","illustrator","layouts","inker","finishes","inks","embellisher","inkAssists","colorist","colorer","colourer","colors","colours","colorDesigner","colorFlats","colorSeparations","designer","digitalArtTechnician","grayTone","letterer","cover","covers","coverArtist","editor","edits","editing"];Object.freeze(Ze);const We=["genres","characters","teams","locations","seriesGroups","stories","storyArcNumbers","tags","universes"];Object.freeze(We);const Xe=new Set(["Characters","Teams"]);Object.freeze(Xe);function Sa(e,t){const a=e.name.split(" ").pop(),r=t.name.split(" ").pop();return a.localeCompare(r)}const A=vt("metadata",{state:()=>({md:void 0}),getters:{roleMap(e){const t={};for(const{role:a}of e.md.credits){const r=a?.name?a.name:"Other";t[r]=a}return t},_mappedCredits(e){const t={};if(!e?.md?.credits)return t;for(const{role:a,person:r}of e.md.credits){const n=a?.name?a.name:"Other";n in t||(t[n]=[]),t[n].push(r)}for(const[a,r]of Object.entries(t))t[a]=r.sort(Sa);return t},_sortedRoles(e){const t=Object.keys(e._mappedCredits),a={};for(const n of t)a[n.toLowerCase()]=n;const r=[];for(const n of Ze){const s=a[n];if(s&&(r.push(s),delete a[n],!Object.keys(a).length))break}return t.sort(),r.push(t),r},credits(e){return this.mapTag(e._mappedCredits,e._sortedRoles)},identifiers(e){const t=[];if(!e.md?.identifiers)return t;for(const a of e.md.identifiers){const r=a.name.split(":"),n=r[0],s=r[1],i=x().identifierSourceTitle(n);let o="";i&&i!=="None"&&(o+=i+":"),o+=s;const u={pk:a.pk,url:a.url,name:o};t.push(u)}return t},tags(e){const t=e.mapTag(e.md,We);e.identifiers?.length&&(t.Identifiers={filter:"identifiers",tags:this.identifiers});for(const a of Object.values(t))a.tags=a.tags.sort((r,n)=>r.name.localeCompare(n.name));return t}},actions:{async loadMetadata({group:e,pks:t}){await Fe.getMetadata({group:e,pks:t},x().metadataSettings).then(a=>{const r={...a.data};return r.loaded=!0,this.md=r,!0}).catch(a=>{console.error(a),this.clearMetadata()})},clearMetadata(){this.md=void 0},getTagName(e){var t;return e==="storyArcNumbers"?t="Story Arcs":t=gt(e),t},markTagMain(e,t){const a="main"+e.slice(0,-1),r=this.md[a]?.pk,n=[];var s=[];for(const i of t)r===i.pk?s.push(i):n.push(i);return{mainTags:s,regularTags:n}},mapTag(e,t){const a={};for(const s of t){const i=e[s];if(!i?.length)continue;const o=this.getTagName(s);var r=[],n=[];Xe.has(o)?{mainTags:r,regularTags:n}=this.markTagMain(o,i):n=i,a[o]={filter:s,tags:n,mainTags:r}}return a},lazyImport({group:e,ids:t}){return Fe.getLazyImport({group:e,pks:t})}}}),wa={name:"MetadataActivator",props:{book:{type:Object,required:!0},toolbar:{type:Boolean,require:!0}},data(){return{mdiTagOutline:kt}},computed:{...M(bt,{lazyImportEnabled:e=>e.adminFlags.lazyImportMetadata}),variant(){return this.toolbar?"plain":"text"}},methods:{...de(A,["lazyImport"]),onMouseEnter(){if(this.lazyImportEnabled&&this.book.group==="c"&&!this.book.hasMetadata){const e=this.book.ids||[this.book.pk];this.lazyImport({group:this.book.group,ids:e}),this.book.hasMetadata=!0}}}};function Ca(e,t,a,r,n,s){return l(),f(_e,{onMouseenter:s.onMouseEnter,"aria-label":"tags",class:"tagButton cardControlButton",variant:s.variant,icon:n.mdiTagOutline,title:"Tags",onClick:t[0]||(t[0]=yt(()=>{},["prevent"]))},null,8,["onMouseenter","variant","icon"])}const Ta=T(wa,[["render",Ca]]),Ma=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Ba=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Ra=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Va=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],je=(e,t,a)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(r=e.toLocaleString(void 0,a)),r},Qe=e=>{if(typeof e=="number")return Math.log10(e);const t=e.toString(10);return t.length+Math.log10(`0.${t.slice(0,15)}`)},Na=e=>typeof e=="number"?Math.log(e):Qe(e)*Math.log(10),La=(e,t)=>{if(typeof e=="number")return e/t;const a=e/BigInt(t),r=e%BigInt(t);return Number(a)+Number(r)/t},Ue=(e,t)=>{if(t===void 0)return e;if(typeof t!="number"||!Number.isSafeInteger(t)||t<0)throw new TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof t}: ${t}`);return t===0?e:e.length<t?e.padStart(t," "):e},Ia=e=>{const{minimumFractionDigits:t,maximumFractionDigits:a}=e;if(!(t===void 0&&a===void 0))return{...t!==void 0&&{minimumFractionDigits:t},...a!==void 0&&{maximumFractionDigits:a},roundingMode:"trunc"}};function Je(e,t){if(typeof e!="bigint"&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...t};const a=t.bits?t.binary?Va:Ra:t.binary?Ba:Ma,r=t.space?t.nonBreakingSpace?" ":" ":"",n=typeof e=="number"?e===0:e===0n;if(t.signed&&n){const v=` 0${r}${a[0]}`;return Ue(v,t.fixedWidth)}const s=e<0,i=s?"-":t.signed?"+":"";s&&(e=-e);const o=Ia(t);let u;if(e<1){const v=je(e,t.locale,o);u=i+v+r+a[0]}else{const v=Math.min(Math.floor(t.binary?Na(e)/Math.log(1024):Qe(e)/3),a.length-1);if(e=La(e,(t.binary?1024:1e3)**v),!o){const S=Math.max(3,Math.floor(e).toString().length);e=e.toPrecision(S)}const N=je(Number(e),t.locale,o),_=a[v];u=i+N+r+_}return Ue(u,t.fixedWidth)}const xa={name:"MetadataExpandButton"};function Pa(e,t,a,r,n,s){return l(),f(_e,{density:"compact",text:"...expand",variant:"text"})}const $a=T(xa,[["render",Pa]]),Fa={name:"MetadataTextBox",components:{ExpandButton:$a},props:{group:{type:String,default:""},highlight:{type:Boolean,default:!1},label:{type:String,default:""},maxHeight:{type:Number,default:0},value:{type:[Object,String,Number,Boolean],default:void 0}},data(){return{mdiOpenInNew:Le,expanded:!1,mounted:!1}},computed:{...M(x,["groupNames"]),...M(x,{browserShow:e=>e.settings.show,browserTopGroup:e=>e.settings.topGroup,folderViewEnabled:e=>e.page.adminFlags.folderView}),computedValue(){return this.value&&this.value.name!==void 0?this.value.name:this.value},lastSlashIndex(){return this.computedValue.lastIndexOf("/")+1},displayValue(){let e;return this.group==="f"&&this.computedValue?e=this.computedValue.slice(0,Math.max(0,this.lastSlashIndex)):this.group==="v"&&this.computedValue?e=_t(this.computedValue,this.value.numberTo):e=this.computedValue,e},textValueStyles(){const e=this.maxHeight>0&&!this.expanded?this.maxHeight:0;return e?"max-height: "+e+"px;":""},textValueRefName(){return"mdTextValue"+this.label.replaceAll(" ","")},isOverflow(){if(!this.mounted)return!1;const e=this.$refs[this.textValueRefName];return e?e.clientHeight<e.scrollHeight:!1},showExpandButton(){return!this.expanded&&this.maxHeight>0&&this.isOverflow},linkPks(){return(this.value.ids||[this.value.pk]).join(",")},clickable(){const e=this.$router.currentRoute.value.params;return!this.group||e.group===this.group||this.group==="f"&&!this.folderViewEnabled||!["a","f"].includes(this.group)&&!this.browserShow[this.group]?!1:!!this.linkPks?.length},classes(){return{clickable:this.clickable,highlight:this.highlight}},toRoute(){if(!this.clickable)return"";const e=this.group,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){return{topGroup:this.getTopGroup(this.group)}},title(){let e;return this.label?e=this.label:this.group?e=this.groupNames[this.group]:e="",this.toRoute?`Browse to ${e}`:e},baseName(){return this.group==="f"?this.computedValue.slice(Math.max(0,this.lastSlashIndex)):""}},mounted(){this.mounted=!0},methods:{...de(x,["routeWithSettings","getTopGroup"]),onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},Da={key:0,class:"text"},Ea={key:0,class:"textLabel"},za=["title"],Oa={key:0,class:"textContent"};function Aa(e,t,a,r,n,s){const i=y("ExpandButton");return s.displayValue?(l(),p("div",Da,[a.label?(l(),p("div",Ea,[$(w(a.label)+" ",1),s.showExpandButton?(l(),f(i,{key:0,class:"expandButton",onClick:t[0]||(t[0]=o=>n.expanded=!0)})):h("",!0)])):h("",!0),d(Yt,null,{default:C(()=>[m("div",null,[m("div",{ref:s.textValueRefName,class:"textValue",style:re(s.textValueStyles)},[m("span",{class:I(["textContent",s.classes]),title:s.title,onClick:t[1]||(t[1]=(...o)=>s.onClick&&s.onClick(...o))},w(s.displayValue),11,za),s.baseName?(l(),p("span",Oa,w(s.baseName),1)):h("",!0)],4),s.showExpandButton&&!a.label?(l(),f(i,{key:0,class:"expandButton",onClick:t[2]||(t[2]=o=>n.expanded=!0)})):h("",!0)])]),_:1})])):h("",!0)}const xe=T(Fa,[["render",Aa],["__scopeId","data-v-847af0f1"]]),Ga={name:"MetadataRatings",components:{MetadataText:xe},computed:{...M(A,{md:e=>e.md}),show(){return this.md?.criticRating!==void 0||this.md?.ageRating}}},ja={key:0},Ua={key:1};function qa(e,t,a,r,n,s){const i=y("MetadataText");return s.show?(l(),f(Ke,{key:0},{default:C(()=>[m("tbody",null,[e.md.criticalRating?(l(),p("tr",ja,[t[0]||(t[0]=m("td",{class:"key"},"Critical Rating",-1)),m("td",null,[d(i,{value:e.md.criticalRating},null,8,["value"])])])):h("",!0),e.md.ageRating?(l(),p("tr",Ua,[t[1]||(t[1]=m("td",{class:"key"},"Age Rating",-1)),m("td",null,[d(i,{value:e.md.ageRating.name},null,8,["value"])])])):h("",!0)])]),_:1})):h("",!0)}const Ha=T(Ga,[["render",qa],["__scopeId","data-v-8b5cb217"]]),Ka=new Set(["p","i","s","v"]),Ya={name:"MetadataTags",props:{item:{type:Object,required:!0},filter:{type:String,default:""},main:{type:Boolean,default:!1}},data(){return{mdiStar:St,mdiOpenInNew:Le}},computed:{...M(x,{browserShow:e=>e.settings.show,filterValues(e){return e.settings.filters[this.filter]},topGroup:e=>e.settings.topGroup}),...M(A,{mdGroup:e=>e.md.group,mdIds:e=>e.md.ids}),groupMode(){return Ka.has(this.filter)},clickable(){return this.filter&&this.item.value&&(!this.groupMode||this.browserShow[this.filter])},classes(){return{clickable:(this.clickable||this.item.url)&&!this.highlight}},highlight(){return!!(this.groupMode&&this.filter===this.mdGroup&&this.mdIds.includes(this.item.value)||this.filterValues?.includes(this.item.value))},variant(){return this.highlight?"flat":"tonal"},color(){const e=this.$vuetify.theme.current.colors;return this.highlight?e["primary-darken-1"]:""},linkGroup(){let e;return this.groupMode?e=this.filter:e=["f","s"].includes(this.topGroup)?this.topGroup:"r",e},linkPks(){return this.groupMode||this.linkGroup!=="a"&&this.filter==="storyArcs"?this.item.value.toString():"0"},toRoute(){if(!this.clickable)return"";const e=this.linkGroup,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){let e;return this.linkPks==="0"?e={filters:{[this.filter]:[this.item.value]}}:e={topGroup:this.getTopGroup(this.linkGroup)},e},title(){return this.filter==="identifiers"?this.identifierSourceTitle(this.item.title):this.item.title}},methods:{...de(x,["routeWithSettings","getTopGroup","identifierSourceTitle"]),async onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},Za=["href"],Wa={key:1};function Xa(e,t,a,r,n,s){return l(),f(Gt,{class:I(s.classes),color:s.color,value:a.item.value,variant:s.variant,onClick:s.onClick},{default:C(()=>[a.item.url?(l(),p("a",{key:0,href:a.item.url,target:"_blank"},[a.main?(l(),f(ne,{key:0,class:"mainStar"},{default:C(()=>[$(w(n.mdiStar),1)]),_:1})):h("",!0),$(w(s.title)+" ",1),a.main?(l(),f(ne,{key:1,class:"mainStar"},{default:C(()=>[$(w(n.mdiStar),1)]),_:1})):h("",!0),d(ne,null,{default:C(()=>[$(w(n.mdiOpenInNew),1)]),_:1})],8,Za)):(l(),p("span",Wa,[a.main?(l(),f(ne,{key:0,class:"mainStar"},{default:C(()=>[$(w(n.mdiStar),1)]),_:1})):h("",!0),$(" "+w(s.title)+" ",1),a.main?(l(),f(ne,{key:1,class:"mainStar"},{default:C(()=>[$(w(n.mdiStar),1)]),_:1})):h("",!0)]))]),_:1},8,["class","color","value","variant","onClick"])}const Qa=T(Ya,[["render",Xa],["__scopeId","data-v-1da1eb5b"]]),Ja={name:"MetadataTags",components:{MetadataChip:Qa},props:{label:{type:String,default:""},values:{type:Array,default(){return[]}},mainValues:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},computed:{mainItems(){return Ge({items:this.mainValues,sort:!1})},items(){let e;return this.filter==="universes"?e=this.fixUniverseTitles(this.values):e=this.values,Ge({items:e,sort:!1})}},methods:{...de(x,["fixUniverseTitles"])}},es={key:0},ts={key:0,class:"chipGroupLabel"};function as(e,t,a,r,n,s){const i=y("MetadataChip");return s.items?.length>0?(l(),p("div",es,[a.label?(l(),p("div",ts,w(a.label),1)):h("",!0),m("div",null,[(l(!0),p(me,null,ue(s.mainItems,o=>(l(),f(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o,main:!0},null,8,["filter","item"]))),128)),(l(!0),p(me,null,ue(s.items,o=>(l(),f(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o},null,8,["filter","item"]))),128))])])):h("",!0)}const et=T(Ja,[["render",as],["__scopeId","data-v-0011fa82"]]),ss={name:"MetadataTagsTable",components:{MetadataTags:et},data(){return{mdiOpenInNew:Le}},props:{keyMap:{type:Object,default:void 0},tagMap:{type:Object,required:!0}},computed:{show(){return Object.keys(this.tagMap).length>0}}},is={key:0,class:"key keyLink"},ns={href:"keyMap[key].url"},rs={key:1,class:"key"},os={class:"tags"};function ls(e,t,a,r,n,s){const i=y("MetadataTags");return s.show?(l(),f(Ke,{key:0},{default:C(()=>[m("tbody",null,[(l(!0),p(me,null,ue(Object.entries(a.tagMap),([o,{filter:u,tags:v,mainTags:N}])=>(l(),p("tr",{key:o},[a.keyMap&&a.keyMap[o]&&a.keyMap[o].url?(l(),p("td",is,[m("a",ns,[$(w(o),1),d(ne,null,{default:C(()=>[$(w(n.mdiOpenInNew),1)]),_:1})])])):(l(),p("td",rs,w(o),1)),m("td",os,[d(i,{filter:u,values:v,mainValues:N},null,8,["filter","values","mainValues"])])]))),128))])]),_:1})):h("",!0)}const us=T(ss,[["render",ls],["__scopeId","data-v-dd36bea8"]]),ds={name:"MetadataBody",components:{MetadataRatings:Ha,MetadataTagsTable:us,MetadataText:xe},props:{book:{type:Object,required:!0}},computed:{...M(A,["credits","ratings","tags"]),...M(x,{twentyFourHourTime:e=>e.settings?.twentyFourHourTime,readingDirectionTitles:e=>e.choices.static.readingDirection}),...M(A,{md:e=>e.md,roleMap:e=>e.roleMap}),readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},size(){return this?.md?.size>0?Je(this.md.size):0},sizeLabel(){return this?.md?.group==="c"?"Size":"Total Size"},fileType(){return this?.md?.fileType||"Unknown"}},methods:{formatDateTime(e){return wt(e,this.twentyFourHourTime)}}},cs={id:"metadataBody"},ms={class:"mdSection"},hs={class:"mdSection"},fs={class:"quarterRow"},ps={class:"thirdRow"},vs={class:"lastSmallRow"},gs={key:0,class:"halfRow mdSection"},bs={class:"mdSection"},ks={class:"inlineRow"},ys={class:"inlineRow"};function _s(e,t,a,r,n,s){const i=y("MetadataText"),o=y("MetadataTagsTable"),u=y("MetadataRatings");return l(),p("div",cs,[m("section",ms,[d(i,{value:e.md.summary,"max-height":100},null,8,["value"]),d(i,{value:e.md.review,label:"Review","max-height":100},null,8,["value"])]),d(o,{"key-map":e.roleMap,"tag-map":e.credits,class:"mdSection"},null,8,["key-map","tag-map"]),m("section",hs,[m("div",fs,[e.md.createdAt?(l(),f(i,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):h("",!0),e.md.updatedAt?(l(),f(i,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):h("",!0),d(i,{value:s.size,label:s.sizeLabel},null,8,["value","label"]),d(i,{value:s.fileType,label:"File Type"},null,8,["value"])]),m("div",ps,[d(i,{label:"Reading Direction",value:s.readingDirectionText},null,8,["value"]),d(i,{value:e.md.originalFormat?.name,label:"Original Format"},null,8,["value"]),d(i,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"])]),m("div",vs,[d(i,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),e.md?.country||e.md?.language?(l(),p("section",gs,[d(i,{value:e.md.country?.name,label:"Country"},null,8,["value"]),d(i,{value:e.md.language?.name,label:"Language"},null,8,["value"])])):h("",!0),d(u,{class:"mdSection"}),d(o,{"tag-map":e.tags,class:"mdSection"},null,8,["tag-map"]),m("section",bs,[m("section",ks,[d(i,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",ys,[d(i,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),d(i,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])])])}const Ss=T(ds,[["render",_s],["__scopeId","data-v-e65fff8f"]]),tt=new Set("rtl","btt");Object.freeze(tt);const at=({ids:e,page:t,readingDirection:a,pageCount:r},n)=>{if(e.length===0||n&&!r)return"";const s=e[0];if(t)t=Number(t);else if(tt.has(a)){const i=Number(r)-1;t=Math.max(i,0)}else t=0;return{name:"reader",params:{pk:s,page:t}}},st={p:"publisher",i:"imprint",s:"series",v:"volume",f:"folder",a:"storyArc"};Object.freeze(st);const ws={name:"MetadataControls",components:{DownloadButton:ga,MarkReadButton:_a},props:{group:{type:String,required:!0}},computed:{...M(A,{md:e=>e.md}),...M(x,{importMetadata:e=>e.page?.adminFlags?.importMetadata}),downloadName(){const e=this.md;let t;if(!e)t="Unknown.cbz";else if(e.fileName)t=e.fileName;else{if(this.md.group==="f")return[this.firstNameFromList(e.folderList)];if(this.md.group==="a")return[this.firstNameFromList(e.storyArcList)];t=[this.firstNameFromList(e.publisherList),this.firstNameFromList(e.imprintList),this.firstNameFromList(e.seriesList),this.firstNameFromList(e.volumeList),qe(this.md,3),this.md.name].filter(Boolean).join(" ")}return t},downloadItem(){return{group:this.md?.group,ids:this.md?.ids,childCount:this.md?.childCount,mtime:this.md?.mtime,name:this.downloadName}},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},markReadItem(){let e="";const t=st[this.md.group];return t?e=(this.md[t+"List"]||[]).map(({name:n})=>n).join(", "):e=this.md.name,{group:this.md.group,ids:this.md.ids,finished:this.md.finished,name:e,children:this.md.childCount||1}},readButtonIcon(){return this.isReadButtonEnabled?Ct:Tt},readerRoute(){return this.md?.ids?at(this.md,this.importMetadata):{}},size(){return this.$vuetify.display.smAndDown?"x-small":"default"}},methods:{firstNameFromList(e){let t="";if(!e)return t;for(const a of Object.values(e))if(a.name){t=a.name;break}return t}}},Cs={class:"controlRow"};function Ts(e,t,a,r,n,s){const i=y("DownloadButton"),o=y("MarkReadButton");return l(),p("section",Cs,[d(i,{id:"downloadButton",button:!0,item:s.downloadItem,size:s.size},null,8,["item","size"]),d(o,{id:"markReadButton",button:!0,item:s.markReadItem,size:s.size},null,8,["item","size"]),s.isReadButtonShown?(l(),f(_e,{key:0,id:"readButton",title:"Read Comic",disabled:!s.isReadButtonEnabled,size:s.size,to:s.readerRoute},{default:C(()=>[d(ne,null,{default:C(()=>[$(w(s.readButtonIcon),1)]),_:1}),t[0]||(t[0]=$(" Read ",-1))]),_:1},8,["disabled","size","to"])):h("",!0)])}const Ms=T(ws,[["render",Ts],["__scopeId","data-v-d254bb05"]]),Bs={name:"MetadataBookCover",components:{BookCover:ha},props:{group:{type:String,required:!0}},computed:{...M(A,{md:e=>e.md})}},Rs={class:"bookCoverWrapper"};function Vs(e,t,a,r,n,s){const i=y("BookCover");return l(),p("div",Rs,[d(i,{id:"bookCover",group:a.group,pks:e.md.ids,"child-count":e.md.childCount,finished:e.md.finished,mtime:e.md.mtime},null,8,["group","pks","child-count","finished","mtime"]),d(Pt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])])}const Ns=T(Bs,[["render",Vs],["__scopeId","data-v-3a0db03b"]]),Ls={name:"MetadataHeader",components:{MetadataBookCover:Ns,MetadataControls:Ms,MetadataTags:et,MetadataText:xe},props:{group:{type:String,required:!0}},computed:{...M(x,{importMetadata:e=>e.page?.adminFlags?.importMetadata,q:e=>e.settings.q}),...M(A,{md:e=>e.md}),collectionTitle(){if(this.md.collectionTitle)return`${this.md.collectionTitle}:`},date(){if(!this.md.year&&!this.md.month&&!this.md.day)return"";const e=new Date(this.md.year||1970,this.md.month||1,this.md.day||1),t={};return this.md.year&&(t.year="numeric"),this.md.month&&(t.month=this.$vuetify.display.smAndDown?"short":"long"),this.md.day&&(t.day="numeric"),e.toLocaleDateString("default",t)},readerRoute(){return this.md?.ids?at(this.md,this.importMetadata):{}},formattedIssueNumber(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return"#"+qe(this.md)},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=Te.format(this.md.page);e+=this.$vuetify.display.smAndDown?`${a} / `:`Read ${a} of `}const t=Te.format(this.md.pageCount);return e+=`${t} page`,this.md.pageCount!==1&&(e+="s"),this.$vuetify.display.smAndUp&&this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){return this?.md?.size>0?Je(this.md.size):0},fileType(){return this?.md?.fileType||"Unknown"},seriesVolumeCount(){const e=this.md.seriesVolumeCount;return e?`of ${e}`:""},volumeIssueCount(){const e=this.md.volumeIssueCount;return e?`/ ${e}`:""}}},Is={id:"metadataHeader"},xs={key:1,id:"seriesHeader"},Ps={id:"seriesRow",class:"inlineRow"},$s={key:2,id:"titleRow"},Fs={key:4,id:"publisherRow",class:"inlineRow"},Ds={key:7,id:"pageDateRow",class:"inlineRow"};function Es(e,t,a,r,n,s){const i=y("MetadataText"),o=y("MetadataBookCover"),u=y("MetadataTags"),v=y("MetadataControls");return l(),p(me,null,[m("header",Is,[e.q?(l(),f(i,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):h("",!0),d(o,{id:"metadataBookCover",group:a.group},null,8,["group"]),e.md.seriesList?.length===1?(l(),p("section",xs,[m("div",Ps,[(l(),f(i,{id:"series",key:e.md.seriesList[0].ids,value:e.md.seriesList[0],group:"s",highlight:e.md.group==="s"},null,8,["value","highlight"])),e.md.volumeList?.length===1?(l(),f(i,{id:"volume",key:e.md.volumeList[0].ids,value:e.md.volumeList[0],group:"v",highlight:e.md.group==="v"},null,8,["value","highlight"])):h("",!0),d(i,{value:s.seriesVolumeCount,class:"subdued"},null,8,["value"]),d(i,{id:"issue",value:s.formattedIssueNumber,group:"c",highlight:e.md.group==="c"},null,8,["value","highlight"]),d(i,{value:s.volumeIssueCount,class:"subdued"},null,8,["value"])])])):h("",!0),e.md.name?(l(),p("span",$s,w(s.collectionTitle)+" "+w(e.md.name),1)):h("",!0),e.md.seriesList?.length>1?(l(),f(u,{key:3,id:"seriesTags",class:"groupTags",label:"Series",values:e.md.seriesList,filter:"s"},null,8,["values"])):h("",!0),m("div",null,[e.md.volumeList?.length>1?(l(),f(u,{key:0,id:"volumeTags",class:"groupTags",label:"Volumes",values:e.md.volumeList,filter:"v"},null,8,["values"])):h("",!0)]),e.md.publisherList?.length===1?(l(),p("div",Fs,[(l(),f(i,{id:"publisher",key:e.md.publisherList[0].ids,group:"p",highlight:e.md.group==="p",value:e.md.publisherList[0]},null,8,["highlight","value"])),e.md.imprintList?.length===1?(l(),f(i,{id:"imprint",key:e.md.imprintList[0].ids,group:"i",highlight:e.md.group==="i",value:e.md.imprintList[0]},null,8,["highlight","value"])):h("",!0)])):h("",!0),e.md.publisherList?.length>1?(l(),f(u,{key:5,id:"publisherTags",class:"groupTags",label:"Publishers",values:e.md.publisherList,filter:"p"},null,8,["values"])):h("",!0),e.md.imprintList?.length>1?(l(),f(u,{key:6,id:"imprintTags",class:"groupTags",label:"Imprints",values:e.md.imprintList,filter:"i"},null,8,["values"])):h("",!0),s.pages||e.md.year||e.md.month||e.md.day?(l(),p("div",Ds,[d(i,{value:s.pages},null,8,["value"]),d(i,{value:s.date,class:"datePicker"},null,8,["value"])])):h("",!0)]),d(v,{id:"controls",group:a.group},null,8,["group"])],64)}const zs=T(Ls,[["render",Es],["__scopeId","data-v-a05541e5"]]),Os=1160,As=.05,Gs=250,js={name:"MetadataButton",components:{CloseButton:Kt,MetadataActivator:Ta,MetadataBody:Ss,MetadataHeader:zs,PlaceholderLoading:ta},props:{book:{type:Object,required:!0},toolbar:{type:Boolean,default:!1}},data(){return{dialog:!1,progress:0}},computed:{...M(A,{md:e=>e.md}),showContainer(){return this.md?.loaded||!1},children(){return this.book.childCount||0}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...de(A,["clearMetadata","loadMetadata"]),dialogOpened(){const e=this.book.ids||[this.book.pk],t={group:this.book.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(As,this.children/Os)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Gs)}}},Us={key:1,id:"placeholderContainer"};function qs(e,t,a,r,n,s){const i=y("MetadataActivator"),o=y("CloseButton"),u=y("MetadataHeader"),v=y("MetadataBody"),N=y("PlaceholderLoading");return l(),f(Ht,{modelValue:n.dialog,"onUpdate:modelValue":t[2]||(t[2]=_=>n.dialog=_),fullscreen:"",transition:"dialog-bottom-transition"},{activator:C(({props:_})=>[d(i,W(_,{book:a.book,toolbar:a.toolbar}),null,16,["book","toolbar"])]),default:C(()=>[d(o,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[0]||(t[0]=_=>n.dialog=!1)}),s.showContainer?(l(),p("div",{key:0,id:"metadataContainer",onKeyup:t[1]||(t[1]=Mt(_=>n.dialog=!1,["esc"]))},[d(u,{group:a.book.group},null,8,["group"]),d(v,{book:a.book},null,8,["book"])],32)):(l(),p("div",Us,[t[3]||(t[3]=m("div",{id:"placeholderTitle"},"Tags Loading",-1)),d(N,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const _i=T(js,[["render",qs],["__scopeId","data-v-d554fe5b"]]),Hs={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function Ks(e,t,a,r,n,s){return l(),f(_e,{variant:"plain",density:"compact",class:I(["paginationNavButton",s.classes]),size:"medium"},Ve({_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(u=>[Ne(e.$slots,o,W({props:i},u),void 0,!0)])}))]),1032,["class"])}const Si=T(Hs,[["render",Ks],["__scopeId","data-v-cf061c30"]]),Pe=Symbol.for("vuetify:v-slider");function Ys(e,t,a){const r=a==="vertical",n=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return r?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}function Zs(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ws=he({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...Ft(),...$t({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),Xs=e=>{const t=b(()=>parseFloat(e.min)),a=b(()=>parseFloat(e.max)),r=b(()=>Number(e.step)>0?parseFloat(e.step):0),n=b(()=>Math.max(De(r.value),De(t.value)));function s(i){if(i=parseFloat(i),r.value<=0)return i;const o=Me(i,t.value,a.value),u=t.value%r.value;let v=Math.round((o-u)/r.value)*r.value+u;return o>v&&v+r.value>a.value&&(v=a.value),parseFloat(Math.min(v,a.value).toFixed(n.value))}return{min:t,max:a,step:r,decimals:n,roundValue:s}},Qs=e=>{let{props:t,steps:a,onSliderStart:r,onSliderMove:n,onSliderEnd:s,getActiveThumb:i}=e;const o=Zt(t),{isRtl:u}=Ie(),v=z(()=>t.reverse),N=b(()=>t.direction==="vertical"),_=b(()=>N.value!==v.value),{min:S,max:F,step:D,decimals:X,roundValue:K}=a,Q=b(()=>parseInt(t.thumbSize,10)),Y=b(()=>parseInt(t.tickSize,10)),G=b(()=>parseInt(t.trackSize,10)),j=b(()=>(F.value-S.value)/D.value),E=b(()=>t.error||o.isDisabled.value?void 0:t.thumbColor??t.color),U=b(()=>t.error||o.isDisabled.value?void 0:t.thumbColor),J=b(()=>t.error||o.isDisabled.value?void 0:t.trackColor??t.color),Z=b(()=>t.error||o.isDisabled.value?void 0:t.trackFillColor??t.color),B=Ee(!1),R=Ee(0),P=be(),k=be();function O(c){const g=P.value?.$el;if(!g)return;const se=t.direction==="vertical",ve=se?"top":"left",ge=se?"height":"width",it=se?"clientY":"clientX",{[ve]:nt,[ge]:rt}=g.getBoundingClientRect(),ot=Zs(c,it);let we=Me((ot-nt-R.value)/rt)||0;return(se?_.value:_.value!==u.value)&&(we=1-we),K(S.value+we*(F.value-S.value))}const q=c=>{const g=O(c);g!=null&&s({value:g}),B.value=!1,R.value=0},ce=c=>{const g=O(c);k.value=i(c),k.value&&(B.value=!0,k.value.contains(c.target)?R.value=Ys(c,k.value,t.direction):(R.value=0,g!=null&&n({value:g})),g!=null&&r({value:g}),Rt(()=>k.value?.focus()))},ee={passive:!0,capture:!0};function H(c){const g=O(c);g!=null&&n({value:g})}function te(c){c.stopPropagation(),c.preventDefault(),q(c),window.removeEventListener("mousemove",H,ee),window.removeEventListener("mouseup",te)}function oe(c){q(c),window.removeEventListener("touchmove",H,ee),c.target?.removeEventListener("touchend",oe)}function ae(c){ce(c),window.addEventListener("touchmove",H,ee),c.target?.addEventListener("touchend",oe,{passive:!1})}function Se(c){c.button===0&&(c.preventDefault(),ce(c),window.addEventListener("mousemove",H,ee),window.addEventListener("mouseup",te,{passive:!1}))}const le=c=>{const g=(c-S.value)/(F.value-S.value)*100;return Me(isNaN(g)?0:g,0,100)},fe=z(()=>t.showTicks),pe=b(()=>fe.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(c=>({value:c,position:le(c),label:c.toString()})):Object.keys(t.ticks).map(c=>({value:parseFloat(c),position:le(parseFloat(c)),label:t.ticks[c]})):j.value!==1/0?Bt(j.value+1).map(c=>{const g=S.value+c*D.value;return{value:g,position:le(g)}}):[]:[]),L=b(()=>pe.value.some(c=>{let{label:g}=c;return!!g})),V={activeThumbRef:k,color:z(()=>t.color),decimals:X,disabled:o.isDisabled,direction:z(()=>t.direction),elevation:z(()=>t.elevation),hasLabels:L,isReversed:v,indexFromEnd:_,min:S,max:F,mousePressed:B,noKeyboard:z(()=>t.noKeyboard),numTicks:j,onSliderMousedown:Se,onSliderTouchstart:ae,parsedTicks:pe,parseMouseMove:O,position:le,readonly:o.isReadonly,rounded:z(()=>t.rounded),roundValue:K,showTicks:fe,startOffset:R,step:D,thumbSize:Q,thumbColor:E,thumbLabelColor:U,thumbLabel:z(()=>t.thumbLabel),ticks:z(()=>t.ticks),tickSize:Y,trackColor:J,trackContainerRef:P,trackFillColor:Z,trackSize:G,vertical:N};return Vt(Pe,V),V},Js=he({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Re()},"VSliderThumb"),ei=ke()({name:"VSliderThumb",directives:{vRipple:Oe},props:Js(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=He(Pe),{isRtl:s,rtlClasses:i}=Ie();if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:o,max:u,thumbColor:v,thumbLabelColor:N,step:_,disabled:S,thumbSize:F,thumbLabel:D,direction:X,isReversed:K,vertical:Q,readonly:Y,elevation:G,mousePressed:j,decimals:E,indexFromEnd:U}=n,J=b(()=>S.value?void 0:G.value),{elevationClasses:Z}=Dt(J),{textColorClasses:B,textColorStyles:R}=Et(v),{backgroundColorClasses:P,backgroundColorStyles:k}=Be(N),{pageup:O,pagedown:q,end:ce,home:ee,left:H,right:te,down:oe,up:ae}=Nt,Se=[O,q,ce,ee,H,te,oe,ae],le=b(()=>_.value?[1,2,3]:[1,5,10]);function fe(L,V){if(e.noKeyboard||!Se.includes(L.key))return;L.preventDefault();const c=_.value||.1,g=(u.value-o.value)/c;if([H,te,oe,ae].includes(L.key)){const ve=(Q.value?[s.value?H:te,K.value?oe:ae]:U.value!==s.value?[H,ae]:[te,ae]).includes(L.key)?1:-1,ge=L.shiftKey?2:L.ctrlKey?1:0;ve===-1&&V===u.value&&!ge&&!Number.isInteger(g)?V=V-g%1*c:V=V+ve*c*le.value[ge]}else if(L.key===ee)V=o.value;else if(L.key===ce)V=u.value;else{const se=L.key===q?1:-1;V=V-se*c*(g>100?g/10:10)}return Math.max(e.min,Math.min(e.max,V))}function pe(L){const V=fe(L,e.modelValue);V!=null&&r("update:modelValue",V)}return ye(()=>{const L=ie(U.value?100-e.position:e.position,"%");return m("div",{class:I(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&j.value},e.class,i.value]),style:re([{"--v-slider-thumb-position":L,"--v-slider-thumb-size":ie(F.value)},e.style]),role:"slider",tabindex:S.value?-1:0,"aria-label":e.name,"aria-valuemin":o.value,"aria-valuemax":u.value,"aria-valuenow":e.modelValue,"aria-readonly":!!Y.value,"aria-orientation":X.value,onKeydown:Y.value?void 0:pe},[m("div",{class:I(["v-slider-thumb__surface",B.value,Z.value]),style:re(R.value)},null),ze(m("div",{class:I(["v-slider-thumb__ripple",B.value]),style:re(R.value)},null),[[Oe,e.ripple,null,{circle:!0,center:!0}]]),d(Wt,{origin:"bottom center"},{default:()=>[ze(m("div",{class:"v-slider-thumb__label-container"},[m("div",{class:I(["v-slider-thumb__label",P.value]),style:re(k.value)},[m("div",null,[a["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(_.value?E.value:1)]),m("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[Lt,D.value&&e.focused||D.value==="always"]])]})])}),{}}}),ti=he({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Re()},"VSliderTrack"),ai=ke()({name:"VSliderTrack",props:ti(),emits:{},setup(e,t){let{slots:a}=t;const r=He(Pe);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,parsedTicks:s,rounded:i,showTicks:o,tickSize:u,trackColor:v,trackFillColor:N,trackSize:_,vertical:S,min:F,max:D,indexFromEnd:X}=r,{roundedClasses:K}=zt(i),{backgroundColorClasses:Q,backgroundColorStyles:Y}=Be(N),{backgroundColorClasses:G,backgroundColorStyles:j}=Be(v),E=b(()=>`inset-${S.value?"block":"inline"}-${X.value?"end":"start"}`),U=b(()=>S.value?"height":"width"),J=b(()=>({[E.value]:"0%",[U.value]:"100%"})),Z=b(()=>e.stop-e.start),B=b(()=>({[E.value]:ie(e.start,"%"),[U.value]:ie(Z.value,"%")})),R=b(()=>o.value?(S.value?s.value.slice().reverse():s.value).map((k,O)=>{const q=k.value!==F.value&&k.value!==D.value?ie(k.position,"%"):void 0;return m("div",{key:k.value,class:I(["v-slider-track__tick",{"v-slider-track__tick--filled":k.position>=e.start&&k.position<=e.stop,"v-slider-track__tick--first":k.value===F.value,"v-slider-track__tick--last":k.value===D.value}]),style:{[E.value]:q}},[(k.label||a["tick-label"])&&m("div",{class:"v-slider-track__tick-label"},[a["tick-label"]?.({tick:k,index:O})??k.label])])}):[]);return ye(()=>m("div",{class:I(["v-slider-track",K.value,e.class]),style:re([{"--v-slider-track-size":ie(_.value),"--v-slider-tick-size":ie(u.value)},e.style])},[m("div",{class:I(["v-slider-track__background",G.value,{"v-slider-track__background--opacity":!!n.value||!N.value}]),style:{...J.value,...j.value}},null),m("div",{class:I(["v-slider-track__fill",Q.value]),style:{...B.value,...Y.value}},null),o.value&&m("div",{class:I(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}])},[R.value])])),{}}}),si=he({...Jt(),...Ws(),...Qt(),modelValue:{type:[Number,String],default:0}},"VSlider"),ii=ke()({name:"VSlider",props:si(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=be(),s=be(),{rtlClasses:i}=Ie(),o=Xs(e),u=It(e,"modelValue",void 0,B=>o.roundValue(B??o.min.value)),{min:v,max:N,mousePressed:_,roundValue:S,onSliderMousedown:F,onSliderTouchstart:D,trackContainerRef:X,position:K,hasLabels:Q,disabled:Y,readonly:G,noKeyboard:j}=Qs({props:e,steps:o,onSliderStart:()=>{r("start",u.value)},onSliderEnd:B=>{let{value:R}=B;const P=S(R);u.value=P,r("end",P)},onSliderMove:B=>{let{value:R}=B;return u.value=S(R)},getActiveThumb:()=>n.value?.$el}),{isFocused:E,focus:U,blur:J}=Xt(e),Z=b(()=>K(u.value));return ye(()=>{const B=Ae.filterProps(e),R=!!(e.label||a.label||a.prepend);return d(Ae,W({ref:s,class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||Q.value,"v-slider--focused":E.value,"v-slider--pressed":_.value,"v-slider--disabled":e.disabled},i.value,e.class],style:e.style},B,{focused:E.value}),{...a,prepend:R?P=>m(me,null,[a.label?.(P)??(e.label?d(ea,{id:P.id.value,class:"v-slider__label",text:e.label},null):void 0),a.prepend?.(P)]):void 0,default:P=>{let{id:k,messagesId:O}=P;return m("div",{class:"v-slider__container",onMousedown:G.value?void 0:F,onTouchstartPassive:G.value?void 0:D},[m("input",{id:k.value,name:e.name||k.value,disabled:!!Y.value,readonly:!!G.value,tabindex:"-1",value:u.value},null),d(ai,{ref:X,start:0,stop:Z.value},{"tick-label":a["tick-label"]}),d(ei,{ref:n,"aria-describedby":O.value,focused:E.value,noKeyboard:j.value,min:v.value,max:N.value,modelValue:u.value,"onUpdate:modelValue":q=>u.value=q,position:Z.value,elevation:e.elevation,onFocus:U,onBlur:J,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),Ot({focus:()=>n.value?.$el.focus()},s)}}),ni={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function ri(e,t,a,r,n,s){return l(),f(ii,W({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":C(({index:i})=>[$(w(i+a.min),1)]),_:1},16,["min"])}const wi=T(ni,[["render",ri],["__scopeId","data-v-01b67afd"]]),oi={name:"PaginationToolbar"};function li(e,t,a,r,n,s){return l(),f(aa,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Ve({_:2},[ue(e.$slots,(i,o)=>({name:o,fn:C(u=>[Ne(e.$slots,o,W({props:i},u),void 0,!0)])}))]),1024)}const Ci=T(oi,[["render",li],["__scopeId","data-v-cfa8cce0"]]);export{ha as B,ga as D,_a as M,Ce as N,Si as P,ki as T,bi as V,yi as a,_i as b,Ci as c,wi as d,at as g,Je as p,Ge as t};
