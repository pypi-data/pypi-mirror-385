/*! For license information please see 2008.7734bf52.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2008],{3288:function(e,t,i){i.d(t,{z:function(){return r}});var s=i(59403),o=i(31014);const r=()=>{const{theme:e}=(0,s.u)(),t=!1,i=(0,o.useMemo)((()=>({})),[e,t]),r=(0,o.useMemo)((()=>({marginTop:4*e.spacing.md})),[e,t]),n=(0,o.useMemo)((()=>[{flex:"1",display:"flex",alignItems:"center",justifyContent:"center"},t]),[e,t]);return{usingUnifiedDetailsLayout:t,detailsPageTableStyles:i,detailsPageNoEntriesStyles:n,detailsPageNoResultsWrapperStyles:r}}},4874:function(e,t,i){i.d(t,{Z:function(){return n}});var s=i(89555),o=i(59403),r=i(50111);const n=({title:e,value:t})=>{const{theme:i}=(0,o.u)();return(0,r.FD)("tr",{css:(0,s.AH)({display:"flex",borderBottom:`1px solid ${i.colors.borderDecorative}`,minHeight:i.general.heightSm},""),children:[(0,r.Y)("th",{css:(0,s.AH)({flex:"0 0 240px",backgroundColor:i.colors.backgroundSecondary,color:i.colors.textSecondary,padding:i.spacing.sm,display:"flex",alignItems:"flex-start"},""),children:e}),(0,r.Y)("td",{css:(0,s.AH)({flex:1,padding:i.spacing.sm,paddingTop:0,paddingBottom:0,display:"flex",alignItems:"center"},""),children:t})]})}},4877:function(e){e.exports=function(e,t,i,s,o,r,n,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,s,o,r,n,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},5643:function(e,t,i){i.d(t,{Ay:function(){return ee}});var s=i(89555),o=i(9133),r=i.n(o),n=i(31014),a=i(88443),l=i(25869),d=i(10811),c=i(64912),h=i(48624),p=i(64408),u=i(38566),g=i(61902),m=i.n(g),f=i(85466),v=i(4036),w=i(81866),y=i(76010),b=i(69869),x=i(59403),M=i(68048),A=i(26458),I=i(65871),Y=i(26809),N=i(25866),S=i(93358),R=i(58481),T=i(50111);const C=({loggedModelId:e})=>{var t;const{data:i}=(0,S.b)({loggedModelId:e}),o=null===i||void 0===i||null===(t=i.info)||void 0===t?void 0:t.experiment_id,{theme:r}=(0,x.u)();return(0,T.Y)(M.Alert,{type:"info",componentId:"mlflow.artifacts.logged_model_fallback_info",message:(0,T.Y)(a.A,{id:"pcNJvo",defaultMessage:"You're viewing artifacts assigned to a <link>logged model</link> associated with this run.",values:{link:t=>o?(0,T.Y)(h.N_,{to:R.Ay.getExperimentLoggedModelDetailsPage(o,e),children:t}):(0,T.Y)(T.FK,{children:t})}}),closable:!1,css:(0,s.AH)({margin:r.spacing.xs},"")})};var k=i(77484),_=i(17275),F=i(98590),L=i(56412);const{Text:E}=x.T;var D={name:"ou8xsw",styles:"flex:0 0 auto"},H={name:"1l0i7xs",styles:"flex:1 1;overflow:hidden"},P={name:"i3oi5p",styles:"flex:0 1"};class z extends n.Component{constructor(...e){super(...e),this.state={activeNodeId:void 0,toggledNodeIds:{},requestedNodeIds:new Set,viewAsTable:!0},this.onToggleTreebeard=(e,t)=>{const{id:i,loading:s}=e,o=this.props.isLoggedModelsMode,r=new Set(this.state.requestedNodeIds);s&&!this.state.requestedNodeIds.has(i)&&(o&&this.props.loggedModelId?this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,i,this.props.experimentId,void 0,this.props.entityTags):this.props.listArtifactsApi(this.props.runUuid,i)),this.setState({activeNodeId:i,toggledNodeIds:{...this.state.toggledNodeIds,[i]:t},requestedNodeIds:r})},this.getTreebeardData=e=>{const{isRoot:t}=e;if(t){if(e.children)return Object.values(e.children).map((e=>this.getTreebeardData(e)));throw Error("unreachable code.")}let i,s,o,r,n;if(e.fileInfo){const{path:t}=e.fileInfo;i=t,s=(0,p.hA)(t)}const a=this.state.toggledNodeIds[i];a&&(o=a),e.children&&(r=Object.values(e.children).map((e=>this.getTreebeardData(e)))),this.state.activeNodeId===i&&(n=!0);return{id:i,name:s,toggled:o,children:r,active:n,loading:void 0!==e.children&&!e.isLoaded}}}getExistingModelVersions(){const{modelVersionsBySource:e}=this.props;return e[y.A.normalize(this.getActiveNodeRealPath())]}renderRegisterModelButton(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state,i=this.getActiveNodeRealPath();return(0,T.Y)(f.vR,{runUuid:e,modelPath:i,modelRelativePath:String(t),disabled:void 0===t,showButton:!0,buttonType:void 0})}renderModelVersionInfoSection(e,t){return(0,T.Y)(U,{modelVersion:r().last(e),intl:this.props.intl})}renderPathAndSizeInfo(){const e=u.x.findChild(this.props.artifactNode,this.state.activeNodeId),t=this.getActiveNodeRealPath();return(0,T.FD)("div",{className:"mlflow-artifact-info-left",children:[(0,T.FD)("div",{className:"mlflow-artifact-info-path",children:[(0,T.Y)("label",{children:(0,T.Y)(a.A,{id:"axF2gD",defaultMessage:"Full Path:"})})," ",(0,T.Y)(E,{className:"mlflow-artifact-info-text",ellipsis:!0,copyable:!0,children:t})]}),!1===e.fileInfo.is_dir?(0,T.FD)("div",{className:"mlflow-artifact-info-size",children:[(0,T.Y)("label",{children:(0,T.Y)(a.A,{id:"mpHsCg",defaultMessage:"Size:"})})," ",m()(this.getActiveNodeSize())]}):null]})}renderSizeInfo(){const e=u.x.findChild(this.props.artifactNode,this.state.activeNodeId),{theme:t}=this.props.designSystemThemeApi;return(0,T.FD)("div",{style:{display:"flex",alignItems:"center",gap:t.spacing.sm,overflow:"hidden",textOverflow:"ellipsis"},children:[(0,T.Y)(x.T.Text,{bold:!0,size:"lg",ellipsis:!0,title:this.state.activeNodeId,children:this.state.activeNodeId}),!1===e.fileInfo.is_dir&&(0,T.Y)(x.T.Text,{color:"secondary",children:m()(this.getActiveNodeSize())})]})}renderPathInfo(){const e=this.getActiveNodeRealPath(),{theme:t}=this.props.designSystemThemeApi;return(0,T.FD)("div",{css:(0,s.AH)({display:"flex",overflow:"hidden",alignItems:"center",gap:t.spacing.sm},""),children:[(0,T.FD)("div",{css:(0,s.AH)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"0 auto",color:t.colors.textSecondary},""),title:e,children:[(0,T.Y)(a.A,{id:"YZDyOo",defaultMessage:"Path:"})," ",e]}),(0,T.Y)(L.i,{css:D,showLabel:!1,size:"small",type:"tertiary",copyText:e,icon:(0,T.Y)(M.CopyIcon,{})})]})}onDownloadClick(e,t,i,s){e&&!s?window.location.href=(0,k.To)(t,e):i&&(window.location.href=(0,k.qk)(t,i))}renderControls(){const{runUuid:e,loggedModelId:t,isFallbackToLoggedModelArtifacts:i}=this.props,{activeNodeId:s}=this.state;return(0,T.Y)("div",{style:{display:"flex",alignItems:"flex-start"},children:(0,T.FD)("div",{style:{display:"inline-flex",alignItems:"center"},children:[this.shouldShowViewAsTableCheckbox&&(0,T.Y)(M.Checkbox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_288",isChecked:this.state.viewAsTable,onChange:()=>this.setState({viewAsTable:!this.state.viewAsTable}),children:(0,T.Y)(a.A,{id:"zv4Ycc",defaultMessage:"View as table"})}),(0,T.Y)(M.LegacyTooltip,{arrowPointAtCenter:!0,placement:"topLeft",title:this.props.intl.formatMessage({id:"Y9ZFyN",defaultMessage:"Download artifact"}),children:(0,T.Y)(x.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_337",icon:(0,T.Y)(M.DownloadIcon,{}),onClick:()=>this.onDownloadClick(e,s,t,i)})})]})})}renderArtifactInfo(){const e=this.getExistingModelVersions();let t;t=e&&y.A.isModelRegistryEnabled()?this.renderModelVersionInfoSection(e,this.props.intl):this.activeNodeCanBeRegistered()&&y.A.isModelRegistryEnabled()?this.renderRegisterModelButton():this.activeNodeIsDirectory()?null:this.renderControls();const{theme:i}=this.props.designSystemThemeApi;return(0,T.FD)("div",{css:(0,s.AH)({padding:`${i.spacing.xs}px ${i.spacing.sm}px ${i.spacing.sm}px ${i.spacing.md}px`,display:"flex",flexDirection:"column",gap:i.spacing.xs},""),children:[(0,T.FD)("div",{css:(0,s.AH)({whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",alignItems:"center",gap:i.spacing.md},""),children:[(0,T.Y)("div",{css:H,children:this.renderSizeInfo()}),(0,T.Y)("div",{css:P,children:t})]}),this.renderPathInfo()]})}getActiveNodeRealPath(){return this.state.activeNodeId?`${this.props.artifactRootUri}/${this.state.activeNodeId}`:this.props.artifactRootUri}getActiveNodeSize(){if(this.state.activeNodeId){const e=u.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.file_size||"0";return parseInt(e,10)}return 0}activeNodeIsDirectory(){if(this.state.activeNodeId){return u.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.is_dir}return!0}activeNodeCanBeRegistered(){if(this.state.activeNodeId){const e=u.x.findChild(this.props.artifactNode,this.state.activeNodeId);if(e&&e.children&&N.eh in e.children)return!0}return!1}componentDidUpdate(e,t){const{activeNodeId:i}=this.state;t.activeNodeId!==i&&this.props.handleActiveNodeChange(this.activeNodeIsDirectory())}componentDidMount(){if(this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");if(t)try{u.x.findChild(this.props.artifactNode,this.props.initialSelectedArtifactPath)}catch(e){return void console.error(e)}let i="";const s={activeNodeId:this.props.initialSelectedArtifactPath,toggledNodeIds:{}};t.forEach((e=>{i+=e,s.toggledNodeIds[i]=!0,i+="/"})),this.setArtifactState(s)}}setArtifactState(e){this.setState(e)}get shouldShowViewAsTableCheckbox(){return this.state.activeNodeId&&this.props.runTags&&(0,F.L9)(this.props.runTags).includes(this.state.activeNodeId)}render(){if(!this.props.artifactNode||u.x.isEmpty(this.props.artifactNode))return(0,T.Y)(q,{useAutoHeight:this.props.useAutoHeight});const{theme:e}=this.props.designSystemThemeApi,{loggedModelId:t,isLoggedModelsMode:i}=this.props;return(0,T.FD)("div",{className:"mlflow-artifact-view",css:(0,s.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0,[e.responsive.mediaQueries.xs]:{overflowX:"auto"}},""),children:[(0,T.Y)("div",{style:{minWidth:"200px",maxWidth:"400px",flex:1,whiteSpace:"nowrap",borderRight:`1px solid ${e.colors.borderDecorative}`},children:(0,T.Y)(_.K,{data:this.getTreebeardData(this.props.artifactNode),onToggleTreebeard:this.onToggleTreebeard})}),(0,T.FD)("div",{className:"mlflow-artifact-right",children:[this.props.isFallbackToLoggedModelArtifacts&&this.props.loggedModelId&&(0,T.Y)(C,{loggedModelId:this.props.loggedModelId}),this.state.activeNodeId?this.renderArtifactInfo():null,(0,T.Y)(v.A,{experimentId:this.props.experimentId,runUuid:this.props.runUuid,path:this.state.activeNodeId,isDirectory:this.activeNodeIsDirectory(),size:this.getActiveNodeSize(),runTags:this.props.runTags,artifactRootUri:this.props.artifactRootUri,modelVersions:this.props.modelVersions,showArtifactLoggedTableView:this.state.viewAsTable&&this.shouldShowViewAsTableCheckbox,loggedModelId:t,isLoggedModelsMode:i,entityTags:this.props.entityTags})]})]})}}const V={listArtifactsApi:Y.cN,listArtifactsLoggedModelApi:Y.bb},B=(0,d.Ng)(((e,t)=>{var i;const{runUuid:s,loggedModelId:o,isLoggedModelsMode:n}=t,{apis:a}=e,l=n&&o?(0,A.ej)(o,e):(0,A.ej)(s,e),d=null!==(i=null===t||void 0===t?void 0:t.artifactRootUri)&&void 0!==i?i:(0,A.vb)(s,e),c=(0,I.U_)(e),h=r().flatMap(c,(e=>({...e,source:y.A.normalize(e.source)})));return{artifactNode:l,artifactRootUri:d,modelVersions:c,modelVersionsBySource:r().groupBy(h,"source"),apis:a}}),V)((0,x.au)((0,c.Ay)(z)));function U(e){const{modelVersion:t,intl:i}=e,{name:s,version:o,status:r,status_message:l}=t;let d=b.fM.getModelVersionPageRoute(s,o);const c=(0,T.Y)(M.LegacyTooltip,{title:`${s} version ${o}`,children:(0,T.FD)(h.N_,{to:d,className:"model-version-link",target:"_blank",rel:"noreferrer",children:[(0,T.Y)("span",{className:"model-name",children:s}),(0,T.FD)("span",{children:[",\xa0v",o,"\xa0"]}),(0,T.Y)("i",{className:"fa fa-external-link-o"})]})});return(0,T.FD)("div",{className:"model-version-info",children:[(0,T.FD)("div",{className:"model-version-link-section",children:[(0,T.Y)(M.LegacyTooltip,{title:l||w.zr[r],children:(0,T.Y)("div",{children:w.UA[r]})}),c]}),(0,T.Y)("div",{className:"model-version-status-text",children:r===w.IP.READY?(0,T.Y)(n.Fragment,{children:(0,T.Y)(a.A,{id:"nVndit",defaultMessage:"Registered on {registeredDate}",values:{registeredDate:y.A.formatTimestamp(t.creation_timestamp,i)}})}):l||w.zA[r]})]})}function q({useAutoHeight:e}){const{theme:t}=(0,x.u)();return(0,T.Y)("div",{css:(0,s.AH)({flex:e?1:"unset",height:e?"auto":void 0,paddingTop:t.spacing.md,display:"flex",justifyContent:"center",alignItems:"center"},""),children:(0,T.Y)(M.Empty,{image:(0,T.Y)(M.LayerIcon,{}),title:(0,T.Y)(a.A,{id:"X3F7x3",defaultMessage:"No Artifacts Recorded"}),description:(0,T.Y)(a.A,{id:"3geT+I",defaultMessage:"Use the log artifact APIs to store file outputs from MLflow runs."})})})}var $=i(69708),O=i(68621),G=i(7204),K=i(8220),W=i(57596),j=i(52350);class Q extends n.Component{constructor(...e){super(...e),this.pollIntervalId=void 0,this.getFailedtoListArtifactsMsg=()=>(0,T.Y)("span",{children:(0,T.Y)(a.A,{id:"V4CsL/",defaultMessage:"Unable to list artifacts stored under {artifactUri} for the current run. Please contact your tracking server administrator to notify them of this error, which can happen when the tracking server lacks permission to list artifacts under the current run's root artifact directory.",values:{artifactUri:this.props.artifactRootUri}})}),this.state={activeNodeIsDirectory:!1,errorThrown:!1},this.searchRequestId=(0,G.yk)(),this.listArtifactRequestIds=[(0,G.yk)()].concat(this.props.initialSelectedArtifactPath?this.props.initialSelectedArtifactPath.split("/").map((e=>(0,G.yk)())):[]),this.pollModelVersionsForCurrentRun=async()=>{const{apis:e,runUuid:t,isLoggedModelsMode:i}=this.props,{activeNodeIsDirectory:s}=this.state,o=e[this.searchRequestId];if((!i||t)&&s&&(!o||!o.active))try{await this.props.searchModelVersionsApi({run_id:t},this.searchRequestId)}catch(r){if(!this.state.errorThrown){const e=`Error while fetching model version for run: ${r instanceof Error?r.toString():JSON.stringify(r)}`;y.A.logErrorAndNotifyUser(e),this.setState({errorThrown:!0})}}},this.handleActiveNodeChange=e=>{this.setState({activeNodeIsDirectory:e})},this.pollArtifactsForCurrentRun=async()=>{const{runUuid:e,loggedModelId:t,isFallbackToLoggedModelArtifacts:i}=this.props,s=this.props.isLoggedModelsMode;let o;if(s&&t){var r;if(i){var n,a;const e=await(0,S.E)(t,!0);o=null===e||void 0===e||null===(n=e.model)||void 0===n||null===(a=n.info)||void 0===a?void 0:a.tags,this.setState({fallbackEntityTags:o})}await this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,void 0,this.props.experimentId,this.listArtifactRequestIds[0],null!==(r=o)&&void 0!==r?r:this.props.entityTags)}else await this.props.listArtifactsApi(e,void 0,this.listArtifactRequestIds[0]);if(this.props.initialSelectedArtifactPath){const i=this.props.initialSelectedArtifactPath.split("/");let r="";for(let n=0;n<i.length;n++){var l;if(r+=i[n],s&&t)await this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,r,this.props.experimentId,this.listArtifactRequestIds[n+1],null!==(l=o)&&void 0!==l?l:this.props.entityTags);else await this.props.listArtifactsApi(e,r,this.listArtifactRequestIds[n+1]);r+="/"}}},this.renderErrorCondition=e=>e,this.renderArtifactView=(e,t,i)=>{var o;if(e&&!t)return(0,T.Y)(K.d,{});if(this.renderErrorCondition(t)){const e=i[0];e&&e.error&&console.error(e.error);const t=(()=>{const t=null===e||void 0===e?void 0:e.error;return t instanceof j.s?t.getMessageField():this.getFailedtoListArtifactsMsg()})();return(0,T.Y)(W.F,{css:(0,s.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0},""),"data-testid":"artifact-view-error",description:t})}return(0,T.Y)(B,{...this.props,entityTags:null!==(o=this.state.fallbackEntityTags)&&void 0!==o?o:this.props.entityTags,handleActiveNodeChange:this.handleActiveNodeChange,useAutoHeight:this.props.useAutoHeight})}}componentDidMount(){y.A.isModelRegistryEnabled()&&(this.pollModelVersionsForCurrentRun(),this.pollIntervalId=setInterval(this.pollModelVersionsForCurrentRun,w.Gs)),this.pollArtifactsForCurrentRun()}componentDidUpdate(e){e.runUuid!==this.props.runUuid&&this.setState({errorThrown:!1}),!e.isFallbackToLoggedModelArtifacts&&this.props.isFallbackToLoggedModelArtifacts&&this.pollArtifactsForCurrentRun()}componentWillUnmount(){y.A.isModelRegistryEnabled()&&clearInterval(this.pollIntervalId)}render(){return(0,T.Y)(O.Ay,{requestIds:this.listArtifactRequestIds,children:this.renderArtifactView})}}const J=["/Volumes/","dbfs:/Volumes/"],X={listArtifactsApi:Y.cN,listArtifactsLoggedModelApi:Y.bb,searchModelVersionsApi:$.hY},Z=(0,d.Ng)(((e,t)=>{var i;const{runUuid:s,location:n,runOutputs:a}=t,l=((null===n||void 0===n?void 0:n.pathname)||"").match(/\/(?:artifactPath|artifacts)\/(.+)/),{isFallbackToLoggedModelArtifacts:d,fallbackLoggedModelId:c}=((e,t)=>{if(J.some((e=>{var i;return null===(i=t.artifactRootUri)||void 0===i?void 0:i.startsWith(e)})),!t.isLoggedModelsMode){var i,s;const r=(0,A.ej)(t.runUuid,e),n=r&&!r.fileInfo&&(0,o.isEmpty)(r.children),a=null===(i=(0,o.first)(null===(s=t.runOutputs)||void 0===s?void 0:s.modelOutputs))||void 0===i?void 0:i.modelId;if(n&&a)return{isFallbackToLoggedModelArtifacts:!0,fallbackLoggedModelId:a}}return{isFallbackToLoggedModelArtifacts:!1}})(e,t),h=(null===l||void 0===l?void 0:l[1])||void 0,{apis:p}=e,u=null!==(i=t.artifactRootUri)&&void 0!==i?i:(0,A.vb)(s,e);let g=h;if(!g){var m;const e=(0,F.x1)(null!==(m=t.runTags)&&void 0!==m?m:{});e.length>0&&(g=r().first(e))}return{artifactRootUri:u,apis:p,initialSelectedArtifactPath:g,isLoggedModelsMode:!!d||t.isLoggedModelsMode,loggedModelId:d?c:t.loggedModelId,isFallbackToLoggedModelArtifacts:d}}),X)(Q);var ee=(0,l.h)(Z)},11473:function(e,t,i){i.d(t,{N9:function(){return p},NW:function(){return c},OT:function(){return l},Yc:function(){return h}});var s=i(31014),o=i(37504),r=i.n(o),n=i(75826);let a=null;const l=()=>a||(a=new n.Converter,a.setFlavor("github"),a),d={allowedTags:["h1","h2","h3","h4","h5","h6","h7","h8","blockquote","p","a","ul","ol","nl","li","ins","b","i","strong","em","strike","code","hr","br","div","table","thead","tbody","tr","th","td","pre","del","sup","sub","dl","dt","dd","kbd","q","samp","samp","var","hr","rt","rp","summary","iframe","img","caption","figure"],allowedAttributes:{a:["href","name","target"],img:["src","longdesc"],div:["itemscope","itemtype"]}},c=e=>r()(e,d),h=e=>e.replace(new RegExp("<a","g"),'<a target="_blank"'),p=()=>(0,s.useCallback)((e=>{const t=l().makeHtml(e);return c(t)}),[])},14830:function(e,t,i){i.d(t,{N:function(){return a}});var s=i(89555),o=i(59403),r=i(50111);var n={name:"4zleql",styles:"display:block"};const a=({children:e})=>{const{theme:t}=(0,o.u)();return(0,r.Y)("table",{css:(0,s.AH)({display:"block",border:`1px solid ${t.colors.borderDecorative}`,borderBottom:"none",borderRadius:t.general.borderRadiusBase,width:"50%",minWidth:640,marginBottom:t.spacing.lg,overflow:"hidden"},""),children:(0,r.Y)("tbody",{css:n,children:e})})}},59508:function(e,t,i){i.d(t,{_C:function(){return a},pc:function(){return r},so:function(){return n}});var s=i(81866),o=i(69708);function r(e){return e?`${s.Qs} ilike ${(0,o.GP)(e,!0)}`:""}function n({query:e=""}={}){const t=[],i=e.includes("tags.")?e:r(e);return i&&t.push(i),t.join(" AND ")}function a(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?r(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}},61902:function(e){e.exports=function(e,t){if("string"===typeof e)return n(e);if("number"===typeof e)return r(e,t);return null},e.exports.format=r,e.exports.parse=n;var t=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,s={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function r(e,o){if(!Number.isFinite(e))return null;var r=Math.abs(e),n=o&&o.thousandsSeparator||"",a=o&&o.unitSeparator||"",l=o&&void 0!==o.decimalPlaces?o.decimalPlaces:2,d=Boolean(o&&o.fixedDecimals),c=o&&o.unit||"";c&&s[c.toLowerCase()]||(c=r>=s.tb?"TB":r>=s.gb?"GB":r>=s.mb?"MB":r>=s.kb?"KB":"B");var h=(e/s[c.toLowerCase()]).toFixed(l);return d||(h=h.replace(i,"$1")),n&&(h=h.replace(t,n)),h+a+c}function n(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,i=o.exec(e),r="b";return i?(t=parseFloat(i[1]),r=i[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(s[r]*t)}},65287:function(e,t,i){i.d(t,{a:function(){return r}});var s=i(81313),o=i(50111);const r=({children:e,className:t,secondarySections:i=[],usingSidebarLayout:r})=>r?(0,o.Y)("div",{className:t,children:(0,o.Y)(s.u8,{asideSections:i,isTabLayout:!0,sidebarSize:"lg",verticalStackOrder:"aside-first",children:e})}):(0,o.Y)("div",{className:t,children:e})},67212:function(e,t,i){i.d(t,{t:function(){return c}});var s=i(89555),o=i(59403),r=i(68048),n=i(56412),a=i(50111);var l={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},d={name:"ozd7xs",styles:"flex-shrink:0"};const c=({value:e,className:t,element:i})=>{const{theme:c}=(0,o.u)();return(0,a.FD)("div",{css:(0,s.AH)({display:"flex",gap:c.spacing.xs,alignItems:"center"},""),className:t,children:[(0,a.Y)("span",{css:l,children:null!==i&&void 0!==i?i:e}),(0,a.Y)(n.i,{showLabel:!1,copyText:e,icon:(0,a.Y)(r.CopyIcon,{}),size:"small",css:d})]})}},68109:function(e,t,i){i.d(t,{y:function(){return b}});var s=i(89555),o=i(59403),r=i(68048),n=i(70169),a=i(9133),l=i(31014),d=i(88443),c=i(88464),h=i(70618),p=i(9856),u=i(50111);const g=({value:e})=>{const t=(0,l.useMemo)((()=>{try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return null}}),[e]);return(0,u.Y)("div",{css:(0,s.AH)({whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:t?"monospace":void 0},""),children:t||e})};var m=i(91144),f=i(3288);var v={name:"ozd7xs",styles:"flex-shrink:0"};const w=({name:e,value:t,toggleExpanded:i,isExpanded:n,autoExpandedRowsList:d})=>{const{theme:c}=(0,o.u)(),h=(0,l.useRef)(null),[p,m]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{d[e]||p&&(i(),d[e]=!0)}),[d,p,e,i]),(0,l.useEffect)((()=>{if(!h.current)return;const e=(0,a.throttle)((([e])=>{const t=e.target.scrollHeight>e.target.clientHeight;m(t)}),500,{trailing:!0}),t=new ResizeObserver(e);return t.observe(h.current),()=>t.disconnect()}),[h,i]),(0,l.useEffect)((()=>{if(h.current&&!n){h.current.scrollHeight>h.current.clientHeight&&m(!0)}}),[n]),(0,u.FD)("div",{css:(0,s.AH)({display:"flex",gap:c.spacing.xs},""),children:[(p||n)&&(0,u.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_74",size:"small",icon:n?(0,u.Y)(r.ChevronDownIcon,{}):(0,u.Y)(o.q,{}),onClick:()=>i(),css:v}),(0,u.Y)("div",{title:t,css:(0,s.AH)({overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:n?void 0:"3"},""),ref:h,children:n?(0,u.Y)(g,{value:t}):t})]})},y=[{id:"key",accessorKey:"key",header:()=>(0,u.Y)(d.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,u.Y)(d.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:({row:{original:e,getIsExpanded:t,toggleExpanded:i},table:{options:{meta:s}}})=>{const{autoExpandedRowsList:o}=s;return(0,u.Y)(w,{name:e.key,value:e.value,isExpanded:t(),toggleExpanded:i,autoExpandedRowsList:o.current})}}],b=({params:e})=>{const{theme:t}=(0,o.u)(),i=(0,c.A)(),[g,v]=(0,l.useState)(""),b=(0,l.useRef)({}),{detailsPageTableStyles:x,detailsPageNoEntriesStyles:M,detailsPageNoResultsWrapperStyles:A,usingUnifiedDetailsLayout:I}=(0,f.z)(),Y=(0,l.useMemo)((()=>(0,a.values)(e)),[e]),N=(0,l.useMemo)((()=>Y.filter((({key:e,value:t})=>{const i=g.toLowerCase();return e.toLowerCase().includes(i)||t.toLowerCase().includes(i)}))),[g,Y]),S=(0,l.useMemo)((()=>(0,m.rR)()?y:[{id:"key",accessorKey:"key",header:()=>(0,u.Y)(d.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,u.Y)(d.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:({row:{original:e,getIsExpanded:t,toggleExpanded:i}})=>(0,u.Y)(w,{name:e.key,value:e.value,isExpanded:t(),toggleExpanded:i,autoExpandedRowsList:b.current})}]),[]),R=(0,h.N4)({data:N,getCoreRowModel:(0,p.HT)(),getExpandedRowModel:(0,p.D0)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:S,meta:{autoExpandedRowsList:b}});return(0,u.FD)("div",{css:(0,s.AH)({flex:I?"0 0 auto":1,display:"flex",flexDirection:"column",overflow:"hidden"},""),children:[(0,u.Y)(o.T.Title,{level:4,children:(0,u.Y)(d.A,{id:"Q/evEc",defaultMessage:"Parameters ({length})",values:{length:N.length}})}),(0,u.Y)("div",{css:(0,s.AH)({padding:t.spacing.sm,border:`1px solid ${t.colors.borderDecorative}`,borderRadius:t.general.borderRadiusBase,flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},""),children:(()=>{if(!Y.length)return(0,u.Y)("div",{css:M,children:(0,u.Y)(r.Empty,{description:(0,u.Y)(d.A,{id:"6UqPlE",defaultMessage:"No parameters recorded"})})});const e=N.length<1;return(0,u.FD)(u.FK,{children:[(0,u.Y)("div",{css:(0,s.AH)({marginBottom:t.spacing.sm},""),children:(0,u.Y)(n.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_213",prefix:(0,u.Y)(n.S,{}),placeholder:i.formatMessage({id:"SLHSXV",defaultMessage:"Search parameters"}),value:g,onChange:e=>v(e.target.value),allowClear:!0})}),(0,u.FD)(r.Table,{scrollable:!0,empty:e?(0,u.Y)("div",{css:A,children:(0,u.Y)(r.Empty,{description:(0,u.Y)(d.A,{id:"QD6iZA",defaultMessage:"No parameters match the search filter"})})}):null,css:x,children:[(0,u.Y)(r.TableRow,{isHeader:!0,children:R.getLeafHeaders().map(((e,t)=>(0,u.Y)(r.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_244",header:e,column:e.column,setColumnSizing:R.setColumnSizing,isResizing:e.column.getIsResizing(),css:(0,s.AH)({flexGrow:e.column.getCanResize()?0:1},""),style:{flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),R.getRowModel().rows.map((e=>(0,u.Y)(r.TableRow,{children:e.getAllCells().map((e=>{var t;return(0,u.Y)(r.TableCell,{css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},multiline:!0,children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)))]})]})})()})]})}},72314:function(e,t,i){i.d(t,{L:function(){return r}});var s=i(74823);const o=s.J1`
  query MlflowGetExperimentQuery($input: MlflowGetExperimentInput!) @component(name: "MLflow.ExperimentRunTracking") {
    mlflowGetExperiment(input: $input) {
      apiError {
        code
        message
      }
      experiment {
        artifactLocation
        creationTime
        experimentId
        lastUpdateTime
        lifecycleStage
        name
        tags {
          key
          value
        }
      }
    }
  }
`,r=({experimentId:e,options:t={}})=>{var i;const{data:r,loading:n,error:a,refetch:l}=(0,s.IT)(o,{variables:{input:{experimentId:e}},skip:!e,...t});return{loading:n,data:null===r||void 0===r||null===(i=r.mlflowGetExperiment)||void 0===i?void 0:i.experiment,refetch:l,apolloError:a,apiError:(()=>{var e;return null===r||void 0===r||null===(e=r.mlflowGetExperiment)||void 0===e?void 0:e.apiError})()}}},81313:function(e,t,i){function s(e,t,i){if(void 0===t||null===t||"string"!==typeof t)return i;for(const s in e)if(e[s]===t)return e[s];return i}i.d(t,{wB:function(){return v},bw:function(){return w},u8:function(){return p},SK:function(){return s}});var o=i(89555),r=i(59403),n=i(68048),a=i(31014),l=i(88443);var d=function(e,t){const[i,s]=(0,a.useState)(null);return(0,a.useEffect)((()=>{if(e.current&&t){const i=()=>{if(!e.current)return;const i=e.current.offsetWidth,o=Object.keys(t).filter((e=>t[e]>=i)).sort(((e,i)=>t[e]-t[i]))[0];s(o)};i();const o=new ResizeObserver(i);return o.observe(e.current),()=>o.disconnect()}}),[e,t]),i},c=i(50111);const h={sm:316,lg:480},p=({isLoading:e,asideSections:t,children:i,isTabLayout:s=!0,sidebarSize:l="sm",verticalStackOrder:p})=>{const{theme:g}=(0,r.u)(),m=(0,a.useRef)(null),f="small"===d(m,{small:g.responsive.breakpoints.lg}),v="main-first"===p,w=h[l],y=w-16,b=f?v?{width:"100%"}:{borderBottom:`1px solid ${g.colors.border}`,width:"100%"}:v?{width:y}:{paddingBottom:g.spacing.sm,width:y};return(0,c.FD)("div",{"data-testid":"entity-overview-container",ref:m,css:(0,o.AH)({display:"flex",flexDirection:f?v?"column":"column-reverse":"row",gap:g.spacing.lg},""),children:[(0,c.Y)("div",{css:(0,o.AH)({display:"flex",flexGrow:1,flexDirection:"column",gap:g.spacing.md,width:f?"100%":`calc(100% - ${w}px)`},""),children:e?(0,c.Y)(n.GenericSkeleton,{}):i}),(0,c.Y)("div",{style:{display:"flex",...s&&{marginTop:-g.spacing.md}},children:(0,c.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:g.spacing.lg,...b},""),children:[e&&(0,c.Y)(n.GenericSkeleton,{}),!e&&(0,c.Y)(u,{secondarySections:t})]})})]})},u=({secondarySections:e})=>(0,c.Y)("div",{children:e.filter((e=>null!==e)).filter((e=>null!==(null===e||void 0===e?void 0:e.content))).map((({title:e,isTitleLoading:t,content:i,id:s},o)=>(0,c.Y)(m,{title:e,isTitleLoading:t,content:i,index:o},s)))}),g=({children:e})=>{const{theme:t}=(0,r.u)();return(0,c.Y)(r.T.Title,{level:4,style:{whiteSpace:"nowrap",marginRight:t.spacing.lg,marginTop:0},children:e})},m=({title:e,content:t,index:i,isTitleLoading:s=!1})=>{const{theme:a}=(0,r.u)(),d=s?(0,c.Y)(n.ParagraphSkeleton,{label:(0,c.Y)(l.A,{id:"KJqjTs",defaultMessage:"Section title loading"})}):e?(0,c.Y)(g,{children:e}):null,h={padding:`${a.spacing.md}px 0 ${a.spacing.md}px 0`};return(0,c.FD)("div",{css:(0,o.AH)({...h,...0===i?{}:{borderTop:`1px solid ${a.colors.border}`}},""),children:[d,t]})};var f={name:"10x9q33",styles:"flex:1;align-self:start;overflow:hidden"};const v=({keyValue:e,value:t,maxWidth:i})=>{const{theme:s}=(0,r.u)();return(0,c.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center","&:has(+ div)":{marginBottom:s.spacing.xs},maxWidth:null!==i&&void 0!==i?i:450,wordBreak:"break-word",lineHeight:s.typography.lineHeightLg},""),children:[(0,c.Y)("div",{css:(0,o.AH)({color:s.colors.textSecondary,flex:.5,alignSelf:"start"},""),children:e}),(0,c.Y)("div",{css:f,children:t})]})},w=()=>(0,c.Y)(r.T.Text,{color:"secondary",children:(0,c.Y)(l.A,{id:"8EQFzg",defaultMessage:"None"})})},85466:function(e,t,i){i.d(t,{vR:function(){return x}});var s=i(31014),o=i(9133),r=i.n(o),n=i(59403),a=i(68048),l=i(23823),d=i(64912),c=i(88443),h=i(87665),p=i(69708),u=i(10811),g=i(76010),m=i(7204),f=i(59508),v=i(50111);class w extends s.Component{constructor(){super(),this.form=void 0,this.state={visible:!1,confirmLoading:!1,modelByName:{}},this.createRegisteredModelRequestId=(0,m.yk)(),this.createModelVersionRequestId=(0,m.yk)(),this.searchModelVersionRequestId=(0,m.yk)(),this.showRegisterModal=()=>{this.setState({visible:!0})},this.hideRegisterModal=()=>{var e,t;this.setState({visible:!1}),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.resetAndClearModalForm=()=>{var e,t,i;this.setState({visible:!1,confirmLoading:!1}),null===(e=this.form.current)||void 0===e||e.resetFields(),null===(t=(i=this.props).onCloseModal)||void 0===t||t.call(i)},this.handleRegistrationFailure=e=>{this.setState({confirmLoading:!1}),g.A.logErrorAndNotifyUser(e)},this.handleSearchRegisteredModels=e=>{this.props.searchRegisteredModelsApi((0,f.pc)(e),5)},this.reloadModelVersionsForCurrentRun=()=>{const{runUuid:e}=this.props;return this.props.searchModelVersionsApi({run_id:e},this.searchModelVersionRequestId)},this.handleRegisterModel=()=>this.form.current.validateFields().then((e=>{this.setState({confirmLoading:!0});const{runUuid:t,modelPath:i}=this.props,s=e[h.BE];var r,n,a,l;return s===h.QN?this.props.createRegisteredModelApi(e[h.F3],this.createRegisteredModelRequestId).then((()=>this.props.createModelVersionApi(e[h.F3],i,t,[],this.createModelVersionRequestId,this.props.loggedModelId))).then(null!==(r=this.props.onRegisterSuccess)&&void 0!==r?r:o.identity).then(this.resetAndClearModalForm).catch(null!==(n=this.props.onRegisterFailure)&&void 0!==n?n:this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(g.A.logErrorAndNotifyUser):this.props.createModelVersionApi(s,i,t,[],this.createModelVersionRequestId,this.props.loggedModelId).then(null!==(a=this.props.onRegisterSuccess)&&void 0!==a?a:o.identity).then(this.resetAndClearModalForm).catch(null!==(l=this.props.onRegisterFailure)&&void 0!==l?l:this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(g.A.logErrorAndNotifyUser)})),this.form=s.createRef()}componentDidMount(){this.props.searchRegisteredModelsApi()}componentDidUpdate(e,t){!1===t.visible&&!0===this.state.visible&&this.props.searchRegisteredModelsApi()}renderRegisterModelForm(){const{modelByName:e}=this.props;return(0,v.Y)(h.xH,{modelByName:e,innerRef:this.form,onSearchRegisteredModels:r().debounce(this.handleSearchRegisteredModels,300)})}renderFooter(){return[(0,v.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_242",onClick:this.hideRegisterModal,children:(0,v.Y)(c.A,{id:"iwD/Dv",defaultMessage:"Cancel"})},"back"),(0,v.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_248",type:"primary",onClick:()=>this.handleRegisterModel(),"data-testid":"confirm-register-model",children:(0,v.Y)(c.A,{id:"wBFfWW",defaultMessage:"Register"})},"submit")]}renderHelper(e,t,i){const{visible:s,confirmLoading:o}=this.state,{showButton:r=!0,buttonType:d}=this.props;return(0,v.FD)("div",{className:"register-model-btn-wrapper",children:[r&&(0,v.Y)(a.LegacyTooltip,{title:this.props.tooltip||null,placement:"left",children:(0,v.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_261",className:"register-model-btn",type:d,onClick:this.showRegisterModal,disabled:e,htmlType:"button",children:(0,v.Y)(c.A,{id:"YQ+Eon",defaultMessage:"Register model"})})}),(0,v.Y)(l.d,{title:this.props.intl.formatMessage({id:"qSpgg/",defaultMessage:"Register model"}),width:540,visible:this.props.modalVisible||s,onOk:()=>this.handleRegisterModel(),okText:this.props.intl.formatMessage({id:"9W3kev",defaultMessage:"Register"}),confirmLoading:o,onCancel:this.hideRegisterModal,centered:!0,footer:i,children:t})]})}render(){const{disabled:e}=this.props;return this.renderHelper(e,this.renderRegisterModelForm(),this.renderFooter())}}const y={createRegisteredModelApi:p.eF,createModelVersionApi:p.Ey,searchModelVersionsApi:p.hY,searchRegisteredModelsApi:p.JK},b=(0,d.Ay)(w),x=(0,u.Ng)((e=>({modelByName:e.entities.modelByName})),y)(b)},87665:function(e,t,i){i.d(t,{QN:function(){return h},F3:function(){return u},xH:function(){return g},BE:function(){return p}});var s=i(31014),o=i(68048),r=i(70169),n=i(88443),a=i(50111);const{Option:l,OptGroup:d}=o.LegacySelect,c="Create New Model",h=`$$$__${c}__$$$`,p="selectedModel",u="modelName";class g extends s.Component{constructor(...e){super(...e),this.state={selectedModel:null},this.handleModelSelectChange=e=>{this.setState({selectedModel:e})},this.modelNameValidator=(e,t,i)=>{const{modelByName:s}=this.props;i(s[t]?`Model "${t}" already exists.`:void 0)},this.handleFilterOption=(e,t)=>-1!==(t&&t.value||"").toLowerCase().indexOf(e.toLowerCase())}renderExplanatoryText(){const{isCopy:e}=this.props,{selectedModel:t}=this.state;if(!t||t===h)return null;const i=e?(0,a.Y)(n.A,{id:"hxMEqi",defaultMessage:"The model version will be copied to {selectedModel} as a new version.",values:{selectedModel:t}}):(0,a.Y)(n.A,{id:"zjXq2X",defaultMessage:"The model will be registered as a new version of {selectedModel}.",values:{selectedModel:t}});return(0,a.Y)("p",{className:"modal-explanatory-text",children:i})}renderModel(e){return(0,a.Y)(l,{value:e.name,children:e.name},e.name)}render(){const{modelByName:e,innerRef:t,isCopy:i}=this.props,{selectedModel:s}=this.state,n=s===h;return(0,a.FD)(o.LegacyForm,{ref:t,layout:"vertical",className:"mlflow-register-model-form",children:[(0,a.Y)(o.LegacyForm.Item,{label:i?(0,a.Y)("b",{children:"Copy to model"}):"Model",name:p,rules:[{required:!0,message:"Please select a model or create a new one."}],children:(0,a.FD)(o.LegacySelect,{dropdownClassName:"mlflow-model-select-dropdown",onChange:this.handleModelSelectChange,placeholder:"Select a model",filterOption:this.handleFilterOption,onSearch:this.props.onSearchRegisteredModels,showSearch:!0,children:[(0,a.FD)(l,{value:h,className:"mlflow-create-new-model-option",children:[(0,a.Y)("i",{className:"fa fa-plus fa-fw",style:{fontSize:13}})," ",c]}),(0,a.Y)(d,{label:"Models",children:Object.values(e).map((e=>this.renderModel(e)))})]})}),n?(0,a.Y)(o.LegacyForm.Item,{label:"Model Name",name:u,rules:[{required:!0,message:"Please input a name for the new model."},{validator:this.modelNameValidator}],children:(0,a.Y)(r.I,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodelform.tsx_132",placeholder:"Input a model name"})}):null,this.renderExplanatoryText()]})}}},93358:function(e,t,i){i.d(t,{E:function(){return d},b:function(){return l}});var s=i(41261),o=i(8986),r=i(53962);const n=e=>["GET_LOGGED_MODEL",e],a=async({queryKey:[,e]})=>(0,o.G)((0,r.we)(`ajax-api/2.0/mlflow/logged-models/${e}`),"GET"),l=({loggedModelId:e,enabled:t=!0})=>{const{data:i,isLoading:o,isFetching:r,refetch:l,error:d}=(0,s.I)({queryKey:n(null!==e&&void 0!==e?e:""),queryFn:a,cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t});return{isLoading:o,isFetching:r,data:null===i||void 0===i?void 0:i.model,refetch:l,error:d}},d=async(e,t=!1)=>{try{return await(0,o.G)((0,r.we)(`ajax-api/2.0/mlflow/logged-models/${e}`),"GET")}catch(i){if(t)return;throw i}}},96034:function(e,t,i){i.d(t,{V:function(){return w}});var s=i(89555),o=i(31014),r=i(59403),n=i(68048),a=i(48624);const l=({when:e,message:t})=>{const i=o.useContext(a.jb).navigator.block;return o.useEffect((()=>{if(!e)return;return null===i||void 0===i?void 0:i((()=>window.confirm(t)))}),[t,i,e]),null};i(8844);var d=i(75703),c=i(11473),h=i(88443),p=i(64912),u=i(50111);const g=e=>(0,u.Y)(f,{name:e});class m extends o.Component{constructor(...e){super(...e),this.state={markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab,error:null},this.converter=(0,c.OT)(),this.handleMdeValueChange=e=>{this.setState({markdown:e})},this.handleTabChange=e=>{this.setState({selectedTab:e})},this.handleSubmitClick=()=>{const{onSubmit:e}=this.props,{markdown:t}=this.state;return this.setState({confirmLoading:!0}),e?Promise.resolve(e(t)).then((()=>{this.setState({confirmLoading:!1,error:null})})).catch((e=>{this.setState({confirmLoading:!1,error:e&&e.getMessageField?e.getMessageField():this.props.intl.formatMessage({id:"SzvvXl",defaultMessage:"Failed to submit"})})})):null},this.handleCancelClick=()=>{this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab});const{onCancel:e}=this.props;e&&e()}}contentHasChanged(){return this.state.markdown!==this.props.defaultMarkdown}renderActions(){const{confirmLoading:e}=this.state;return(0,u.Y)("div",{className:"mlflow-editable-note-actions","data-testid":"editable-note-actions",children:(0,u.FD)("div",{children:[(0,u.Y)(r.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_114",type:"primary",className:"editable-note-save-button",onClick:this.handleSubmitClick,disabled:!this.contentHasChanged()||e,loading:e,"data-testid":"editable-note-save-button",children:this.props.saveText}),(0,u.Y)(r.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_124",htmlType:"button",className:"editable-note-cancel-button",onClick:this.handleCancelClick,disabled:e,children:(0,u.Y)(h.A,{id:"17k196",defaultMessage:"Cancel"})})]})})}getSanitizedHtmlContent(){const{markdown:e}=this.state;if(e){const t=(0,c.NW)(this.converter.makeHtml(e));return(0,c.Yc)(t)}return null}render(){const{showEditor:e}=this.props,{markdown:t,selectedTab:i,error:s}=this.state,r=this.getSanitizedHtmlContent();return(0,u.Y)("div",{className:"note-view-outer-container","data-testid":"note-view-outer-container",children:e?(0,u.FD)(o.Fragment,{children:[(0,u.Y)("div",{className:"note-view-text-area",children:(0,u.Y)(d.default,{value:t,minEditorHeight:this.props.minEditorHeight,maxEditorHeight:this.props.maxEditorHeight,minPreviewHeight:50,childProps:this.props.childProps,toolbarCommands:this.props.toolbarCommands,onChange:this.handleMdeValueChange,selectedTab:i,onTabChange:this.handleTabChange,generateMarkdownPreview:e=>Promise.resolve(this.getSanitizedHtmlContent(e)),getIcon:g})}),s&&(0,u.Y)(n.Alert,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_178",type:"error",message:this.props.intl.formatMessage({id:"79dD5F",defaultMessage:"There was an error submitting your note."}),description:s,closable:!0}),this.renderActions(),(0,u.Y)(l,{when:this.contentHasChanged(),message:this.props.intl.formatMessage({id:"dwTTNK",defaultMessage:"Are you sure you want to navigate away? Your pending text changes will be lost."})})]}):(0,u.Y)(v,{content:r})})}}function f(e){const{theme:t}=(0,r.u)(),{name:i}=e;return(0,u.Y)(n.LegacyTooltip,{position:"top",title:i,children:(0,u.Y)("span",{css:(0,s.AH)({color:t.colors.textPrimary},""),children:(0,u.Y)(d.SvgIcon,{icon:i})})})}function v(e){const{content:t}=e;return t?(0,u.Y)("div",{className:"note-view-outer-container","data-testid":"note-view-outer-container",children:(0,u.Y)("div",{className:"note-view-text-area",children:(0,u.Y)("div",{className:"note-view-preview note-editor-preview",children:(0,u.Y)("div",{className:"note-editor-preview-content","data-testid":"note-editor-preview-content",dangerouslySetInnerHTML:{__html:e.content}})})})}):(0,u.Y)("div",{children:(0,u.Y)(h.A,{id:"PRe/8y",defaultMessage:"None"})})}m.defaultProps={defaultMarkdown:"",defaultSelectedTab:"write",showEditor:!1,saveText:(0,u.Y)(h.A,{id:"Shv28w",defaultMessage:"Save"}),confirmLoading:!1,toolbarCommands:[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]],maxEditorHeight:500,minEditorHeight:200,childProps:{}};const w=(0,p.Ay)(m)}}]);
//# sourceMappingURL=2008.7734bf52.chunk.js.map