{% import 'macros.jinja' as macros %}

<div class="badge bg-primary">v{{ request.cur_version }}</div>

{% if request.ota.already_updating() %}
    <!-- Spinner when updating -->
    {{ macros.tooltipHelp('Update in progress (' + request.ota.update_progress + ')', '<div class="spinner-border text-primary m-1" role="status" style="width: 1em; height: 1em;"><span class="visually-hidden">Loading...</span></div>') }}
{% elif request.ota.has_update %}
    <a role="button" class="badge bg-success m-1" hx-post="{{ url_for('api.update') }}"
       hx-target="#general-response">
        {{ macros.tooltipHelp('An update is available. (Click to update)',  macros.faDownload('text-white')) }}
    </a>
{% endif %}

{% if request.ota.last_update_error %}
    <a id="update-failed" class="badge bg-danger m-1">
        {{ macros.tooltipHelp('Update failed: ' + request.ota.last_update_error, macros.faExclamationTriangle('text-white')) }}
    </a>
{% endif %}