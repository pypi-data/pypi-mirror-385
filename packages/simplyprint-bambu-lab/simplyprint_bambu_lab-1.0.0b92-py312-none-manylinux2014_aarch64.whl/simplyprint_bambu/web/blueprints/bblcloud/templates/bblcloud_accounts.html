{% extends "layout.html" %}

{% block content %}
    <div class="d-flex align-items-center mb-2">
        {{ macros.backBtn( url_for('printers.add_printer_view')) }}
        <h3 class="mb-0"><strong>Bambu Lab Cloud Accounts</strong></h3>
    </div>

    <p class="pt-1 text-small text-muted">
        Any account added here will be used to find printers that are available to be connected to.

        Deleting an account will not remove any printers that were added using that account.
        But the printer will eventually disconnect, and after being removed it will no longer show up.
    </p>

    <div class="alert alert-warning">
        Printers added with a Bambu Lab account do not support webcam streaming unless the client is on the same network
        as the printer.
        {{ macros.externalLink('Learn more here.','https://help.simplyprint.io/en/article/bambu-lab-integration-webcam-setup-and-usage-guide-u8nmfm') }}
    </div>
    <hr>

    <div class="row pb-5">
        <div class="col-md-12">
            <a href="{{ url_for('bblcloud.add_account') }}" class="btn btn-primary">Add new account</a>
        </div>
    </div>


    {% for account in accounts %}
        <div class="card mt-3">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <h5 class="card-title">{{ account.username }} - {{ account.region.value }} ({{ account.uid }})</h5>

                    <div class="btn-group-sm">
                        {# <a hx-boost="false" href="/logs/f/{{ file.name }}" class="btn btn-primary btn-sm">
                            {{ macros.faDownload() }}
                        </a>

                        <button type="button" class="btn btn-danger btn-sm"
                                hx-delete="/logs/f/{{ file.name }}"> {{ macros.faTrashcan() }}
                        </button>
#}
                        <a hx-boost="false"
                           href="{{ url_for('bblcloud.account_page', account_id=account.uid) }}"
                           class="btn btn-outline-primary btn-sm">
                            View
                        </a>

                        <a hx-boost="false"
                           hx-delete="{{ url_for('bblcloud.delete_account', account_id=account.uid) }}"
                           hx-confirm="Are you sure you want to delete this account?"
                           hx-target="#general-response"
                           hx-swap="innerHTML"
                           class="btn btn-outline-danger btn-sm">
                            {{ macros.faTrashcan() }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
{% endblock %}
