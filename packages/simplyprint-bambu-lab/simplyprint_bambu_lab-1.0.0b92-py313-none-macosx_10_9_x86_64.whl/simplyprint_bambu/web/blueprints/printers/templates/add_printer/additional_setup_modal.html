{# Modal for enable LAN-only mode or add cloud account flow #}
<div class="modal fade modal-xl" id="additionalSetupModal" tabindex="-1"
     aria-labelledby="additionalSetupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="additionalSetupModalLabel">Setup a new Bambu Lab printer</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body m-4">
                <div id="step0text" class="pt-4 col-8 container h-100 d-flex">
                    <div class="row w-100 gap-sm-4">
                        <p class="text-center text-muted">
                            To be able to use your printer with the SimplyPrint Bambu Lab client, it needs to be clear
                            whether you want to use it over your local network or via the Bambu Lab cloud.
                            This guide is generic for all of your printers that are not either in LAN-only mode, or
                            linked to a cloud account in the client.
                        </p>
                    </div>
                </div>

                <div id="step0" class="pt-4 container h-100 d-flex">
                    <div class="row w-100 justify-content-center gap-sm-4">

                        <div class="col-lg-4 pointer-event" role="button" onclick="gotoStep1()">
                            <div class="card selectable-card h-100">

                                <div class="card-body text-center p-4 d-flex flex-column">
                                    <h2>{{ macros.faHouseSignal('', 30, 30) }}</h2>
                                    <h5 class="card-title">
                                        Enable LAN-only mode
                                    </h5>
                                    <p class="card-text">Connect to your printer locally but lose access to Bambu
                                        Handy.</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 pointer-event" role="button" onclick="gotoStep2()">
                            <div class="card selectable-card h-100">

                                <div class="card-body text-center p-4 d-flex flex-column">
                                    <h2>{{ macros.faCloud('', 30, 30) }}</h2>
                                    <h5 class="card-title">Add a Bambu Cloud account</h5>
                                    <p class="card-text">Keep access to Bamby Handy, and use Bambu Cloud by adding your
                                        account here.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step1" class="d-none">
                    <p class="text-center text-muted">
                        To use your printer over your local network you need to enable the LAN-only mode option directly
                        in your printers settings.
                        this makes it impossible for it to talk with the Bambu Lab cloud, including for firmware
                        updates.
                    </p>

                    <ul class="nav nav-tabs" id="guide" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="guide-a1-tab" data-bs-toggle="tab"
                                    data-bs-target="#guide-a1-content" type="button" role="tab"
                                    aria-controls="guide-a1-content" aria-selected="true">
                                A1/A1Mini
                            </button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="guide-p1-tab" data-bs-toggle="tab"
                                    data-bs-target="#guide-p1-content" type="button" role="tab"
                                    aria-controls="guide-p1-content" aria-selected="false">
                                P1S/P1P
                            </button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="guide-x1-tab" data-bs-toggle="tab"
                                    data-bs-target="#guide-x1-content" type="button" role="tab"
                                    aria-controls="guide-x1-content" aria-selected="false">
                                X1/X1C/X1E
                            </button>
                        </li>

                    </ul>

                    <div class="tab-content mb-5" id="guide-content">
                        <div class="tab-pane fade show active" id="guide-a1-content" role="tabpanel"
                             aria-labelledby="guide-a1-tab">

                            <ol class="list-group list-group-flush list-group-numbered">
                                <li class="list-group-item">Go to settings on the printers physical screen</li>
                                <li class="list-group-item">Go to LAN-only mode (Off)</li>
                                <li class="list-group-item">Toggle the LAN-only mode setting on</li>
                            </ol>
                        </div>

                        <div class="tab-pane fade" id="guide-p1-content" role="tabpanel"
                             aria-labelledby="guide-p1-tab">

                            <ol class="list-group list-group-flush list-group-numbered">
                                <li class="list-group-item">Go to settings on the printers physical screen</li>
                                <li class="list-group-item">Go to WLAN settings</li>
                                <li class="list-group-item">Toggle the LAN-only mode setting on</li>
                            </ol>
                        </div>

                        <div class="tab-pane fade" id="guide-x1-content" role="tabpanel"
                             aria-labelledby="guide-x1-tab">

                            <ol class="list-group list-group-flush list-group-numbered">
                                <li class="list-group-item">Go to settings on the printers physical screen</li>
                                <li class="list-group-item">Go to 'General' settings</li>
                                <li class="list-group-item">Toggle the LAN-only mode setting on</li>
                            </ol>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        Wait until we detect your newly updated setting and use the "Add from local network"
                        button that will appear shortly on the add printers page.
                    </div>

                    <button type="button" class="btn btn-primary" onclick="additionalSetupModalInstance.hide()">Back to
                        add printers page
                    </button>
                </div>

                <div id="step2" class="d-none row row-cols-1">
                    <div>
                        <p class="text-center text-muted">
                            To add your printer from Bambu Lab cloud just login with your Bambu Lab account here.
                        </p>
                    </div>

                    <div class="text-center">
                        {{ macros.externalLink('Go to Bambu Lab Cloud Accounts', url_for('bblcloud.accounts'), "btn btn-primary") }}
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
