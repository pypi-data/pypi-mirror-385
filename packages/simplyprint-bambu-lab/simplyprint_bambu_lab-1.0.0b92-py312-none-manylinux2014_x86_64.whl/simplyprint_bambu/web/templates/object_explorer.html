{% extends "layout.html" %}

{% block head %}
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        ul {
            list-style-type: none;
            padding-left: 20px;
        }

        li {
            margin: 5px 0;
        }

        .collapsible {
            cursor: pointer;
            user-select: none;
            font-weight: bold;
            margin: 5px 0;
        }

        .content {
            display: none;
            margin-left: 20px;
        }

        .expanded > .content {
            display: block;
        }

        .key {
            color: #007BFF;
            font-weight: bold;
        }

        .value {
            color: #555;
        }

        .type-info {
            font-style: italic;
            color: #888;
        }
    </style>
{% endblock %}

{% block scripts %}
    <script>
        function toggleExpandOrCollapseAll() {
            const items = document.querySelectorAll('.collapsible');
            const firstItem = items[0];
            const expand = !firstItem.parentElement.classList.contains('expanded');
            items.forEach(item => {
                if (expand) {
                    item.parentElement.classList.add('expanded');
                } else {
                    item.parentElement.classList.remove('expanded');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.collapsible').forEach(item => {
                item.addEventListener('click', () => {
                    item.parentElement.classList.toggle('expanded');
                });
            });

            document.getElementById('toggle-expand-collapse').addEventListener('click', toggleExpandOrCollapseAll);
        });
    </script>
{% endblock %}

{% block content %}
    <h1>Object Explorer</h1>

    <button id="toggle-expand-collapse">Toggle Expand/Collapse All</button>
    <ul>
        {{ object_tree|safe }}
    </ul>

    <ul>
        {{ object_tree_2|safe }}
    </ul>
{% endblock %}
