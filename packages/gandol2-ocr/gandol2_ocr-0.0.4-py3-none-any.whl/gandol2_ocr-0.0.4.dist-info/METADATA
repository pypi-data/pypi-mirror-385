Metadata-Version: 2.4
Name: gandol2-ocr
Version: 0.0.4
Summary: ì´ë¯¸ì§€ë¥¼ ì‹œê°ì  ê²½ê³„ ê¸°ì¤€ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì„¹ì…˜ ë¶„ë¦¬ & OCR (Korean, Chinese)
Author-email: gandol2 <sskim2333@gmail.com>
License: MIT
Project-URL: Homepage, https://github.com/gandol2/gandol2-ocr
Project-URL: Repository, https://github.com/gandol2/gandol2-ocr
Project-URL: Documentation, https://github.com/gandol2/gandol2-ocr#readme
Keywords: image,section,split,opencv,computer-vision
Requires-Python: <3.13,>=3.9
Description-Content-Type: text/markdown
Requires-Dist: paddleocr>=3.2.0
Requires-Dist: scipy>=1.13.1
Requires-Dist: matplotlib>=3.9.4
Requires-Dist: pandas>=2.3.3
Requires-Dist: opencv-python>=4.12.0.88
Provides-Extra: gpu
Requires-Dist: paddlepaddle-gpu==3.2.0; extra == "gpu"

# gandol2-ocr

ì´ë¯¸ì§€ ì„¹ì…˜ ë¶„ë¦¬ì™€ OCRì„ í†µí•©í•œ Python ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤. ì„¸ë¡œë¡œ ê¸´ ìƒì„¸í˜ì´ì§€ ì´ë¯¸ì§€ë¥¼ ì‹œê°ì  ê²½ê³„ ê¸°ì¤€ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì„¹ì…˜ ë¶„ë¦¬í•˜ê³ , ê° ì„¹ì…˜ì— ëŒ€í•´ OCRì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ–¼ï¸ ì´ë¯¸ì§€ ì„¹ì…˜ ë¶„ë¦¬ (Splitter)

-   ì„¸ë¡œë¡œ ê¸´ ìƒì„¸í˜ì´ì§€ ì´ë¯¸ì§€ë¥¼ ì‹œê°ì  ê²½ê³„ ê¸°ì¤€ìœ¼ë¡œ ìë™ ë¶„ë¦¬
-   OpenCV ê¸°ë°˜ì˜ ê³ ê¸‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜
-   ì‹œê°ì  ê²½ê³„ ê°ì§€ ë° ì•ˆì „í•œ ì„¹ì…˜ ë¶„í• 
-   ë¶„ë¦¬ëœ ì„¹ì…˜ ì •ë³´ë¥¼ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ì œê³µ

### ğŸ” OCR (Optical Character Recognition)

-   PaddleOCR ê¸°ë°˜ì˜ ê³ ì„±ëŠ¥ OCR ì—”ì§„
-   í•œêµ­ì–´(`korean`) í¬í•¨ ë‹¤êµ­ì–´ ì§€ì›
-   GPU/CPU ì„ íƒ ê°€ëŠ¥
-   ë°”ìš´ë”©ë°•ìŠ¤ì™€ í…ìŠ¤íŠ¸ ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì €ì¥

## ğŸ“¦ ì„¤ì¹˜

### **ì¤‘ìš”**

```bash
# paddlepaddle-gpu==3.2.0 ë²„ì „ì´ í•„ìˆ˜ ì…ë‹ˆë‹¤.
# pyproject.toml ì„¤ì • ì´í›„ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì£¼ì„¸ìš”

dependencies = [
    ...
    "paddlepaddle-gpu==3.2.0",
    ...
]

[tool.uv.sources]
paddlepaddle-gpu = { index = "paddle" }


[[tool.uv.index]]
name = "paddle"
url = "https://www.paddlepaddle.org.cn/packages/stable/cu126/"
explicit = true

> uv sync

```

```bash
# uv ì‚¬ìš© (ê¶Œì¥)
uv add gandol2-ocr

# pip ì‚¬ìš©
pip install gandol2-ocr
```

ë˜ëŠ” ì†ŒìŠ¤ì—ì„œ ì„¤ì¹˜:

```bash
# uv ì‚¬ìš©
uv add git+https://github.com/gandol2/gandol2-ocr.git

# pip ì‚¬ìš©
pip install git+https://github.com/gandol2/gandol2-ocr.git
```

## ğŸ–¥ï¸ ìš”êµ¬ ì‚¬í•­

-   Python **3.9-3.12** (pyproject.tomlì— ëª…ì‹œë¨)
-   (ì„ íƒ) NVIDIA GPU + CUDA 12.6 í™˜ê²½ (PaddlePaddle GPU ì§€ì›)

## ğŸš€ ì‚¬ìš©ë²•

### 1) ì´ë¯¸ì§€ ì„¹ì…˜ ë¶„ë¦¬

```python
from gandol2_ocr.splitter import split_image_sections

# ì´ë¯¸ì§€ë¥¼ ì„¹ì…˜ìœ¼ë¡œ ë¶„ë¦¬
sections = split_image_sections(
    image_path="./input/image.png",
    output_dir="./output"
)

print(f"ì´ {len(sections)}ê°œ ì„¹ì…˜ ìƒì„±:")
for section in sections:
    print(f"  {section.order}. {section.top}-{section.bottom} ({section.height}px)")
```

### 2) OCR ì‹¤í–‰

```python
from gandol2_ocr.ocr import run_ocr

# OCR ì‹¤í–‰
results = run_ocr(
    input_image="./input/image.png",
    output_dir="./output",
    lang="korean",
    device="gpu"
)

# ê²°ê³¼ ì¶œë ¥
for result in results:
    print(result["rec_texts"])
```

### 3) í†µí•© ì›Œí¬í”Œë¡œìš°

```python
from gandol2_ocr.splitter import split_image_sections
from gandol2_ocr.ocr import run_ocr

# 1ë‹¨ê³„: ì´ë¯¸ì§€ ì„¹ì…˜ ë¶„ë¦¬
sections = split_image_sections(
    image_path="./input/long_image.png",
    output_dir="./sections"
)

# 2ë‹¨ê³„: ê° ì„¹ì…˜ì— ëŒ€í•´ OCR ìˆ˜í–‰
for section in sections:
    ocr_results = run_ocr(
        input_image=section.path,
        output_dir=f"./ocr_results/section_{section.order}",
        lang="korean",
        device="gpu"
    )
    print(f"ì„¹ì…˜ {section.order}: {len(ocr_results)}ê°œ í…ìŠ¤íŠ¸ ê°ì§€")
```

### 4) ë‹¤ì–‘í•œ Import ë°©ë²•

```python
# ë°©ë²• 1: ìµœìƒìœ„ ëª¨ë“ˆ (ê¶Œì¥)
from gandol2_ocr.ocr import run_ocr
from gandol2_ocr.splitter import split_image_sections

# ë°©ë²• 2: íŒ¨í‚¤ì§€ ë ˆë²¨
from gandol2_ocr import run_ocr, split_image_sections

# ë°©ë²• 3: ì„œë¸Œëª¨ë“ˆ ì§ì ‘ ì ‘ê·¼
from gandol2_ocr.image_ocr.ocr import run_ocr
from gandol2_ocr.splitter.splitter import split_image_sections

# ë°©ë²• 4: í´ë˜ìŠ¤ import
from gandol2_ocr.splitter import ImageSectionSplitter, SectionInfo
```

## ğŸ§± í”„ë¡œì íŠ¸ êµ¬ì¡°

```
gandol2-ocr/
â”œâ”€ pyproject.toml
â”œâ”€ README.md
â”œâ”€ src/
â”‚  â””â”€ gandol2_ocr/        # ë©”ì¸ íŒ¨í‚¤ì§€
â”‚     â”œâ”€ __init__.py      # íŒ¨í‚¤ì§€ ì§„ì…ì 
â”‚     â”œâ”€ ocr.py           # ìµœìƒìœ„ OCR ëª¨ë“ˆ (re-export)
â”‚     â”œâ”€ splitter.py      # ìµœìƒìœ„ Splitter ëª¨ë“ˆ (re-export)
â”‚     â”œâ”€ image_ocr/       # ë‚´ë¶€ OCR ëª¨ë“ˆ
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ cli.py
â”‚     â”‚  â””â”€ ocr.py
â”‚     â””â”€ splitter/         # ë‚´ë¶€ Splitter ëª¨ë“ˆ
â”‚        â”œâ”€ __init__.py
â”‚        â””â”€ splitter.py
â”œâ”€ examples/
â”‚  â”œâ”€ demo_splitter.py    # ì„¹ì…˜ ë¶„ë¦¬ ì˜ˆì œ
â”‚  â””â”€ demo_ocr.py         # OCR ì˜ˆì œ
â”œâ”€ input/                 # ì…ë ¥ ì´ë¯¸ì§€
â””â”€ output/                # ì¶œë ¥ ê²°ê³¼
```

## ğŸ”§ API ì°¸ì¡°

### Splitter API

#### `split_image_sections(image_path, output_dir, debug_verbose=True, save_diagnostic=True)`

ì´ë¯¸ì§€ë¥¼ ì„¹ì…˜ìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ë©”ì¸ í•¨ìˆ˜ì…ë‹ˆë‹¤.

**ì‚¬ìš©ë²•:**

```python
from gandol2_ocr.splitter import split_image_sections
```

**ë§¤ê°œë³€ìˆ˜:**

-   `image_path` (str): ì…ë ¥ ì´ë¯¸ì§€ ê²½ë¡œ
-   `output_dir` (str): ì¶œë ¥ ë””ë ‰í† ë¦¬
-   `debug_verbose` (bool): ë””ë²„ê·¸ ì¶œë ¥ ì—¬ë¶€ (ê¸°ë³¸: True)
-   `save_diagnostic` (bool): ì§„ë‹¨ ì´ë¯¸ì§€ ì €ì¥ ì—¬ë¶€ (ê¸°ë³¸: True)

**ë°˜í™˜ê°’:**

-   `List[SectionInfo]`: ì„¹ì…˜ ì •ë³´ ë¦¬ìŠ¤íŠ¸

#### `SectionInfo` í´ë˜ìŠ¤

```python
@dataclass
class SectionInfo:
    order: int      # ì„¹ì…˜ ìˆœì„œ
    top: int        # ìƒë‹¨ ì¢Œí‘œ
    bottom: int     # í•˜ë‹¨ ì¢Œí‘œ
    height: int     # ì„¹ì…˜ ë†’ì´
    path: str       # ì €ì¥ëœ íŒŒì¼ ê²½ë¡œ
```

### OCR API

#### `run_ocr(input_image, output_dir, lang="korean", device="cpu")`

ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì¸ì‹í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

**ì‚¬ìš©ë²•:**

```python
from gandol2_ocr.ocr import run_ocr
```

**ë§¤ê°œë³€ìˆ˜:**

-   `input_image` (str): ì…ë ¥ ì´ë¯¸ì§€ ê²½ë¡œ
-   `output_dir` (str): ì¶œë ¥ ë””ë ‰í† ë¦¬
-   `lang` (str): OCR ì–¸ì–´ (ê¸°ë³¸: "korean")
-   `device` (str): "cpu" ë˜ëŠ” "gpu" (ê¸°ë³¸: "cpu")

**ë°˜í™˜ê°’:**

-   `List[dict]`: OCR ê²°ê³¼ ë¦¬ìŠ¤íŠ¸

## ğŸ§ª ì†Œë¹„ì¸¡ í…ŒìŠ¤íŠ¸

íŒ¨í‚¤ì§€ ì„¤ì¹˜ í›„ ë‹¤ìŒê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# test_gandol2_ocr.py
def test_all_import_methods():
    """ëª¨ë“  import ë°©ë²• í…ŒìŠ¤íŠ¸"""
    try:
        # ë°©ë²• 1: ìµœìƒìœ„ ëª¨ë“ˆ (ê¶Œì¥)
        from gandol2_ocr.ocr import run_ocr
        from gandol2_ocr.splitter import split_image_sections
        print("âœ… ìµœìƒìœ„ ëª¨ë“ˆ import ì„±ê³µ")

        # ë°©ë²• 2: íŒ¨í‚¤ì§€ ë ˆë²¨
        from gandol2_ocr import run_ocr as run_ocr2, split_image_sections as split_sections2
        print("âœ… íŒ¨í‚¤ì§€ ë ˆë²¨ import ì„±ê³µ")

        # ë°©ë²• 3: ì„œë¸Œëª¨ë“ˆ
        from gandol2_ocr.image_ocr.ocr import run_ocr as run_ocr3
        from gandol2_ocr.splitter.splitter import split_image_sections as split_sections3
        print("âœ… ì„œë¸Œëª¨ë“ˆ import ì„±ê³µ")

        # ë°©ë²• 4: í´ë˜ìŠ¤
        from gandol2_ocr.splitter import ImageSectionSplitter, SectionInfo
        print("âœ… í´ë˜ìŠ¤ import ì„±ê³µ")

        print("ğŸ‰ ëª¨ë“  import ë°©ë²• ì„±ê³µ!")
        return True

    except ImportError as e:
        print(f"âŒ Import ì˜¤ë¥˜: {e}")
        return False

if __name__ == "__main__":
    test_all_import_methods()
```

## ğŸ› ï¸ ê°œë°œ ë° ë°°í¬

### ë¡œì»¬ ë¹Œë“œ

```bash
uv build
```

### TestPyPI ì—…ë¡œë“œ

### PyPI ì—…ë¡œë“œ

```bash
twine upload dist/*
```

## ğŸ” ì°¸ê³ ì‚¬í•­

-   **ì˜ì¡´ì„±**: OpenCV, PaddleOCR, PaddlePaddle, Matplotlib, Pandas, SciPy
-   **GPU ì§€ì›**: CUDA 12.6 í™˜ê²½ì—ì„œ PaddlePaddle GPU ì‚¬ìš© ê°€ëŠ¥
-   **ì´ë¯¸ì§€ í˜•ì‹**: PNG, JPG, JPEG ë“± OpenCV ì§€ì› í˜•ì‹
-   **ì–¸ì–´ ì§€ì›**: PaddleOCRì´ ì§€ì›í•˜ëŠ” ëª¨ë“  ì–¸ì–´ (í•œêµ­ì–´, ì˜ì–´, ì¤‘êµ­ì–´ ë“±)

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License
