[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.bumpversion]
current_version = "3.1.0"
tag = false
commit = false
parse = """
    ^(?P<major>0|[1-9]\\d*)\\.
    (?P<minor>0|[1-9]\\d*)\\.
    (?P<patch>0|[1-9]\\d*)
    (?:
        .(?P<tag>dev0)
    )?$
"""
serialize = [
    "{major}.{minor}.{patch}.{tag}",
    "{major}.{minor}.{patch}",
]

[[tool.bumpversion.files]]
filename = "setup.cfg"
serialize = ["{major}.{minor}.{patch}"]
search = "version = {current_version}"
replace = "version = {new_version}"

[[tool.bumpversion.files]]
filename = "setup.cfg"
serialize = ["{tag}"]
search = "tag_build = {current_version}"
replace = "tag_build = {new_version}"

[[tool.bumpversion.files]]
filename = "src/inmanta_module_factory/__init__.py"
serialize = ["{major}.{minor}.{patch}"]
search = '__version__ = "{current_version}"'
replace = '__version__ = "{new_version}"'

[tool.bumpversion.parts.tag]
values = ["dev0", ""]
optional_value = ""
