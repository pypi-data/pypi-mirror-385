# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è

## –í–µ—Ä—Å–∏—è 0.0.5 - LaraQueue (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### –î–∞—Ç–∞: 16 –æ–∫—Ç—è–±—Ä—è 2025

### üè∑Ô∏è Type Hints - –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–∏–ø–∞–º–∏

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–Ω—ã–µ type hints –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–∏–ø–æ–≤** –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **IDE –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ** –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Optional –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** —Å —Ç–∏–ø–∞–º–∏ `Optional[T]`
- **Generic —Ç–∏–ø—ã** –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏–∑ `typing`: `Dict`, `List`, `Optional`, `Union`, `Any`, `Callable`, `Tuple`
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö type hints

#### Type hints –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
- **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: `push()`, `listen()`, `handler()` —Å –ø–æ–ª–Ω—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
- **Dead Letter Queue –º–µ—Ç–æ–¥—ã**: –í—Å–µ DLQ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã —Å type hints
- **Redis –º–µ—Ç–æ–¥—ã**: `redisPush()`, `redisPop()` —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IDE**: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å mypy
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –¢–∏–ø—ã —Å–ª—É–∂–∞—Ç –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ Python –≤–µ—Ä—Å–∏—è–º–∏

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **14 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ type hints
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è**: –í—Å–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç type hints
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∏–ø–æ–≤

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **Type Hints Example**: –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**: Type aliases –∏ generic —Ç–∏–ø—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤**: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è type safety

## –í–µ—Ä—Å–∏—è 0.0.4 - LaraQueue (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### –î–∞—Ç–∞: 16 –æ–∫—Ç—è–±—Ä—è 2025

### üíÄ Dead Letter Queue - –û—á–µ—Ä–µ–¥—å –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ Dead Letter Queue
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (5s, 10s, 20s, 40s, –º–∞–∫—Å 60s)
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3 –ø–æ–ø—ã—Ç–∫–∏)
- **Dead Letter Queue** –¥–ª—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á
- **–ü–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á** –∏–∑ Dead Letter Queue
- **–ü–æ–ª–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** —Å –¥–µ—Ç–∞–ª—è–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

#### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- `dead_letter_queue`: –ò–º—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `{queue}:failed`)
- `max_retries`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3)

#### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
- `get_dead_letter_jobs()`: –ü–æ–ª—É—á–∏—Ç—å –Ω–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–∑ DLQ
- `reprocess_dead_letter_job()`: –ü–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–¥–∞—á—É –∏–∑ DLQ
- `clear_dead_letter_queue()`: –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ DLQ

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–¥–∞—á
- **–£—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –û—á–∏—Å—Ç–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫
- **–ù–µ—É–¥–∞—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –õ–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ DLQ**: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –≤ DLQ –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: –ù–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ç–µ—Ä–∏ –∑–∞–¥–∞—á**: –ù–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ DLQ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É
- **–†—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **23 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞** –¥–ª—è –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ DLQ
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –ª–æ–≥–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π DLQ
- **–¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** –¥–ª—è Redis –æ—à–∏–±–æ–∫ –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

## –í–µ—Ä—Å–∏—è 0.0.3 - LaraQueue (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### –î–∞—Ç–∞: 16 –æ–∫—Ç—è–±—Ä—è 2025

### üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `src/lara_queue/queue.py`

##### 1. **–ò–º–ø–æ—Ä—Ç—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏–∑ `redis.exceptions`:
  - `ConnectionError as RedisConnectionError` - –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
  - `TimeoutError as RedisTimeoutError` - —Ç–∞–π–º–∞—É—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π Redis
  - `RedisError` - –æ–±—â–∏–µ –æ—à–∏–±–∫–∏ Redis
- –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `logging` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- –°–æ–∑–¥–∞–Ω –ª–æ–≥–≥–µ—Ä `logger = logging.getLogger(__name__)`

##### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –º–µ—Ç–æ–¥–µ `redisPop()`**

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis:**
- `RedisConnectionError`: –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∂–¥—ë—Ç 5 —Å–µ–∫—É–Ω–¥ –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
- `RedisTimeoutError`: –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É
- `RedisError`: –ñ–¥—ë—Ç 3 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É
- `KeyboardInterrupt`: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –≤–æ—Ä–∫–µ—Ä–∞

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö:**
- `json.JSONDecodeError`: –õ–æ–≤–∏—Ç –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON, –ª–æ–≥–∏—Ä—É–µ—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
- `KeyError` –∏ –æ–±—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PHP –æ–±—ä–µ–∫—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π (–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–æ—Ä–∫–µ—Ä)

**–û–±—Ä–∞–±–æ—Ç–∫–∞ notify –æ—á–µ—Ä–µ–¥–∏:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π try/except –¥–ª—è `blpop` notify –æ—á–µ—Ä–µ–¥–∏
- –ï—Å–ª–∏ notify –ø–∞–¥–∞–µ—Ç, –≤–æ—Ä–∫–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É (notify –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω)

**–û–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –í—Å–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º traceback
- –í–æ—Ä–∫–µ—Ä –∂–¥—ë—Ç 2 —Å–µ–∫—É–Ω–¥—ã –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

##### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –º–µ—Ç–æ–¥–µ `redisPush()`**

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:**
- –û—à–∏–±–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PHP –æ–±—ä–µ–∫—Ç–∞: –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `ValueError` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è JSON payload: –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `ValueError`

**–û–±—Ä–∞–±–æ—Ç–∫–∞ Redis –æ–ø–µ—Ä–∞—Ü–∏–π:**
- `RedisConnectionError`: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `ConnectionError` Python
- `RedisTimeoutError`: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `TimeoutError` Python  
- `RedisError`: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `RuntimeError` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG

**–û–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –í—Å–µ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤—ã—à–µ
- –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ `RuntimeError`

##### 4. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

‚úÖ **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ —Å Redis
- Retry –ª–æ–≥–∏–∫–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- Debug –ª–æ–≥–∏ –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü–æ–ª–Ω—ã–µ traceback –¥–ª—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ JSON
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PHP –æ–±—ä–µ–∫—Ç–æ–≤
- –í–æ—Ä–∫–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ KeyboardInterrupt –¥–ª—è graceful shutdown
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ—Ä–∫–µ—Ä–∞

‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- –ß—ë—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Python –∏—Å–∫–ª—é—á–µ–Ω–∏—è (ConnectionError, TimeoutError)
- Chain –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `from e`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## –í–µ—Ä—Å–∏—è 0.0.2 - LaraQueue

### –î–∞—Ç–∞: 15 –æ–∫—Ç—è–±—Ä—è 2025

### üéâ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞
- **–°—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:** python-laravel-queue
- **–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:** LaraQueue
- **–ú–æ–¥—É–ª—å:** lara_queue (–≤–º–µ—Å—Ç–æ python_laravel_queue)
- **–í–µ—Ä—Å–∏—è:** 0.0.2 (–±—ã–ª–æ 0.0.1b2)

### ‚ùå –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:

#### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è phpserialize
**–§–∞–π–ª:** `src/lara_queue/queue.py:3`
- **–ë—ã–ª–æ:** `import module.phpserialize as phpserialize`
- **–°—Ç–∞–ª–æ:** `from .module import phpserialize`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤–º–µ—Å—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–≤–æ–¥–∏–ª –∫ ImportError
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ Redis blpop
**–§–∞–π–ª:** `src/lara_queue/queue.py:40-41`
- **–ë—ã–ª–æ:** `err, data = self.client.blpop(...)`
- **–°—Ç–∞–ª–æ:** `result = self.client.blpop(...)`  
           `key, data = result`
- **–ü—Ä–æ–±–ª–µ–º–∞:** Redis blpop –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ), –∞ –Ω–µ (–æ—à–∏–±–∫–∞, –¥–∞–Ω–Ω—ã–µ)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ blpop
**–§–∞–π–ª:** `src/lara_queue/queue.py:43-46`
- **–ë—ã–ª–æ:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None
- **–°—Ç–∞–ª–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if result is None` —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º –≤—ã–∑–æ–≤–æ–º
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ blpop –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∫—Ä–∞—Ö—É
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 4. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è blpop
**–§–∞–π–ª:** `src/lara_queue/queue.py:41`
- **–ë—ã–ª–æ:** `60000` (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
- **–°—Ç–∞–ª–æ:** `60` (—Å–µ–∫—É–Ω–¥—ã)
- **–ü—Ä–æ–±–ª–µ–º–∞:** Python Redis –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –Ω–µ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### 5. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π pyee
**–§–∞–π–ª:** `src/lara_queue/queue.py:4,21`
- **–ë—ã–ª–æ:** `from pyee import BaseEventEmitter` –∏ `BaseEventEmitter()`
- **–°—Ç–∞–ª–æ:** `from pyee.base import EventEmitter` –∏ `EventEmitter()`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö pyee (12.0+) –Ω–µ—Ç BaseEventEmitter
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

### 1. –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
**–°–æ–∑–¥–∞–Ω–æ:**
- `tests/__init__.py` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
- `tests/conftest.py` - —Ñ–∏–∫—Å—Ç—É—Ä—ã pytest
- `tests/test_queue_unit.py` - 13 unit-—Ç–µ—Å—Ç–æ–≤
- `tests/test_integration.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `tests/test_manual.py` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `tests/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
**–°–æ–∑–¥–∞–Ω–æ:**
- `pytest.ini` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
- –ú–∞—Ä–∫–µ—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è unit –∏ integration —Ç–µ—Å—Ç–æ–≤

### 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
**–°–æ–∑–¥–∞–Ω–æ:**
- `requirements-dev.txt` - pytest, pytest-mock, black, flake8, mypy, isort

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–°–æ–∑–¥–∞–Ω–æ:**
- `TESTING.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `CHANGELOG_FIXES.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
============================= test session starts =============================
platform win32 -- Python 3.10.5, pytest-8.4.2, pluggy-1.6.0
cachedir: .pytest_cache
rootdir: C:\etc\python-laravel-queue-main
configfile: pytest.ini
plugins: mock-3.15.1, anyio-4.3.0
collected 13 items

tests/test_queue_unit.py::TestQueueInit::test_init_with_defaults PASSED  [  7%]
tests/test_queue_unit.py::TestQueueInit::test_init_with_custom_params PASSED [ 15%]
tests/test_queue_unit.py::TestQueuePush::test_push_calls_redis_rpush PASSED [ 23%]
tests/test_queue_unit.py::TestQueuePush::test_push_creates_valid_json_payload PASSED [ 30%]
tests/test_queue_unit.py::TestQueuePush::test_push_with_queue_notify_false PASSED [ 38%]
tests/test_queue_unit.py::TestQueuePush::test_push_with_custom_appname_and_prefix PASSED [ 46%]
tests/test_queue_unit.py::TestQueueHandler::test_handler_as_decorator PASSED [ 53%]
tests/test_queue_unit.py::TestQueueHandler::test_handler_as_function_call PASSED [ 61%]
tests/test_queue_unit.py::TestQueueHandler::test_multiple_handlers PASSED [ 69%]
tests/test_queue_unit.py::TestQueuePop::test_pop_handles_timeout PASSED [ 76%]
tests/test_queue_unit.py::TestQueuePop::test_pop_parses_valid_payload PASSED [ 84%]
tests/test_queue_unit.py::TestQueuePop::test_pop_with_queue_notify PASSED [ 92%]
tests/test_queue_unit.py::TestQueueListen::test_listen_calls_redis_pop PASSED [100%]

============================= 13 passed in 0.18s ==============================
```

**‚úÖ –í—Å–µ 13 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ!**

---

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –≤ –±—É–¥—É—â–µ–º:

1. [x] **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º
2. [x] **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - try/except –±–ª–æ–∫–∏ –¥–ª—è Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. [x] **Graceful shutdown** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
4. [] **Metrics** - —Å—á–µ—Ç—á–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
5. [] **Retry –º–µ—Ö–∞–Ω–∏–∑–º** - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–ø–∞–≤—à–∏—Ö –∑–∞–¥–∞—á
6. [x] **Dead letter queue** - –æ—á–µ—Ä–µ–¥—å –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á
7. [] **Type hints** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–∏–ø–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
8. [] **Async support** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ asyncio –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
pytest tests/test_queue_unit.py -v
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
python -m tests.test_manual
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:
```python
from redis import Redis
from lara_queue import Queue

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
r = Redis(host='localhost', port=6379, db=0)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏ –≤ Laravel
queue = Queue(r, queue='laravel')
queue.push('App\\Jobs\\ProcessData', {'user_id': 123, 'action': 'sync'})

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –æ—Ç Laravel
queue_python = Queue(r, queue='python')

@queue_python.handler
def handle(data):
    job_name = data['name']
    job_data = data['data']
    print(f'Processing {job_name}: {job_data}')

queue_python.listen()
```

---

## ‚ú® –ò—Ç–æ–≥–æ:

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 13 unit-—Ç–µ—Å—Ç–æ–≤ (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü–∞–∫–µ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–°—Ç–∞—Ç—É—Å:** üöÄ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£ (—Å —É—á–µ—Ç–æ–º beta-—Å—Ç–∞—Ç—É—Å–∞)

