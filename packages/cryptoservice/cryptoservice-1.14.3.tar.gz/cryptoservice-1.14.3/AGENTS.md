# Repository Guidelines

## Project Structure & Module Organization
- `src/cryptoservice/`: core package with async services, storage, and models grouped by domain (clients, services, storage, utils).
- `tests/`: pytest suite mirroring package layout; async fixtures live in `tests/__init__.py`.
- `docs/` and `mkdocs.yml`: MkDocs-driven documentation.
- `scripts/`: automation helpers such as `prepare_release.py` for versioning and release branches.
- `demo/` and `examples/`: runnable usage samples; keep them in sync with public APIs when adding features.

## Build, Test, and Development Commands
- `python3 -m pip install -e .[dev-all]`: install project plus dev tools (via uv or pip).
- `ruff format && ruff check`: format/lint code to repository standards.
- `pytest -v --cov=src/cryptoservice`: run the async test suite with coverage details.
- `python3 scripts/prepare_release.py <version> --auto --push`: create release branch, run tests, tag, and push once the tree is clean.

## Coding Style & Naming Conventions
- Python â‰¥3.10 with async-first design; prefer `async/await` and type hints everywhere.
- Follow Ruff defaults: 120-character lines, double quotes, spaces for indentation.
- Keep modules small and feature-focused; filenames use snake_case, classes use PascalCase, constants uppercase.
- Run `ruff check --fix` before committing to catch security and style issues early.

## Testing Guidelines
- Tests rely on `pytest`, `pytest-asyncio`, and coverage; new code should include async tests mirroring service behavior.
- Name test files `tests/test_*.py`; structure tests to reflect module boundaries (e.g., `services` tests in `tests/test_services.py`).
- For regression coverage, add parametrized cases rather than duplicating fixtures; update expected artifacts in `data/` sparingly and document any large fixtures.

## Commit & Pull Request Guidelines
- Use Conventional Commits (`feat`, `fix`, `docs`, `chore`, etc.); release commits are generated by `prepare_release.py`.
- PRs should explain motivation, link issues, and list manual verification (tests run, docs updated). Include screenshots or logs when touching demos.
- Keep PRs focused: refactors separate from feature work; update docs/examples alongside code changes.

## Security & Configuration Tips
- Secrets live in `.env` (e.g., `BINANCE_API_KEY`, `BINANCE_API_SECRET`); never commit real credentials.
- When adding integrations, document required environment variables in `docs/` and provide safe defaults for local runs.
