"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[5375],{2983:(e,t,n)=>{n.r(t),n.d(t,{LinoEditor:()=>g,name:()=>P});var o=n(467),r=n(4467),a=n(3029),i=n(2901),l=n(6822),c=n(5501),s=n(3954),u=n(991),p=n(4756),d=n.n(p),f=n(6540),m=n(6606),y=n(7970),h=n(2756);n(1151);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function E(e,t,n,o){var r=(0,u.A)((0,s.A)(1&o?e.prototype:e),t,n);return 2&o&&"function"==typeof r?function(e){return r.apply(n,e)}:r}var k,P="LinoEditor";k={AbortController:n.e(4166).then(n.t.bind(n,5568,23)),i18n:Promise.all([n.e(1304),n.e(8605),n.e(7211)]).then(n.bind(n,2292)),prUtils:n.e(8026).then(n.bind(n,4881))};(0,m.RegisterImportPool)(k);var g=function(e){function t(e){var n,o,r,i;return(0,a.A)(this,t),o=this,r=t,i=[e],r=(0,s.A)(r),(n=(0,l.A)(o,w()?Reflect.construct(r,i||[],(0,s.A)(o).constructor):r.apply(o,i))).state=v(v({},n.state),{},{plain:"plain"===e.elem.field_options.format}),n.closeEditor=n.closeEditor.bind(n),n.onGlobalKeyDown=n.onGlobalKeyDown.bind(n),n}return(0,c.A)(t,e),(0,i.A)(t,[{key:"prepare",value:(n=(0,o.A)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,E(t,"prepare",this,3)([]);case 1:this.controller=new this.ex.AbortController.default,this.ex.i18n=this.ex.i18n.default;case 2:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"onReady",value:function(){window.addEventListener("keydown",this.onGlobalKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onGlobalKeyDown),this.controller.abort()}},{key:"onGlobalKeyDown",value:function(e){"Escape"==e.code&&this.closeEditor(e)}},{key:"closeEditor",value:function(e){var t=this.c,n=function(){t.history.pushPath({pathname:"/api/".concat(t.value.packId,"/").concat(t.value.actorId,"/").concat(t.value.pk),params:t.actionHandler.defaultStaticParams()})};t.isModified()?t.actionHandler.discardModDConfirm({agree:n}):n()}},{key:"headerExtend",value:function(){var e=this;return f.createElement(f.Fragment,null,this.state.plain?(0,y.Zn)(this):y.PH.commonHeader(this),f.createElement("span",{className:"ql-formats"},f.createElement("button",{type:"button",onClick:function(t){return e.c.actionHandler.submit({})},"aria-label":"Submit changes"},f.createElement("i",{className:"pi pi-save"})),f.createElement("button",{type:"button",onClick:this.closeEditor,"aria-label":"Close window"},f.createElement("i",{className:"pi pi-times"}))))}},{key:"render",value:function(){var e=this;return this.state.ready?f.createElement(m.URLContextType.Consumer,null,function(t){var n=t.controller.APP,o=(0,y.tA)(n,t.controller.actionHandler.silentFetch,e.controller.signal,t.controller.mentionValues,e.ex.i18n,e),r=o.modules,a=o.meta;return f.createElement("div",{className:"l-editor",spellCheck:!n.state.site_data.disable_spell_check,onKeyDown:function(t){(t.ctrlKey||t.metaKey)&&"KeyS"===t.code?(t.stopPropagation(),t.preventDefault(),e.c.actionHandler.submit({})):t.ctrlKey&&t.shiftKey&&"KeyL"==t.code?(t.stopPropagation(),t.preventDefault(),(0,y.TY)(e)):"Escape"!==t.code&&t.stopPropagation()}},f.createElement("div",{id:a.toolbarID},e.headerExtend()),f.createElement(y.ki,{config:{modules:r,theme:"snow"},onTextChange:(0,y.zl)(e),onReady:function(t){window.elem=e,e.quill=t,(0,y.a7)(e,t),(0,y.kA)(t),t.focus()}}),f.createElement("div",{id:"raw-editor-container",onKeyDown:function(e){return e.stopPropagation()}}))}):null}}]);var n}(h.LeafComponentInput);g.requiredModules=["i18n","AbortController","prUtils"].concat(h.LeafComponentInput.requiredModules),g.iPool=Object.assign(k,h.LeafComponentInput.iPool.copy()),g.defaultProps=v(v({},h.LeafComponentInput.defaultProps),{},{leafIndex:0})}}]);
//# sourceMappingURL=main.LinoEditor_LinoBody.0ffecf96a74102e1126b.js.map