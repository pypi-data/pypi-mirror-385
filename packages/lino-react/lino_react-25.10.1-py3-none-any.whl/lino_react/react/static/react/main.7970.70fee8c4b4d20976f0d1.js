"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[7970],{7970:(e,t,n)=>{n.d(t,{PH:()=>P,TY:()=>R,Zn:()=>M,a7:()=>k,kA:()=>L,ki:()=>d.Ay,tA:()=>C,zl:()=>w});var l=n(4467),a=n(296),o=n(6822),r=n(3954),i=n(5501),s=n(3029),c=n(2901),u=n(5548),m=n(1356),d=n(1669),p=n(537),f=n(194),b=n(3117),g=n.n(b),h=n(6540),v=n(6606);n(5065);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}var q=m.Ay.import("modules/table"),y=function(){return(0,c.A)(function e(t,n,l){(0,s.A)(this,e),n.getModule("table"),this.params=t,this.menuItems=t.menuItems,this.quill=n,this.options=l,this.showMenu(),this.destroyHandler=this.destroy.bind(this),document.addEventListener("click",this.destroyHandler)},[{key:"showMenu",value:function(){var e=this.domNode=document.createElement("div");e.style.position="absolute",e.style.left="".concat(this.params.left,"px"),e.style.top="".concat(this.params.top,"px");Object.values(this.menuItems).forEach(function(t){e.appendChild(function(e){var t=document.createElement("div");t.classList.add("l-span-clickable");var n=document.createElement("span");if(e.iconClass){var l=document.createElement("i");l.classList.add("pi"),l.classList.add(e.iconClass),n.appendChild(l)}else n.innerText=e.icon;n.style.width="3ch",n.style.display="inline-block",n.style["text-align"]="center";var a=document.createElement("span");return a.innerText=e.text,t.appendChild(n),t.appendChild(a),t.addEventListener("click",e.handler),t}(t))}),document.body.appendChild(e)}},{key:"destroy",value:function(){return this.domNode.remove(),document.removeEventListener("click",this.destroyHandler),null}}])}(),A=function(e){function t(e,n){var l,i,c,u;return(0,s.A)(this,t),i=this,c=t,u=[e,n],c=(0,r.A)(c),l=(0,o.A)(i,E()?Reflect.construct(c,u||[],(0,r.A)(i).constructor):c.apply(i,u)),e.root.addEventListener("contextmenu",function(t){var o=l.getTable();null!==(0,a.A)(o,1)[0]&&(t.preventDefault(),l.tableMenu&&(l.tableMenu=l.tableMenu.destroy()),l.tableMenu=new y({menuItems:l.getMenuItems(n.i18n),left:t.pageX,top:t.pageY},e,n))}),l}return(0,i.A)(t,e),(0,c.A)(t,[{key:"getMenuItems",value:function(e){var t=this;return{insertColumnLeft:{text:e.t("Insert column left"),icon:"⭰",handler:function(){t.quill.focus(),t.insertColumnLeft()}},insertColumnRight:{text:e.t("Insert column right"),icon:"⭲",handler:function(){t.quill.focus(),t.insertColumnRight()}},insertRowAbove:{text:e.t("Insert row above"),icon:"⭱",handler:function(){t.quill.focus(),t.insertRowAbove()}},insertRowBelow:{text:e.t("Insert row below"),icon:"⭳",handler:function(){t.quill.focus(),t.insertRowBelow()}},deleteColumn:{text:e.t("Delete column"),iconClass:"pi-delete-left",handler:function(){t.quill.focus(),t.deleteColumn()}},deleteRow:{text:e.t("Delete row"),iconClass:"pi-eraser",handler:function(){t.quill.focus(),t.deleteRow()}},deleteTable:{text:e.t("Delete table"),iconClass:"pi-trash",handler:function(){t.quill.focus(),t.deleteTable()}}}}}])}(q);m.Ay.register("modules/table",A),m.Ay.register("modules/imageDropAndPaste",p.A),m.Ay.register("modules/blotFormatter2",f.Ay),m.Ay.register({"blots/mention":u.Yj,"modules/mention":u.PX}),m.Ay.register("modules/htmlEditButton",g());var N,x=p.A.ImageData;N={queryString:Promise.all([n.e(4166),n.e(2298)]).then(n.bind(n,8091))};(0,v.RegisterImportPool)(N);var k=function(e,t){var n=e.getValue();e.state.plain?t.setText(n||""):t.clipboard.dangerouslyPasteHTML(n)},C=function(e,t,n,l,o,r){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s="l-ql-toolbar-".concat(r.props.elem.name),c={toolbar:"#".concat(s),mention:H({silentFetch:t,signal:n,mentionValues:l}),blotFormatter2:{debug:!0,resize:{useRelativeSize:!0}},table:{i18n:o}};return i&&(c.htmlEditButton={msg:o.t('Edit HTML here, when you click "OK" the quill editor\'s contents will be replaced'),prependSelector:"div#raw-editor-container",okText:o.t("Ok"),cancelText:o.t("Cancel"),buttonTitle:o.t("Show HTML source")}),e.state.site_data.installed_plugins.includes("uploads")&&(c.imageDropAndPaste={handler:I(r)}),c.keyboard={bindings:{home:{key:"Home",handler:function(e,t){var n=r.quill,l=n.getLine(e.index),o=(0,a.A)(l,2),i=o[0];o[1];return!i||"LI"!==i.domNode.tagName||(n.setSelection(i.offset(n.scroll),0,"user"),!1)}}}},i||delete c.toolbar,{modules:c,meta:{toolbarID:s}}},w=function(e){return function(t,n,a){var o=e.quill,r=o.container.children[0],i=r?r.innerHTML:null,s=o.getText();if("<p><br></p>"===i&&(i=null),"api"===a){var c=o.container.children[0],u=document.createElement("div");if(u.innerHTML=e.getValue()||"",e.ex.prUtils.DomHandler.isEqualElement(c,u))return}!function(e,t){var n=t.textValue.slice(0,-1),a=(e.state.plain?n:t.htmlValue)||"";e.update((0,l.A)({},e.dataKey,a))}(e,{htmlValue:i,textValue:s,delta:t,source:a})}},L=function(e){e.getModule("toolbar").addHandler("image",function(t){var n;t&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",function(t){var l,a=t.target.files;if(a.length>0){var o=(l=a[0]).type,r=new FileReader;r.onload=function(t){var a=t.target.result;I({quill:e})(a,o,new x(a,o,l.name)),n.value=""},r.readAsDataURL(l)}}),n.click())})},I=function(e){return function(t,n,l){var a=e.quill,o=(a.getSelection()||{}).index;(void 0===o||o<0)&&(o=a.getLength()),a.insertEmbed(o,"image",t)}},H=function(e){var t=e.silentFetch,n=e.signal,l=e.mentionValues;return{allowedChars:/^[A-Za-z0-9\s]*$/,mentionDenotationChars:window.App.state.site_data.suggestors,source:function(e,a,o){if(0===e.length){var r=l[o];a(r,e)}else N.resolve(["queryString"]).then(function(l){var r=l.queryString;t({path:"suggestions?".concat(r.default.stringify({query:e,trigger:o})),signal:n}).then(function(t){return a(t.suggestions,e)})})},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",dataAttributes:["value","link","title","denotationChar"]}},T=h.createElement(h.Fragment,null,h.createElement("span",{className:"ql-formats"},h.createElement("select",{className:"ql-header",defaultValue:"0"},h.createElement("option",{value:"1"},"Header 1"),h.createElement("option",{value:"2"},"Header 2"),h.createElement("option",{value:"3"},"Header 3"),h.createElement("option",{value:"4"},"Header 4"),h.createElement("option",{value:"0"},"Normal")),h.createElement("select",{className:"ql-font"},h.createElement("option",{defaultValue:!0}),h.createElement("option",{value:"serif"}),h.createElement("option",{value:"monospace"}))),h.createElement("span",{className:"ql-formats"},h.createElement("select",{className:"ql-size"},h.createElement("option",{value:"small"}),h.createElement("option",{defaultValue:!0}),h.createElement("option",{value:"large"}),h.createElement("option",{value:"huge"}))),h.createElement("span",{className:"ql-formats"},h.createElement("button",{className:"ql-script",value:"sub"}),h.createElement("button",{className:"ql-script",value:"super"})),h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),h.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),h.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),h.createElement("span",{className:"ql-formats"},h.createElement("select",{className:"ql-color"}),h.createElement("select",{className:"ql-background"})),h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),h.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),h.createElement("select",{className:"ql-align"},h.createElement("option",{defaultValue:!0}),h.createElement("option",{value:"center"}),h.createElement("option",{value:"right"}),h.createElement("option",{value:"justify"}))),h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),h.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),h.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),R=function(e){var t=e.props.urlParams.controller.APP.URLContext,n=(e.quill.getSelection()||{}).index;(void 0===n||n<0)&&(n=e.quill.getLength()),t.actionHandler.runAction({action_full_name:t.actionHandler.findUniqueAction("insert_reference").full_name,actorId:"about.About",response_callback:function(t){t.success&&e.quill.insertText(n,t.message)}})},M=function(e){return e.c.APP.state.site_data.installed_plugins.includes("memo")?h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",onClick:function(t){return R(e)},"aria-label":"Open link dialog"},h.createElement("i",{className:"pi pi-link"}))):null},P={header:T,commonHeader:function(e){return h.createElement(h.Fragment,null,T,M(e),h.createElement("span",{className:"ql-formats"},h.createElement("button",{type:"button",onClick:function(t){var n=e.ex.i18n.t("rows x columns"),a=e.ex.i18n.t("Rows"),o=e.ex.i18n.t("Columns"),r=e.props.urlParams.controller;r.APP.dialogFactory.createParamDialog(r,(0,l.A)((0,l.A)({},a,"IntegerFieldElement"),o,"IntegerFieldElement"),n,function(t){var n=parseInt(t.context.data[a]),l=parseInt(t.context.data[o]),r=e.quill.getModule("table");e.quill.focus(),r.insertTable(n,l);var i=t.current.root.props,s=i.factory,c=i.id;s.remove(c)})}},h.createElement("i",{className:"pi pi-table"}))))}}}}]);
//# sourceMappingURL=main.7970.70fee8c4b4d20976f0d1.js.map