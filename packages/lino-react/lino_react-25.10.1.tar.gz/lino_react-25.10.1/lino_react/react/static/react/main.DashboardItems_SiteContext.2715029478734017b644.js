"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[4580],{5272:(t,e,r)=>{r.r(e),r.d(e,{DashboardItems:()=>R,name:()=>j});var n=r(5458),a=r(467),o=r(4467),i=r(3029),s=r(2901),c=r(6822),u=r(5501),l=r(3954),p=r(991),d=r(4756),h=r.n(d),f=r(6540),m=r(5556),y=r.n(m),b=r(6606);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach(function(e){(0,o.A)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function A(t,e,r){return e=(0,l.A)(e),(0,c.A)(t,g()?Reflect.construct(e,r||[],(0,l.A)(t).constructor):e.apply(t,r))}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(g=function(){return!!t})()}function k(t,e,r,n){var a=(0,p.A)((0,l.A)(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof a?function(t){return a.apply(r,t)}:a}var O,j="DashboardItems";O={lm:Promise.resolve().then(r.bind(r,8546)),prButton:Promise.all([r.e(8026),r.e(1927),r.e(8887),r.e(5573),r.e(7335),r.e(9685),r.e(7801)]).then(r.bind(r,9119)),queryString:Promise.all([r.e(4166),r.e(2298)]).then(r.bind(r,8091))};(0,b.RegisterImportPool)(O);var D=function(t){function e(t){var r;return(0,i.A)(this,e),r=A(this,e,[t]),x.call(r),r.state=P(P({},r.state),{},{data:null,mask:!0,actorID:null}),r.reload=r.reloadData,r}return(0,u.A)(e,t),(0,s.A)(e,[{key:"prepare",value:(r=(0,a.A)(h().mark(function t(){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:k(e,"prepare",this,3)([]),this.ex.queryString=this.ex.queryString.default;case 1:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"onReady",value:function(){this.reloadData()}},{key:"render",value:function(){var t=this;if(!this.state.ready)return null;var e=this.state.data;return this.props.APP.URLContext.filled(e)?f.createElement(this.ex.lm.LoadingMask,{mask:this.state.mask},!this.props.dashboardMain&&f.createElement(this.ex.prButton.Button,{icon:"pi pi-refresh",style:{float:"right"},onClick:function(e){t.reloadData(!0)}}),f.createElement("div",{dangerouslySetInnerHTML:{__html:e}})):null}}]);var r}(b.Component);D.requiredModules=["lm","queryString","prButton"],D.iPool=O,D.propTypes={itemIndex:function(t){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(!t.dashboardMain)return(e=y().number).isRequired.apply(e,[t].concat(n))},dashboardMain:y().bool.isRequired,APP:y().object.isRequired},D.defaultProps={dashboardMain:!1};var x=function(){var t=this;this.liveUpdate=function(e){return t.reload()},this.reloadData=function(e){t.setState({mask:!0});var r={fmt:"json"},n=t.props.APP,a=n.URLContext.actionHandler;a.commonParams(r);var o=t.props.dashboardMain?"api/main_html":"dashboard/".concat(t.props.itemIndex);a.silentFetch({path:"".concat(o,"?").concat(t.ex.queryString.stringify(r)),signal:a.abortController.signal}).then(function(r){!r.version_mismatch||0!==t.props.itemIndex&&!e?t.setState({data:r.html,mask:!1,actorID:r.actorID}):n.reload()})}},R=function(t){function e(t){var r;return(0,i.A)(this,e),(r=A(this,e,[t])).state=P(P({},r.state),{},{items:Array((t.APP.state.user_settings.dashboard_items||0)+1)}),r.reloadData=r.reload,r}return(0,u.A)(e,t),(0,s.A)(e,[{key:"reload",value:function(){this.props.APP.URLContext.actionHandler.clearRequestPool(),this.state.items.forEach(function(t,e){t.reload()})}},{key:"render",value:function(){var t=this;return this.state.ready?f.createElement("div",null,(0,n.A)(this.state.items.keys()).map(function(e){return f.createElement(D,{dashboardMain:0===e,itemIndex:e-1,APP:t.props.APP,key:e,ref:function(r){return t.state.items[e]=r}})})):null}}])}(b.Component);R.propTypes={APP:y().object.isRequired}}}]);
//# sourceMappingURL=main.DashboardItems_SiteContext.2715029478734017b644.js.map