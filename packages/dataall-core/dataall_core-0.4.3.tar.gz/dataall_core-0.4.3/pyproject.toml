[project]
name = "dataall-core"
version = "0.4.3"
description = "AWS data.all core"
authors = [{ name = "Amazon Web Services" }]
license = { text = "Apache License 2.0" }
readme = "README.md"
keywords = ["dataall", "aws"]
classifiers = [
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]
requires-python = ">=3.9, <4.0"
dependencies = [
    "boto3>=1.28.22,<2.0.0",
    "botocore>=1.31.22,<2.0.0",
    "typing-extensions>=4.4.0,<5.0.0",
    "packaging>=24.2",
    "click>=8.1.6,<9.0.0",
    "ariadne>=0.22,<1.0.0",
    "atomicfile>=1.0.1,<2.0.0",
    "beautifulsoup4>=4.12.2,<5.0.0",
    "build>=0.10.0,<1.0.0",
    "PyYAML>=6.0.1,<7.0.0",
    "requests>=2.31.0,<3.0.0",
    "configparser>=6.0.0,<7.0.0",
    "graphql-core>=3.2.3,<4.0.0",
    "httpx>=0.27.0,<1.0.0",
    "retrying>=1.3.4,<2.0.0",
    "setuptools; python_version >= '3.12'",
    "requests-oauthlib>=2.0.0,<3.0.0",
    "requests-mock>=1.12.1,<2.0.0",
    "certifi>=2024.7.4",
]

[tool.poetry]
include = ["README.md"]
exclude = ["*.so", "*.pyc", "*~", "#*", ".git*", ".coverage*", "DS_Store", "__pycache__"]




[tool.poetry.group.dev.dependencies]
# Build
setuptools = "*"
wheel = "^0.45.1"
msgpack = "*"

# Lint
boto3-stubs = { version = "^1.39.3", extras = ["athena", "cleanrooms", "chime", "cloudwatch", "dynamodb", "ec2", "emr", "emr-serverless", "glue", "kms", "lakeformation", "logs", "neptune", "opensearch", "opensearchserverless", "quicksight", "rds", "rds-data", "redshift", "redshift-data", "s3", "secretsmanager", "ssm", "sts", "timestream-query", "timestream-write"] }
doc8 = "^1.0"
mypy = "^1.16"
pylint = "^3.3"
ruff = "^0.14.1"

# Test
moto = "^5.1"
openpyxl = "^3.0"
pyparsing = "^3.2.3"
pytest = "^8.4.1"
pytest-mock = "^3.14.1"
pytest-cov = "^7.0"
pytest-rerunfailures = "^16.0"
pytest-timeout = "^2.4.0"
pytest-xdist = "^3.8.0"
respx = "^0.22.0"
tox = "^4.30.3"


[build-system]
requires = ["poetry-core>=2.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.ruff]
exclude = [
    ".eggs",
    ".git",
    ".mypy_cache",
    ".ruff_cache",
    ".tox",
    ".venv",
    "__pypackages__",
    "_build",
    "build",
    "dist",
    "venv",
]

[tool.ruff.lint]
select = ["D", "E", "F", "I", "PL", "RUF100", "W"]
ignore = ["E501", "PLR2004", "PLR0911", "PLR0912", "PLR0913", "PLR0915"]
fixable = ["ALL"]

[tool.ruff.lint.per-file-ignores]
"docs/*" = ["D"]
"test_infra/*" = ["D"]
"tests/*" = ["PL", "D"]
"tutorials/*" = ["D", "E402", "F401", "F811", "F821"]

[tool.ruff.lint.pydocstyle]
convention = "numpy"

[tool.mypy]
python_version = "3.9"
strict = true
ignore_missing_imports = true
warn_unused_ignores = true

[tool.pytest.ini_options]
log_cli = false
filterwarnings = "ignore::DeprecationWarning"
addopts = "--log-cli-format \"[%(name)s][%(funcName)s] %(message)s\" --verbose --capture=sys"
markers = [
    "distributed: tests againsts methods with distributed functionality",
]

[tool.coverage.run]
branch = true

[tool.coverage.report]
show_missing = true

[tool.bandit]
exclude_dirs = ["tests"]

[tool.pylint.main]
jobs = 0
fail-under = 9

[tool.pylint.messages_control]
disable = "all"
enable = ["R0911", "R0912", "R0913", "R0915"]
