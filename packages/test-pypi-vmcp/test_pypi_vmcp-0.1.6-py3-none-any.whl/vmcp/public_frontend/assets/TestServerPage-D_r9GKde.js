import{j as e}from"./ui-DNQDtwue.js";import{r as v,f as ne}from"./vendor-HYqqWE7B.js";import{e as oe,f as X,n as $,s as P,C as _,u as le,B as R,S as O,M as K,r as G,I as Q}from"./index-CIKZHYu_.js";import{C as k,a as V}from"./card-DWrRA40y.js";import{B as Y}from"./badge-B3GQfgeA.js";import{C as M}from"./chevron-down-DBexedX7.js";import{A as ce}from"./arrow-left-CpOOR2_n.js";import{T as A}from"./test-tube-TeP4eT1L.js";import{R as W}from"./refresh-cw-Wqq_BhAe.js";import{P as ie}from"./play-DXT6oFWs.js";const Z=v.createContext(void 0);function de({children:g}){const{isAuthenticated:x,user:j}=oe(),{error:l}=X(),[n,m]=v.useState({serverName:null,serverId:null,tools:[],resources:[],prompts:[],testResults:{},loading:{server:!1,tools:!1,resources:!1,prompts:!1},loadedTabs:new Set,error:null}),u=v.useRef(new Set),b=v.useCallback(async o=>{if(!(!x||!j)&&!u.current.has("server"))try{u.current.add("server"),m(i=>({...i,serverId:o,loading:{...i.loading,server:!0},error:null})),m(i=>({...i,serverId:o,loading:{...i.loading,server:!1}}))}catch(i){console.error("Error loading server:",i);const c=i instanceof Error?i.message:"Failed to load server";l(`Failed to load server: ${c}`),m(t=>({...t,loading:{...t.loading,server:!1},error:c}))}finally{u.current.delete("server")}},[x,j,l]),r=v.useCallback(async o=>{if(!(!x||!j||!n.serverId)&&!u.current.has(o))try{u.current.add(o),m(t=>({...t,loading:{...t.loading,[o]:!0},error:null}));const i=localStorage.getItem("access_token");if(!i)throw new Error("No access token available");let c=[];switch(o){case"tools":const t=await $.listMCPServerTools(n.serverId,i);if(!t.success)throw new Error(t.error||"Failed to load tools");c=(Array.isArray(t.data)?t.data:t.data?.tools||t.data?.data||[]).map(S=>({name:S.name,description:S.description,inputSchema:S.inputSchema||S.parameters,server:n.serverId}));break;case"resources":const d=await $.listMCPServerResources(n.serverId,i);if(!d.success)throw new Error(d.error||"Failed to load resources");c=(Array.isArray(d.data)?d.data:d.data?.resources||d.data?.data||[]).map(S=>({uri:S.uri,name:S.name,description:S.description,server:n.serverId}));break;case"prompts":const p=await $.listMCPServerPrompts(n.serverId,i);if(!p.success)throw new Error(p.error||"Failed to load prompts");const E=Array.isArray(p.data)?p.data:p.data?.prompts||p.data?.data||[];console.log("Raw prompts data:",E),c=E.map(S=>{const F={name:S.name,description:S.description,arguments:S.arguments||S.args,server:n.serverId};return console.log("Mapped prompt:",F),F});break}m(t=>({...t,[o]:c,loading:{...t.loading,[o]:!1},loadedTabs:new Set([...t.loadedTabs,o])}))}catch(i){console.error(`Error loading ${o}:`,i);const c=i instanceof Error?i.message:`Failed to load ${o}`;l(`Failed to load ${o}: ${c}`),m(t=>({...t,loading:{...t.loading,[o]:!1},error:c}))}finally{u.current.delete(o)}},[x,j,n.serverId,l]),h=v.useCallback(async(o,i)=>{if(!n.serverId)throw new Error("No server selected");try{const c=localStorage.getItem("access_token");if(!c)throw new Error("No access token available");const t=await $.callMCPTool({server_id:n.serverId,tool_name:o,arguments:i},c),y={success:t.success,result:t.data,error:t.error,timestamp:new Date().toISOString()};m(d=>({...d,testResults:{...d.testResults,[`tool_${o}`]:y}}))}catch(c){const t={success:!1,error:c instanceof Error?c.message:"Tool test failed",timestamp:new Date().toISOString()};m(y=>({...y,testResults:{...y.testResults,[`tool_${o}`]:t}}))}},[n.serverId]),N=v.useCallback(async o=>{if(!n.serverId)throw new Error("No server selected");try{const i=localStorage.getItem("access_token");if(!i)throw new Error("No access token available");const c=await $.getMCPResource({server_id:n.serverId,uri:o},i),t={success:c.success,result:c.data,error:c.error,timestamp:new Date().toISOString()};m(y=>({...y,testResults:{...y.testResults,[`resource_${o}`]:t}}))}catch(i){const c={success:!1,error:i instanceof Error?i.message:"Resource test failed",timestamp:new Date().toISOString()};m(t=>({...t,testResults:{...t.testResults,[`resource_${o}`]:c}}))}},[n.serverId]),w=v.useCallback(async(o,i)=>{if(!n.serverId)throw new Error("No server selected");try{const c=localStorage.getItem("access_token");if(!c)throw new Error("No access token available");const t=await $.getMCPPrompt({server_id:n.serverId,prompt_name:o,arguments:i},c),y={success:t.success,result:t.data,error:t.error,timestamp:new Date().toISOString()};m(d=>({...d,testResults:{...d.testResults,[`prompt_${o}`]:y}}))}catch(c){const t={success:!1,error:c instanceof Error?c.message:"Prompt test failed",timestamp:new Date().toISOString()};m(y=>({...y,testResults:{...y.testResults,[`prompt_${o}`]:t}}))}},[n.serverId]),C=v.useCallback(()=>{m(o=>({...o,testResults:{}}))},[]),T=v.useCallback(()=>{m(o=>({...o,error:null}))},[]),z={...n,loadServer:b,loadTabData:r,testTool:h,testResource:N,testPrompt:w,clearTestResults:C,clearError:T};return e.jsx(Z.Provider,{value:z,children:g})}function me(){const g=v.useContext(Z);if(g===void 0)throw new Error("useServerTest must be used within a ServerTestProvider");return g}function ue({data:g,defaultExpanded:x=!1,className:j="",maxDepth:l=3}){const[n,m]=v.useState(new Set),u=r=>{m(h=>{const N=new Set(h);return N.has(r)?N.delete(r):N.add(r),N})},b=(r,h,N=0)=>{if(r===null)return e.jsx("span",{className:"text-gray-500",children:"null"});if(r===void 0)return e.jsx("span",{className:"text-gray-500",children:"undefined"});if(typeof r=="string")return e.jsxs("span",{className:"text-green-600",children:['"',r,'"']});if(typeof r=="number")return e.jsx("span",{className:"text-blue-600",children:r});if(typeof r=="boolean")return e.jsx("span",{className:"text-purple-600",children:r.toString()});if(Array.isArray(r)){if(r.length===0)return e.jsx("span",{className:"text-gray-500",children:"[]"});const w=n.has(h)||x&&N<l;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(h),className:"flex items-center gap-1 text-gray-700 hover:text-gray-900",children:[w?e.jsx(M,{className:"h-3 w-3"}):e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{className:"text-gray-600",children:"["}),!w&&e.jsx("span",{className:"text-gray-500",children:"..."}),e.jsx("span",{className:"text-gray-600",children:"]"})]}),w&&e.jsx("div",{className:"ml-4 mt-1",children:r.map((C,T)=>e.jsxs("div",{className:"flex",children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[T,":"]}),b(C,`${h}[${T}]`,N+1)]},T))})]})}if(typeof r=="object"){const w=Object.keys(r);if(w.length===0)return e.jsx("span",{className:"text-gray-500",children:"{}"});const C=n.has(h)||x&&N<l;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(h),className:"flex items-center gap-1 text-gray-700 hover:text-gray-900",children:[C?e.jsx(M,{className:"h-3 w-3"}):e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{className:"text-gray-600",children:"{"}),!C&&e.jsx("span",{className:"text-gray-500",children:"..."}),e.jsx("span",{className:"text-gray-600",children:"}"})]}),C&&e.jsx("div",{className:"ml-4 mt-1",children:w.map(T=>e.jsxs("div",{className:"flex",children:[e.jsxs("span",{className:"text-blue-600 mr-2",children:['"',T,'":']}),b(r[T],`${h}.${T}`,N+1)]},T))})]})}return e.jsx("span",{className:"text-gray-700",children:String(r)})};return e.jsx("div",{className:P("font-mono text-sm",j),children:b(g,"root")})}function xe(){const g=ne(),x=le(),{success:j,error:l}=X(),n=g.id,m=g.name,{tools:u,resources:b,prompts:r,testResults:h,loading:N,loadedTabs:w,loadServer:C,loadTabData:T,testTool:z,testResource:o,testPrompt:i,clearTestResults:c}=me(),[t,y]=v.useState("tools"),[d,I]=v.useState({isOpen:!1,tool:null,formData:{},testing:!1}),[p,E]=v.useState({isOpen:!1,prompt:null,formData:{},testing:!1});v.useEffect(()=>{n&&C(n)},[n,C]),v.useEffect(()=>{n&&!w.has(t)&&T(t)},[t,n,w,T]);const S=s=>{if(s.default!==void 0)return s.default;switch(s.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":return{};default:return""}},F=s=>{const a={};s.inputSchema?.properties&&Object.keys(s.inputSchema.properties).forEach(f=>{const D=s.inputSchema.properties[f];a[f]=S(D)}),I({isOpen:!0,tool:s,formData:a,testing:!1})},L=()=>{I({isOpen:!1,tool:null,formData:{},testing:!1})},B=(s,a)=>{I(f=>({...f,formData:{...f.formData,[s]:a}}))},ee=async()=>{if(d.tool)try{I(s=>({...s,testing:!0})),await z(d.tool.name,d.formData),j(`Tool "${d.tool.name}" executed successfully`),L()}catch(s){l(`Tool execution failed: ${s instanceof Error?s.message:"Unknown error"}`)}finally{I(s=>({...s,testing:!1}))}},se=s=>{console.log("Opening prompt modal for:",s.name),console.log("Prompt arguments:",s.arguments);const a={},f=Array.isArray(s.arguments)?s.arguments:s.arguments?.arguments&&Array.isArray(s.arguments.arguments)?s.arguments.arguments:[];f.length>0&&f.forEach(D=>{const H=typeof D=="object"?D.name:D,U=typeof D=="object"&&D.default!==void 0?D.default:"";a[H]=U,console.log("Added argument:",H,"with default:",U)}),console.log("Initial form data:",a),console.log("Setting prompt modal with:",{isOpen:!0,prompt:s,formData:a,testing:!1}),E({isOpen:!0,prompt:s,formData:a,testing:!1})},J=()=>{E({isOpen:!1,prompt:null,formData:{},testing:!1})},q=(s,a)=>{E(f=>({...f,formData:{...f.formData,[s]:a}}))},te=async()=>{if(p.prompt)try{E(s=>({...s,testing:!0})),await i(p.prompt.name,p.formData),j(`Prompt "${p.prompt.name}" executed successfully`),J()}catch(s){l(`Prompt execution failed: ${s instanceof Error?s.message:"Unknown error"}`)}finally{E(s=>({...s,testing:!1}))}},re=async s=>{try{await o(s.uri),j(`Resource "${s.uri}" read successfully`)}catch(a){l(`Failed to read resource: ${a instanceof Error?a.message:"Unknown error"}`)}},ae=s=>{y(s),c()};return N.server?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading server..."})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"h-screen overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{onClick:()=>x.push("/servers"),variant:"outline",children:e.jsx(ce,{className:"h-4 w-4 mr-2"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground mb-2",children:["Test Interface: ",m]}),e.jsx("p",{className:"text-muted-foreground",children:"Test tools, resources, and prompts for this MCP server"})]})]})})}),e.jsx("div",{className:"border-b border-border mb-8",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:["tools","resources","prompts"].map(s=>e.jsxs("button",{onClick:()=>ae(s),className:`py-4 px-1 border-b-2 font-medium text-sm capitalize transition-colors ${t===s?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:[s==="tools"&&e.jsx(A,{className:"inline mr-2 h-4 w-4"}),s==="resources"&&e.jsx(O,{className:"inline mr-2 h-4 w-4"}),s==="prompts"&&e.jsx(O,{className:"inline mr-2 h-4 w-4"}),s]},s))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{className:"p-6 max-h-[50vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-lg font-semibold text-foreground mb-4",children:["Available ",t.charAt(0).toUpperCase()+t.slice(1)]}),N[t]?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):e.jsxs("div",{className:"space-y-3",children:[t==="tools"&&e.jsx(he,{tools:u,onTest:F,testResults:h}),t==="resources"&&e.jsx(pe,{resources:b,onTest:re,testResults:h}),t==="prompts"&&e.jsx(fe,{prompts:r,onTest:se,testResults:h})]})]}),e.jsxs(k,{className:"p-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Test Results"}),Object.keys(h).length>0&&e.jsx(R,{onClick:c,variant:"outline",size:"sm",children:"Clear All"})]}),Object.keys(h).length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No test results yet"}),e.jsx("p",{className:"text-sm",children:"Run a test to see results here"})]}):e.jsx("div",{className:"space-y-4",children:Object.entries(h).map(([s,a])=>e.jsx(ge,{resultKey:s,result:a},s))})]})]})]})}),e.jsx(K,{isOpen:d.isOpen,onClose:L,title:`Test Tool: ${d.tool?.name||""}`,size:"lg",children:e.jsx("div",{className:"space-y-4 px-6 pt-6 pb-6 bg-background",children:d.tool&&e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"bg-card text-foreground",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("p",{className:"text-xs",children:[e.jsx("strong",{children:"Description:"})," ",d.tool.description||"No description available"]}),d.tool.inputSchema&&e.jsxs("p",{className:"text-xs mt-2",children:[e.jsx("strong",{children:"Input Schema:"})," ",JSON.stringify(d.tool.inputSchema,null,2)]})]})}),e.jsxs("div",{className:"space-y-4",children:[d.tool.inputSchema?.properties&&Object.entries(d.tool.inputSchema.properties).map(([s,a])=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s," ",a.required&&e.jsx("span",{className:"text-destructive",children:"*"})]}),a.type==="string"&&a.format==="multiline"?e.jsx(G,{value:d.formData[s]||"",onChange:f=>B(s,f.target.value),placeholder:a.description||`Enter ${s}`,rows:3}):a.type==="boolean"?e.jsxs("select",{value:d.formData[s]||"",onChange:f=>B(s,f.target.value==="true"),className:"bg-background border-border text-foreground rounded px-3 py-2 w-full",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]}):e.jsx(Q,{type:a.type==="number"?"number":"text",value:d.formData[s]||"",onChange:f=>B(s,a.type==="number"?Number(f.target.value):f.target.value),placeholder:a.description||`Enter ${s}`}),a.description&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:a.description})]},s)),e.jsxs("div",{className:"flex gap-4 pt-6 pb-2",children:[e.jsx(R,{onClick:L,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(R,{onClick:ee,disabled:d.testing,className:"flex-1",children:d.testing?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 animate-spin mr-2"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Test Tool"]})})]})]})]})})}),e.jsx(K,{isOpen:p.isOpen,onClose:J,title:`Test Prompt: ${p.prompt?.name||""}`,size:"lg",children:e.jsx("div",{className:"space-y-4 px-6 pt-6 pb-6",children:p.prompt&&e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"bg-purple-500/5 border-purple-500/20",children:e.jsxs(V,{className:"p-4",children:[e.jsxs("p",{className:"text-xs",children:[e.jsx("strong",{children:"Description:"})," ",p.prompt.description||"No description available"]}),p.prompt.arguments&&e.jsxs("p",{className:"text-xs",children:[e.jsx("strong",{children:"Arguments:"})," ",JSON.stringify(p.prompt.arguments,null,2)]})]})}),e.jsxs("div",{className:"space-y-4",children:[p.prompt.arguments?.properties&&Object.entries(p.prompt.arguments.properties).map(([s,a])=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s," ",a.required&&e.jsx("span",{className:"text-destructive",children:"*"})]}),a.type==="string"&&a.format==="multiline"?e.jsx(G,{value:p.formData[s]||"",onChange:f=>q(s,f.target.value),placeholder:a.description||`Enter ${s}`,rows:3}):e.jsx(Q,{type:a.type==="number"?"number":"text",value:p.formData[s]||"",onChange:f=>q(s,a.type==="number"?Number(f.target.value):f.target.value),placeholder:a.description||`Enter ${s}`}),a.description&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:a.description})]},s)),e.jsxs("div",{className:"flex gap-4 pt-6 pb-2",children:[e.jsx(R,{onClick:J,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(R,{onClick:te,disabled:p.testing,className:"flex-1",children:p.testing?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 animate-spin mr-2"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Test Prompt"]})})]})]})]})})})]})}function he({tools:g,onTest:x,testResults:j}){const[l,n]=v.useState(new Set),m=u=>{n(b=>{const r=new Set(b);return r.has(u)?r.delete(u):r.add(u),r})};return g.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(A,{className:"h-8 w-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No tools available"})]}):e.jsx("div",{className:"space-y-3",children:g.map(u=>{const b=j[`tool_${u.name}`],r=u.inputSchema?.properties&&Object.keys(u.inputSchema.properties).length>0,h=l.has(u.name);return e.jsx("div",{className:"border border-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground",children:u.name}),u.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u.description}),r&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{variant:"secondary",className:"text-xs",children:"Has Parameters"}),e.jsx("button",{onClick:()=>m(u.name),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3"}),"Hide Schema"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-3 w-3"}),"Show Schema"]})})]}),h&&e.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[e.jsx("div",{className:"text-xs font-medium text-foreground mb-1",children:"Input Schema:"}),e.jsx("pre",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:JSON.stringify(u.inputSchema,null,2)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsx("div",{className:P("h-2 w-2 rounded-full",b.success?"bg-green-500":"bg-red-500")}),e.jsxs(R,{size:"sm",onClick:()=>x(u),children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),"Test"]})]})]})},u.name)})})}function pe({resources:g,onTest:x,testResults:j}){return g.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(O,{className:"h-8 w-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No resources available"})]}):e.jsx("div",{className:"space-y-3",children:g.map((l,n)=>{const m=j[`resource_${l.uri}`];return e.jsx("div",{className:"border border-border rounded-lg p-4 hover:bg-secondary/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground font-mono text-sm",children:l.uri}),l.name&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsx("div",{className:P("h-2 w-2 rounded-full",m.success?"bg-green-500":"bg-red-500")}),e.jsxs(R,{size:"sm",onClick:()=>x(l),children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"View"]})]})]})},l.uri||n)})})}function fe({prompts:g,onTest:x,testResults:j}){return g.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(O,{className:"h-8 w-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No prompts available"})]}):e.jsx("div",{className:"space-y-3",children:g.map((l,n)=>{const m=j[`prompt_${l.name}`];return e.jsx("div",{className:"border border-border rounded-lg p-4 hover:bg-secondary/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsx("div",{className:P("h-2 w-2 rounded-full",m.success?"bg-green-500":"bg-red-500")}),e.jsxs(R,{size:"sm",onClick:()=>x(l),children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Test"]})]})]})},l.name||`prompt-${n}`)})})}function ge({resultKey:g,result:x}){const[j,l]=v.useState(!1),n=r=>{const h=r.split("_"),N=h[0],w=h.slice(1).join("_");switch(N){case"tool":return`Tool: ${w.replace(/_/g," ")}`;case"resource":return`Resource: ${w}`;case"prompt":return`Prompt: ${w.replace(/_/g," ")}`;default:return r.replace(/_/g," ")}},m=r=>typeof r=="string"?r:typeof r=="object"?JSON.stringify(r,null,2):String(r),u=r=>{const h=m(r),N=200;return h.length>N?h.substring(0,N)+"...":h},b=r=>m(r).length>200;return e.jsxs(k,{className:"overflow-hidden",children:[e.jsxs("div",{className:P("flex items-center justify-between p-3 border-b",x.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:P("h-2 w-2 rounded-full",x.success?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:n(g)}),e.jsx(Y,{variant:x.success?"default":"destructive",className:"text-xs",children:x.success?"Success":"Error"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.timestamp).toLocaleString()})]}),e.jsx(V,{className:"p-3",children:x.success?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-foreground",children:"Result:"}),b(x.result)&&e.jsx("button",{onClick:()=>l(!j),className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80",children:j?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-3 w-3"}),"Show more"]})})]}),e.jsx("div",{className:"bg-muted rounded p-3 overflow-hidden",children:j||!b(x.result)?e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(ue,{data:x.result,defaultExpanded:!0,className:"text-xs"})}):e.jsxs("div",{className:"text-xs text-foreground",children:[e.jsx("div",{className:"whitespace-pre-wrap",children:u(x.result)}),b(x.result)&&e.jsx("div",{className:"mt-2 text-primary cursor-pointer",onClick:()=>l(!0),children:"Click to view full content"})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-xs font-medium text-destructive",children:"Error:"}),e.jsx("div",{className:"bg-destructive/10 border border-destructive/30 rounded p-3",children:e.jsx("div",{className:"text-xs text-destructive whitespace-pre-wrap",children:x.error})})]})})]})}function Ee(){return e.jsx(de,{children:e.jsx(xe,{})})}export{Ee as default};
//# sourceMappingURL=TestServerPage-D_r9GKde.js.map
