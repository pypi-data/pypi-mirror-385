{"version":3,"file":"OAuthCallbackMCPPage-BHdM5-U0.js","sources":["../../src/pages/OAuthCallbackMCPPage.tsx"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useRouter } from '@/hooks/useRouter';\n// Card components - inline definitions to avoid import issues\nconst Card = ({ className, children, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={`rounded-lg border bg-white/10 backdrop-blur-lg border-white/20 shadow-sm ${className || ''}`} {...props}>\n    {children}\n  </div>\n);\n\nconst CardHeader = ({ className, children, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={`flex flex-col space-y-1.5 p-6 ${className || ''}`} {...props}>\n    {children}\n  </div>\n);\n\nconst CardTitle = ({ className, children, ...props }: React.HTMLAttributes<HTMLHeadingElement>) => (\n  <h3 className={`text-2xl font-semibold leading-none tracking-tight text-white ${className || ''}`} {...props}>\n    {children}\n  </h3>\n);\n\nconst CardDescription = ({ className, children, ...props }: React.HTMLAttributes<HTMLParagraphElement>) => (\n  <p className={`text-sm text-gray-300 ${className || ''}`} {...props}>\n    {children}\n  </p>\n);\n\nconst CardContent = ({ className, children, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={`p-6 pt-0 ${className || ''}`} {...props}>\n    {children}\n  </div>\n);\nimport { Button } from '@/components/ui/button';\nimport { CheckCircle, XCircle, Loader2 } from 'lucide-react';\n\nexport default function MCPOAuthCallbackPage() {\n  const router = useRouter();\n  const [searchParams] = useSearchParams();\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\n  const [message, setMessage] = useState('Processing OAuth callback...');\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    handleCallback();\n  }, []);\n\n  const handleCallback = async () => {\n    try {\n      // Get URL parameters\n      const code = searchParams.get('code');\n      const state = searchParams.get('state');\n      const error = searchParams.get('error');\n      const errorDescription = searchParams.get('error_description');\n\n      if (error) {\n        setStatus('error');\n        setError(errorDescription || error);\n        setMessage('OAuth authorization failed');\n        return;\n      }\n\n      if (!code || !state) {\n        setStatus('error');\n        setError('Missing required OAuth parameters');\n        setMessage('Invalid callback request');\n        return;\n      }\n\n      // The backend should handle the OAuth callback automatically\n      // We just need to show success and close the window\n      setStatus('success');\n      setMessage('Authorization completed successfully!');\n\n      // Close the window after a short delay\n      setTimeout(() => {\n        if (window.opener) {\n          // If this window was opened by another window, close it\n          window.close();\n        } else {\n          // Otherwise redirect to servers page\n          router.push('/servers');\n        }\n      }, 2000);\n\n    } catch (err) {\n      console.error('OAuth callback error:', err);\n      setStatus('error');\n      setError(err instanceof Error ? err.message : 'Unknown error occurred');\n      setMessage('Failed to process OAuth callback');\n    }\n  };\n\n  const handleClose = () => {\n    if (window.opener) {\n      window.close();\n    } else {\n      router.push('/servers');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-linear-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md bg-white/10 backdrop-blur-lg border-white/20\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center space-x-2\">\n            {status === 'success' && <CheckCircle className=\"h-6 w-6 text-green-400\" />}\n            {status === 'error' && <XCircle className=\"h-6 w-6 text-red-400\" />}\n            {status === 'loading' && <Loader2 className=\"h-6 w-6 animate-spin text-blue-400\" />}\n            <span>\n              {status === 'success' && 'Authorization Successful'}\n              {status === 'error' && 'Authorization Failed'}\n              {status === 'loading' && 'Processing Authorization'}\n            </span>\n          </CardTitle>\n          <CardDescription className=\"text-gray-300\">\n            {message}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {status === 'error' && error && (\n            <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-3\">\n              <p className=\"text-red-200 text-sm\">{error}</p>\n            </div>\n          )}\n\n          {status === 'success' && (\n            <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-3\">\n              <p className=\"text-green-200 text-sm\">\n                Your authorization has been completed successfully. This window will close automatically.\n              </p>\n            </div>\n          )}\n\n          <Button \n            onClick={handleClose}\n            className=\"w-full\"\n            variant={status === 'error' ? 'outline' : 'default'}\n          >\n            {status === 'error' ? 'Close' : 'Continue'}\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n} "],"names":["Card","className","children","props","jsx","CardHeader","CardTitle","CardDescription","CardContent","MCPOAuthCallbackPage","router","useRouter","searchParams","useSearchParams","status","setStatus","useState","message","setMessage","error","setError","useEffect","handleCallback","code","state","errorDescription","err","handleClose","jsxs","CheckCircle","XCircle","Loader2","Button"],"mappings":"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"}