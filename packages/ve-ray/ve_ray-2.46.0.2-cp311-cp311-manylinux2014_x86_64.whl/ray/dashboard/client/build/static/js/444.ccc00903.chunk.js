"use strict";(self.webpackChunkray_dashboard_client=self.webpackChunkray_dashboard_client||[]).push([[444],{82388:(e,t,a)=>{function n(e,t){var a,n,i;e.accDescr&&(null===(a=t.setAccDescription)||void 0===a||a.call(t,e.accDescr));e.accTitle&&(null===(n=t.setAccTitle)||void 0===n||n.call(t,e.accTitle));e.title&&(null===(i=t.setDiagramTitle)||void 0===i||i.call(t,e.title))}a.d(t,{A:()=>n}),(0,a(92408).eW)(n,"populateCommonDb")},93444:(e,t,a)=>{a.r(t),a.d(t,{diagram:()=>C});var n=a(82388),i=a(80170),c=a(53657),l=a(92408),o=a(51529),r=a(58111),s=l.vZ.pie,d={sections:new Map,showData:!1,config:s},p=d.sections,u=d.showData,g=structuredClone(s),h=(0,l.eW)((()=>structuredClone(g)),"getConfig"),f=(0,l.eW)((()=>{p=new Map,u=d.showData,(0,l.ZH)()}),"clear"),m=(0,l.eW)((e=>{let{label:t,value:a}=e;p.has(t)||(p.set(t,a),l.cM.debug("added new section: ".concat(t,", with value: ").concat(a)))}),"addSection"),x=(0,l.eW)((()=>p),"getSections"),w=(0,l.eW)((e=>{u=e}),"setShowData"),S=(0,l.eW)((()=>u),"getShowData"),v={getConfig:h,clear:f,setDiagramTitle:l.g2,getDiagramTitle:l.Kr,setAccTitle:l.GN,getAccTitle:l.eu,setAccDescription:l.U$,getAccDescription:l.Mx,addSection:m,getSections:x,setShowData:w,getShowData:S},y=(0,l.eW)(((e,t)=>{(0,n.A)(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)}),"populateDb"),D={parse:(0,l.eW)((async e=>{const t=await(0,o.Qc)("pie",e);l.cM.debug(t),y(t,v)}),"parse")},T=(0,l.eW)((e=>"\n  .pieCircle{\n    stroke: ".concat(e.pieStrokeColor,";\n    stroke-width : ").concat(e.pieStrokeWidth,";\n    opacity : ").concat(e.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(e.pieOuterStrokeColor,";\n    stroke-width: ").concat(e.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(e.pieTitleTextSize,";\n    fill: ").concat(e.pieTitleTextColor,";\n    font-family: ").concat(e.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(e.fontFamily,";\n    fill: ").concat(e.pieSectionTextColor,";\n    font-size:").concat(e.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(e.pieLegendTextColor,";\n    font-family: ").concat(e.fontFamily,";\n    font-size: ").concat(e.pieLegendTextSize,";\n  }\n")),"getStyles"),b=(0,l.eW)((e=>{const t=[...e.entries()].map((e=>({label:e[0],value:e[1]}))).sort(((e,t)=>t.value-e.value));return(0,r.ve8)().value((e=>e.value))(t)}),"createPieArcs"),C={parser:D,db:v,renderer:{draw:(0,l.eW)(((e,t,a,n)=>{var o;l.cM.debug("rendering pie chart\n"+e);const s=n.db,d=(0,l.nV)(),p=(0,i.Rb)(s.getConfig(),d.pie),u=18,g=450,h=(0,c.P)(t),f=h.append("g");f.attr("transform","translate(225,225)");const{themeVariables:m}=d;let[x]=(0,i.VG)(m.pieOuterStrokeWidth);null!==(o=x)&&void 0!==o||(x=2);const w=p.textPosition,S=Math.min(450,g)/2-40,v=(0,r.Nb1)().innerRadius(0).outerRadius(S),y=(0,r.Nb1)().innerRadius(S*w).outerRadius(S*w);f.append("circle").attr("cx",0).attr("cy",0).attr("r",S+x/2).attr("class","pieOuterCircle");const D=s.getSections(),T=b(D),C=[m.pie1,m.pie2,m.pie3,m.pie4,m.pie5,m.pie6,m.pie7,m.pie8,m.pie9,m.pie10,m.pie11,m.pie12],W=(0,r.PKp)(C);f.selectAll("mySlices").data(T).enter().append("path").attr("d",v).attr("fill",(e=>W(e.data.label))).attr("class","pieCircle");let k=0;D.forEach((e=>{k+=e})),f.selectAll("mySlices").data(T).enter().append("text").text((e=>(e.data.value/k*100).toFixed(0)+"%")).attr("transform",(e=>"translate("+y.centroid(e)+")")).style("text-anchor","middle").attr("class","slice"),f.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const A=f.selectAll(".legend").data(W.domain()).enter().append("g").attr("class","legend").attr("transform",((e,t)=>"translate(216,"+(22*t-22*W.domain().length/2)+")"));A.append("rect").attr("width",u).attr("height",u).style("fill",W).style("stroke",W),A.data(T).append("text").attr("x",22).attr("y",14).text((e=>{const{label:t,value:a}=e.data;return s.getShowData()?"".concat(t," [").concat(a,"]"):t}));const M=512+Math.max(...A.selectAll("text").nodes().map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0})));h.attr("viewBox","0 0 ".concat(M," ").concat(g)),(0,l.v2)(h,g,M,p.useMaxWidth)}),"draw")},styles:T}}}]);
//# sourceMappingURL=444.ccc00903.chunk.js.map