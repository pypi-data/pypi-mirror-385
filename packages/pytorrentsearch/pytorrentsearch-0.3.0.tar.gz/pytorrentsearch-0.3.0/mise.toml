[tools]
uv = "0.8.17"
ruff = "0.14.0"

[tasks.fmt]
description = "Format code using ruff"
run = "ruff format . && ruff check --fix ."

[tasks.lint]
description = "Run linters (ruff, mypy)"
run = """
ruff check . && \
ruff format --check . && \
uv run mypy pytorrentsearch/
"""

[tasks.test]
description = "Run tests with coverage"
run = "uv run pytest -v --cov=pytorrentsearch tests/"

[tasks.clean]
description = "Clean build artifacts and caches"
run = """
find . -type f -name '*.pyc' -delete && \
find . -type d -name '__pycache__' -exec rm -rf {} + 2>/dev/null || true && \
find . -type d -name '.pytest_cache' -exec rm -rf {} + 2>/dev/null || true && \
find . -type d -name '.mypy_cache' -exec rm -rf {} + 2>/dev/null || true && \
find . -type d -name '*.egg-info' -exec rm -rf {} + 2>/dev/null || true && \
rm -rf build dist htmlcov .coverage coverage.xml
"""

[tasks.build]
description = "Build the package"
run = "uv build"
