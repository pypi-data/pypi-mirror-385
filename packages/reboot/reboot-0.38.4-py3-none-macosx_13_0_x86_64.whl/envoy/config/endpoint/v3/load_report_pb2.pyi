"""
@generated by mypy-protobuf.  Do not edit manually!
isort:skip_file
"""

import builtins
import collections.abc
import envoy.config.core.v3.address_pb2
import envoy.config.core.v3.base_pb2
import google.protobuf.descriptor
import google.protobuf.duration_pb2
import google.protobuf.internal.containers
import google.protobuf.message
import google.protobuf.struct_pb2
import typing

DESCRIPTOR: google.protobuf.descriptor.FileDescriptor

@typing.final
class UpstreamLocalityStats(google.protobuf.message.Message):
    """[#protodoc-title: Load Report]

    These are stats Envoy reports to the management server at a frequency defined by
    :ref:`LoadStatsResponse.load_reporting_interval<envoy_v3_api_field_service.load_stats.v3.LoadStatsResponse.load_reporting_interval>`.
    Stats per upstream region/zone and optionally per subzone.
    [#next-free-field: 9]
    """

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    LOCALITY_FIELD_NUMBER: builtins.int
    TOTAL_SUCCESSFUL_REQUESTS_FIELD_NUMBER: builtins.int
    TOTAL_REQUESTS_IN_PROGRESS_FIELD_NUMBER: builtins.int
    TOTAL_ERROR_REQUESTS_FIELD_NUMBER: builtins.int
    TOTAL_ISSUED_REQUESTS_FIELD_NUMBER: builtins.int
    LOAD_METRIC_STATS_FIELD_NUMBER: builtins.int
    UPSTREAM_ENDPOINT_STATS_FIELD_NUMBER: builtins.int
    PRIORITY_FIELD_NUMBER: builtins.int
    total_successful_requests: builtins.int
    """The total number of requests successfully completed by the endpoints in the
    locality.
    """
    total_requests_in_progress: builtins.int
    """The total number of unfinished requests"""
    total_error_requests: builtins.int
    """The total number of requests that failed due to errors at the endpoint,
    aggregated over all endpoints in the locality.
    """
    total_issued_requests: builtins.int
    """The total number of requests that were issued by this Envoy since
    the last report. This information is aggregated over all the
    upstream endpoints in the locality.
    """
    priority: builtins.int
    """[#not-implemented-hide:] The priority of the endpoint group these metrics
    were collected from.
    """
    @property
    def locality(self) -> envoy.config.core.v3.base_pb2.Locality:
        """Name of zone, region and optionally endpoint group these metrics were
        collected from. Zone and region names could be empty if unknown.
        """

    @property
    def load_metric_stats(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___EndpointLoadMetricStats]:
        """Stats for multi-dimensional load balancing."""

    @property
    def upstream_endpoint_stats(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___UpstreamEndpointStats]:
        """Endpoint granularity stats information for this locality. This information
        is populated if the Server requests it by setting
        :ref:`LoadStatsResponse.report_endpoint_granularity<envoy_v3_api_field_service.load_stats.v3.LoadStatsResponse.report_endpoint_granularity>`.
        """

    def __init__(
        self,
        *,
        locality: envoy.config.core.v3.base_pb2.Locality | None = ...,
        total_successful_requests: builtins.int = ...,
        total_requests_in_progress: builtins.int = ...,
        total_error_requests: builtins.int = ...,
        total_issued_requests: builtins.int = ...,
        load_metric_stats: collections.abc.Iterable[global___EndpointLoadMetricStats] | None = ...,
        upstream_endpoint_stats: collections.abc.Iterable[global___UpstreamEndpointStats] | None = ...,
        priority: builtins.int = ...,
    ) -> None: ...
    def HasField(self, field_name: typing.Literal["locality", b"locality"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing.Literal["load_metric_stats", b"load_metric_stats", "locality", b"locality", "priority", b"priority", "total_error_requests", b"total_error_requests", "total_issued_requests", b"total_issued_requests", "total_requests_in_progress", b"total_requests_in_progress", "total_successful_requests", b"total_successful_requests", "upstream_endpoint_stats", b"upstream_endpoint_stats"]) -> None: ...

global___UpstreamLocalityStats = UpstreamLocalityStats

@typing.final
class UpstreamEndpointStats(google.protobuf.message.Message):
    """[#next-free-field: 8]"""

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    ADDRESS_FIELD_NUMBER: builtins.int
    METADATA_FIELD_NUMBER: builtins.int
    TOTAL_SUCCESSFUL_REQUESTS_FIELD_NUMBER: builtins.int
    TOTAL_REQUESTS_IN_PROGRESS_FIELD_NUMBER: builtins.int
    TOTAL_ERROR_REQUESTS_FIELD_NUMBER: builtins.int
    TOTAL_ISSUED_REQUESTS_FIELD_NUMBER: builtins.int
    LOAD_METRIC_STATS_FIELD_NUMBER: builtins.int
    total_successful_requests: builtins.int
    """The total number of requests successfully completed by the endpoints in the
    locality. These include non-5xx responses for HTTP, where errors
    originate at the client and the endpoint responded successfully. For gRPC,
    the grpc-status values are those not covered by total_error_requests below.
    """
    total_requests_in_progress: builtins.int
    """The total number of unfinished requests for this endpoint."""
    total_error_requests: builtins.int
    """The total number of requests that failed due to errors at the endpoint.
    For HTTP these are responses with 5xx status codes and for gRPC the
    grpc-status values:

      - DeadlineExceeded
      - Unimplemented
      - Internal
      - Unavailable
      - Unknown
      - DataLoss
    """
    total_issued_requests: builtins.int
    """The total number of requests that were issued to this endpoint
    since the last report. A single TCP connection, HTTP or gRPC
    request or stream is counted as one request.
    """
    @property
    def address(self) -> envoy.config.core.v3.address_pb2.Address:
        """Upstream host address."""

    @property
    def metadata(self) -> google.protobuf.struct_pb2.Struct:
        """Opaque and implementation dependent metadata of the
        endpoint. Envoy will pass this directly to the management server.
        """

    @property
    def load_metric_stats(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___EndpointLoadMetricStats]:
        """Stats for multi-dimensional load balancing."""

    def __init__(
        self,
        *,
        address: envoy.config.core.v3.address_pb2.Address | None = ...,
        metadata: google.protobuf.struct_pb2.Struct | None = ...,
        total_successful_requests: builtins.int = ...,
        total_requests_in_progress: builtins.int = ...,
        total_error_requests: builtins.int = ...,
        total_issued_requests: builtins.int = ...,
        load_metric_stats: collections.abc.Iterable[global___EndpointLoadMetricStats] | None = ...,
    ) -> None: ...
    def HasField(self, field_name: typing.Literal["address", b"address", "metadata", b"metadata"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing.Literal["address", b"address", "load_metric_stats", b"load_metric_stats", "metadata", b"metadata", "total_error_requests", b"total_error_requests", "total_issued_requests", b"total_issued_requests", "total_requests_in_progress", b"total_requests_in_progress", "total_successful_requests", b"total_successful_requests"]) -> None: ...

global___UpstreamEndpointStats = UpstreamEndpointStats

@typing.final
class EndpointLoadMetricStats(google.protobuf.message.Message):
    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    METRIC_NAME_FIELD_NUMBER: builtins.int
    NUM_REQUESTS_FINISHED_WITH_METRIC_FIELD_NUMBER: builtins.int
    TOTAL_METRIC_VALUE_FIELD_NUMBER: builtins.int
    metric_name: builtins.str
    """Name of the metric; may be empty."""
    num_requests_finished_with_metric: builtins.int
    """Number of calls that finished and included this metric."""
    total_metric_value: builtins.float
    """Sum of metric values across all calls that finished with this metric for
    load_reporting_interval.
    """
    def __init__(
        self,
        *,
        metric_name: builtins.str = ...,
        num_requests_finished_with_metric: builtins.int = ...,
        total_metric_value: builtins.float = ...,
    ) -> None: ...
    def ClearField(self, field_name: typing.Literal["metric_name", b"metric_name", "num_requests_finished_with_metric", b"num_requests_finished_with_metric", "total_metric_value", b"total_metric_value"]) -> None: ...

global___EndpointLoadMetricStats = EndpointLoadMetricStats

@typing.final
class ClusterStats(google.protobuf.message.Message):
    """Per cluster load stats. Envoy reports these stats a management server in a
    :ref:`LoadStatsRequest<envoy_v3_api_msg_service.load_stats.v3.LoadStatsRequest>`
    Next ID: 7
    [#next-free-field: 7]
    """

    DESCRIPTOR: google.protobuf.descriptor.Descriptor

    @typing.final
    class DroppedRequests(google.protobuf.message.Message):
        DESCRIPTOR: google.protobuf.descriptor.Descriptor

        CATEGORY_FIELD_NUMBER: builtins.int
        DROPPED_COUNT_FIELD_NUMBER: builtins.int
        category: builtins.str
        """Identifier for the policy specifying the drop."""
        dropped_count: builtins.int
        """Total number of deliberately dropped requests for the category."""
        def __init__(
            self,
            *,
            category: builtins.str = ...,
            dropped_count: builtins.int = ...,
        ) -> None: ...
        def ClearField(self, field_name: typing.Literal["category", b"category", "dropped_count", b"dropped_count"]) -> None: ...

    CLUSTER_NAME_FIELD_NUMBER: builtins.int
    CLUSTER_SERVICE_NAME_FIELD_NUMBER: builtins.int
    UPSTREAM_LOCALITY_STATS_FIELD_NUMBER: builtins.int
    TOTAL_DROPPED_REQUESTS_FIELD_NUMBER: builtins.int
    DROPPED_REQUESTS_FIELD_NUMBER: builtins.int
    LOAD_REPORT_INTERVAL_FIELD_NUMBER: builtins.int
    cluster_name: builtins.str
    """The name of the cluster."""
    cluster_service_name: builtins.str
    """The eds_cluster_config service_name of the cluster.
    It's possible that two clusters send the same service_name to EDS,
    in that case, the management server is supposed to do aggregation on the load reports.
    """
    total_dropped_requests: builtins.int
    """Cluster-level stats such as total_successful_requests may be computed by
    summing upstream_locality_stats. In addition, below there are additional
    cluster-wide stats.

    The total number of dropped requests. This covers requests
    deliberately dropped by the drop_overload policy and circuit breaking.
    """
    @property
    def upstream_locality_stats(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___UpstreamLocalityStats]:
        """Need at least one."""

    @property
    def dropped_requests(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ClusterStats.DroppedRequests]:
        """Information about deliberately dropped requests for each category specified
        in the DropOverload policy.
        """

    @property
    def load_report_interval(self) -> google.protobuf.duration_pb2.Duration:
        """Period over which the actual load report occurred. This will be guaranteed to include every
        request reported. Due to system load and delays between the ``LoadStatsRequest`` sent from Envoy
        and the ``LoadStatsResponse`` message sent from the management server, this may be longer than
        the requested load reporting interval in the ``LoadStatsResponse``.
        """

    def __init__(
        self,
        *,
        cluster_name: builtins.str = ...,
        cluster_service_name: builtins.str = ...,
        upstream_locality_stats: collections.abc.Iterable[global___UpstreamLocalityStats] | None = ...,
        total_dropped_requests: builtins.int = ...,
        dropped_requests: collections.abc.Iterable[global___ClusterStats.DroppedRequests] | None = ...,
        load_report_interval: google.protobuf.duration_pb2.Duration | None = ...,
    ) -> None: ...
    def HasField(self, field_name: typing.Literal["load_report_interval", b"load_report_interval"]) -> builtins.bool: ...
    def ClearField(self, field_name: typing.Literal["cluster_name", b"cluster_name", "cluster_service_name", b"cluster_service_name", "dropped_requests", b"dropped_requests", "load_report_interval", b"load_report_interval", "total_dropped_requests", b"total_dropped_requests", "upstream_locality_stats", b"upstream_locality_stats"]) -> None: ...

global___ClusterStats = ClusterStats
