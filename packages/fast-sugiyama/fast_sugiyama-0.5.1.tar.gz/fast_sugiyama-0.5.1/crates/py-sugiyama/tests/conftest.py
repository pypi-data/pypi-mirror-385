import random

import networkx as nx
import pytest


def pytest_addoption(parser):
    parser.addoption(
        "--save-output",
        action="store_true",
        default=False,
        help="write output examples to ./misc",
    )


@pytest.fixture(scope="session")
def multi_graph():
    g = nx.DiGraph()
    g.add_edges_from(edges())
    return g


def edges():
    def _random_graphs():  # pragma: no cover
        state = random.getstate()
        seed = 42
        random.seed(seed)

        edges = []
        for i in range(40):
            if i == 0:
                n = 55
            elif i <= 3:
                n = int(random.uniform(20, 45))
            elif i <= 10:
                n = int(random.uniform(12, 18))
            else:
                n = int(random.uniform(2, 12))

            _g = nx.gn_graph(n=n, create_using=nx.DiGraph)

            if n > 20:
                depth = nx.dag_longest_path_length(_g)
                while depth < 10:
                    _g = nx.gn_graph(n=n, create_using=nx.DiGraph)
                    depth = nx.dag_longest_path_length(_g)

            edge_list = [(s + i * 100, t + i * 100) for s, t in _g.edges()]

            if n < 40 and random.uniform(0, 1) > 0.8:
                edge_list = [(t, s) for s, t in edge_list]

            edges.extend(edge_list)

        random.setstate(state)
        return edges

    return [  # _edges = _random_graphs()
        (1, 0),
        (2, 1),
        (3, 2),
        (4, 3),
        (5, 4),
        (6, 5),
        (7, 1),
        (8, 1),
        (9, 5),
        (10, 1),
        (11, 2),
        (12, 3),
        (13, 3),
        (14, 6),
        (15, 10),
        (16, 6),
        (17, 8),
        (18, 1),
        (19, 5),
        (20, 1),
        (21, 16),
        (22, 9),
        (23, 5),
        (24, 3),
        (25, 1),
        (26, 22),
        (27, 11),
        (28, 6),
        (29, 21),
        (30, 29),
        (31, 11),
        (32, 29),
        (33, 4),
        (34, 5),
        (35, 9),
        (36, 21),
        (37, 1),
        (38, 9),
        (39, 13),
        (40, 1),
        (41, 6),
        (42, 3),
        (43, 3),
        (44, 6),
        (45, 6),
        (46, 3),
        (47, 3),
        (48, 3),
        (49, 4),
        (50, 35),
        (51, 13),
        (52, 18),
        (53, 19),
        (54, 1),
        (101, 100),
        (102, 101),
        (103, 102),
        (104, 102),
        (105, 102),
        (106, 104),
        (107, 104),
        (108, 105),
        (109, 107),
        (110, 100),
        (111, 102),
        (112, 104),
        (113, 107),
        (114, 107),
        (115, 103),
        (116, 102),
        (117, 108),
        (118, 113),
        (119, 106),
        (120, 119),
        (121, 101),
        (122, 102),
        (123, 120),
        (124, 110),
        (125, 113),
        (126, 116),
        (127, 110),
        (128, 123),
        (129, 113),
        (130, 113),
        (131, 103),
        (132, 104),
        (133, 119),
        (134, 106),
        (135, 102),
        (136, 128),
        (137, 136),
        (138, 125),
        (139, 109),
        (201, 200),
        (202, 201),
        (203, 201),
        (204, 201),
        (205, 204),
        (206, 205),
        (207, 206),
        (208, 205),
        (209, 201),
        (210, 205),
        (211, 207),
        (212, 207),
        (213, 201),
        (214, 202),
        (215, 200),
        (216, 201),
        (217, 201),
        (218, 212),
        (219, 218),
        (220, 205),
        (221, 208),
        (222, 201),
        (223, 208),
        (224, 207),
        (225, 201),
        (226, 208),
        (227, 219),
        (228, 201),
        (229, 207),
        (230, 219),
        (231, 200),
        (232, 201),
        (233, 205),
        (234, 230),
        (235, 234),
        (236, 223),
        (301, 300),
        (302, 301),
        (303, 302),
        (304, 301),
        (305, 303),
        (306, 303),
        (307, 306),
        (308, 307),
        (309, 308),
        (310, 308),
        (311, 309),
        (312, 311),
        (313, 312),
        (314, 307),
        (315, 306),
        (316, 307),
        (317, 310),
        (318, 313),
        (319, 309),
        (320, 314),
        (401, 400),
        (402, 401),
        (403, 402),
        (404, 400),
        (405, 401),
        (406, 400),
        (407, 402),
        (408, 400),
        (409, 400),
        (410, 405),
        (411, 410),
        (412, 400),
        (413, 402),
        (414, 401),
        (415, 410),
        (416, 414),
        (500, 501),
        (500, 505),
        (500, 511),
        (501, 502),
        (501, 504),
        (501, 508),
        (501, 512),
        (502, 503),
        (502, 506),
        (502, 507),
        (502, 509),
        (502, 510),
        (601, 600),
        (602, 600),
        (603, 602),
        (604, 600),
        (605, 602),
        (606, 602),
        (607, 602),
        (608, 605),
        (609, 606),
        (610, 608),
        (611, 609),
        (612, 610),
        (700, 701),
        (700, 704),
        (700, 705),
        (700, 706),
        (700, 709),
        (700, 710),
        (701, 702),
        (702, 703),
        (703, 708),
        (703, 712),
        (706, 707),
        (708, 711),
        (710, 713),
        (801, 800),
        (802, 800),
        (803, 800),
        (804, 803),
        (805, 803),
        (806, 800),
        (807, 800),
        (808, 800),
        (809, 803),
        (810, 800),
        (811, 800),
        (812, 808),
        (900, 901),
        (900, 902),
        (900, 903),
        (900, 904),
        (900, 906),
        (900, 909),
        (901, 910),
        (901, 912),
        (902, 907),
        (904, 905),
        (904, 908),
        (904, 913),
        (906, 911),
        (1001, 1000),
        (1002, 1001),
        (1003, 1000),
        (1004, 1001),
        (1005, 1004),
        (1006, 1001),
        (1007, 1001),
        (1008, 1004),
        (1009, 1004),
        (1010, 1007),
        (1011, 1002),
        (1012, 1011),
        (1101, 1100),
        (1102, 1101),
        (1103, 1100),
        (1104, 1101),
        (1105, 1101),
        (1106, 1101),
        (1201, 1200),
        (1301, 1300),
        (1302, 1301),
        (1303, 1302),
        (1304, 1302),
        (1305, 1303),
        (1306, 1302),
        (1307, 1305),
        (1308, 1301),
        (1309, 1307),
        (1310, 1301),
        (1401, 1400),
        (1402, 1401),
        (1501, 1500),
        (1502, 1500),
        (1503, 1502),
        (1504, 1503),
        (1505, 1503),
        (1506, 1503),
        (1601, 1600),
        (1602, 1600),
        (1603, 1600),
        (1604, 1602),
        (1701, 1700),
        (1801, 1800),
        (1802, 1800),
        (1803, 1800),
        (1804, 1800),
        (1805, 1800),
        (1806, 1804),
        (1807, 1805),
        (1808, 1805),
        (1809, 1806),
        (1810, 1800),
        (1901, 1900),
        (1902, 1900),
        (1903, 1900),
        (1904, 1903),
        (1905, 1900),
        (1906, 1900),
        (2001, 2000),
        (2002, 2000),
        (2003, 2001),
        (2004, 2000),
        (2005, 2000),
        (2006, 2000),
        (2100, 2101),
        (2100, 2102),
        (2201, 2200),
        (2202, 2200),
        (2203, 2200),
        (2204, 2202),
        (2205, 2203),
        (2206, 2202),
        (2301, 2300),
        (2400, 2401),
        (2401, 2402),
        (2401, 2404),
        (2402, 2403),
        (2402, 2406),
        (2403, 2405),
        (2405, 2408),
        (2406, 2407),
        (2501, 2500),
        (2502, 2501),
        (2503, 2501),
        (2504, 2501),
        (2600, 2601),
        (2601, 2602),
        (2701, 2700),
        (2702, 2701),
        (2703, 2702),
        (2704, 2700),
        (2705, 2701),
        (2801, 2800),
        (2802, 2801),
        (2803, 2800),
        (2804, 2800),
        (2805, 2804),
        (2806, 2801),
        (2807, 2801),
        (2901, 2900),
        (2902, 2901),
        (2903, 2901),
        (2904, 2902),
        (2905, 2901),
        (3001, 3000),
        (3002, 3001),
        (3003, 3000),
        (3004, 3003),
        (3005, 3001),
        (3006, 3001),
        (3007, 3006),
        (3008, 3003),
        (3009, 3000),
        (3010, 3003),
        (3101, 3100),
        (3102, 3101),
        (3103, 3101),
        (3201, 3200),
        (3301, 3300),
        (3302, 3301),
        (3303, 3301),
        (3304, 3302),
        (3401, 3400),
        (3402, 3400),
        (3403, 3402),
        (3404, 3401),
        (3405, 3401),
        (3406, 3401),
        (3407, 3401),
        (3408, 3401),
        (3501, 3500),
        (3502, 3500),
        (3503, 3502),
        (3504, 3502),
        (3505, 3502),
        (3506, 3500),
        (3507, 3503),
        (3508, 3501),
        (3509, 3500),
        (3600, 3601),
        (3600, 3602),
        (3600, 3603),
        (3600, 3604),
        (3600, 3605),
        (3600, 3606),
        (3602, 3607),
        (3602, 3608),
        (3604, 3609),
        (3700, 3701),
        (3701, 3702),
        (3800, 3801),
        (3800, 3807),
        (3801, 3802),
        (3801, 3803),
        (3801, 3806),
        (3802, 3804),
        (3802, 3805),
        (3805, 3809),
        (3807, 3808),
        (3808, 3810),
        (3901, 3900),
        (3902, 3901),
        (3903, 3900),
        (3904, 3902),
        (3905, 3903),
        (3906, 3901),
        (3907, 3905),
        (3908, 3904),
    ]
