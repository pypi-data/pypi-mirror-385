import{h as t}from"./html-void-elements-Co0z0ClG.js";import{s as e,f as n,h as a}from"./property-information-D734m1Kt.js";import{z as o}from"./zwitch-SYkMgdDi.js";import{s}from"./stringify-entities-DW2dhmok.js";import{c as r}from"./ccount-D181NsKZ.js";import{s as i}from"./comma-separated-tokens-ChzcSHHa.js";import{s as c}from"./space-separated-tokens-C97BfSlU.js";import{w as m}from"./hast-util-whitespace-DlJMGLAz.js";const l=/^>|^->|<!--|-->|--!>|<!-$/g,g=[">"],u=["<",">"];const p=d(1),f=d(-1),h=[];function d(t){return function(e,n,a){const o=e?e.children:h;let s=(n||0)+t,r=o[s];if(!a)for(;r&&m(r);)s+=t,r=o[s];return r}}const N={}.hasOwnProperty;function y(t){return function(e,n,a){return N.call(t,e.tagName)&&t[e.tagName](e,n,a)}}const b=y({body:function(t,e,n){const a=p(n,e);return!a||"comment"!==a.type},caption:v,colgroup:v,dd:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&("dt"===a.tagName||"dd"===a.tagName)},dt:function(t,e,n){const a=p(n,e);return Boolean(a&&"element"===a.type&&("dt"===a.tagName||"dd"===a.tagName))},head:v,html:function(t,e,n){const a=p(n,e);return!a||"comment"!==a.type},li:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&"li"===a.tagName},optgroup:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&"optgroup"===a.tagName},option:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&("option"===a.tagName||"optgroup"===a.tagName)},p:function(t,e,n){const a=p(n,e);return a?"element"===a.type&&("address"===a.tagName||"article"===a.tagName||"aside"===a.tagName||"blockquote"===a.tagName||"details"===a.tagName||"div"===a.tagName||"dl"===a.tagName||"fieldset"===a.tagName||"figcaption"===a.tagName||"figure"===a.tagName||"footer"===a.tagName||"form"===a.tagName||"h1"===a.tagName||"h2"===a.tagName||"h3"===a.tagName||"h4"===a.tagName||"h5"===a.tagName||"h6"===a.tagName||"header"===a.tagName||"hgroup"===a.tagName||"hr"===a.tagName||"main"===a.tagName||"menu"===a.tagName||"nav"===a.tagName||"ol"===a.tagName||"p"===a.tagName||"pre"===a.tagName||"section"===a.tagName||"table"===a.tagName||"ul"===a.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:w,rt:w,tbody:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&("tbody"===a.tagName||"tfoot"===a.tagName)},td:C,tfoot:function(t,e,n){return!p(n,e)},th:C,thead:function(t,e,n){const a=p(n,e);return Boolean(a&&"element"===a.type&&("tbody"===a.tagName||"tfoot"===a.tagName))},tr:function(t,e,n){const a=p(n,e);return!a||"element"===a.type&&"tr"===a.tagName}});function v(t,e,n){const a=p(n,e,!0);return!a||"comment"!==a.type&&!("text"===a.type&&m(a.value.charAt(0)))}function w(t,e,n){const a=p(n,e);return!a||"element"===a.type&&("rp"===a.tagName||"rt"===a.tagName)}function C(t,e,n){const a=p(n,e);return!a||"element"===a.type&&("td"===a.tagName||"th"===a.tagName)}const j=y({body:function(t){const e=p(t,-1,!0);return!(e&&("comment"===e.type||"text"===e.type&&m(e.value.charAt(0))||"element"===e.type&&("meta"===e.tagName||"link"===e.tagName||"script"===e.tagName||"style"===e.tagName||"template"===e.tagName)))},colgroup:function(t,e,n){const a=f(n,e),o=p(t,-1,!0);if(n&&a&&"element"===a.type&&"colgroup"===a.tagName&&b(a,n.children.indexOf(a),n))return!1;return Boolean(o&&"element"===o.type&&"col"===o.tagName)},head:function(t){const e=new Set;for(const a of t.children)if("element"===a.type&&("base"===a.tagName||"title"===a.tagName)){if(e.has(a.tagName))return!1;e.add(a.tagName)}const n=t.children[0];return!n||"element"===n.type},html:function(t){const e=p(t,-1);return!e||"comment"!==e.type},tbody:function(t,e,n){const a=f(n,e),o=p(t,-1);if(n&&a&&"element"===a.type&&("thead"===a.tagName||"tbody"===a.tagName)&&b(a,n.children.indexOf(a),n))return!1;return Boolean(o&&"element"===o.type&&"tr"===o.tagName)}});const E={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function S(t,e,a){const o=n(t.schema,e),m=t.settings.allowParseErrors&&"html"===t.schema.space?0:1,l=t.settings.allowDangerousCharacters?0:1;let g,u=t.quote;if(!o.overloadedBoolean||a!==o.attribute&&""!==a?!o.boolean&&!o.overloadedBoolean||"string"==typeof a&&a!==o.attribute&&""!==a||(a=Boolean(a)):a=!0,null==a||!1===a||"number"==typeof a&&Number.isNaN(a))return"";const p=s(o.attribute,Object.assign({},t.settings.characterReferences,{subset:E.name[m][l]}));return!0===a?p:(a=Array.isArray(a)?(o.commaSeparated?i:c)(a,{padLeft:!t.settings.tightCommaSeparatedLists}):String(a),t.settings.collapseEmptyAttributes&&!a?p:(t.settings.preferUnquoted&&(g=s(a,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:E.unquoted[m][l]}))),g!==a&&(t.settings.quoteSmart&&r(a,u)>r(a,t.alternative)&&(u=t.alternative),g=u+s(a,Object.assign({},t.settings.characterReferences,{subset:("'"===u?E.single:E.double)[m][l],attribute:!0}))+u),p+(g?"="+g:g)))}const A=["<","&"];function q(t,e,n,a){return!n||"element"!==n.type||"script"!==n.tagName&&"style"!==n.tagName?s(t.value,Object.assign({},a.settings.characterReferences,{subset:A})):t.value}const D=o("type",{invalid:function(t){throw new Error("Expected node, not `"+t+"`")},unknown:function(t){throw new Error("Cannot compile unknown node `"+t.type+"`")},handlers:{comment:function(t,e,n,a){return a.settings.bogusComments?"<?"+s(t.value,Object.assign({},a.settings.characterReferences,{subset:g}))+">":"\x3c!--"+t.value.replace(l,function(t){return s(t,Object.assign({},a.settings.characterReferences,{subset:u}))})+"--\x3e"},doctype:function(t,e,n,a){return"<!"+(a.settings.upperDoctype?"DOCTYPE":"doctype")+(a.settings.tightDoctype?"":" ")+"html>"},element:function(t,n,a,o){const s=o.schema,r="svg"!==s.space&&o.settings.omitOptionalTags;let i="svg"===s.space?o.settings.closeEmptyElements:o.settings.voids.includes(t.tagName.toLowerCase());const c=[];let m;"html"===s.space&&"svg"===t.tagName&&(o.schema=e);const l=function(t,e){const n=[];let a,o=-1;if(e)for(a in e)if(null!==e[a]&&void 0!==e[a]){const o=S(t,a,e[a]);o&&n.push(o)}for(;++o<n.length;){const e=t.settings.tightAttributes?n[o].charAt(n[o].length-1):void 0;o!==n.length-1&&'"'!==e&&"'"!==e&&(n[o]+=" ")}return n.join("")}(o,t.properties),g=o.all("html"===s.space&&"template"===t.tagName?t.content:t);return o.schema=s,g&&(i=!1),!l&&r&&j(t,n,a)||(c.push("<",t.tagName,l?" "+l:""),i&&("svg"===s.space||o.settings.closeSelfClosing)&&(m=l.charAt(l.length-1),(!o.settings.tightSelfClosing||"/"===m||m&&'"'!==m&&"'"!==m)&&c.push(" "),c.push("/")),c.push(">")),c.push(g),i||r&&b(t,n,a)||c.push("</"+t.tagName+">"),c.join("")},raw:function(t,e,n,a){return a.settings.allowDangerousHtml?t.value:q(t,0,n,a)},root:function(t,e,n,a){return a.all(t)},text:q}});const O={},x={},B=[];function R(n,o){const s=o||O,r=s.quote||'"',i='"'===r?"'":'"';if('"'!==r&&"'"!==r)throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:k,all:L,settings:{omitOptionalTags:s.omitOptionalTags||!1,allowParseErrors:s.allowParseErrors||!1,allowDangerousCharacters:s.allowDangerousCharacters||!1,quoteSmart:s.quoteSmart||!1,preferUnquoted:s.preferUnquoted||!1,tightAttributes:s.tightAttributes||!1,upperDoctype:s.upperDoctype||!1,tightDoctype:s.tightDoctype||!1,bogusComments:s.bogusComments||!1,tightCommaSeparatedLists:s.tightCommaSeparatedLists||!1,tightSelfClosing:s.tightSelfClosing||!1,collapseEmptyAttributes:s.collapseEmptyAttributes||!1,allowDangerousHtml:s.allowDangerousHtml||!1,voids:s.voids||t,characterReferences:s.characterReferences||x,closeSelfClosing:s.closeSelfClosing||!1,closeEmptyElements:s.closeEmptyElements||!1},schema:"svg"===s.space?e:a,quote:r,alternative:i}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function k(t,e,n){return D(t,e,n,this)}function L(t){const e=[],n=t&&t.children||B;let a=-1;for(;++a<n.length;)e[a]=this.one(n[a],a,t);return e.join("")}export{R as t};
