# Traefik Configuration Generated by GAL

http:
  routers:
    user_service_router_0:
      rule: 'PathPrefix(`/myapp.UserService`)'
      service: user_service_service
      middlewares:
        - user_service_transform

    order_service_router_0:
      rule: 'PathPrefix(`/myapp.OrderService`)'
      service: order_service_service
      middlewares:
        - order_service_transform

    notification_service_router_0:
      rule: 'PathPrefix(`/myapp.NotificationService`)'
      service: notification_service_service
      middlewares:
        - notification_service_transform

    product_service_router_0:
      rule: 'PathPrefix(`/api/products`)'
      service: product_service_service
      middlewares:
        - product_service_transform

    payment_service_router_0:
      rule: 'PathPrefix(`/api/payments`)'
      service: payment_service_service
      middlewares:
        - payment_service_transform

  services:
    user_service_service:
      loadBalancer:
        servers:
        - url: 'http://user-service:9090'

    order_service_service:
      loadBalancer:
        servers:
        - url: 'http://order-service:9091'

    notification_service_service:
      loadBalancer:
        servers:
        - url: 'http://notification-service:9092'

    product_service_service:
      loadBalancer:
        servers:
        - url: 'http://product-service:8080'

    payment_service_service:
      loadBalancer:
        servers:
        - url: 'http://payment-service:8081'

  middlewares:
    user_service_transform:
      plugin:
        user_service_transformer:
          defaults:
            role: 'user'
            age: '0'
            active: 'True'

    order_service_transform:
      plugin:
        order_service_transformer:
          defaults:
            status: 'pending'
            currency: 'USD'
            priority: '5'

    notification_service_transform:
      plugin:
        notification_service_transformer:
          defaults:
            channel: 'email'
            priority: 'medium'
            retry_enabled: 'True'
            max_retries: '3'

    product_service_transform:
      plugin:
        product_service_transformer:
          defaults:
            category: 'general'
            currency: 'USD'
            stock: '0'
            available: 'True'

    payment_service_transform:
      plugin:
        payment_service_transformer:
          defaults:
            status: 'pending'
            currency: 'USD'
            provider: 'stripe'
