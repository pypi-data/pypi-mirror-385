# Kong Declarative Configuration Generated by GAL
_format_version: '3.0'

services:
- name: user_service
  protocol: grpc
  host: user-service
  port: 9090
  routes:
  - name: user_service_route
    paths:
    - /myapp.UserService
  plugins:
  - name: request-transformer
    config:
      add:
        headers:
        - x-default-role: 'user'
        - x-default-age: '0'
        - x-default-active: 'True'

- name: order_service
  protocol: grpc
  host: order-service
  port: 9091
  routes:
  - name: order_service_route
    paths:
    - /myapp.OrderService
  plugins:
  - name: request-transformer
    config:
      add:
        headers:
        - x-default-status: 'pending'
        - x-default-currency: 'USD'
        - x-default-priority: '5'

- name: notification_service
  protocol: grpc
  host: notification-service
  port: 9092
  routes:
  - name: notification_service_route
    paths:
    - /myapp.NotificationService
  plugins:
  - name: request-transformer
    config:
      add:
        headers:
        - x-default-channel: 'email'
        - x-default-priority: 'medium'
        - x-default-retry_enabled: 'True'
        - x-default-max_retries: '3'

- name: product_service
  protocol: http
  host: product-service
  port: 8080
  routes:
  - name: product_service_route
    paths:
    - /api/products
    methods:
    - GET
    - POST
    - PUT
    - DELETE
  plugins:
  - name: request-transformer
    config:
      add:
        headers:
        - x-default-category: 'general'
        - x-default-currency: 'USD'
        - x-default-stock: '0'
        - x-default-available: 'True'

- name: payment_service
  protocol: http
  host: payment-service
  port: 8081
  routes:
  - name: payment_service_route
    paths:
    - /api/payments
    methods:
    - POST
  plugins:
  - name: request-transformer
    config:
      add:
        headers:
        - x-default-status: 'pending'
        - x-default-currency: 'USD'
        - x-default-provider: 'stripe'
