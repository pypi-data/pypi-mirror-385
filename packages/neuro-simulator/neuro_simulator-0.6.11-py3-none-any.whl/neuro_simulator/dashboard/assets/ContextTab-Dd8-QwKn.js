import{d as g,u as v,k as f,A as x,b as h,y,e as C,n as o,o as s,i as r,f as w,h as c,t as i,F as b,p as k,g as A,_ as V}from"./index-CxlwjfZg.js";const F={class:"d-flex align-center mb-4"},S={key:0,class:"context-prompt-view"},M={key:1,class:"context-conversation-view"},P=g({__name:"ContextTab",setup(B){const{t:d}=v(),t=f(!1),n=x(),l=h();async function p(){if(l.isConnected)if(t.value)try{const e=await l.sendAdminWsMessage("get_last_prompt");n.setAgentPrompt(e.prompt)}catch(e){console.error("Failed to get latest prompt:",e),n.setAgentPrompt(`${d("Failed to get prompt")}: ${e}`)}else try{await l.sendAdminWsMessage("get_agent_context")}catch(e){console.error("Failed to get context:",e)}}return y(t,p),p(),(e,m)=>{const u=C("v-switch");return s(),o("div",null,[r("div",F,[w(u,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=a=>t.value=a),label:c(d)("Context Mode"),color:"primary","hide-details":""},null,8,["modelValue","label"])]),t.value?(s(),o("div",S,[r("pre",null,i(c(n).agentPrompt),1)])):(s(),o("div",M,[(s(!0),o(b,null,k(c(n).agentHistory,(a,_)=>(s(),o("div",{key:_,class:"message-item"},[r("p",null,[r("strong",null,i(a.role)+":",1),A(" "+i(a.content),1)])]))),128))]))])}}}),T=V(P,[["__scopeId","data-v-aa938f2e"]]);export{T as default};
