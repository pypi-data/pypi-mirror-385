import{r as _,h as S,i as q,j as z,c as i,a as l,k as N,n as V,t as h,b as v,w as f,l as k,F as j,m as A,p as g,f as L,q as R,o as a,g as w,s as y,u as x,v as U,x as M}from"./index-z8FtxWqV.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"container"},G={class:"ledcontain"},H={class:"toolbar"},J={class:"infinite-list"},K=["onClick"],O={__name:"Dir",setup(Q){const $=L(),B=q(),r=_({}),t=_(""),C=()=>{},n=_(!1);let c=null;const p=async()=>{try{const e=await g.get(`http://${window.location.hostname}:8888/islive`);n.value=e.data.status}catch(e){console.error("获取状态失败:",e),n.value=!1}},u=e=>{const s=`${F}/getdirs/`+e;g.post(s,{cookie:localStorage.getItem("cookie")}).then(o=>{o.data.isdir?r.value=o.data.dirs:$.push({name:"file",query:{files:o.data.file,cdirs1:e}})}).catch(o=>{console.error("Error fetching data:",o)})};S(()=>{t.value=B.query.cdir||"",u(t.value),p(),c=setInterval(p,5e3)});const F=`${window.location.protocol}//${window.location.hostname}:8888`;z(()=>{c&&clearInterval(c)});const b=e=>{r.value[e]?t.value+=`${e}/`:t.value+=`${e}`,u(t.value)},D=()=>{const e=t.value.split("/").filter(Boolean);e.pop(),t.value=e.join("/")+(e.length?"/":""),u(t.value)};return(e,s)=>{const o=k("el-button"),m=k("el-icon"),E=R("infinite-scroll");return a(),i("div",T,[l("div",G,[l("div",{class:V(["led",n.value?"led-green":"led-red"])},null,2),l("h3",null,h(n.value?"nas在线":"nas离线"),1)]),l("div",H,[s[1]||(s[1]=l("h4",null,"目录",-1)),v(o,{type:"primary",onClick:D},{default:f(()=>s[0]||(s[0]=[w("上一级",-1)])),_:1,__:[0]})]),N((a(),i("ul",J,[(a(!0),i(j,null,A(r.value,(I,d)=>(a(),i("li",{key:d,class:"infinite-list-item",onClick:W=>b(d)},[I?(a(),y(m,{key:0,color:"#409EFF",size:"20"},{default:f(()=>[v(x(U))]),_:1})):(a(),y(m,{key:1,color:"#409EFF",size:"20"},{default:f(()=>[v(x(M))]),_:1})),w(" "+h(d),1)],8,K))),128))])),[[E,C]])])}}},Z=P(O,[["__scopeId","data-v-e1b47d25"]]);export{Z as default};
